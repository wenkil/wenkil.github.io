<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Langgraphå­¦ä¹ 4ï¼šæ­ä¸€ä¸ªwebæœç´¢agent</title>
    <link href="/2025/04/11/Langgraph%E5%AD%A6%E4%B9%A04%EF%BC%9A%E6%90%AD%E4%B8%80%E4%B8%AAweb%E6%90%9C%E7%B4%A2agent/"/>
    <url>/2025/04/11/Langgraph%E5%AD%A6%E4%B9%A04%EF%BC%9A%E6%90%AD%E4%B8%80%E4%B8%AAweb%E6%90%9C%E7%B4%A2agent/</url>
    
    <content type="html"><![CDATA[<p>åœ¨å‰é¢çš„Langgraphå­¦ä¹ æ–‡ç« ä¸­ï¼Œç®€å•æ­äº†ä¸€ä¸ªLanggraphçš„åŸºç¡€æµç¨‹å’Œå¦‚ä½•è®©LLMè°ƒç”¨å·¥å…·ã€‚æœ¬ç¯‡ç»§ç»­æ·±å…¥ï¼Œå°†ç»“åˆåŸºæœ¬chatbotæµç¨‹ï¼Œæ­å»ºä¸€ä¸ªèƒ½å¤Ÿè¿›è¡ŒWebæœç´¢çš„AIåŠ©æ‰‹ã€‚</p><h2 id="1-é›†æˆæœç´¢API"><a href="#1-é›†æˆæœç´¢API" class="headerlink" title="1. é›†æˆæœç´¢API"></a>1. é›†æˆæœç´¢API</h2><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæœç´¢å·¥å…·ã€‚å¯ä»¥ç›´æ¥ä½¿ç”¨Langchainæä¾›çš„Tavilyæœç´¢APIï¼Œå®ƒæ˜¯ä¸€ä¸ªé’ˆå¯¹AIä¼˜åŒ–çš„æœç´¢å¼•æ“ï¼Œä¸è¿‡å®ƒçš„å®˜æ–¹ä¸ªäººå…è´¹è´¦æˆ·æ¯ä¸ªæœˆåªèƒ½è°ƒç”¨1000æ¬¡ï¼Œè¿™é‡Œæˆ‘ä»¬å…ˆé€‰æ‹©å…è´¹çš„çš„DuckDuckGoæœç´¢ï¼š</p><div class="code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> langchain_community.tools.ddg_search.tool <span class="hljs-keyword">import</span> DuckDuckGoSearchResults<span class="hljs-keyword">from</span> langchain_core.tools <span class="hljs-keyword">import</span> tool<span class="hljs-meta">@tool</span><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">search</span>(<span class="hljs-params">query: <span class="hljs-built_in">str</span></span>):</span>    <span class="hljs-string">&quot;&quot;&quot;ç”¨äºæµè§ˆç½‘ç»œè¿›è¡Œæœç´¢ã€‚&quot;&quot;&quot;</span>    <span class="hljs-comment"># å¯é€‰çš„æœç´¢å·¥å…·: TavilySearchResults(max_results=3)</span>    search_tool = DuckDuckGoSearchResults(max_results=<span class="hljs-number">3</span>) <span class="hljs-comment">#è¿™ä¸ªé…ç½®æ ¹æ®éœ€æ±‚æ¥è®¾ç½® output_format=&quot;list&quot;</span>    <span class="hljs-keyword">return</span> search_tool.invoke(query)</code></pre></div><p>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨<code>DuckDuckGoSearchResults</code>ä½œä¸ºæœç´¢å¼•æ“ï¼Œå¹¶è®¾ç½®æœ€å¤§è¿”å›ç»“æœæ•°ä¸º3ï¼Œè¾“å‡ºæ ¼å¼ä¸ºåˆ—è¡¨ã€‚</p><h2 id="2-è‡ªå®šä¹‰æœç´¢å·¥å…·èŠ‚ç‚¹"><a href="#2-è‡ªå®šä¹‰æœç´¢å·¥å…·èŠ‚ç‚¹" class="headerlink" title="2. è‡ªå®šä¹‰æœç´¢å·¥å…·èŠ‚ç‚¹"></a>2. è‡ªå®šä¹‰æœç´¢å·¥å…·èŠ‚ç‚¹</h2><p>ä¸ç¬¬äºŒç¯‡æ–‡ç« ä¸åŒï¼Œè¿™æ¬¡ä¸ä½¿ç”¨Langgraphçš„ToolNodeï¼Œè€Œæ˜¯è‡ªå®šä¹‰ä¸€ä¸ªæ›´çµæ´»çš„æœç´¢èŠ‚ç‚¹ï¼š</p><div class="code-wrapper"><pre><code class="hljs python">tools_by_name = &#123;tool.name: tool <span class="hljs-keyword">for</span> tool <span class="hljs-keyword">in</span> tools&#125;<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">search_tool_node</span>(<span class="hljs-params">state: <span class="hljs-built_in">dict</span></span>):</span>    result = []    <span class="hljs-keyword">for</span> tool_call <span class="hljs-keyword">in</span> state[<span class="hljs-string">&quot;messages&quot;</span>][-<span class="hljs-number">1</span>].tool_calls:        tool = tools_by_name[tool_call[<span class="hljs-string">&quot;name&quot;</span>]]        observation = tool.invoke(tool_call[<span class="hljs-string">&quot;args&quot;</span>])        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;å·¥å…·æœç´¢ç»“æœçš„å®Œæ•´è¾“å‡º------&gt;&#x27;</span>,observation,<span class="hljs-string">&#x27;\n&#x27;</span>)        <span class="hljs-comment"># ç›´æ¥è½¬ä¸ºå­—ç¬¦ä¸²</span>        search_result = <span class="hljs-built_in">str</span>(observation)        result.append(ToolMessage(content=search_result, tool_call_id=tool_call[<span class="hljs-string">&quot;id&quot;</span>]))    <span class="hljs-keyword">return</span> &#123;<span class="hljs-string">&quot;messages&quot;</span>: result&#125;</code></pre></div><p>è¿™ä¸ªèŠ‚ç‚¹åšäº†å‡ ä»¶äº‹ï¼š</p><ol><li>ä»çŠ¶æ€ä¸­è·å–æœ€åä¸€æ¡æ¶ˆæ¯çš„å·¥å…·è°ƒç”¨ä¿¡æ¯</li><li>æ ¹æ®å·¥å…·åç§°æ‰¾åˆ°å¯¹åº”çš„å·¥å…·å‡½æ•°</li><li>æ‰§è¡Œå·¥å…·è°ƒç”¨å¹¶è·å–ç»“æœ</li><li><strong>å°†ç»“æœè½¬æ¢ä¸ºå­—ç¬¦ä¸²</strong>ï¼ˆè¿™ä¸€æ­¥æ¯”è¾ƒå…³é”®ï¼ï¼‰</li><li>å°†ç»“æœå°è£…ä¸ºToolMessageå¹¶è¿”å›</li></ol><p>è‡ªå®šä¹‰èŠ‚ç‚¹æ¯”ä½¿ç”¨é¢„è®¾çš„ToolNodeæ›´çµæ´»ï¼Œæ–¹ä¾¿æˆ‘ä»¬æ·»åŠ æ›´å¤šå¤„ç†é€»è¾‘ã€‚ç‰¹åˆ«æ˜¯ç¬¬4æ­¥ï¼Œå°†æœç´¢ç»“æœè½¬æ¢ä¸ºå­—ç¬¦ä¸²æ˜¯è§£å†³ä¸LLMå…¼å®¹æ€§é—®é¢˜çš„å…³é”®ã€‚</p><h3 id="å¤„ç†æœç´¢ç»“æœæ ¼å¼é—®é¢˜"><a href="#å¤„ç†æœç´¢ç»“æœæ ¼å¼é—®é¢˜" class="headerlink" title="å¤„ç†æœç´¢ç»“æœæ ¼å¼é—®é¢˜"></a>å¤„ç†æœç´¢ç»“æœæ ¼å¼é—®é¢˜</h3><p>åœ¨å®é™…æµ‹è¯•ä¸­ï¼Œå¦‚æœç›´æ¥å°†æœç´¢å·¥å…·è¿”å›çš„åŸå§‹å¯¹è±¡ä¼ é€’ç»™LLMï¼Œä¼šé‡åˆ°ä»¥ä¸‹é”™è¯¯ï¼š</p><div class="code-wrapper"><pre><code class="hljs routeros">graph.astream_eventsæ‰§è¡Œå‡ºé”™: <span class="hljs-builtin-name">Error</span> code: 400 - &#123;<span class="hljs-string">&#x27;code&#x27;</span>: 20029, <span class="hljs-string">&#x27;message&#x27;</span>: <span class="hljs-string">&#x27;Only text and image_url are supported.&#x27;</span>, <span class="hljs-string">&#x27;data&#x27;</span>: None&#125;</code></pre></div><p>è¿™æ˜¯å› ä¸ºå¤§å¤šæ•°LLM APIåªæ”¯æŒæ–‡æœ¬å’Œå›¾ç‰‡URLä½œä¸ºè¾“å…¥ï¼Œè€ŒTavilySearchResultsæœç´¢å·¥å…·è¿”å›çš„æ˜¯ä¸€ä¸ªå¤æ‚çš„Pythonå¯¹è±¡ï¼ˆé€šå¸¸æ˜¯åˆ—è¡¨æˆ–å­—å…¸ï¼‰ï¼Œè€ŒDuckDuckGoSearchResultså¦‚æœä¸åŠ output_format=â€listâ€çš„é…ç½®å¤©ç„¶è¿”å›çš„å°±æ˜¯ä¸ªå­—ç¬¦ä¸²ã€‚æ‰€ä»¥é€šè¿‡ç®€å•åœ°ä½¿ç”¨<code>str(observation)</code>å°†ç»“æœè½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œå¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œç¡®ä¿äº†ä¸LLM APIçš„å…¼å®¹æ€§ã€‚å¦‚æœæ˜¯éœ€è¦æ‰‹åŠ¨å¤„ç†å¥½æ ¼å¼ï¼Œæ¯”å¦‚å¯¹liståšä¸€ä¸ªå¤„ç†ï¼Œå°±åœ¨è¿™é‡Œç›´æ¥æŠŠå¤„ç†å®Œçš„ç»“æ„å†æ”¹ä¸ºå­—ç¬¦ä¸²è¾“å‡ºç»™LLMã€‚</p><h2 id="3-æ¡ä»¶è·¯ç”±å‡½æ•°"><a href="#3-æ¡ä»¶è·¯ç”±å‡½æ•°" class="headerlink" title="3. æ¡ä»¶è·¯ç”±å‡½æ•°"></a>3. æ¡ä»¶è·¯ç”±å‡½æ•°</h2><p>æ¡ä»¶è·¯ç”±å‡½æ•°å†³å®šäº†å·¥ä½œæµçš„æ‰§è¡Œè·¯å¾„ï¼š</p><div class="code-wrapper"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">route_tools</span>(<span class="hljs-params">state: MessagesState</span>):</span>    <span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">    åœ¨æ¡ä»¶è¾¹ä¸­ä½¿ç”¨,å¦‚æœæœ€åä¸€æ¡æ¶ˆæ¯åŒ…å«å·¥å…·è°ƒç”¨,åˆ™è·¯ç”±åˆ°å·¥å…·èŠ‚ç‚¹,å¦åˆ™è·¯ç”±åˆ°ç»“æŸèŠ‚ç‚¹ã€‚</span><span class="hljs-string">    &quot;&quot;&quot;</span>    messages = state[<span class="hljs-string">&#x27;messages&#x27;</span>]    last_message = messages[-<span class="hljs-number">1</span>]    <span class="hljs-comment"># æ£€æŸ¥æ˜¯å¦æ˜¯AIæ¶ˆæ¯ä¸”æœ‰å·¥å…·è°ƒç”¨</span>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">hasattr</span>(last_message, <span class="hljs-string">&#x27;tool_calls&#x27;</span>) <span class="hljs-keyword">and</span> last_message.tool_calls:        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;search_tool&quot;</span>  <span class="hljs-comment"># å¦‚æœæœ‰å·¥å…·è°ƒç”¨ï¼Œè·¯ç”±åˆ°å·¥å…·èŠ‚ç‚¹</span>        <span class="hljs-keyword">return</span> END</code></pre></div><h2 id="4-æ„å»ºå·¥ä½œæµ"><a href="#4-æ„å»ºå·¥ä½œæµ" class="headerlink" title="4. æ„å»ºå·¥ä½œæµ"></a>4. æ„å»ºå·¥ä½œæµ</h2><p>æ¥ä¸‹æ¥å®Œæˆå·¥ä½œæµçš„æ„å»ºï¼š</p><div class="code-wrapper"><pre><code class="hljs python"><span class="hljs-comment"># åˆ›å»ºå›¾æ„å»ºå™¨</span>graph_builder = StateGraph(MessagesState)<span class="hljs-comment"># æ·»åŠ èŠ‚ç‚¹</span>graph_builder.add_node(<span class="hljs-string">&quot;chatbot&quot;</span>, chatbot_stream)graph_builder.add_node(<span class="hljs-string">&quot;search_tool&quot;</span>, search_tool_node)<span class="hljs-comment"># è®¾ç½®å…¥å£ç‚¹</span>graph_builder.set_entry_point(<span class="hljs-string">&quot;chatbot&quot;</span>)<span class="hljs-comment"># æ·»åŠ æ¡ä»¶è¾¹</span>graph_builder.add_conditional_edges(    <span class="hljs-string">&quot;chatbot&quot;</span>,    route_tools)<span class="hljs-comment"># æ·»åŠ ä»æœç´¢å·¥å…·èŠ‚ç‚¹è¿”å›åˆ°èŠå¤©èŠ‚ç‚¹</span>graph_builder.add_edge(<span class="hljs-string">&quot;search_tool&quot;</span>, <span class="hljs-string">&quot;chatbot&quot;</span>)<span class="hljs-comment"># ç¼–è¯‘å›¾</span>graph = graph_builder.<span class="hljs-built_in">compile</span>()</code></pre></div><p>è¿™ä¸ªå·¥ä½œæµçš„æ‰§è¡Œè·¯å¾„æœ‰ä¸¤ç§å¯èƒ½ï¼š</p><ol><li>chatbot â†’ END ï¼ˆå¦‚æœLLMç›´æ¥å›ç­”ï¼Œä¸éœ€è¦æœç´¢ï¼‰</li><li>chatbot â†’ search_tool â†’ chatbot â†’ END ï¼ˆå¦‚æœéœ€è¦æœç´¢ä¿¡æ¯ï¼‰</li></ol><p>ç¬¬äºŒç§è·¯å¾„ä¸­ï¼Œsearch_toolæ‰§è¡Œå®Œåä¼šå›åˆ°chatbotï¼Œè®©LLMåŸºäºæœç´¢ç»“æœç”Ÿæˆæœ€ç»ˆå›å¤ã€‚è¿™æ˜¯ä¸€ä¸ªå¾ªç¯ç»“æ„ï¼Œå…è®¸LLMåœ¨å¿…è¦æ—¶å¤šæ¬¡è°ƒç”¨æœç´¢å·¥å…·ã€‚</p><h2 id="5-å®šä¹‰LLMå¤„ç†èŠ‚ç‚¹"><a href="#5-å®šä¹‰LLMå¤„ç†èŠ‚ç‚¹" class="headerlink" title="5. å®šä¹‰LLMå¤„ç†èŠ‚ç‚¹"></a>5. å®šä¹‰LLMå¤„ç†èŠ‚ç‚¹</h2><p>æˆ‘ä»¬éœ€è¦ä¸€ä¸ªèŠ‚ç‚¹æ¥å¤„ç†ç”¨æˆ·è¾“å…¥å¹¶ç”ŸæˆLLMå“åº”ï¼š</p><div class="code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">chatbot_stream</span>(<span class="hljs-params">state: MessagesState</span>):</span>    <span class="hljs-string">&quot;&quot;&quot;ç”Ÿæˆæµå¼å›å¤çš„èŠ‚ç‚¹å‡½æ•°&quot;&quot;&quot;</span>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;chatbot_streamæ”¶åˆ°çš„å®Œæ•´è¾“å…¥------&gt;&#x27;</span>,state,<span class="hljs-string">&#x27;\n&#x27;</span>)    messages = state[<span class="hljs-string">&quot;messages&quot;</span>]        <span class="hljs-comment"># ä½¿ç”¨éæµå¼æ–¹å¼æ¥æ”¶å®Œæ•´è¿”å›</span>    response = llm_with_tools.invoke(        messages,        functions=functions,        function_call=<span class="hljs-string">&quot;auto&quot;</span>    )    <span class="hljs-keyword">return</span> &#123;<span class="hljs-string">&quot;messages&quot;</span>: [response]&#125;</code></pre></div><p>è¿™ä¸ªå‡½æ•°æ¥æ”¶å½“å‰çš„æ¶ˆæ¯å†å²ä½œä¸ºè¾“å…¥ï¼Œä½¿ç”¨LLMç”Ÿæˆå›å¤ã€‚æˆ‘ä»¬è®¾ç½®<code>function_call=&quot;auto&quot;</code>ï¼Œè®©LLMè‡ªè¡Œå†³å®šæ˜¯å¦éœ€è¦è°ƒç”¨å·¥å…·ã€‚</p><h2 id="6-å‡†å¤‡System-Promptå’Œæµ‹è¯•"><a href="#6-å‡†å¤‡System-Promptå’Œæµ‹è¯•" class="headerlink" title="6. å‡†å¤‡System Promptå’Œæµ‹è¯•"></a>6. å‡†å¤‡System Promptå’Œæµ‹è¯•</h2><p>ä¸ºäº†å¼•å¯¼LLMæ­£ç¡®ä½¿ç”¨æœç´¢å·¥å…·ï¼Œè¿™é‡Œè®¾è®¡äº†ä¸€ä¸ªè¯¦ç»†çš„System Promptï¼š</p><div class="code-wrapper"><pre><code class="hljs python">today = datetime.now().strftime(<span class="hljs-string">&quot;%Y-%m-%d&quot;</span>)system_message = SystemMessage(content=<span class="hljs-string">f&quot;&quot;&quot;</span><span class="hljs-string">    # ä½ æ˜¯ä¸€ä¸ªå–„äºåˆ†æçš„AIåŠ©æ‰‹ã€‚</span><span class="hljs-string">    ## å¯¹äºç”¨æˆ·çš„æ‰€æœ‰é—®é¢˜ï¼Œå…ˆåˆ†ææ˜¯å¦éœ€è¦è°ƒç”¨æœç´¢å·¥å…·ï¼Œå†è¿›è¡Œå›å¤ï¼Œæ¯”å¦‚æŸ¥è¯¢ä¸œè¥¿ï¼Œéœ€è¦è°ƒç”¨æœç´¢å·¥å…·ï¼Œå¦‚æœåªæ˜¯é—®é—®é¢˜ï¼Œåˆ™ä¸éœ€è¦è°ƒç”¨æœç´¢å·¥å…·ã€‚</span><span class="hljs-string">    ## è¯·ç‰¢è®°ä»Šå¤©çš„æ—¥æœŸæ˜¯<span class="hljs-subst">&#123;today&#125;</span>,è°ƒç”¨å·¥å…·æ—¶ï¼Œç›´æ¥ä½¿ç”¨<span class="hljs-subst">&#123;today&#125;</span>çš„æ—¥æœŸã€‚</span><span class="hljs-string">    - åˆ†æç¤ºä¾‹:æ¯”å¦‚ç”¨æˆ·è¯¢é—®æ—¥å†,é»„å†,æ–°é—»ç­‰å®æ—¶æŸ¥è¯¢ç›¸å…³çš„éœ€è¦è°ƒç”¨å·¥å…·;æ¯”å¦‚è¯¢é—®ä»Šå¤©çš„æ–°é—»æˆ–ä»Šå¤©çš„æ—¥å†ã€‚ç›´æ¥æŠŠ<span class="hljs-subst">&#123;today&#125;</span>çš„æ—¥æœŸä½œä¸ºå‚æ•°ä¼ ç»™æœç´¢å·¥å…·å»åšæœç´¢ã€‚</span><span class="hljs-string">    - æ¯ä¸ªæœç´¢ç»“æœéƒ½éœ€è¦æŒ‰ç…§ä»¥ä¸‹æ ¼å¼è¿”å›ï¼š</span><span class="hljs-string">        - æ ‡é¢˜ï¼š</span><span class="hljs-string">        - æ‘˜è¦ï¼š</span><span class="hljs-string">        - é“¾æ¥ï¼š</span><span class="hljs-string">&quot;&quot;&quot;</span>)</code></pre></div><p>System Promptçš„è®¾è®¡åŒ…å«äº†å‡ ä¸ªå…³é”®è¦ç´ ï¼š</p><ol><li>æ˜ç¡®è§’è‰²å®šä½ï¼šä¸€ä¸ªå–„äºåˆ†æçš„AIåŠ©æ‰‹</li><li>å†³ç­–æŒ‡å¯¼ï¼šä»€ä¹ˆæƒ…å†µä¸‹åº”è¯¥è°ƒç”¨æœç´¢å·¥å…·</li><li>æ—¶é—´æ„è¯†ï¼šä½¿ç”¨å½“å‰æ—¥æœŸè¿›è¡Œæœç´¢</li><li>è¾“å‡ºæ ¼å¼ï¼šè¦æ±‚ä»¥ç‰¹å®šæ ¼å¼å‘ˆç°æœç´¢ç»“æœ</li></ol><p>æµ‹è¯•é—®é¢˜åˆ™æ˜¯å…³äºå®¤å†…é€‚åˆç§æ¤çš„èŠ±å‰ï¼š</p><div class="code-wrapper"><pre><code class="hljs python">first_message = HumanMessage(content=<span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">    è¯·å¸®æˆ‘æœç´¢ä¸‹å®¤å†…é€‚åˆç§æ¤ä»€ä¹ˆèŠ±?</span><span class="hljs-string">&quot;&quot;&quot;</span>)</code></pre></div><h2 id="7-æ‰§è¡Œæµç¨‹ä¸äº‹ä»¶ç›‘å¬"><a href="#7-æ‰§è¡Œæµç¨‹ä¸äº‹ä»¶ç›‘å¬" class="headerlink" title="7. æ‰§è¡Œæµç¨‹ä¸äº‹ä»¶ç›‘å¬"></a>7. æ‰§è¡Œæµç¨‹ä¸äº‹ä»¶ç›‘å¬</h2><p>åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>astream_events</code>æ–¹æ³•æ•è·å·¥ä½œæµä¸­çš„å„ç§äº‹ä»¶ï¼š</p><div class="code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">async</span> <span class="hljs-keyword">for</span> event <span class="hljs-keyword">in</span> graph.astream_events(initial_state, config=&#123;<span class="hljs-string">&quot;configurable&quot;</span>: &#123;<span class="hljs-string">&quot;thread_id&quot;</span>: <span class="hljs-string">&quot;1&quot;</span>&#125;&#125;, version=<span class="hljs-string">&quot;v2&quot;</span>):    event_type = event[<span class="hljs-string">&#x27;event&#x27;</span>]    <span class="hljs-keyword">if</span> event_type == <span class="hljs-string">&#x27;on_tool_start&#x27;</span> <span class="hljs-keyword">and</span> event[<span class="hljs-string">&#x27;data&#x27;</span>]:        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;å¼€å§‹è°ƒç”¨å·¥å…·æŸ¥è¯¢&#x27;</span>, event[<span class="hljs-string">&#x27;data&#x27;</span>],<span class="hljs-string">&#x27;\n\n&#x27;</span>)    <span class="hljs-keyword">elif</span> event_type == <span class="hljs-string">&#x27;on_tool_end&#x27;</span> <span class="hljs-keyword">and</span> event[<span class="hljs-string">&#x27;data&#x27;</span>]:        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;å·¥å…·æŸ¥è¯¢ç»“æŸ&#x27;</span>,event[<span class="hljs-string">&#x27;data&#x27;</span>],<span class="hljs-string">&#x27;\n\n&#x27;</span>)    <span class="hljs-keyword">elif</span> event_type == <span class="hljs-string">&#x27;on_chat_model_stream&#x27;</span>:        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;on_chat_model_streamäº‹ä»¶------&gt;&#x27;</span>,event[<span class="hljs-string">&quot;data&quot;</span>][<span class="hljs-string">&quot;chunk&quot;</span>].content,<span class="hljs-string">&#x27;\n\n&#x27;</span>)        on_chat_model_stream_list.append(event[<span class="hljs-string">&quot;data&quot;</span>][<span class="hljs-string">&quot;chunk&quot;</span>].content)</code></pre></div><p>é€šè¿‡ç›‘å¬è¿™äº›äº‹ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥è·Ÿè¸ªæ•´ä¸ªå·¥ä½œæµçš„æ‰§è¡Œè¿‡ç¨‹ï¼š</p><ul><li><code>on_tool_start</code>ï¼šå·¥å…·å¼€å§‹æ‰§è¡Œæ—¶è§¦å‘</li><li><code>on_tool_end</code>ï¼šå·¥å…·æ‰§è¡Œå®Œæˆæ—¶è§¦å‘</li><li><code>on_chat_model_stream</code>ï¼šLLMç”Ÿæˆè¾“å‡ºæ—¶è§¦å‘</li></ul><p>è¿™æ ·æˆ‘ä»¬å¯ä»¥å®æ—¶è§‚å¯Ÿåˆ°æ•´ä¸ªäº¤äº’çš„æµç¨‹ã€‚</p><h2 id="8-æµ‹è¯•ç»“æœç¤ºä¾‹"><a href="#8-æµ‹è¯•ç»“æœç¤ºä¾‹" class="headerlink" title="8. æµ‹è¯•ç»“æœç¤ºä¾‹"></a>8. æµ‹è¯•ç»“æœç¤ºä¾‹</h2><h3 id="é—®é¢˜ï¼šè¯·å¸®æˆ‘æœç´¢ä¸‹å®¤å†…é€‚åˆç§æ¤ä»€ä¹ˆèŠ±"><a href="#é—®é¢˜ï¼šè¯·å¸®æˆ‘æœç´¢ä¸‹å®¤å†…é€‚åˆç§æ¤ä»€ä¹ˆèŠ±" class="headerlink" title="é—®é¢˜ï¼šè¯·å¸®æˆ‘æœç´¢ä¸‹å®¤å†…é€‚åˆç§æ¤ä»€ä¹ˆèŠ±?"></a>é—®é¢˜ï¼šè¯·å¸®æˆ‘æœç´¢ä¸‹å®¤å†…é€‚åˆç§æ¤ä»€ä¹ˆèŠ±?</h3><p>ä»¥ä¸‹æ˜¯ç¤ºä¾‹è¾“å‡ºï¼š</p><div class="code-wrapper"><pre><code class="hljs log">ç”Ÿæˆå®Œæˆï¼ ä¸ºäº†ç»™æ‚¨æä¾›åˆé€‚çš„å»ºè®®ï¼Œæˆ‘å°†æœç´¢ä¸€äº›é€‚åˆå®¤å†…ç§æ¤çš„èŠ±å‰ã€‚æ ¹æ®æœç´¢ç»“æœï¼Œè¿™é‡Œæœ‰ä¸€äº›é€‚åˆå®¤å†…ç§æ¤çš„èŠ±å‰æ¨èï¼š1. **é•¿å¯¿èŠ±**   - æ‘˜è¦ï¼šè¿™æ˜¯å°ç¾æœ€å–œæ¬¢çš„å®¤å†…ç›†æ ½èŠ±å‰ï¼Œé€‚åˆå®¤å†…ç§æ¤ã€‚   - é“¾æ¥ï¼š[å¯ä»¥æ”¾å®¤å†…å…»çš„èŠ±æœ‰å“ªäº›ï¼ˆ100ç§å¸¸è§å®¤å†…ç›†æ ½èŠ±å‰å›¾é‰´ï¼‰](https://www.huaguozhijia.com/yanghua/13493.html)2. **æ°´ä»™èŠ±**   - æ‘˜è¦ï¼šæ°´ä»™èŠ±æ˜¯ä¸€ç§æ—¶å…´çš„å®¤å†…æ°´å…»æ¤ç‰©ï¼ŒçƒèŒè¿ç”¨ç®€æ˜“ï¼Œé€‚åˆæ”¾åœ¨æ¡Œé¢æˆ–é˜³å°ä¸Šã€‚   - é“¾æ¥ï¼š[é€‚åˆå®¤å†…å…»ç»¿æ¤æ¨èï¼šèŠ±å‰ç»¿æ¤ç›†æ ½ã€é«˜çº§æ„Ÿã€å¤§å‹ç»¿æ¤ã€æ°´åŸ¹ã€æ—ºå®…ã€å…»ä¸æ­»çš„å®¤å†…ç»¿æ¤ - çŸ¥ä¹](https://zhuanlan.zhihu.com/p/21133659555)3. **åå¤§å®¤å†…èŠ±å‰æ’å**   - æ‘˜è¦ï¼šåœ¨å¿™ç¢Œçš„éƒ½å¸‚ç”Ÿæ´»ä¸­ï¼Œè¶Šæ¥è¶Šå¤šçš„äººå–œæ¬¢åœ¨å®¤å†…ç§æ¤èŠ±å‰ï¼Œä»¥å¢æ·»ç”Ÿæ´»æƒ…è¶£ï¼Œå‡€åŒ–ç©ºæ°”ã€‚æœ¬æ–‡ä»‹ç»äº†åå¤§å®¤å†…èŠ±å‰æ’åï¼Œä»¥åŠæ€æ ·æŒ‘é€‰å’Œå…»æŠ¤è¿™äº›ç¾ä¸½çš„å®¤å†…èŠ±å‰ã€‚   - é“¾æ¥ï¼š[åå¤§å®¤å†…èŠ±å‰æ’åï¼›å“ªäº›èŠ±å‰æœ€é€‚åˆå®¤å†…ç§æ¤ï¼›æ€æ ·æŒ‘é€‰å’Œå…»æŠ¤èŠ±å‰](https://baijiahao.baidu.com/s?id=1812440518891264633)4. **10ç§é€‚åˆåœ¨å®¤å†…å…»æŠ¤çš„èŠ±å‰**   - æ‘˜è¦ï¼šç»è¿‡åå¹´çš„å…»èŠ±ç»éªŒï¼Œä½œè€…å‘å¤§å®¶ä»‹ç»10ç§éå¸¸é€‚åˆå®¤å†…ç§æ¤çš„èŠ±å‰ã€‚   - é“¾æ¥ï¼š[10ç§é€‚åˆåœ¨å®¤å†…å…»æŠ¤çš„èŠ±å‰ - æœˆå­£ç½‘](https://www.yuejiw.com/post/29176.html)æ‚¨å¯ä»¥æ ¹æ®è‡ªå·±çš„å–œå¥½å’Œå…»æŠ¤æ¡ä»¶é€‰æ‹©åˆé€‚çš„èŠ±å‰è¿›è¡Œç§æ¤ã€‚</code></pre></div><h3 id="é—®é¢˜ï¼šæœ€è¿‘AIé¢†åŸŸæœ‰ä»€ä¹ˆæ–°é—»"><a href="#é—®é¢˜ï¼šæœ€è¿‘AIé¢†åŸŸæœ‰ä»€ä¹ˆæ–°é—»" class="headerlink" title="é—®é¢˜ï¼šæœ€è¿‘AIé¢†åŸŸæœ‰ä»€ä¹ˆæ–°é—»?"></a>é—®é¢˜ï¼šæœ€è¿‘AIé¢†åŸŸæœ‰ä»€ä¹ˆæ–°é—»?</h3><p>ä»¥ä¸‹æ˜¯ç¤ºä¾‹è¾“å‡ºï¼š</p><div class="code-wrapper"><pre><code class="hljs awk">æ ¹æ®æœç´¢ç»“æœï¼Œä»¥ä¸‹æ˜¯æœ€è¿‘AIé¢†åŸŸçš„å‡ æ¡æ–°é—»ï¼š<span class="hljs-number">1</span>. æ ‡é¢˜ï¼šç§‘æŠ€èµ„è®¯aié€Ÿé€’ï¼šæ˜¨å¤œä»Šæ™¨ç§‘æŠ€çƒ­ç‚¹ä¸€è§ˆ ä¸¨<span class="hljs-number">2025</span>å¹´<span class="hljs-number">4</span>æœˆ<span class="hljs-number">11</span>æ—¥   æ‘˜è¦ï¼š<span class="hljs-number">2025</span>å¹´<span class="hljs-number">04</span>æœˆ<span class="hljs-number">11</span>æ—¥ <span class="hljs-number">06</span>:<span class="hljs-number">24</span> æ–°æµªai. ç¼©å° ... æ¿ æˆä¸ºå…¨ç½‘æœ€ç«çƒ­çš„aiç¡¬ä»¶ <span class="hljs-number">2025</span>å¹´çˆ†ç«çš„<span class="hljs-string">&quot;å°æ™ºai&quot;</span>å¼€æºé¡¹ç›®ï¼Œå‡­å€Ÿå…¶æ‹ŸäººåŒ–è¯­éŸ³äº¤äº’å’Œä½é—¨æ§›ç‰¹æ€§ï¼Œä¸¤ä¸ªæœˆå†…æ¥å…¥ ...   é“¾æ¥ï¼š[ç§‘æŠ€èµ„è®¯aié€Ÿé€’ï¼šæ˜¨å¤œä»Šæ™¨ç§‘æŠ€çƒ­ç‚¹ä¸€è§ˆ ä¸¨<span class="hljs-number">2025</span>å¹´<span class="hljs-number">4</span>æœˆ<span class="hljs-number">11</span>æ—¥](https:<span class="hljs-regexp">//</span>news.sina.com.cn<span class="hljs-regexp">/zx/</span>ds<span class="hljs-regexp">/2025-04-11/</span>doc-inestvsi2877509.shtml)<span class="hljs-number">2</span>. æ ‡é¢˜ï¼šAiæ—¥æŠ¥ - <span class="hljs-number">2025</span>å¹´<span class="hljs-number">4</span>æœˆ<span class="hljs-number">11</span>æ—¥   æ‘˜è¦ï¼šğŸ“Š è¶‹åŠ¿å›¾è°±ï¼šæœªæ¥<span class="hljs-number">6</span>ä¸ªæœˆï¼Œaiåœ¨ä¸ªæ€§åŒ–è¥é”€ã€è‡ªåŠ¨åŒ–å®¢æˆ·æœåŠ¡ã€ä¾›åº”é“¾ä¼˜åŒ–æ–¹é¢çš„åº”ç”¨å°†æŒç»­æ·±åŒ–ï¼›ç”Ÿæˆå¼aiåœ¨äº§å“è®¾è®¡ã€å¹¿å‘Šåˆ›æ„é¢†åŸŸçš„åº”ç”¨å°†å¢åŠ ã€‚ <span class="hljs-number">3.3</span> é‡‘èæœåŠ¡ ai. ğŸŒ å…¨çƒè§†è§’ï¼šaiåœ¨é‡‘èé¢†åŸŸçš„åº”ç”¨å¹¿æ³›ï¼Œä½†ä¹Ÿé¢ä¸´ä¸¥æ ¼ç›‘ç®¡å’Œæ½œåœ¨é£é™©ã€‚   é“¾æ¥ï¼š[Aiæ—¥æŠ¥ - <span class="hljs-number">2025</span>å¹´<span class="hljs-number">4</span>æœˆ<span class="hljs-number">11</span>æ—¥ - è…¾è®¯äº‘](https:<span class="hljs-regexp">//</span>cloud.tencent.com<span class="hljs-regexp">/developer/</span>article/<span class="hljs-number">2512975</span>)<span class="hljs-number">3</span>. æ ‡é¢˜ï¼šä¸­å›½å­¦è€…é¢†è¡”ç ”å‘AIè‚¿ç˜¤é¢„æµ‹æ¨¡å‹   æ‘˜è¦ï¼š<span class="hljs-number">2025</span>-<span class="hljs-number">04</span>-<span class="hljs-number">11</span> <span class="hljs-number">08</span>:<span class="hljs-number">30</span> å‘å¸ƒäºåŒ—äº¬ äººæ°‘ç½‘èµ„è®¯ç²¾é€‰å®˜æ–¹è´¦å· æœ¬æŠ¥ç”µ(ç”³å¥‡)è¿‘æœŸï¼Œç”±æ–¯å¦ç¦å¤§å­¦åŒ»å­¦é™¢ç™Œç—‡ç ”ç©¶æ‰€ä¸»å¯¼ã€ä¸­å›½å­¦è€…é¢†è¡”è¿›è¡Œçš„ä¸€é¡¹ç ”ç©¶å‘è¡¨äº ...   é“¾æ¥ï¼š[ä¸­å›½å­¦è€…é¢†è¡”ç ”å‘AIè‚¿ç˜¤é¢„æµ‹æ¨¡å‹_è…¾è®¯æ–°é—»](https:<span class="hljs-regexp">//</span>news.qq.com<span class="hljs-regexp">/rain/</span>a/<span class="hljs-number">20250411</span>A020P200)</code></pre></div><p>è¿™ä¸ªå›å¤æ˜¯åœ¨LLMæ¥æ”¶åˆ°ç”±å­—ç¬¦ä¸²å½¢å¼çš„æœç´¢ç»“æœåç”Ÿæˆçš„ã€‚å¦‚æœæ²¡æœ‰å°†æœç´¢ç»“æœè½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œå°±ä¼šé‡åˆ°å‰é¢æåˆ°çš„é”™è¯¯ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬æˆåŠŸæ„å»ºäº†ä¸€ä¸ªèƒ½å¤Ÿè¿›è¡Œç½‘ç»œæœç´¢çš„AIåŠ©æ‰‹ã€‚ç›¸æ¯”å‰é¢çš„ç®€å•å·¥å…·ç¤ºä¾‹ï¼Œè¿™ä¸ªåŠ©æ‰‹å¯ä»¥æœç´¢äº’è”ç½‘ä¸Šçš„å®æ—¶ä¿¡æ¯ï¼Œä½¿å…¶å›ç­”æ›´åŠ å‡†ç¡®å’Œæœ‰ç”¨ã€‚</p><p>å…³é”®æ”¹è¿›ç‚¹åŒ…æ‹¬ï¼š</p><ol><li>é›†æˆäº†å®é™…å¯ç”¨çš„DuckDuckGoæœç´¢API</li><li>å¤„ç†äº†å·¥å…·è¿”å›ç»“æœæ ¼å¼å…¼å®¹æ€§é—®é¢˜</li></ol><p>graphå›¾ä¾‹æµç¨‹å’Œä¸Šä¸€ç¯‡æ²¡ä»€ä¹ˆå˜åŒ–ï¼Œåªæ˜¯å·¥å…·åç§°æ”¹ä¸ºäº†ä¸€ä¸ªå…·è±¡çš„å·¥å…·åï¼š<br><img src="/img/blog/AI/langgraph/workflow_graph-2025-04-11_15-32-50.png"></p><p>åœ¨ä¸‹ä¸€ç¯‡ä¸­ï¼Œæˆ‘ä»¬å°†è¿›ä¸€æ­¥æ‰©å±•è¿™ä¸ªåŠ©æ‰‹ï¼Œè®©å®ƒä¸ä»…èƒ½æœç´¢ï¼Œè¿˜èƒ½æŠ“å–å’Œåˆ†æç½‘é¡µå†…å®¹ï¼Œä»¥æä¾›æ›´æ·±å…¥çš„ä¿¡æ¯å¤„ç†èƒ½åŠ›ã€‚</p><p>å®Œæ•´ä»£ç ï¼š</p><div class="code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime<span class="hljs-keyword">import</span> os<span class="hljs-keyword">from</span> dotenv <span class="hljs-keyword">import</span> load_dotenvload_dotenv()<span class="hljs-keyword">import</span> asyncio<span class="hljs-keyword">from</span> langchain_openai <span class="hljs-keyword">import</span> ChatOpenAI<span class="hljs-keyword">from</span> langchain_community.chat_models <span class="hljs-keyword">import</span> QianfanChatEndpoint<span class="hljs-keyword">from</span> langchain_community.tools.tavily_search <span class="hljs-keyword">import</span> TavilySearchResults<span class="hljs-keyword">from</span> langchain_community.tools.ddg_search.tool <span class="hljs-keyword">import</span> DuckDuckGoSearchResults<span class="hljs-keyword">from</span> langchain_core.messages <span class="hljs-keyword">import</span> BaseMessage, HumanMessage, AIMessage, SystemMessage,ToolMessage<span class="hljs-keyword">from</span> langgraph.graph <span class="hljs-keyword">import</span> StateGraph, START, END,MessagesState<span class="hljs-keyword">from</span> langchain_core.utils.function_calling <span class="hljs-keyword">import</span> convert_to_openai_function<span class="hljs-keyword">from</span> langchain_core.runnables.graph <span class="hljs-keyword">import</span> MermaidDrawMethod<span class="hljs-keyword">from</span> langchain_core.messages <span class="hljs-keyword">import</span> ToolMessage<span class="hljs-keyword">from</span> langchain_core.tools <span class="hljs-keyword">import</span> tool<span class="hljs-comment"># åˆ›å»ºå›¾æ„å»ºå™¨</span>graph_builder = StateGraph(MessagesState)os.environ[<span class="hljs-string">&#x27;TAVILY_API_KEY&#x27;</span>] = os.getenv(<span class="hljs-string">&#x27;TAVILY_API_KEY&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>)<span class="hljs-comment"># åˆ›å»ºå·¥å…·</span><span class="hljs-meta">@tool</span><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">search</span>(<span class="hljs-params">query: <span class="hljs-built_in">str</span></span>):</span>    <span class="hljs-string">&quot;&quot;&quot;ç”¨äºæµè§ˆç½‘ç»œè¿›è¡Œæœç´¢ã€‚&quot;&quot;&quot;</span>    <span class="hljs-comment"># search_tool = TavilySearchResults(max_results=3)</span>    search_tool = DuckDuckGoSearchResults(max_results=<span class="hljs-number">3</span>, output_format=<span class="hljs-string">&quot;list&quot;</span>) <span class="hljs-comment"># output_format=&quot;list&quot;</span>    <span class="hljs-keyword">return</span> search_tool.invoke(query)tools = [search]<span class="hljs-comment"># llm = QianfanChatEndpoint(</span><span class="hljs-comment">#     model=&quot;ernie-lite-pro-128k&quot;,</span><span class="hljs-comment">#     api_key=os.getenv(&#x27;QIANFAN_AK&#x27;, &#x27;&#x27;),</span><span class="hljs-comment">#     secret_key=os.getenv(&#x27;QIANFAN_SK&#x27;, &#x27;&#x27;)</span><span class="hljs-comment"># )</span>llm = ChatOpenAI(    <span class="hljs-comment">#THUDM/glm-4-9b-chat</span>    <span class="hljs-comment">#Qwen/Qwen2.5-7B-Instruct</span>    model=<span class="hljs-string">&quot;Qwen/Qwen2.5-7B-Instruct&quot;</span>,    streaming=<span class="hljs-literal">False</span>,  <span class="hljs-comment"># å¯ç”¨æµå¼è¾“å‡º</span>    api_key=os.getenv(<span class="hljs-string">&#x27;SILICONFLOW_API_KEY&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>),     base_url=os.getenv(<span class="hljs-string">&#x27;SILICONFLOW_BASE_URL&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>),    temperature=<span class="hljs-number">0.1</span>,)llm_with_tools = llm.bind_tools(tools)<span class="hljs-comment"># åˆ›å»ºå·¥å…·åˆ—è¡¨çš„å‡½æ•°ç‰ˆæœ¬</span>functions = [convert_to_openai_function(t) <span class="hljs-keyword">for</span> t <span class="hljs-keyword">in</span> tools]tools_by_name = &#123;tool.name: tool <span class="hljs-keyword">for</span> tool <span class="hljs-keyword">in</span> tools&#125;<span class="hljs-comment"># å®šä¹‰å·¥å…·èŠ‚ç‚¹å‡½æ•°</span><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">search_tool_node</span>(<span class="hljs-params">state: <span class="hljs-built_in">dict</span></span>):</span>    result = []    <span class="hljs-keyword">for</span> tool_call <span class="hljs-keyword">in</span> state[<span class="hljs-string">&quot;messages&quot;</span>][-<span class="hljs-number">1</span>].tool_calls:        tool = tools_by_name[tool_call[<span class="hljs-string">&quot;name&quot;</span>]]        observation = tool.invoke(tool_call[<span class="hljs-string">&quot;args&quot;</span>])        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;å·¥å…·æœç´¢ç»“æœçš„å®Œæ•´è¾“å‡º------&gt;&#x27;</span>,observation,<span class="hljs-string">&#x27;\n&#x27;</span>)        <span class="hljs-comment"># ç›´æ¥è½¬ä¸ºå­—ç¬¦ä¸²</span>        search_result = <span class="hljs-built_in">str</span>(observation)        result.append(ToolMessage(content=search_result, tool_call_id=tool_call[<span class="hljs-string">&quot;id&quot;</span>]))    <span class="hljs-keyword">return</span> &#123;<span class="hljs-string">&quot;messages&quot;</span>: result&#125;<span class="hljs-comment"># å®šä¹‰æµå¼èŠ‚ç‚¹å‡½æ•°</span><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">chatbot_stream</span>(<span class="hljs-params">state: MessagesState</span>):</span>    <span class="hljs-string">&quot;&quot;&quot;ç”Ÿæˆæµå¼å›å¤çš„èŠ‚ç‚¹å‡½æ•°&quot;&quot;&quot;</span>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;chatbot_streamæ”¶åˆ°çš„å®Œæ•´è¾“å…¥------&gt;&#x27;</span>,state,<span class="hljs-string">&#x27;\n&#x27;</span>)    messages = state[<span class="hljs-string">&quot;messages&quot;</span>]    <span class="hljs-comment"># streamed_output = []</span>    <span class="hljs-comment"># tool_calls_detected = []  # æ–°å¢ï¼šä¿å­˜æ£€æµ‹åˆ°çš„å·¥å…·è°ƒç”¨</span>        <span class="hljs-comment"># ä½¿ç”¨éæµå¼æ–¹å¼æ¥æ”¶å®Œæ•´è¿”å›</span>    response = llm_with_tools.invoke(        messages,        functions=functions,        function_call=<span class="hljs-string">&quot;auto&quot;</span>    )    <span class="hljs-keyword">return</span> &#123;<span class="hljs-string">&quot;messages&quot;</span>: [response]&#125;        <span class="hljs-comment"># å¼‚æ­¥ç”Ÿæˆå™¨ä¸èƒ½ä½¿ç”¨returnè¿”å›å€¼</span>    <span class="hljs-comment"># yield result_state</span><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">route_tools</span>(<span class="hljs-params">state: MessagesState</span>) :</span>    <span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">    åœ¨æ¡ä»¶è¾¹ä¸­ä½¿ç”¨,å¦‚æœæœ€åä¸€æ¡æ¶ˆæ¯åŒ…å«å·¥å…·è°ƒç”¨,åˆ™è·¯ç”±åˆ°å·¥å…·èŠ‚ç‚¹,å¦åˆ™è·¯ç”±åˆ°ç»“æŸèŠ‚ç‚¹ã€‚</span><span class="hljs-string">    &quot;&quot;&quot;</span>    messages = state[<span class="hljs-string">&#x27;messages&#x27;</span>]    last_message = messages[-<span class="hljs-number">1</span>]    <span class="hljs-comment"># æ£€æŸ¥æ˜¯å¦æ˜¯AIæ¶ˆæ¯ä¸”æœ‰å·¥å…·è°ƒç”¨</span>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">hasattr</span>(last_message, <span class="hljs-string">&#x27;tool_calls&#x27;</span>) <span class="hljs-keyword">and</span> last_message.tool_calls:        <span class="hljs-comment"># print(&#x27;last_message.tool_calls------&gt;&#x27;,last_message.tool_calls,&#x27;\n&#x27;)</span>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;search_tool&quot;</span>  <span class="hljs-comment"># å¦‚æœæœ‰å·¥å…·è°ƒç”¨ï¼Œè·¯ç”±åˆ°å·¥å…·èŠ‚ç‚¹</span>        <span class="hljs-keyword">return</span> END<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">route_chatbot</span>(<span class="hljs-params">state: MessagesState</span>) :</span>    <span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">    åœ¨æ¡ä»¶è¾¹ä¸­ä½¿ç”¨,å¦‚æœæœ€åä¸€æ¡æ¶ˆæ¯åŒ…å«å·¥å…·è°ƒç”¨,åˆ™è·¯ç”±åˆ°å·¥å…·èŠ‚ç‚¹,å¦åˆ™è·¯ç”±åˆ°ç»“æŸèŠ‚ç‚¹ã€‚</span><span class="hljs-string">    &quot;&quot;&quot;</span>    messages = state[<span class="hljs-string">&#x27;messages&#x27;</span>]    last_message = messages[-<span class="hljs-number">1</span>]    <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(last_message, ToolMessage):        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;chatbot&quot;</span>    <span class="hljs-keyword">return</span> END<span class="hljs-comment"># æ·»åŠ chatbotèŠ‚ç‚¹</span>graph_builder.add_node(<span class="hljs-string">&quot;chatbot&quot;</span>, chatbot_stream)<span class="hljs-comment"># æ·»åŠ å·¥å…·èŠ‚ç‚¹</span>graph_builder.add_node(<span class="hljs-string">&quot;search_tool&quot;</span>, search_tool_node)<span class="hljs-comment"># è®¾ç½®å…¥å£ç‚¹</span>graph_builder.set_entry_point(<span class="hljs-string">&quot;chatbot&quot;</span>)graph_builder.add_conditional_edges(    <span class="hljs-string">&quot;chatbot&quot;</span>,    route_tools)<span class="hljs-comment"># æ·»åŠ ä»toolsåˆ°chatbotçš„è¾¹</span>graph_builder.add_edge(<span class="hljs-string">&quot;search_tool&quot;</span>, <span class="hljs-string">&quot;chatbot&quot;</span>)<span class="hljs-comment"># ç¼–è¯‘å›¾</span>graph = graph_builder.<span class="hljs-built_in">compile</span>()<span class="hljs-comment"># å®šä¹‰ä¸€ä¸ªå°†å›¾å¯¼å‡ºä¸ºPNGçš„å‡½æ•°</span><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">export_graph_to_png</span>():</span>    <span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">    å°†LangGraphå›¾å¯¼å‡ºä¸ºPNGæ ¼å¼</span><span class="hljs-string">    </span><span class="hljs-string">    Returns:</span><span class="hljs-string">        str: ç”Ÿæˆçš„PNGæ–‡ä»¶è·¯å¾„</span><span class="hljs-string">    &quot;&quot;&quot;</span>    <span class="hljs-keyword">try</span>:        output_file=<span class="hljs-string">&#x27;workflow_graph-&#x27;</span> + datetime.now().strftime(<span class="hljs-string">&quot;%Y-%m-%d_%H-%M-%S&quot;</span>) + <span class="hljs-string">&quot;.png&quot;</span>        graph.get_graph().draw_mermaid_png(            draw_method=MermaidDrawMethod.API,            output_file_path=output_file        )    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;å¯¼å‡ºPNGå›¾å½¢æ—¶å‡ºé”™: <span class="hljs-subst">&#123;e&#125;</span>&quot;</span>)        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><span class="hljs-comment"># å¼‚æ­¥è¿è¡Œå‡½æ•°ï¼ˆå¥å£®ç‰ˆæœ¬ï¼‰</span><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run_demo</span>():</span>    <span class="hljs-string">&quot;&quot;&quot;å¼‚æ­¥è¿è¡ŒLangGraphæµå¼è¾“å‡ºæ¼”ç¤º&quot;&quot;&quot;</span>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;å¼€å§‹æµå¼ç”Ÿæˆå›ç­”...\n&quot;</span>)        today = datetime.now().strftime(<span class="hljs-string">&quot;%Y-%m-%d&quot;</span>)    <span class="hljs-comment"># print(&#x27;å½“å‰æ—¥æœŸ:&#x27;,today,&#x27;\n&#x27;)</span>    <span class="hljs-comment"># åˆ›å»ºåˆå§‹æ¶ˆæ¯</span>    system_message = SystemMessage(content=<span class="hljs-string">f&quot;&quot;&quot;</span><span class="hljs-string">        # ä½ æ˜¯ä¸€ä¸ªå–„äºåˆ†æçš„AIåŠ©æ‰‹ã€‚</span><span class="hljs-string">        ## å¯¹äºç”¨æˆ·çš„æ‰€æœ‰é—®é¢˜ï¼Œå…ˆåˆ†ææ˜¯å¦éœ€è¦è°ƒç”¨æœç´¢å·¥å…·ï¼Œå†è¿›è¡Œå›å¤ï¼Œæ¯”å¦‚æŸ¥è¯¢ä¸œè¥¿ï¼Œéœ€è¦è°ƒç”¨æœç´¢å·¥å…·ï¼Œå¦‚æœåªæ˜¯é—®é—®é¢˜ï¼Œåˆ™ä¸éœ€è¦è°ƒç”¨æœç´¢å·¥å…·ã€‚</span><span class="hljs-string">        ## è¯·ç‰¢è®°ä»Šå¤©çš„æ—¥æœŸæ˜¯<span class="hljs-subst">&#123;today&#125;</span>,è°ƒç”¨å·¥å…·æ—¶ï¼Œç›´æ¥ä½¿ç”¨<span class="hljs-subst">&#123;today&#125;</span>çš„æ—¥æœŸã€‚</span><span class="hljs-string">        - åˆ†æç¤ºä¾‹:æ¯”å¦‚ç”¨æˆ·è¯¢é—®æ—¥å†,æ˜Ÿåº§,é»„å†,æ–°é—»ç­‰å®æ—¶æŸ¥è¯¢ç›¸å…³;æ¯”å¦‚è¯¢é—®ä»Šå¤©çš„æ–°é—»æˆ–ä»Šå¤©çš„æ—¥å†ã€‚ç›´æ¥æŠŠ<span class="hljs-subst">&#123;today&#125;</span>çš„æ—¥æœŸä½œä¸ºå‚æ•°ä¼ ç»™æœç´¢å·¥å…·å»åšæœç´¢ã€‚</span><span class="hljs-string">        - æ¯ä¸ªæœç´¢ç»“æœéƒ½éœ€è¦æŒ‰ç…§ä»¥ä¸‹æ ¼å¼è¿”å›ï¼š</span><span class="hljs-string">            - æ ‡é¢˜ï¼š</span><span class="hljs-string">            - æ‘˜è¦ï¼š</span><span class="hljs-string">            - é“¾æ¥ï¼š</span><span class="hljs-string">    &quot;&quot;&quot;</span>)    first_message = HumanMessage(content=<span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">        è¯·å¸®æˆ‘æœç´¢ä¸‹å®¤å†…é€‚åˆç§æ¤ä»€ä¹ˆèŠ±?</span><span class="hljs-string">    &quot;&quot;&quot;</span>)        <span class="hljs-comment"># åˆå§‹åŒ–çŠ¶æ€</span>    initial_state = &#123;<span class="hljs-string">&quot;messages&quot;</span>: [system_message, first_message]&#125;    on_chat_model_stream_list = []    <span class="hljs-keyword">try</span>:        <span class="hljs-comment"># å¼‚æ­¥æ‰§è¡Œæµå¼è¾“å‡º</span>        <span class="hljs-keyword">async</span> <span class="hljs-keyword">for</span> event <span class="hljs-keyword">in</span> graph.astream_events(initial_state, config=&#123;<span class="hljs-string">&quot;configurable&quot;</span>: &#123;<span class="hljs-string">&quot;thread_id&quot;</span>: <span class="hljs-string">&quot;1&quot;</span>&#125;&#125;, version=<span class="hljs-string">&quot;v2&quot;</span>):            <span class="hljs-comment"># å®šä¹‰ä¸€ä¸ªå˜é‡æ¥æ”¶æ‰€æœ‰on_chat_model_streamçš„å€¼</span>            <span class="hljs-comment"># print(&#x27;event------&gt;&#x27;,event,&#x27;\n\n&#x27;)</span>            event_type = event[<span class="hljs-string">&#x27;event&#x27;</span>]            <span class="hljs-keyword">if</span> event_type == <span class="hljs-string">&#x27;on_tool_start&#x27;</span> <span class="hljs-keyword">and</span> event[<span class="hljs-string">&#x27;data&#x27;</span>]:                <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;å¼€å§‹è°ƒç”¨å·¥å…·æŸ¥è¯¢&#x27;</span>, event[<span class="hljs-string">&#x27;data&#x27;</span>],<span class="hljs-string">&#x27;\n\n&#x27;</span>)            <span class="hljs-keyword">elif</span> event_type == <span class="hljs-string">&#x27;on_tool_end&#x27;</span> <span class="hljs-keyword">and</span> event[<span class="hljs-string">&#x27;data&#x27;</span>]:                <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;å·¥å…·æŸ¥è¯¢ç»“æŸ&#x27;</span>,event[<span class="hljs-string">&#x27;data&#x27;</span>],<span class="hljs-string">&#x27;\n\n&#x27;</span>)            <span class="hljs-keyword">elif</span> event_type == <span class="hljs-string">&#x27;on_chat_model_stream&#x27;</span>:                <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;on_chat_model_streamäº‹ä»¶------&gt;&#x27;</span>,event[<span class="hljs-string">&quot;data&quot;</span>][<span class="hljs-string">&quot;chunk&quot;</span>].content,<span class="hljs-string">&#x27;\n\n&#x27;</span>)                on_chat_model_stream_list.append(event[<span class="hljs-string">&quot;data&quot;</span>][<span class="hljs-string">&quot;chunk&quot;</span>].content)    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;graph.astream_eventsæ‰§è¡Œå‡ºé”™: <span class="hljs-subst">&#123;e&#125;</span>&quot;</span>)        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\nç”Ÿæˆå®Œæˆï¼&quot;</span>,<span class="hljs-string">&quot;&quot;</span>.join(on_chat_model_stream_list),<span class="hljs-string">&#x27;\n\n&#x27;</span>)    <span class="hljs-comment"># å±•ç¤ºå›¾å½¢</span>    <span class="hljs-keyword">try</span>:        <span class="hljs-comment"># # ä½¿ç”¨å®˜æ–¹æ–‡æ¡£æ¨èçš„æ–¹æ³•ç»˜åˆ¶Mermaidå›¾</span>        <span class="hljs-comment"># print(&quot;ä½¿ç”¨å®˜æ–¹æ–¹æ³•ç»˜åˆ¶Mermaidå›¾...&quot;)</span>        mermaid_diagram = graph.get_graph().draw_mermaid()        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;```mermaid\n<span class="hljs-subst">&#123;mermaid_diagram&#125;</span>\n```&quot;</span>)                <span class="hljs-comment"># # å¯¼å‡ºä¸ºPNG</span>        <span class="hljs-comment"># print(&quot;\næ­£åœ¨å¯¼å‡ºä¸ºPNGå›¾ç‰‡...&quot;)</span>        export_graph_to_png()    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;å›¾è¡¨ç»˜åˆ¶å‡ºé”™: <span class="hljs-subst">&#123;e&#125;</span>&quot;</span>)    <span class="hljs-comment"># æ‰§è¡Œå¼‚æ­¥å‡½æ•°</span><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:    asyncio.run(run_demo())</code></pre></div>]]></content>
    
    
    <categories>
      
      <category>AIç›¸å…³</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Langgraph</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å¼€å‘ä¸€ä¸ªæœ¬åœ°MCP Serverè¿›è¡Œcode review</title>
    <link href="/2025/03/28/%E5%BC%80%E5%8F%91%E4%B8%80%E4%B8%AA%E6%9C%AC%E5%9C%B0MCP%E5%B7%A5%E5%85%B7%E8%BF%9B%E8%A1%8C%E4%BB%A3%E7%A0%81review/"/>
    <url>/2025/03/28/%E5%BC%80%E5%8F%91%E4%B8%80%E4%B8%AA%E6%9C%AC%E5%9C%B0MCP%E5%B7%A5%E5%85%B7%E8%BF%9B%E8%A1%8C%E4%BB%A3%E7%A0%81review/</url>
    
    <content type="html"><![CDATA[<h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><p>ç›®å‰å¼€å‘å›¢é˜Ÿä¼šå®šæœŸä½¿ç”¨AIææ•ˆè¿›è¡Œcode reviewï¼Œä½†ç”±äºæ¯ä¸ªå¼€å‘äººå‘˜ä½¿ç”¨çš„ä¸åŒçš„AIç¼–ç¨‹å·¥å…·ï¼Œæœ‰ä¸åŒçš„LLMå’ŒIDEï¼Œå„è‡ªæäº¤çš„å®¡æŸ¥æŠ¥å‘Šé£æ ¼å’Œç»Ÿè®¡ä¼šå› ä¸ºLLMçš„ä¸åŒè€Œä¸ç»Ÿä¸€ã€‚<br>å°è¯•å¼€å‘ä¸€ä¸ªæœ¬åœ°çš„MCPå·¥å…·ï¼Œè¿™æ ·å¤§å®¶å¯ä»¥ç”¨ç»Ÿä¸€æ¨¡å‹ã€ç»Ÿä¸€å·¥å…·è¿›è¡ŒcodeÂ reviewå·¥ä½œï¼Œä»¥ä¿è¯ä½¿ç”¨ç›¸åŒçš„AIæ¨¡å‹è¾“å‡ºç»“æœçš„è´¨é‡å’Œé£æ ¼æ˜¯åŒºåˆ«ä¸å¤§çš„ã€‚<br>ä¹‹æ‰€ä»¥å¼€å‘æœ¬åœ°çš„ï¼Œæ˜¯å› ä¸ºå‰æœŸéœ€è¦å®éªŒè¿™ä¸ªmcpå·¥å…·çš„å®é™…æ•ˆæœï¼Œä¸éœ€è¦åœ¨å·¥å…·ä¸­å†è°ƒç”¨gitå·¥å…·å»çº¿ä¸Šå–ä»£ç æäº¤è®°å½•ä¸­çš„æ–‡ä»¶ã€‚</p><blockquote><p><strong>æ­¤å·¥å…·çš„å®Œæ•´ä»£ç å’Œä½¿ç”¨ç¤ºä¾‹å·²ä¸Šä¼ gitï¼Œæ¬¢è¿ç»™ä¸ªStar~~</strong><br>  <a href="https://github.com/wenkil/mcp_review_code_tool">https://github.com/wenkil/mcp_review_code_tool</a></p></blockquote><h2 id="å¼€å‘è°ƒè¯•è¿‡ç¨‹"><a href="#å¼€å‘è°ƒè¯•è¿‡ç¨‹" class="headerlink" title="å¼€å‘è°ƒè¯•è¿‡ç¨‹"></a>å¼€å‘è°ƒè¯•è¿‡ç¨‹</h2><p>å…ˆé€šè¿‡å®˜æ–¹æ–‡æ¡£æ”¹é€ ä¸€ä¸ªmcp æœåŠ¡å™¨çš„tsä»£ç ï¼ˆæ³¨æ„è¿™é‡Œä½¿ç”¨çš„æ–°ç‰ˆSDKé‡Œçš„McpServerä¸æ˜¯Serverï¼‰ï¼š<br><a href="https://github.com/modelcontextprotocol/typescript-sdk">https://github.com/modelcontextprotocol/typescript-sdk</a></p><details><summary>å±•å¼€/æ”¶èµ·</summary><div class="code-wrapper"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123; McpServer &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@modelcontextprotocol/sdk/server/mcp.js&quot;</span>;<span class="hljs-keyword">import</span> &#123; StdioServerTransport &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@modelcontextprotocol/sdk/server/stdio.js&quot;</span>;<span class="hljs-keyword">import</span> &#123; z &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;zod&quot;</span>;<span class="hljs-keyword">import</span> &#123; promises <span class="hljs-keyword">as</span> fs &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;fs&quot;</span>;<span class="hljs-keyword">import</span> path <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;path&quot;</span>;<span class="hljs-comment">/**</span><span class="hljs-comment"> * æ—¥å¿—çº§åˆ«æšä¸¾</span><span class="hljs-comment"> * <span class="hljs-doctag">@enum <span class="hljs-type">&#123;string&#125;</span></span></span><span class="hljs-comment"> */</span><span class="hljs-built_in">enum</span> LogLevel &#123;  DEBUG = <span class="hljs-string">&quot;DEBUG&quot;</span>,  INFO = <span class="hljs-string">&quot;INFO&quot;</span>,  WARN = <span class="hljs-string">&quot;WARN&quot;</span>,  ERROR = <span class="hljs-string">&quot;ERROR&quot;</span>&#125;<span class="hljs-comment">/**</span><span class="hljs-comment"> * æ˜¯å¦å¯ç”¨æ§åˆ¶å°æ—¥å¿—</span><span class="hljs-comment"> * <span class="hljs-doctag">@type <span class="hljs-type">&#123;boolean&#125;</span></span></span><span class="hljs-comment"> */</span><span class="hljs-keyword">const</span> ENABLE_CONSOLE_LOG = <span class="hljs-literal">true</span>;<span class="hljs-comment">/**</span><span class="hljs-comment"> * æ—¥å¿—æ–‡ä»¶è·¯å¾„</span><span class="hljs-comment"> * <span class="hljs-doctag">@type <span class="hljs-type">&#123;string&#125;</span></span></span><span class="hljs-comment"> */</span><span class="hljs-keyword">const</span> LOG_FILE_PATH = <span class="hljs-string">&quot;code-review-mcp.log&quot;</span>;<span class="hljs-comment">/**</span><span class="hljs-comment"> * ä»£ç è¯„å®¡çš„ç»“æœæ¥å£</span><span class="hljs-comment"> * <span class="hljs-doctag">@interface <span class="hljs-variable">ReviewResult</span></span></span><span class="hljs-comment"> */</span><span class="hljs-keyword">interface</span> ReviewResult &#123;  <span class="hljs-attr">filePath</span>: <span class="hljs-built_in">string</span>;  llmResponse: <span class="hljs-built_in">string</span>;  message: <span class="hljs-built_in">string</span>;&#125;<span class="hljs-comment">/**</span><span class="hljs-comment"> * è®°å½•æ—¥å¿—åˆ°æ–‡ä»¶å’Œæ§åˆ¶å°</span><span class="hljs-comment"> * <span class="hljs-doctag">@param <span class="hljs-type">&#123;string&#125;</span> <span class="hljs-variable">message</span></span> - è¦è®°å½•çš„æ¶ˆæ¯</span><span class="hljs-comment"> * <span class="hljs-doctag">@param <span class="hljs-type">&#123;LogLevel&#125;</span> <span class="hljs-variable">level</span></span> - æ—¥å¿—çº§åˆ«</span><span class="hljs-comment"> */</span><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">logToFile</span>(<span class="hljs-params">message: <span class="hljs-built_in">string</span>, level: LogLevel = LogLevel.INFO</span>) </span>&#123;  <span class="hljs-keyword">const</span> timestamp = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().toISOString();  <span class="hljs-keyword">const</span> logMessage = <span class="hljs-string">`[<span class="hljs-subst">$&#123;timestamp&#125;</span>] [<span class="hljs-subst">$&#123;level&#125;</span>]: <span class="hljs-subst">$&#123;message&#125;</span>`</span>;    <span class="hljs-keyword">try</span> &#123;    <span class="hljs-keyword">await</span> fs.appendFile(LOG_FILE_PATH, <span class="hljs-string">`<span class="hljs-subst">$&#123;logMessage&#125;</span>\n`</span>);        <span class="hljs-comment">// åŒæ—¶è¾“å‡ºåˆ°æ§åˆ¶å°ï¼Œæ–¹ä¾¿è°ƒè¯•</span>    <span class="hljs-keyword">if</span> (ENABLE_CONSOLE_LOG) &#123;      <span class="hljs-keyword">switch</span> (level) &#123;        <span class="hljs-keyword">case</span> LogLevel.ERROR:          <span class="hljs-built_in">console</span>.error(logMessage);          <span class="hljs-keyword">break</span>;        <span class="hljs-keyword">case</span> LogLevel.WARN:          <span class="hljs-built_in">console</span>.warn(logMessage);          <span class="hljs-keyword">break</span>;        <span class="hljs-keyword">case</span> LogLevel.DEBUG:          <span class="hljs-built_in">console</span>.debug(logMessage);          <span class="hljs-keyword">break</span>;        <span class="hljs-keyword">default</span>:          <span class="hljs-built_in">console</span>.log(logMessage);      &#125;    &#125;  &#125; <span class="hljs-keyword">catch</span> (error) &#123;    <span class="hljs-built_in">console</span>.error(<span class="hljs-string">`æ—¥å¿—è®°å½•å¤±è´¥: <span class="hljs-subst">$&#123;error&#125;</span>`</span>);  &#125;&#125;<span class="hljs-comment">/**</span><span class="hljs-comment"> * è¯»å–æ–‡ä»¶å†…å®¹</span><span class="hljs-comment"> * <span class="hljs-doctag">@param <span class="hljs-type">&#123;string&#125;</span> <span class="hljs-variable">filePath</span></span> - æ–‡ä»¶çš„ç»å¯¹è·¯å¾„</span><span class="hljs-comment"> * <span class="hljs-doctag">@returns <span class="hljs-type">&#123;Promise&lt;string&gt;&#125;</span> </span>æ–‡ä»¶å†…å®¹</span><span class="hljs-comment"> */</span><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">readFileContent</span>(<span class="hljs-params">filePath: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">Promise</span>&lt;<span class="hljs-title">string</span>&gt; </span>&#123;  <span class="hljs-keyword">try</span> &#123;    <span class="hljs-keyword">await</span> logToFile(<span class="hljs-string">`å¼€å§‹è¯»å–æ–‡ä»¶: <span class="hljs-subst">$&#123;filePath&#125;</span>`</span>, LogLevel.DEBUG);    <span class="hljs-keyword">const</span> content = <span class="hljs-keyword">await</span> fs.readFile(filePath, <span class="hljs-string">&quot;utf-8&quot;</span>);    <span class="hljs-keyword">await</span> logToFile(<span class="hljs-string">`æˆåŠŸè¯»å–æ–‡ä»¶: <span class="hljs-subst">$&#123;filePath&#125;</span>ï¼Œå¤§å°: <span class="hljs-subst">$&#123;content.length&#125;</span> å­—èŠ‚`</span>, LogLevel.DEBUG);    <span class="hljs-keyword">return</span> content;  &#125; <span class="hljs-keyword">catch</span> (error) &#123;    <span class="hljs-keyword">await</span> logToFile(<span class="hljs-string">`æ— æ³•è¯»å–æ–‡ä»¶ <span class="hljs-subst">$&#123;filePath&#125;</span>: <span class="hljs-subst">$&#123;error&#125;</span>`</span>, LogLevel.ERROR);    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">`æ— æ³•è¯»å–æ–‡ä»¶ <span class="hljs-subst">$&#123;filePath&#125;</span>: <span class="hljs-subst">$&#123;error&#125;</span>`</span>);  &#125;&#125;<span class="hljs-comment">/**</span><span class="hljs-comment"> * æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨</span><span class="hljs-comment"> * <span class="hljs-doctag">@param <span class="hljs-type">&#123;string&#125;</span> <span class="hljs-variable">filePath</span></span> - æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ </span><span class="hljs-comment"> * <span class="hljs-doctag">@returns <span class="hljs-type">&#123;Promise&lt;boolean&gt;&#125;</span> </span>æ–‡ä»¶æ˜¯å¦å­˜åœ¨</span><span class="hljs-comment"> */</span><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fileExists</span>(<span class="hljs-params">filePath: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">Promise</span>&lt;<span class="hljs-title">boolean</span>&gt; </span>&#123;  <span class="hljs-keyword">try</span> &#123;    <span class="hljs-keyword">await</span> fs.access(filePath);    <span class="hljs-keyword">await</span> logToFile(<span class="hljs-string">`æ–‡ä»¶å­˜åœ¨: <span class="hljs-subst">$&#123;filePath&#125;</span>`</span>, LogLevel.DEBUG);    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;  &#125; <span class="hljs-keyword">catch</span> &#123;    <span class="hljs-keyword">await</span> logToFile(<span class="hljs-string">`æ–‡ä»¶ä¸å­˜åœ¨: <span class="hljs-subst">$&#123;filePath&#125;</span>`</span>, LogLevel.WARN);    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;  &#125;&#125;<span class="hljs-comment">/**</span><span class="hljs-comment"> * ä½¿ç”¨å¤§è¯­è¨€æ¨¡å‹åˆ†æä»£ç </span><span class="hljs-comment"> * <span class="hljs-doctag">@param <span class="hljs-type">&#123;string&#125;</span> <span class="hljs-variable">filePath</span></span> - æ–‡ä»¶è·¯å¾„</span><span class="hljs-comment"> * <span class="hljs-doctag">@param <span class="hljs-type">&#123;string&#125;</span> <span class="hljs-variable">content</span></span> - æ–‡ä»¶å†…å®¹</span><span class="hljs-comment"> * <span class="hljs-doctag">@returns <span class="hljs-type">&#123;Promise&lt;ReviewResult&gt;&#125;</span> </span>ä»£ç åˆ†æç»“æœ</span><span class="hljs-comment"> */</span><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">analyzeLLM</span>(<span class="hljs-params">filePath: <span class="hljs-built_in">string</span>, content: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">Promise</span>&lt;<span class="hljs-title">ReviewResult</span>&gt; </span>&#123;  <span class="hljs-keyword">try</span> &#123;    <span class="hljs-keyword">await</span> logToFile(<span class="hljs-string">`å¼€å§‹ä½¿ç”¨LLMåˆ†ææ–‡ä»¶: <span class="hljs-subst">$&#123;filePath&#125;</span>`</span>, LogLevel.INFO);        <span class="hljs-comment">// æå–æ–‡ä»¶ç±»å‹</span>    <span class="hljs-keyword">const</span> extension = path.extname(filePath).toLowerCase();    <span class="hljs-keyword">await</span> logToFile(<span class="hljs-string">`æ–‡ä»¶ç±»å‹: <span class="hljs-subst">$&#123;extension&#125;</span>`</span>, LogLevel.DEBUG);    <span class="hljs-comment">// æ„å»ºæç¤ºè¯</span>    <span class="hljs-keyword">const</span> prompt = <span class="hljs-string">`</span><span class="hljs-string">    ## æ ¹æ®è¦æ±‚å¯¹ä»¥ä¸‹<span class="hljs-subst">$&#123;extension&#125;</span>ä»£ç è¿›è¡Œä»£ç è¯„å®¡ï¼Œè¯†åˆ«æ½œåœ¨çš„é—®é¢˜ã€‚è¦æ±‚ï¼š</span><span class="hljs-string">    1.**ç»Ÿè®¡ä»£ç è¡Œæ•°åŠæ³¨é‡Šç‡**ï¼š</span><span class="hljs-string">      - è®¡ç®—è¯¥æ–‡ä»¶çš„æ€»è¡Œæ•°ã€‚</span><span class="hljs-string">      - è®¡ç®—æ³¨é‡Šè¡Œæ•°ï¼ˆå¦‚//ã€#æˆ–/* */ç­‰æ³¨é‡Šæ–¹å¼ï¼‰ã€‚</span><span class="hljs-string">      - è®¡ç®—æ³¨é‡Šç‡ = æ³¨é‡Šè¡Œæ•° / æ€»è¡Œæ•°ã€‚</span><span class="hljs-string">    2.**è¯„ä»·ä»£ç è´¨é‡**ï¼š</span><span class="hljs-string">      åœ¨ä»¥ä¸‹å…­ä¸ªæ–¹é¢è¿›è¡Œè¯„åˆ†ï¼ˆ0åˆ°10åˆ†ï¼‰ï¼Œå¹¶ç»™å‡ºå¹³å‡åˆ†ï¼š</span><span class="hljs-string">      - **å¯è¯»æ€§ï¼ˆReadabilityï¼‰**ï¼šä»£ç æ˜“äºç†è§£ç¨‹åº¦ã€‚</span><span class="hljs-string">      - **ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰**ï¼šç¼–ç é£æ ¼å’Œå‘½åçš„ä¸€è‡´æ€§ã€‚</span><span class="hljs-string">      - **æ¨¡å—åŒ–ï¼ˆModularityï¼‰**ï¼šä»£ç åˆ†å—å’ŒåŠŸèƒ½å•å…ƒåˆ’åˆ†ã€‚</span><span class="hljs-string">      - **å¯ç»´æŠ¤æ€§ï¼ˆMaintainabilityï¼‰**ï¼šä»£ç æ˜“äºä¿®æ”¹å’Œæ‰©å±•çš„èƒ½åŠ›ã€‚</span><span class="hljs-string">      - **æ€§èƒ½ï¼ˆPerformanceï¼‰**ï¼šä»£ç æ‰§è¡Œæ•ˆç‡ã€‚</span><span class="hljs-string">      - **æ–‡æ¡£åŒ–ï¼ˆDocumentationï¼‰**ï¼šä»£ç é™„å¸¦çš„è¯´æ˜å’Œæ–‡æ¡£è´¨é‡ã€‚</span><span class="hljs-string">    3. **ç”Ÿæˆæ€»ä½“æŠ¥å‘Š**ï¼š</span><span class="hljs-string">      - å°†æ‰€æœ‰åˆ†æ­¥ä¿¡æ¯æ•´ç†æˆä¸€ä¸ªmarkdownç»“æ„ã€‚</span><span class="hljs-string">      - å†…å®¹åº”åŒ…æ‹¬ï¼šç¬¬ä¸€éƒ¨åˆ†ï¼šæ–‡ä»¶åˆ—è¡¨æ±‡æ€»ï¼ˆæ¯ä¸ªæ–‡ä»¶çš„æ€»è¡Œæ•°ã€æ³¨é‡Šç‡è¯„åˆ†ï¼Œ 6ç»´è¯„åˆ†ï¼Œå¾—åˆ†æ¯”è¾ƒä½æˆ–è€…è¡Œæ•°æ¯”è¾ƒå¤šï¼Œæˆ–è€…æ³¨é‡Šç‡æ¯”è¾ƒä½çš„ç”¨é¢œè‰²é«˜äº®å‡ºæ¥ï¼Œæ¯”å¦‚é»„è‰²å’Œçº¢è‰²ï¼‰ï¼›ç¬¬äºŒéƒ¨åˆ†æ¯ä¸€ä¸ªæ–‡ä»¶çš„åŠŸèƒ½æè¿°ï¼Œä»¥åŠåœ¨å…­ä¸ªè´¨é‡å› ç´ ä¸Šçš„è¯„åˆ†ä»¥åŠè¯´æ˜ï¼›ç¬¬ä¸‰éƒ¨åˆ†ï¼Œæ€»ç»“</span><span class="hljs-string"></span><span class="hljs-string">      ä»¥ä¸‹æ˜¯è¦è¯„å®¡çš„ä»£ç ï¼š</span><span class="hljs-string">      \`\`\`</span><span class="hljs-string">      <span class="hljs-subst">$&#123;extension&#125;</span></span><span class="hljs-string">      <span class="hljs-subst">$&#123;content&#125;</span></span><span class="hljs-string">      \`\`\`</span><span class="hljs-string">    `</span>;    <span class="hljs-keyword">await</span> logToFile(<span class="hljs-string">`å‡†å¤‡è°ƒç”¨OpenRouter API`</span>, LogLevel.DEBUG);        <span class="hljs-comment">// è°ƒç”¨å…è´¹OpenRouter APIè¿›è¡Œæ¼”ç¤ºï¼Œå®é™…å¯ä½¿ç”¨å…¬å¸å†…éƒ¨è´­ä¹°çš„LLM api</span>    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> fetch(<span class="hljs-string">&#x27;https://openrouter.ai/api/v1/chat/completions&#x27;</span>, &#123;      <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;POST&#x27;</span>,      <span class="hljs-attr">headers</span>: &#123;        <span class="hljs-string">&#x27;Authorization&#x27;</span>: <span class="hljs-string">&#x27;Bearer è¿™é‡Œéœ€è¦å»ç”³è¯·ä½ è‡ªå·±çš„key&#x27;</span>,        <span class="hljs-string">&#x27;Content-Type&#x27;</span>: <span class="hljs-string">&#x27;application/json&#x27;</span>,      &#125;,      <span class="hljs-attr">body</span>: <span class="hljs-built_in">JSON</span>.stringify(&#123;        <span class="hljs-comment">// &quot;model&quot;: &quot;qwen/qwen-2.5-coder-32b-instruct:free&quot;,</span>        <span class="hljs-string">&quot;model&quot;</span>: <span class="hljs-string">&quot;deepseek/deepseek-chat-v3-0324:free&quot;</span>,        <span class="hljs-attr">messages</span>: [          &#123;            <span class="hljs-attr">role</span>: <span class="hljs-string">&#x27;user&#x27;</span>,            <span class="hljs-attr">content</span>: prompt,          &#125;,        ],      &#125;),    &#125;);    <span class="hljs-keyword">if</span> (!response.ok) &#123;      <span class="hljs-keyword">const</span> errorText = <span class="hljs-string">`APIè¯·æ±‚å¤±è´¥: <span class="hljs-subst">$&#123;response.status&#125;</span> <span class="hljs-subst">$&#123;response.statusText&#125;</span>`</span>;      <span class="hljs-keyword">await</span> logToFile(errorText, LogLevel.ERROR);      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(errorText);    &#125;    <span class="hljs-keyword">await</span> logToFile(<span class="hljs-string">`OpenRouter APIå“åº”æˆåŠŸ`</span>, LogLevel.DEBUG);        <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> response.json();    <span class="hljs-keyword">const</span> llmResponse = data.choices[<span class="hljs-number">0</span>].message.content;    <span class="hljs-keyword">await</span> logToFile(<span class="hljs-string">`è·å–åˆ°LLMå“åº”ï¼Œå“åº”é•¿åº¦: <span class="hljs-subst">$&#123;llmResponse.length&#125;</span>å­—ç¬¦`</span>, LogLevel.DEBUG);    <span class="hljs-keyword">return</span> &#123;      filePath,      llmResponse,      <span class="hljs-attr">message</span>: <span class="hljs-string">`å¯¹ <span class="hljs-subst">$&#123;path.basename(filePath)&#125;</span> çš„ä»£ç è¯„å®¡å®Œæˆ`</span>,    &#125;;  &#125; <span class="hljs-keyword">catch</span> (error) &#123;    <span class="hljs-keyword">await</span> logToFile(<span class="hljs-string">`LLMåˆ†æå¤±è´¥: <span class="hljs-subst">$&#123;error&#125;</span>`</span>, LogLevel.ERROR);    <span class="hljs-keyword">return</span> &#123;      filePath,      <span class="hljs-attr">llmResponse</span>: <span class="hljs-string">``</span>,      <span class="hljs-attr">message</span>: <span class="hljs-string">`LLMåˆ†æå¤±è´¥: <span class="hljs-subst">$&#123;error&#125;</span>`</span>,    &#125;;  &#125;&#125;<span class="hljs-comment">/**</span><span class="hljs-comment"> * åˆ›å»ºMCPæœåŠ¡å™¨å®ä¾‹</span><span class="hljs-comment"> */</span><span class="hljs-keyword">const</span> server = <span class="hljs-keyword">new</span> McpServer(&#123;  <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;ä»£ç è¯„å®¡å·¥å…·&quot;</span>,  <span class="hljs-attr">version</span>: <span class="hljs-string">&quot;1.0.0&quot;</span>,&#125;);<span class="hljs-comment">// è®°å½•æœåŠ¡å™¨å¯åŠ¨æ—¥å¿—</span>logToFile(<span class="hljs-string">&quot;MCPä»£ç è¯„å®¡æœåŠ¡å™¨æ­£åœ¨å¯åŠ¨...&quot;</span>, LogLevel.INFO);<span class="hljs-comment">/**</span><span class="hljs-comment"> * ä»£ç è¯„å®¡å·¥å…·</span><span class="hljs-comment"> * <span class="hljs-doctag">@param <span class="hljs-type">&#123;string[]&#125;</span> <span class="hljs-variable">filePaths</span></span> - æ–‡ä»¶çš„ç»å¯¹è·¯å¾„æ•°ç»„</span><span class="hljs-comment"> * <span class="hljs-doctag">@returns <span class="hljs-type">&#123;Promise&lt;&#123; content: &#123; type: string, text: string &#125;</span></span>[] &#125;&gt;&#125; ä»£ç è¯„å®¡ç»“æœ</span><span class="hljs-comment"> */</span>server.tool(  <span class="hljs-string">&quot;reviewCode_tool&quot;</span>,  <span class="hljs-string">&quot;æ ¹æ®è¦æ±‚è¿›è¡Œä»£ç è¯„å®¡ï¼Œæ€»ç»“ä»£ç è´¨é‡&quot;</span>,  &#123; <span class="hljs-attr">filePaths</span>: z.array(z.string()) &#125;,  <span class="hljs-keyword">async</span> (&#123; filePaths &#125;) =&gt; &#123;    <span class="hljs-keyword">await</span> logToFile(<span class="hljs-string">`ä»£ç è¯„å®¡å·¥å…·è¢«è°ƒç”¨ï¼Œæ–‡ä»¶æ•°é‡: <span class="hljs-subst">$&#123;filePaths.length&#125;</span>`</span>, LogLevel.INFO);    <span class="hljs-keyword">await</span> logToFile(<span class="hljs-string">`æ–‡ä»¶åˆ—è¡¨: <span class="hljs-subst">$&#123;<span class="hljs-built_in">JSON</span>.stringify(filePaths)&#125;</span>`</span>, LogLevel.DEBUG);    <span class="hljs-keyword">const</span> results: ReviewResult[] = [];    <span class="hljs-keyword">const</span> errors: <span class="hljs-built_in">string</span>[] = [];    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> filePath <span class="hljs-keyword">of</span> filePaths) &#123;      <span class="hljs-keyword">try</span> &#123;        <span class="hljs-keyword">await</span> logToFile(<span class="hljs-string">`å¼€å§‹å¤„ç†æ–‡ä»¶: <span class="hljs-subst">$&#123;filePath&#125;</span>`</span>, LogLevel.INFO);        <span class="hljs-comment">// æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨</span>        <span class="hljs-keyword">const</span> exists = <span class="hljs-keyword">await</span> fileExists(filePath);        <span class="hljs-keyword">if</span> (!exists) &#123;          <span class="hljs-keyword">const</span> errorMsg = <span class="hljs-string">`æ–‡ä»¶ä¸å­˜åœ¨: <span class="hljs-subst">$&#123;filePath&#125;</span>`</span>;          errors.push(errorMsg);          <span class="hljs-keyword">await</span> logToFile(errorMsg, LogLevel.ERROR);          <span class="hljs-keyword">continue</span>;        &#125;        <span class="hljs-comment">// è¯»å–æ–‡ä»¶å†…å®¹</span>        <span class="hljs-keyword">const</span> content = <span class="hljs-keyword">await</span> readFileContent(filePath);        <span class="hljs-comment">// ä½¿ç”¨LLMåˆ†ææ‰€æœ‰ç±»å‹çš„æ–‡ä»¶</span>        <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> analyzeLLM(filePath, content);        <span class="hljs-keyword">await</span> logToFile(<span class="hljs-string">`å®Œæˆæ–‡ä»¶åˆ†æ: <span class="hljs-subst">$&#123;filePath&#125;</span>`</span>, LogLevel.INFO);        results.push(result);      &#125; <span class="hljs-keyword">catch</span> (error) &#123;        <span class="hljs-keyword">const</span> errorMsg = <span class="hljs-string">`å¤„ç†æ–‡ä»¶æ—¶å‡ºé”™ <span class="hljs-subst">$&#123;filePath&#125;</span>: <span class="hljs-subst">$&#123;error&#125;</span>`</span>;        <span class="hljs-keyword">await</span> logToFile(errorMsg, LogLevel.ERROR);        errors.push(errorMsg);      &#125;    &#125;    <span class="hljs-comment">// æ„å»ºå“åº”</span>    <span class="hljs-keyword">const</span> response = &#123;      results,      errors,      <span class="hljs-attr">message</span>: <span class="hljs-string">`å·²åˆ†æ <span class="hljs-subst">$&#123;results.length&#125;</span> ä¸ªæ–‡ä»¶ï¼Œå¤±è´¥ <span class="hljs-subst">$&#123;errors.length&#125;</span> ä¸ªæ–‡ä»¶`</span>,    &#125;;    <span class="hljs-keyword">await</span> logToFile(<span class="hljs-string">`ä»£ç è¯„å®¡å®Œæˆï¼Œç»“æœ: <span class="hljs-subst">$&#123;response.message&#125;</span>`</span>, LogLevel.INFO);        <span class="hljs-keyword">return</span> &#123;      <span class="hljs-attr">content</span>: [&#123; <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;text&quot;</span>, <span class="hljs-attr">text</span>: <span class="hljs-built_in">JSON</span>.stringify(response, <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>) &#125;],    &#125;;  &#125;);<span class="hljs-comment">// æ³¨å†ŒæœåŠ¡å™¨è¿æ¥äº‹ä»¶</span><span class="hljs-comment">// server.on(&quot;connected&quot;, () =&gt; &#123;</span><span class="hljs-comment">//   logToFile(&quot;MCPæœåŠ¡å™¨å·²è¿æ¥ï¼Œç­‰å¾…è¯·æ±‚...&quot;, LogLevel.INFO);</span><span class="hljs-comment">// &#125;);</span><span class="hljs-comment">// server.on(&quot;error&quot;, (error) =&gt; &#123;</span><span class="hljs-comment">//   logToFile(`MCPæœåŠ¡å™¨é”™è¯¯: $&#123;error&#125;`, LogLevel.ERROR);</span><span class="hljs-comment">// &#125;);</span><span class="hljs-keyword">const</span> transport = <span class="hljs-keyword">new</span> StdioServerTransport();<span class="hljs-comment">// è¿æ¥æœåŠ¡å™¨å¹¶è®°å½•æ—¥å¿—</span><span class="hljs-keyword">try</span> &#123;  <span class="hljs-keyword">await</span> server.connect(transport);  <span class="hljs-keyword">await</span> logToFile(<span class="hljs-string">&quot;MCPæœåŠ¡å™¨å·²å¯åŠ¨å¹¶è¿æ¥&quot;</span>, LogLevel.INFO);&#125; <span class="hljs-keyword">catch</span> (error) &#123;  <span class="hljs-keyword">await</span> logToFile(<span class="hljs-string">`MCPæœåŠ¡å™¨è¿æ¥å¤±è´¥: <span class="hljs-subst">$&#123;error&#125;</span>`</span>, LogLevel.ERROR);&#125;</code></pre></div></details><h3 id="ç¬¬ä¸€ä¸ªé—®é¢˜"><a href="#ç¬¬ä¸€ä¸ªé—®é¢˜" class="headerlink" title="ç¬¬ä¸€ä¸ªé—®é¢˜"></a>ç¬¬ä¸€ä¸ªé—®é¢˜</h3><p>ç»è¿‡å¤šæ¬¡æµ‹è¯•ï¼Œclaudeå¶å°”ä¼šå‡ºç°è·¯å¾„ä¸»åŠ¨æŠŠæ–‡ä»¶è·¯å¾„åšäº†è½¬æ¢ï¼Œå¯¼è‡´toolæ‰¾ä¸åˆ°è¯¥æ–‡ä»¶è¿›è¡Œè¯»å–ï¼š</p><details><summary>å±•å¼€/æ”¶èµ·</summary><div class="code-wrapper"><pre><code class="hljs json">å·¥å…·å‚æ•°&#123;  <span class="hljs-attr">&quot;filePaths&quot;</span>: [    <span class="hljs-string">&quot;/e:/DDI/project/Leader_Coach/src/views/home/component/chatScrollButton/chatScrollButton.vue&quot;</span>,    <span class="hljs-string">&quot;/e:/DDI/project/Leader_Coach/src/views/recommend/recommend.ts&quot;</span>  ]&#125;å·¥å…·çš„è¿”å›&#123;  <span class="hljs-attr">&quot;results&quot;</span>: [],  <span class="hljs-attr">&quot;errors&quot;</span>: [    <span class="hljs-string">&quot;æ–‡ä»¶ä¸å­˜åœ¨: /e:/DDI/project/Leader_Coach/src/views/home/component/chatScrollButton/chatScrollButton.vue&quot;</span>,    <span class="hljs-string">&quot;æ–‡ä»¶ä¸å­˜åœ¨: /e:/DDI/project/Leader_Coach/src/views/recommend/recommend.ts&quot;</span>  ],  <span class="hljs-attr">&quot;message&quot;</span>: <span class="hljs-string">&quot;å·²åˆ†æ 0 ä¸ªæ–‡ä»¶ï¼Œå¤±è´¥ 0 ä¸ªæ–‡ä»¶&quot;</span>&#125;</code></pre></div></details><br>è¿™æ—¶å€™æ‰¾ä¸åˆ°æ–‡ä»¶ï¼Œmessageå°±ä¸ä¼šæ˜¾ç¤ºåˆ†æäº†å‡ ä¸ªæ–‡ä»¶ï¼Œå¤±è´¥äº†å‡ ä¸ªæ–‡ä»¶çš„æç¤º;<p>ä¼˜åŒ–æ–¹å¼ï¼Œåœ¨toolä»£ç å¢åŠ è·¯ç”±æ ¼å¼è½¬æ¢ï¼š</p><details><summary>å±•å¼€/æ”¶èµ·</summary><div class="code-wrapper"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> path <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;path&#x27;</span>;<span class="hljs-keyword">import</span> fs <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;fs&#x27;</span>;<span class="hljs-comment">// ç¤ºä¾‹è·¯å¾„ï¼ˆåŒ…å«ä¸åŒæ ¼å¼ï¼‰</span><span class="hljs-keyword">const</span> testPaths = [    <span class="hljs-string">&quot;E:\\DDI\\project\\Leader_Coach\\src\\views\\recommend\\recommend.ts&quot;</span>, <span class="hljs-comment">// WindowsåŸç”Ÿ</span>    <span class="hljs-string">&quot;/e:/DDI/project/Leader_Coach/src/views/home/component/chatScrollButton/chatScrollButton.vue&quot;</span>, <span class="hljs-comment">// ç±»Unixé£æ ¼</span>];<span class="hljs-comment">// è·¯å¾„è§„èŒƒåŒ–å‡½æ•°</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">normalizeCrossPlatformPath</span>(<span class="hljs-params">rawPath</span>) </span>&#123;    <span class="hljs-keyword">if</span> (rawPath.startsWith(<span class="hljs-string">&#x27;/&#x27;</span>) &amp;&amp; <span class="hljs-regexp">/^\/[a-zA-Z]:\//</span>.test(rawPath)) &#123;        rawPath = rawPath.substring(<span class="hljs-number">1</span>);    &#125;    <span class="hljs-keyword">return</span> path.normalize(rawPath.replace(<span class="hljs-regexp">/[\\/]+/g</span>, path.sep));&#125;<span class="hljs-comment">// æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">checkFileExists</span>(<span class="hljs-params">filePath</span>) </span>&#123;    <span class="hljs-keyword">const</span> normalizedPath = normalizeCrossPlatformPath(filePath);    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`è§„èŒƒåŒ–ç»“æœ: <span class="hljs-subst">$&#123;normalizedPath&#125;</span>`</span>);    <span class="hljs-keyword">return</span> fs.existsSync(normalizedPath);&#125;<span class="hljs-comment">// æµ‹è¯•æ‰€æœ‰è·¯å¾„</span>testPaths.forEach(<span class="hljs-function"><span class="hljs-params">p</span> =&gt;</span> &#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`åŸå§‹è·¯å¾„: <span class="hljs-subst">$&#123;p&#125;</span>`</span>);    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`æ˜¯å¦å­˜åœ¨: <span class="hljs-subst">$&#123;checkFileExists(p)&#125;</span>\n`</span>);&#125;);<span class="hljs-comment">// æ‰“å°ç»“æœ</span><span class="hljs-comment">// åŸå§‹è·¯å¾„: E:\DDI\project\Leader_Coach\src\views\recommend\recommend.ts</span><span class="hljs-comment">// è§„èŒƒåŒ–ç»“æœ: E:\DDI\project\Leader_Coach\src\views\recommend\recommend.ts</span><span class="hljs-comment">// æ˜¯å¦å­˜åœ¨: true</span><span class="hljs-comment">// åŸå§‹è·¯å¾„: /e:/DDI/project/Leader_Coach/src/views/home/component/chatScrollButton/chatScrollButton.vue</span><span class="hljs-comment">// è§„èŒƒåŒ–ç»“æœ: e:\DDI\project\Leader_Coach\src\views\home\component\chatScrollButton\chatScrollButton.vue</span><span class="hljs-comment">// æ˜¯å¦å­˜åœ¨: true</span></code></pre></div></details><br>æ­¤æ—¶å·¥å…·çš„å®Œæ•´è°ƒç”¨è®°å½•ï¼š<details><summary>å±•å¼€/æ”¶èµ·</summary><div class="code-wrapper"><pre><code class="hljs json">aiè°ƒç”¨å·¥å…·ä¼ çš„å‚æ•°ï¼š&#123;  <span class="hljs-attr">&quot;filePaths&quot;</span>: [    <span class="hljs-string">&quot;/e:/DDI/project/Leader_Coach/src/views/home/component/chatScrollButton/chatScrollButton.vue&quot;</span>,    <span class="hljs-string">&quot;/e:/DDI/project/Leader_Coach/src/views/recommend/recommend.ts&quot;</span>  ]&#125;å·¥å…·çš„è¿”å›&#123;  <span class="hljs-attr">&quot;results&quot;</span>: [    &#123;      <span class="hljs-attr">&quot;filePath&quot;</span>: <span class="hljs-string">&quot;e:/DDI/project/Leader_Coach/src/views/home/component/chatScrollButton/chatScrollButton.vue&quot;</span>,      <span class="hljs-attr">&quot;llmResponse&quot;</span>: <span class="hljs-string">&quot;```markdown\n# ä»£ç è¯„å®¡æŠ¥å‘Š\n\n## ç¬¬ä¸€éƒ¨åˆ†ï¼šæ–‡ä»¶æ±‡æ€»\n\n| æ–‡ä»¶å | æ€»è¡Œæ•° | æ³¨é‡Šè¡Œæ•° | æ³¨é‡Šç‡ | å¯è¯»æ€§ | ä¸€è‡´æ€§ | æ¨¡å—åŒ– | å¯ç»´æŠ¤æ€§ | æ€§èƒ½ | æ–‡æ¡£åŒ– | å¹³å‡åˆ† |\n|--------|--------|----------|--------|--------|--------|--------|----------|------|--------|--------|\n| ChatScrollButton.vue | 56 | 7 | 12.5% | 9 | 9 | 8 | 8 | 8 | 8 | 8.3 |\n\n## ç¬¬äºŒéƒ¨åˆ†ï¼šè¯¦ç»†è¯„å®¡\n\n### æ–‡ä»¶åŠŸèƒ½æè¿°\nè¿™æ˜¯ä¸€ä¸ªVue 3å•æ–‡ä»¶ç»„ä»¶ï¼Œå®ç°äº†ä¸€ä¸ªå¸¦æ¸å˜è¾¹æ¡†æ•ˆæœçš„åœ†å½¢æ»šåŠ¨æŒ‰é’®ï¼Œä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š\n- é€šè¿‡`showGradient`å±æ€§æ§åˆ¶æ˜¯å¦æ˜¾ç¤ºæ—‹è½¬æ¸å˜è¾¹æ¡†\n- å†…ç½®æ‚¬åœæ•ˆæœå’Œé»˜è®¤è¾¹æ¡†æ ·å¼\n- åŒ…å«å‘ä¸‹çš„ç®­å¤´å›¾æ ‡\n\n### è´¨é‡è¯„åˆ†è¯´æ˜\n\n1. **å¯è¯»æ€§ï¼ˆ9/10ï¼‰**\n   - ä»£ç ç»“æ„æ¸…æ™°ï¼Œæ¨¡æ¿/è„šæœ¬/æ ·å¼åˆ†ç¦»è‰¯å¥½\n   - CSSé€‰æ‹©å™¨å‘½åè¯­ä¹‰åŒ–æ˜ç¡®ï¼ˆå¦‚`.scroll-bottom-button-default`ï¼‰\n   - æ”¹è¿›å»ºè®®ï¼šåŠ¨ç”»å…³é”®å¸§å¯ä»¥æ·»åŠ æ³¨é‡Šè¯´æ˜\n\n2. **ä¸€è‡´æ€§ï¼ˆ9/10ï¼‰**\n   - æ•´ä½“éµå¾ªVue 3ç»„åˆå¼APIè§„èŒƒ\n   - CSSå˜é‡å‘½åé£æ ¼ç»Ÿä¸€ï¼ˆ`--color-*`ï¼‰\n   - å°‘é‡ä¸ä¸€è‡´ï¼šæ¨¡æ¿ä¸­åŒæ—¶ä½¿ç”¨äº†`:class`å’Œ`:style`ç»‘å®šï¼Œå»ºè®®ç»Ÿä¸€ä½¿ç”¨ä¸€ç§æ–¹å¼\n\n3. **æ¨¡å—åŒ–ï¼ˆ8/10ï¼‰**\n   - ç»„ä»¶åŠŸèƒ½å•ä¸€ä¸”å®Œæ•´\n   - å¯ä»¥è¿›ä¸€æ­¥æ‹†åˆ†ï¼šå°†å¤æ‚çš„æ¸å˜è¾¹æ¡†CSSæå–ä¸ºmixinæˆ–å·¥å…·ç±»\n\n4. **å¯ç»´æŠ¤æ€§ï¼ˆ8/10ï¼‰**\n   - ç±»å‹å®šä¹‰å®Œå–„ï¼ˆTypeScriptæ¥å£ï¼‰\n   - é»˜è®¤å€¼å¤„ç†è§„èŒƒ\n   - æ”¹è¿›ç‚¹ï¼šç¼ºå°‘emitäº‹ä»¶å®šä¹‰è¯´æ˜\n\n5. **æ€§èƒ½ï¼ˆ8/10ï¼‰**\n   - ä½¿ç”¨äº†CSSåŠ¨ç”»è€ŒéJSåŠ¨ç”»\n   - å»ºè®®ï¼š`background-image`ä½¿ç”¨é›ªç¢§å›¾ä¼˜åŒ–\n\n6. **æ–‡æ¡£åŒ–ï¼ˆ8/10ï¼‰**\n   - ç»„ä»¶çº§æ³¨é‡Šå®Œæ•´ï¼ˆåŒ…å«@descriptionå’Œ@exampleï¼‰\n   - å±æ€§æœ‰TSDocæ³¨é‡Š\n   - ç¼ºå°‘ï¼šCSSå¤æ‚æ•ˆæœçš„å®ç°åŸç†è¯´æ˜\n\n## ç¬¬ä¸‰éƒ¨åˆ†ï¼šæ€»ç»“\n\nè¯¥ç»„ä»¶æ•´ä½“è´¨é‡è¾ƒé«˜ï¼Œä¸»è¦ä¼˜ç‚¹ï¼š\n- è‰¯å¥½çš„ç±»å‹å®šä¹‰å’Œæ–‡æ¡£æ³¨é‡Š\n- è§†è§‰æ•ˆæœå®ç°ä¼˜é›…ï¼ˆCSSæ¸å˜+é®ç½©æŠ€å·§ï¼‰\n- å“åº”å¼äº¤äº’è®¾è®¡å®Œæ•´\n\næ”¹è¿›å»ºè®®ï¼š\n1. è¡¥å……CSSåŠ¨ç”»å®ç°çš„åŸç†æ³¨é‡Š\n2. ç»Ÿä¸€æ ·å¼æ§åˆ¶æ–¹å¼ï¼ˆä¼˜å…ˆä½¿ç”¨classï¼‰\n3. è€ƒè™‘æ·»åŠ ç‚¹å‡»äº‹ä»¶å‘å°„å¤„ç†\n4. å›¾ç‰‡èµ„æºå»ºè®®ä½¿ç”¨é›ªç¢§å›¾ä¼˜åŒ–\n\næ€»ä½“è¯„åˆ†ï¼š8.3/10ï¼ˆä¼˜è´¨ç»„ä»¶ï¼Œå°ä¼˜åŒ–ç©ºé—´ï¼‰\n```&quot;</span>,      <span class="hljs-attr">&quot;message&quot;</span>: <span class="hljs-string">&quot;å¯¹ chatScrollButton.vue çš„ä»£ç è¯„å®¡å®Œæˆ&quot;</span>    &#125;,    &#123;      <span class="hljs-attr">&quot;filePath&quot;</span>: <span class="hljs-string">&quot;e:/DDI/project/Leader_Coach/src/views/recommend/recommend.ts&quot;</span>,      <span class="hljs-attr">&quot;llmResponse&quot;</span>: <span class="hljs-string">&quot;## ä»£ç è¯„å®¡æŠ¥å‘Š\n\n### ç¬¬ä¸€éƒ¨åˆ†ï¼šæ–‡ä»¶æ±‡æ€»\n\n| æ–‡ä»¶ç±»å‹ | æ€»è¡Œæ•° | æ³¨é‡Šè¡Œæ•° | æ³¨é‡Šç‡ | å¯è¯»æ€§ | ä¸€è‡´æ€§ | æ¨¡å—åŒ– | å¯ç»´æŠ¤æ€§ | æ€§èƒ½ | æ–‡æ¡£åŒ– | å¹³å‡åˆ† |\n|----------|--------|----------|--------|--------|--------|--------|----------|------|--------|--------|\n| .ts      | 252    | 10       | 3.97%  | 7      | 8      | 6      | 7        | 8    | 5      | 6.8    |\n\n### ç¬¬äºŒéƒ¨åˆ†ï¼šè¯¦ç»†åˆ†æ\n\n#### 1. æ–‡ä»¶åŠŸèƒ½æè¿°\nè¿™æ˜¯ä¸€ä¸ªVue 3ç»„ä»¶ï¼Œä¸»è¦åŠŸèƒ½æ˜¯ï¼š\n- å®ç°ä¸€ä¸ªæ¨èæ•™ç»ƒçš„è¡¨å•é¡µé¢\n- åŒ…å«èŒä½é€‰æ‹©ã€æ•™ç»ƒé£æ ¼é€‰æ‹©ã€ç®¡ç†è¯é¢˜é€‰æ‹©ç­‰è¡¨å•å­—æ®µ\n- å¤„ç†è¡¨å•éªŒè¯å’Œæäº¤\n- ä¸åç«¯APIäº¤äº’è·å–æ¨èç»“æœ\n\n#### 2. è´¨é‡è¯„åˆ†åŠè¯´æ˜\n\n**å¯è¯»æ€§ (7/10)**\n- ä¼˜ç‚¹ï¼šå˜é‡å‘½åæ¸…æ™°ï¼ŒåŸºæœ¬èƒ½åæ˜ å…¶ç”¨é€”\n- ç¼ºç‚¹ï¼šé•¿æ•°ç»„å®šä¹‰å½±å“å¯è¯»æ€§ï¼Œéƒ¨åˆ†é€»è¾‘å¯ä»¥è¿›ä¸€æ­¥æ‹†åˆ†\n\n**ä¸€è‡´æ€§ (8/10)**\n- ä¼˜ç‚¹ï¼šæ•´ä½“ç¼–ç é£æ ¼ä¸€è‡´ï¼Œä½¿ç”¨Vue 3ç»„åˆå¼API\n- ç¼ºç‚¹ï¼šéƒ¨åˆ†æ–¹æ³•ä½¿ç”¨é€‰é¡¹å¼API(methods)ï¼Œä¸setup()æ··åˆä½¿ç”¨\n\n**æ¨¡å—åŒ– (6/10)**\n- ä¼˜ç‚¹ï¼šç»„ä»¶å¯¼å…¥æ¸…æ™°\n- ç¼ºç‚¹ï¼šå¤§é‡é€‰é¡¹æ•°æ®ç›´æ¥å®šä¹‰åœ¨ç»„ä»¶ä¸­ï¼Œå¯ä»¥è€ƒè™‘å¤–éƒ¨åŒ–\n\n**å¯ç»´æŠ¤æ€§ (7/10)**\n- ä¼˜ç‚¹ï¼šåŠŸèƒ½åˆ’åˆ†æ˜ç¡®\n- ç¼ºç‚¹ï¼šè¡¨å•éªŒè¯é€»è¾‘è¾ƒå¤æ‚ï¼Œå¯ä»¥æå–ä¸ºç‹¬ç«‹å‡½æ•°\n\n**æ€§èƒ½ (8/10)**\n- ä¼˜ç‚¹ï¼šåˆç†ä½¿ç”¨å“åº”å¼æ•°æ®\n- ç¼ºç‚¹ï¼šwatchä¸­ä½¿ç”¨JSON.parse(JSON.stringify())å¯èƒ½å½±å“æ€§èƒ½\n\n**æ–‡æ¡£åŒ– (5/10)**\n- ä¼˜ç‚¹ï¼šå…³é”®æ–¹æ³•æœ‰æ³¨é‡Šè¯´æ˜\n- ç¼ºç‚¹ï¼šæ•´ä½“æ³¨é‡Šç‡ä½(3.97%)ï¼Œéƒ¨åˆ†å¤æ‚é€»è¾‘ç¼ºä¹è§£é‡Š\n\n### ç¬¬ä¸‰éƒ¨åˆ†ï¼šæ€»ç»“ä¸å»ºè®®\n\n1. **ä¸»è¦é—®é¢˜**ï¼š\n   - æ³¨é‡Šç‡åä½(3.97%)\n   - é•¿æ•°ç»„å®šä¹‰å½±å“å¯è¯»æ€§\n   - æ··åˆä½¿ç”¨ç»„åˆå¼APIå’Œé€‰é¡¹å¼API\n   - è¡¨å•éªŒè¯é€»è¾‘å¯ä»¥ä¼˜åŒ–\n\n2. **æ”¹è¿›å»ºè®®**ï¼š\n   - å°†é•¿æ•°ç»„(jobOptionsç­‰)æå–åˆ°å•ç‹¬çš„æ–‡ä»¶æˆ–é…ç½®ä¸­\n   - å¢åŠ å…³é”®é€»è¾‘çš„æ³¨é‡Šè¯´æ˜\n   - ç»Ÿä¸€ä½¿ç”¨ç»„åˆå¼API\n   - æå–è¡¨å•éªŒè¯é€»è¾‘ä¸ºç‹¬ç«‹å‡½æ•°\n   - è€ƒè™‘ä½¿ç”¨TypeScriptæ¥å£å®šä¹‰å¤æ‚æ•°æ®ç»“æ„\n\n3. **äº®ç‚¹**ï¼š\n   - æ•´ä½“ç»“æ„æ¸…æ™°\n   - å“åº”å¼æ•°æ®å¤„ç†å¾—å½“\n   - é”™è¯¯å¤„ç†æœºåˆ¶å®Œå–„\n\næ€»ä½“è¯„åˆ†ä¸º6.8åˆ†ï¼Œæ˜¯ä¸€ä¸ªè´¨é‡ä¸­ç­‰çš„ç»„ä»¶ï¼Œé€šè¿‡ä¸€äº›é‡æ„å¯ä»¥æ˜¾è‘—æé«˜å¯ç»´æŠ¤æ€§å’Œå¯è¯»æ€§ã€‚&quot;</span>,      <span class="hljs-attr">&quot;message&quot;</span>: <span class="hljs-string">&quot;å¯¹ recommend.ts çš„ä»£ç è¯„å®¡å®Œæˆ&quot;</span>    &#125;  ],  <span class="hljs-attr">&quot;errors&quot;</span>: [],  <span class="hljs-attr">&quot;message&quot;</span>: <span class="hljs-string">&quot;å·²åˆ†æ 2 ä¸ªæ–‡ä»¶ï¼Œå¤±è´¥ 0 ä¸ªæ–‡ä»¶&quot;</span>&#125;</code></pre></div></details><br>å¯ä»¥çœ‹åˆ°åˆ†æç»“æœå’Œåˆ†æè®°å½•ï¼ˆåˆ†æäº†å‡ ä¸ªæ–‡ä»¶ç­‰ï¼‰è¾“å‡ºç»“æœçš„markdownæ ¼å¼ï¼š<details><summary>å±•å¼€/æ”¶èµ·</summary><div class="code-wrapper"><pre><code class="hljs markdown"><span class="hljs-section"># ä»£ç è¯„å®¡æŠ¥å‘Š</span><span class="hljs-section">## ç¬¬ä¸€éƒ¨åˆ†ï¼šæ–‡ä»¶æ±‡æ€»</span>| æ–‡ä»¶å | æ€»è¡Œæ•° | æ³¨é‡Šè¡Œæ•° | æ³¨é‡Šç‡ | å¯è¯»æ€§ | ä¸€è‡´æ€§ | æ¨¡å—åŒ– | å¯ç»´æŠ¤æ€§ | æ€§èƒ½ | æ–‡æ¡£åŒ– | å¹³å‡åˆ† ||--------|--------|----------|--------|--------|--------|--------|----------|------|--------|--------|| ChatScrollButton.vue | 56 | 7 | 12.5% | 9 | 9 | 8 | 8 | 8 | 8 | 8.3 |<span class="hljs-section">## ç¬¬äºŒéƒ¨åˆ†ï¼šè¯¦ç»†è¯„å®¡</span><span class="hljs-section">### æ–‡ä»¶åŠŸèƒ½æè¿°</span>è¿™æ˜¯ä¸€ä¸ªVue 3å•æ–‡ä»¶ç»„ä»¶ï¼Œå®ç°äº†ä¸€ä¸ªå¸¦æ¸å˜è¾¹æ¡†æ•ˆæœçš„åœ†å½¢æ»šåŠ¨æŒ‰é’®ï¼Œä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š<span class="hljs-bullet">-</span> é€šè¿‡<span class="hljs-code">`showGradient`</span>å±æ€§æ§åˆ¶æ˜¯å¦æ˜¾ç¤ºæ—‹è½¬æ¸å˜è¾¹æ¡†<span class="hljs-bullet">-</span> å†…ç½®æ‚¬åœæ•ˆæœå’Œé»˜è®¤è¾¹æ¡†æ ·å¼<span class="hljs-bullet">-</span> åŒ…å«å‘ä¸‹çš„ç®­å¤´å›¾æ ‡<span class="hljs-section">### è´¨é‡è¯„åˆ†è¯´æ˜</span><span class="hljs-bullet">1.</span> <span class="hljs-strong">**å¯è¯»æ€§ï¼ˆ9/10ï¼‰**</span><span class="hljs-bullet">   -</span> ä»£ç ç»“æ„æ¸…æ™°ï¼Œæ¨¡æ¿/è„šæœ¬/æ ·å¼åˆ†ç¦»è‰¯å¥½<span class="hljs-bullet">   -</span> CSSé€‰æ‹©å™¨å‘½åè¯­ä¹‰åŒ–æ˜ç¡®ï¼ˆå¦‚<span class="hljs-code">`.scroll-bottom-button-default`</span>ï¼‰<span class="hljs-bullet">   -</span> æ”¹è¿›å»ºè®®ï¼šåŠ¨ç”»å…³é”®å¸§å¯ä»¥æ·»åŠ æ³¨é‡Šè¯´æ˜<span class="hljs-bullet">2.</span> <span class="hljs-strong">**ä¸€è‡´æ€§ï¼ˆ9/10ï¼‰**</span><span class="hljs-bullet">   -</span> æ•´ä½“éµå¾ªVue 3ç»„åˆå¼APIè§„èŒƒ<span class="hljs-bullet">   -</span> CSSå˜é‡å‘½åé£æ ¼ç»Ÿä¸€ï¼ˆ<span class="hljs-code">`--color-*`</span>ï¼‰<span class="hljs-bullet">   -</span> å°‘é‡ä¸ä¸€è‡´ï¼šæ¨¡æ¿ä¸­åŒæ—¶ä½¿ç”¨äº†<span class="hljs-code">`:class`</span>å’Œ<span class="hljs-code">`:style`</span>ç»‘å®šï¼Œå»ºè®®ç»Ÿä¸€ä½¿ç”¨ä¸€ç§æ–¹å¼<span class="hljs-bullet">3.</span> <span class="hljs-strong">**æ¨¡å—åŒ–ï¼ˆ8/10ï¼‰**</span><span class="hljs-bullet">   -</span> ç»„ä»¶åŠŸèƒ½å•ä¸€ä¸”å®Œæ•´<span class="hljs-bullet">   -</span> å¯ä»¥è¿›ä¸€æ­¥æ‹†åˆ†ï¼šå°†å¤æ‚çš„æ¸å˜è¾¹æ¡†CSSæå–ä¸ºmixinæˆ–å·¥å…·ç±»<span class="hljs-bullet">4.</span> <span class="hljs-strong">**å¯ç»´æŠ¤æ€§ï¼ˆ8/10ï¼‰**</span><span class="hljs-bullet">   -</span> ç±»å‹å®šä¹‰å®Œå–„ï¼ˆTypeScriptæ¥å£ï¼‰<span class="hljs-bullet">   -</span> é»˜è®¤å€¼å¤„ç†è§„èŒƒ<span class="hljs-bullet">   -</span> æ”¹è¿›ç‚¹ï¼šç¼ºå°‘emitäº‹ä»¶å®šä¹‰è¯´æ˜<span class="hljs-bullet">5.</span> <span class="hljs-strong">**æ€§èƒ½ï¼ˆ8/10ï¼‰**</span><span class="hljs-bullet">   -</span> ä½¿ç”¨äº†CSSåŠ¨ç”»è€ŒéJSåŠ¨ç”»<span class="hljs-bullet">   -</span> å»ºè®®ï¼š<span class="hljs-code">`background-image`</span>ä½¿ç”¨é›ªç¢§å›¾ä¼˜åŒ–<span class="hljs-bullet">6.</span> <span class="hljs-strong">**æ–‡æ¡£åŒ–ï¼ˆ8/10ï¼‰**</span><span class="hljs-bullet">   -</span> ç»„ä»¶çº§æ³¨é‡Šå®Œæ•´ï¼ˆåŒ…å«@descriptionå’Œ@exampleï¼‰<span class="hljs-bullet">   -</span> å±æ€§æœ‰TSDocæ³¨é‡Š<span class="hljs-bullet">   -</span> ç¼ºå°‘ï¼šCSSå¤æ‚æ•ˆæœçš„å®ç°åŸç†è¯´æ˜<span class="hljs-section">## ç¬¬ä¸‰éƒ¨åˆ†ï¼šæ€»ç»“</span>è¯¥ç»„ä»¶æ•´ä½“è´¨é‡è¾ƒé«˜ï¼Œä¸»è¦ä¼˜ç‚¹ï¼š<span class="hljs-bullet">-</span> è‰¯å¥½çš„ç±»å‹å®šä¹‰å’Œæ–‡æ¡£æ³¨é‡Š<span class="hljs-bullet">-</span> è§†è§‰æ•ˆæœå®ç°ä¼˜é›…ï¼ˆCSSæ¸å˜+é®ç½©æŠ€å·§ï¼‰<span class="hljs-bullet">-</span> å“åº”å¼äº¤äº’è®¾è®¡å®Œæ•´æ”¹è¿›å»ºè®®ï¼š<span class="hljs-bullet">1.</span> è¡¥å……CSSåŠ¨ç”»å®ç°çš„åŸç†æ³¨é‡Š<span class="hljs-bullet">2.</span> ç»Ÿä¸€æ ·å¼æ§åˆ¶æ–¹å¼ï¼ˆä¼˜å…ˆä½¿ç”¨classï¼‰<span class="hljs-bullet">3.</span> è€ƒè™‘æ·»åŠ ç‚¹å‡»äº‹ä»¶å‘å°„å¤„ç†<span class="hljs-bullet">4.</span> å›¾ç‰‡èµ„æºå»ºè®®ä½¿ç”¨é›ªç¢§å›¾ä¼˜åŒ–æ€»ä½“è¯„åˆ†ï¼š8.3/10ï¼ˆä¼˜è´¨ç»„ä»¶ï¼Œå°ä¼˜åŒ–ç©ºé—´ï¼‰---<span class="hljs-section">## recommend.ts ä»£ç è¯„å®¡æŠ¥å‘Š</span><span class="hljs-section">### ç¬¬ä¸€éƒ¨åˆ†ï¼šæ–‡ä»¶æ±‡æ€»</span>| æ–‡ä»¶ç±»å‹ | æ€»è¡Œæ•° | æ³¨é‡Šè¡Œæ•° | æ³¨é‡Šç‡ | å¯è¯»æ€§ | ä¸€è‡´æ€§ | æ¨¡å—åŒ– | å¯ç»´æŠ¤æ€§ | æ€§èƒ½ | æ–‡æ¡£åŒ– | å¹³å‡åˆ† ||----------|--------|----------|--------|--------|--------|--------|----------|------|--------|--------|| .ts      | 252    | 10       | 3.97%  | 7      | 8      | 6      | 7        | 8    | 5      | 6.8    |<span class="hljs-section">### ç¬¬äºŒéƒ¨åˆ†ï¼šè¯¦ç»†åˆ†æ</span><span class="hljs-section">#### 1. æ–‡ä»¶åŠŸèƒ½æè¿°</span>è¿™æ˜¯ä¸€ä¸ªVue 3ç»„ä»¶ï¼Œä¸»è¦åŠŸèƒ½æ˜¯ï¼š<span class="hljs-bullet">-</span> å®ç°ä¸€ä¸ªæ¨èæ•™ç»ƒçš„è¡¨å•é¡µé¢<span class="hljs-bullet">-</span> åŒ…å«èŒä½é€‰æ‹©ã€æ•™ç»ƒé£æ ¼é€‰æ‹©ã€ç®¡ç†è¯é¢˜é€‰æ‹©ç­‰è¡¨å•å­—æ®µ<span class="hljs-bullet">-</span> å¤„ç†è¡¨å•éªŒè¯å’Œæäº¤<span class="hljs-bullet">-</span> ä¸åç«¯APIäº¤äº’è·å–æ¨èç»“æœ<span class="hljs-section">#### 2. è´¨é‡è¯„åˆ†åŠè¯´æ˜</span><span class="hljs-strong">**å¯è¯»æ€§ (7/10)**</span><span class="hljs-bullet">-</span> ä¼˜ç‚¹ï¼šå˜é‡å‘½åæ¸…æ™°ï¼ŒåŸºæœ¬èƒ½åæ˜ å…¶ç”¨é€”<span class="hljs-bullet">-</span> ç¼ºç‚¹ï¼šé•¿æ•°ç»„å®šä¹‰å½±å“å¯è¯»æ€§ï¼Œéƒ¨åˆ†é€»è¾‘å¯ä»¥è¿›ä¸€æ­¥æ‹†åˆ†<span class="hljs-strong">**ä¸€è‡´æ€§ (8/10)**</span><span class="hljs-bullet">-</span> ä¼˜ç‚¹ï¼šæ•´ä½“ç¼–ç é£æ ¼ä¸€è‡´ï¼Œä½¿ç”¨Vue 3ç»„åˆå¼API<span class="hljs-bullet">-</span> ç¼ºç‚¹ï¼šéƒ¨åˆ†æ–¹æ³•ä½¿ç”¨é€‰é¡¹å¼API(methods)ï¼Œä¸setup()æ··åˆä½¿ç”¨<span class="hljs-strong">**æ¨¡å—åŒ– (6/10)**</span><span class="hljs-bullet">-</span> ä¼˜ç‚¹ï¼šç»„ä»¶å¯¼å…¥æ¸…æ™°<span class="hljs-bullet">-</span> ç¼ºç‚¹ï¼šå¤§é‡é€‰é¡¹æ•°æ®ç›´æ¥å®šä¹‰åœ¨ç»„ä»¶ä¸­ï¼Œå¯ä»¥è€ƒè™‘å¤–éƒ¨åŒ–<span class="hljs-strong">**å¯ç»´æŠ¤æ€§ (7/10)**</span><span class="hljs-bullet">-</span> ä¼˜ç‚¹ï¼šåŠŸèƒ½åˆ’åˆ†æ˜ç¡®<span class="hljs-bullet">-</span> ç¼ºç‚¹ï¼šè¡¨å•éªŒè¯é€»è¾‘è¾ƒå¤æ‚ï¼Œå¯ä»¥æå–ä¸ºç‹¬ç«‹å‡½æ•°<span class="hljs-strong">**æ€§èƒ½ (8/10)**</span><span class="hljs-bullet">-</span> ä¼˜ç‚¹ï¼šåˆç†ä½¿ç”¨å“åº”å¼æ•°æ®<span class="hljs-bullet">-</span> ç¼ºç‚¹ï¼šwatchä¸­ä½¿ç”¨JSON.parse(JSON.stringify())å¯èƒ½å½±å“æ€§èƒ½<span class="hljs-strong">**æ–‡æ¡£åŒ– (5/10)**</span><span class="hljs-bullet">-</span> ä¼˜ç‚¹ï¼šå…³é”®æ–¹æ³•æœ‰æ³¨é‡Šè¯´æ˜<span class="hljs-bullet">-</span> ç¼ºç‚¹ï¼šæ•´ä½“æ³¨é‡Šç‡ä½(3.97%)ï¼Œéƒ¨åˆ†å¤æ‚é€»è¾‘ç¼ºä¹è§£é‡Š<span class="hljs-section">### ç¬¬ä¸‰éƒ¨åˆ†ï¼šæ€»ç»“ä¸å»ºè®®</span><span class="hljs-bullet">1.</span> <span class="hljs-strong">**ä¸»è¦é—®é¢˜**</span>ï¼š<span class="hljs-bullet">   -</span> æ³¨é‡Šç‡åä½(3.97%)<span class="hljs-bullet">   -</span> é•¿æ•°ç»„å®šä¹‰å½±å“å¯è¯»æ€§<span class="hljs-bullet">   -</span> æ··åˆä½¿ç”¨ç»„åˆå¼APIå’Œé€‰é¡¹å¼API<span class="hljs-bullet">   -</span> è¡¨å•éªŒè¯é€»è¾‘å¯ä»¥ä¼˜åŒ–<span class="hljs-bullet">2.</span> <span class="hljs-strong">**æ”¹è¿›å»ºè®®**</span>ï¼š<span class="hljs-bullet">   -</span> å°†é•¿æ•°ç»„(jobOptionsç­‰)æå–åˆ°å•ç‹¬çš„æ–‡ä»¶æˆ–é…ç½®ä¸­<span class="hljs-bullet">   -</span> å¢åŠ å…³é”®é€»è¾‘çš„æ³¨é‡Šè¯´æ˜<span class="hljs-bullet">   -</span> ç»Ÿä¸€ä½¿ç”¨ç»„åˆå¼API<span class="hljs-bullet">   -</span> æå–è¡¨å•éªŒè¯é€»è¾‘ä¸ºç‹¬ç«‹å‡½æ•°<span class="hljs-bullet">   -</span> è€ƒè™‘ä½¿ç”¨TypeScriptæ¥å£å®šä¹‰å¤æ‚æ•°æ®ç»“æ„<span class="hljs-bullet">3.</span> <span class="hljs-strong">**äº®ç‚¹**</span>ï¼š<span class="hljs-bullet">   -</span> æ•´ä½“ç»“æ„æ¸…æ™°<span class="hljs-bullet">   -</span> å“åº”å¼æ•°æ®å¤„ç†å¾—å½“<span class="hljs-bullet">   -</span> é”™è¯¯å¤„ç†æœºåˆ¶å®Œå–„æ€»ä½“è¯„åˆ†ä¸º6.8åˆ†ï¼Œæ˜¯ä¸€ä¸ªè´¨é‡ä¸­ç­‰çš„ç»„ä»¶ï¼Œé€šè¿‡ä¸€äº›é‡æ„å¯ä»¥æ˜¾è‘—æé«˜å¯ç»´æŠ¤æ€§å’Œå¯è¯»æ€§ã€‚</code></pre></div></details><br><h3 id="ç¬¬äºŒä¸ªé—®é¢˜"><a href="#ç¬¬äºŒä¸ªé—®é¢˜" class="headerlink" title="ç¬¬äºŒä¸ªé—®é¢˜"></a>ç¬¬äºŒä¸ªé—®é¢˜</h3><p>å†æ¬¡ç»è¿‡å¤šæ¬¡æµ‹è¯•ï¼Œæ¯æ¬¡LLMç»Ÿè®¡è¡Œæ•°å’Œæ³¨é‡Šç‡éƒ½ä¸ä¸€æ ·ï¼Œè¿™é‡Œå¼•å…¥ä¸€ä¸ªnode-slocçš„npmåŒ…è¿›è¡Œå¤„ç†æ–‡ä»¶ç»Ÿè®¡çš„ä¸è§„å¾‹çš„é—®é¢˜ï¼š</p><details><summary>å±•å¼€/æ”¶èµ·</summary><div class="code-wrapper"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123; sloc &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;node-sloc&#x27;</span>;<span class="hljs-comment">/**</span><span class="hljs-comment"> * ä»£ç è¡Œæ•°ç»Ÿè®¡ç»“æœæ¥å£</span><span class="hljs-comment"> */</span><span class="hljs-keyword">interface</span> SlocResult &#123;  <span class="hljs-comment">/** ç»Ÿè®¡çš„æ–‡ä»¶è·¯å¾„åˆ—è¡¨ */</span>  <span class="hljs-attr">paths</span>: <span class="hljs-built_in">string</span>[];  <span class="hljs-comment">/** ç»Ÿè®¡çš„æ–‡ä»¶æ•°é‡ */</span>  files: <span class="hljs-built_in">number</span>;  <span class="hljs-comment">/** ä»£ç è¡Œæ•°ï¼ˆä¸åŒ…å«æ³¨é‡Šå’Œç©ºè¡Œï¼‰ */</span>  sloc: <span class="hljs-built_in">number</span>;  <span class="hljs-comment">/** æ³¨é‡Šè¡Œæ•° */</span>  comments: <span class="hljs-built_in">number</span>;  <span class="hljs-comment">/** ç©ºè¡Œæ•° */</span>  blank: <span class="hljs-built_in">number</span>;  <span class="hljs-comment">/** æ€»è¡Œæ•°ï¼ˆä»£ç +æ³¨é‡Š+ç©ºè¡Œï¼‰ */</span>  loc: <span class="hljs-built_in">number</span>;&#125;<span class="hljs-comment">/**</span><span class="hljs-comment"> * æ‰©å±•çš„ç»Ÿè®¡ç»“æœæ¥å£ï¼ŒåŒ…å«æ³¨é‡Šç‡è®¡ç®—</span><span class="hljs-comment"> */</span><span class="hljs-keyword">interface</span> ExtendedSlocResult <span class="hljs-keyword">extends</span> SlocResult &#123;  <span class="hljs-comment">/** æ³¨é‡Šè¡Œæ•°å æ€»è¡Œæ•°çš„æ¯”ç‡ */</span>  <span class="hljs-attr">commentsToTotalRatio</span>: <span class="hljs-built_in">number</span>;  <span class="hljs-comment">/** æ³¨é‡Šè¡Œæ•°å ä»£ç è¡Œæ•°çš„æ¯”ç‡ */</span>  commentsToCodeRatio: <span class="hljs-built_in">number</span>;&#125;<span class="hljs-comment">/**</span><span class="hljs-comment"> * ç»Ÿè®¡æŒ‡å®šæ–‡ä»¶çš„ä»£ç è¡Œæ•°å’Œæ³¨é‡Šæ¯”ç‡</span><span class="hljs-comment"> * <span class="hljs-doctag">@param <span class="hljs-variable">filePath</span></span> - éœ€è¦ç»Ÿè®¡çš„æ–‡ä»¶è·¯å¾„</span><span class="hljs-comment"> * <span class="hljs-doctag">@returns </span>Promise&lt;ExtendedSlocResult&gt; è¿”å›ç»Ÿè®¡ç»“æœï¼ŒåŒ…å«ä»£ç è¡Œæ•°ã€æ³¨é‡Šè¡Œæ•°ã€ç©ºè¡Œæ•°åŠæ³¨é‡Šæ¯”ç‡</span><span class="hljs-comment"> */</span><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">countCodeLines</span>(<span class="hljs-params">filePath: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">Promise</span>&lt;<span class="hljs-title">ExtendedSlocResult</span>&gt; </span>&#123;  <span class="hljs-keyword">const</span> options = &#123;    <span class="hljs-attr">path</span>: filePath  &#125;;  <span class="hljs-keyword">try</span> &#123;    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> sloc(options);        <span class="hljs-keyword">if</span>(!result) &#123;      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;ç»Ÿè®¡ç»“æœä¸ºç©º&#x27;</span>);    &#125;    <span class="hljs-comment">// è®¡ç®—æ³¨é‡Šæ¯”ç‡</span>    <span class="hljs-keyword">const</span> commentsToTotalRatio = <span class="hljs-built_in">Number</span>((result.comments / result.loc).toFixed(<span class="hljs-number">2</span>));    <span class="hljs-keyword">const</span> commentsToCodeRatio = <span class="hljs-built_in">Number</span>((result.comments / result.sloc).toFixed(<span class="hljs-number">2</span>));    <span class="hljs-keyword">return</span> &#123;      ...result,      commentsToTotalRatio,      commentsToCodeRatio    &#125;;  &#125; <span class="hljs-keyword">catch</span> (error) &#123;    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">`ç»Ÿè®¡ä»£ç è¡Œæ•°å¤±è´¥: <span class="hljs-subst">$&#123;error&#125;</span>`</span>);  &#125;&#125;<span class="hljs-keyword">export</span> &#123; countCodeLines &#125;;<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span><span class="hljs-comment">// const filePath = &#x27;E:\\DDI\\project\\Leader_Coach\\src\\views\\recommend\\recommend.ts&#x27;;</span><span class="hljs-comment">// countCodeLines(filePath)</span><span class="hljs-comment">//   .then((result) =&gt; &#123;</span><span class="hljs-comment">//     console.log(&#x27;æ–‡ä»¶è·¯å¾„:&#x27;, result.paths);</span><span class="hljs-comment">//     console.log(&#x27;æ–‡ä»¶æ•°é‡:&#x27;, result.files);</span><span class="hljs-comment">//     console.log(&#x27;ä»£ç è¡Œæ•°:&#x27;, result.sloc);</span><span class="hljs-comment">//     console.log(&#x27;æ³¨é‡Šè¡Œæ•°:&#x27;, result.comments);</span><span class="hljs-comment">//     console.log(&#x27;ç©ºè¡Œæ•°:&#x27;, result.blank);</span><span class="hljs-comment">//     console.log(&#x27;æ€»è¡Œæ•°:&#x27;, result.loc);</span><span class="hljs-comment">//     console.log(&#x27;æ³¨é‡Šè¡Œæ•°/æ€»è¡Œæ•°:&#x27;, `$&#123;result.commentsToTotalRatio * 100&#125;%`);</span><span class="hljs-comment">//     console.log(&#x27;æ³¨é‡Šè¡Œæ•°/ä»£ç è¡Œæ•°:&#x27;, `$&#123;result.commentsToCodeRatio * 100&#125;%`);</span><span class="hljs-comment">//   &#125;)</span><span class="hljs-comment">//   .catch((error) =&gt; &#123;</span><span class="hljs-comment">//     console.error(&#x27;é”™è¯¯:&#x27;, error);</span><span class="hljs-comment">//   &#125;); </span></code></pre></div></details><br>åŒä¸€ä¸ªæ–‡ä»¶ä¸¤ç§æ•ˆæœå¯¹æ¯”ï¼š<p><img src="/img/blog/AI/review_code_mcp/1.png"></p><h3 id="ç¬¬ä¸‰ä¸ªé—®é¢˜"><a href="#ç¬¬ä¸‰ä¸ªé—®é¢˜" class="headerlink" title="ç¬¬ä¸‰ä¸ªé—®é¢˜"></a>ç¬¬ä¸‰ä¸ªé—®é¢˜</h3><p>å†æ¬¡æµ‹è¯•ï¼Œå‘ç°node-slocé»˜è®¤ä¸æ”¯æŒ .vue æ–‡ä»¶ï¼Œè§æ–‡æ¡£åœ°å€ï¼š<a href="https://github.com/edvinh/node-sloc">https://github.com/edvinh/node-sloc</a><br><img src="/img/blog/AI/review_code_mcp/2.png"><br>è¿™é‡Œç»è¿‡é…ç½®ï¼Œè§£å†³AIç»Ÿè®¡è¡Œæ•°å’Œæ³¨é‡Šç‡é«˜ä½é£˜å¿½ä¸å®šçš„è¿™ä¸ªé—®é¢˜ï¼š</p><div class="code-wrapper"><pre><code class="hljs typescript"><span class="hljs-keyword">const</span> options = &#123;  <span class="hljs-attr">path</span>: filePath,  <span class="hljs-comment">// æ‰‹åŠ¨æ·»åŠ å¯¹Vueæ–‡ä»¶çš„æ”¯æŒ</span>  <span class="hljs-attr">extensions</span>: [ <span class="hljs-string">&#x27;.vue&#x27;</span>],  <span class="hljs-attr">ignorePaths</span>: [<span class="hljs-string">&#x27;node_modules&#x27;</span>, <span class="hljs-string">&#x27;dist&#x27;</span>, <span class="hljs-string">&#x27;build&#x27;</span>]&#125;;</code></pre></div><p><img src="/img/blog/AI/review_code_mcp/3.png"><br><img src="/img/blog/AI/review_code_mcp/4.png"></p><h3 id="ç¬¬å››ä¸ªé—®é¢˜"><a href="#ç¬¬å››ä¸ªé—®é¢˜" class="headerlink" title="ç¬¬å››ä¸ªé—®é¢˜"></a>ç¬¬å››ä¸ªé—®é¢˜</h3><p>å°†è¿™ä¸ªmcp serverç»™åˆ«äººä½¿ç”¨çš„é—®é¢˜ï¼šç›®å‰vscodeï¼ˆéœ€è¦è£…æ’ä»¶ï¼‰å’Œcursorï¼ˆæ–°ç‰ˆæœ¬æ”¯æŒï¼‰æ”¯æŒMCPçš„jsoné…ç½®ï¼Œä¹Ÿæœ‰ä¸€äº›é›†æˆå·¥å…·æ¯”å¦‚Cherry Studioæ”¯æŒMCPé…ç½®ï¼ˆ<a href="https://docs.cherry-ai.com/advanced-basic/mcp">https://docs.cherry-ai.com/advanced-basic/mcp</a> ï¼‰ï¼Œä½†ç›®å‰çœ‹ä¸Šå»jetbrainsçš„IDEè¿˜æœªæ”¯æŒï¼Œå¦‚æœå¼€å‘äººå‘˜ç›®å‰ä½¿ç”¨çš„æ˜¯jetbrainså…¬å¸ä¸‹çš„IDEçš„è¯å°±æ²¡æ³•ä½¿ç”¨è¿™ç§jsoné…ç½®æ–¹å¼äº†ï¼Œä½†å¯ä»¥é€šè¿‡æœ¬åœ°å¯åŠ¨ä¸€ä¸ªè°ƒè¯•å·¥å…·é¡µé¢æ¥ä½¿ç”¨ï¼š</p><p>é€šè¿‡å®˜æ–¹MCP Inspectorè°ƒè¯•å·¥å…·ï¼ˆ<a href="https://github.com/modelcontextprotocol/inspector">https://github.com/modelcontextprotocol/inspector</a> ï¼‰è¿›è¡Œè°ƒè¯•å’Œä½¿ç”¨MCP Server</p><p>å…ˆbuild tsæ–‡ä»¶ï¼Œç„¶åè¿è¡Œå‘½ä»¤ï¼ˆnodeåé¢çš„å‚æ•°ä¸ºæ„å»ºåçš„jsè·¯å¾„ï¼‰ï¼š</p><div class="code-wrapper"><pre><code class="hljs bash">npx -y @modelcontextprotocol/inspector node <span class="hljs-string">&quot;dist/mcp_code_review_sse.js&quot;</span></code></pre></div><p>æ§åˆ¶å°è¾“å‡ºï¼š</p><div class="code-wrapper"><pre><code class="hljs bash">Starting MCP inspector...Proxy server listening on port 3000ğŸ” MCP Inspector is up and running at http://localhost:5173 ğŸš€</code></pre></div><p>è®¿é—®<a href="http://localhost:5173/">http://localhost:5173</a></p><p><img src="/img/blog/AI/review_code_mcp/5.png"><br><img src="/img/blog/AI/review_code_mcp/6.png"><br>è¿™é‡ŒæŠ¥é”™ã€æ–‡ä»¶ä¸å­˜åœ¨ã€‘æ˜¯å› ä¸ºå‚æ•°é‡Œæœ‰åŒå¼•å·ï¼š<br><img src="/img/blog/AI/review_code_mcp/7.png"></p><h3 id="ç¬¬äº”ä¸ªé—®é¢˜"><a href="#ç¬¬äº”ä¸ªé—®é¢˜" class="headerlink" title="ç¬¬äº”ä¸ªé—®é¢˜"></a>ç¬¬äº”ä¸ªé—®é¢˜</h3><p>æ—¥å¿—è°ƒè¯•é—®é¢˜ï¼šserverç«¯æ‰“å°çš„console.logä»£ç ä¸ç”Ÿæ•ˆï¼Œä¸”cursoré…ç½®serveré‡Œå¸¦æœ‰console.logçš„mcpåä¼šæŠ¥é”™ï¼Œä½†æµç¨‹ä¸å½±å“ï¼Œå¯ä»¥æ­£å¸¸è°ƒç”¨å’Œè¾“å‡ºï¼Œç½‘ä¸Šæœç´¢ä¹Ÿæ²¡æœ‰æ‰¾åˆ°ç›¸å…³è®¨è®ºï¼›<br>ç„¶åçœ‹ä¸‹é¢æ–‡æ¡£çš„è¦æ±‚åƒæ˜¯éœ€è¦ç”±å®¢æˆ·ç«¯æ¥è¿›è¡Œæ¥æ”¶æ‰“å°æ¶ˆæ¯æ¥è°ƒè¯•çš„ï¼›</p><p><img src="/img/blog/AI/review_code_mcp/8.png"><br><img src="/img/blog/AI/review_code_mcp/9.png"></p><p>å¼€å‘clientæ–‡æ¡£<br><a href="https://github.com/cyanheads/model-context-protocol-resources/blob/main/guides/mcp-client-development-guide.md">https://github.com/cyanheads/model-context-protocol-resources/blob/main/guides/mcp-client-development-guide.md</a></p><p>å¼€å‘serveræ–‡æ¡£<br><a href="https://github.com/cyanheads/model-context-protocol-resources/blob/main/guides/mcp-server-development-guide.md">https://github.com/cyanheads/model-context-protocol-resources/blob/main/guides/mcp-server-development-guide.md</a></p><p>é€šè¿‡æŸ¥çœ‹æ–‡æ¡£å’Œæºç ï¼Œå…¶å®é»˜è®¤æ˜¯å¯ä»¥é€šè¿‡consoel.erroræ‰“å°çš„å†…å®¹è¢«è¾“å‡ºåœ¨é¡µé¢ä¸Šçš„ï¼Œç”¨è¿™ç§æ–¹å¼æŠŠæ‰§è¡Œçš„æ¯ä¸€æ­¥éƒ½ç”¨errorçš„æ–¹å¼æ‰“å°å‡ºæ¥ï¼›å®˜æ–¹ç›®å‰åªæ”¯æŒâ€™debugâ€™ | â€˜infoâ€™ | â€˜warnâ€™ | â€˜errorâ€™ ï¼›</p><p><strong>ä¸åŒSDKçš„æ¨é€æ—¥å¿—çš„æ–¹å¼</strong> ï¼š</p><h4 id="McpServer-SDK"><a href="#McpServer-SDK" class="headerlink" title="McpServer SDK"></a>McpServer SDK</h4><p>å¦‚æœæ˜¯ä½¿ç”¨å®˜ç½‘demoé‡Œçš„çš„McpServer sdk:</p><div class="code-wrapper"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123; McpServer &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@modelcontextprotocol/sdk/server/mcp.js&quot;</span>;</code></pre></div><p>ç¬¬ä¸€ç§æ–¹å¼ï¼š</p><p>æ‰“å°error</p><p>å¦‚æœæƒ³è¦æœ‰å…¶ä»–log levelï¼Œéœ€è¦è‡ªè¡ŒæŸ¥çœ‹æºç æˆ–æ–‡æ¡£è¿›è¡Œå¤„ç†ï¼Œè¿™é‡Œåªæ¼”ç¤ºerror</p><p>ç¬¬äºŒç§æ–¹å¼ï¼Œé…ç½®serverçš„optionï¼š</p><p>é¦–å…ˆå¯¹MCPserverçš„optionè¿›è¡Œè®¾ç½®ï¼š</p><p>è®¾ç½®logging çš„ message è®¾ç½®ä¸ºtrueï¼š</p><div class="code-wrapper"><pre><code class="hljs typescript"><span class="hljs-keyword">const</span> server = <span class="hljs-keyword">new</span> McpServer(&#123;  <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;ä»£ç è¯„å®¡å·¥å…·&quot;</span>,  <span class="hljs-attr">version</span>: <span class="hljs-string">&quot;0.1.0&quot;</span>,&#125;, &#123;  <span class="hljs-attr">capabilities</span>: &#123;      <span class="hljs-attr">tools</span>: &#123;&#125;,      <span class="hljs-attr">logging</span>: &#123;          <span class="hljs-attr">message</span>: <span class="hljs-literal">true</span>      &#125;  &#125;&#125;);</code></pre></div><p>åœ¨ä»£ç é‡Œtoolæ¥å—å‚æ•°çš„åœ°æ–¹æ‰“å°ä¼ å‚ï¼š</p><div class="code-wrapper"><pre><code class="hljs typescript"><span class="hljs-keyword">const</span> exists = <span class="hljs-keyword">await</span> fileExists(filePath);<span class="hljs-built_in">console</span>.error(filePaths);server.server.sendLoggingMessage(&#123;  <span class="hljs-attr">level</span>: <span class="hljs-string">&quot;info&quot;</span>,  <span class="hljs-attr">data</span>: <span class="hljs-string">`æ–‡ä»¶å­˜åœ¨: <span class="hljs-subst">$&#123;filePath&#125;</span>`</span>,&#125;);</code></pre></div><p><img src="/img/blog/AI/review_code_mcp/10.png"></p><h4 id="ä½ç‰ˆæœ¬Server-SDK"><a href="#ä½ç‰ˆæœ¬Server-SDK" class="headerlink" title="ä½ç‰ˆæœ¬Server SDK"></a>ä½ç‰ˆæœ¬Server SDK</h4><p>ç„¶åé€šè¿‡æŸ¥çœ‹<a href="https://github.com/modelcontextprotocol/servers">https://github.com/modelcontextprotocol/servers</a>   ä¸€äº›å¼€æºçš„MCP Serverçš„æºç ï¼Œå‘ç°ä»–ä»¬ä½¿ç”¨çš„typescript sdkä¸æ˜¯å®˜ç½‘çš„æ–¹å¼</p><p>è€Œæ˜¯ä½¿ç”¨ä¸‹é¢è¿™ç§æ–¹å¼è‡ªè¡Œç¼–å†™toolè°ƒç”¨è§„åˆ™å’Œå‚æ•°æ ¡éªŒç­‰ï¼Œè¿™ç§ä¹Ÿæ˜¯æ”¯æŒä½¿ç”¨console.errorè¿›è¡Œæ‰“å°çš„ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥ä½¿ç”¨æ¨é€logçš„æ–¹å¼ï¼š</p><div class="code-wrapper"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123; Server &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@modelcontextprotocol/sdk/server/index.js&quot;</span>;</code></pre></div><p>å¦‚æœæ˜¯ä½¿ç”¨è¿™ç§SDKï¼Œå’Œä¸Šé¢McpServerä¸€æ ·å¯¹serverè¿›è¡Œé…ç½®ï¼š</p><p>æŠŠlogging çš„ message è®¾ç½®ä¸ºtrueï¼š</p><div class="code-wrapper"><pre><code class="hljs typescript"><span class="hljs-keyword">const</span> server = <span class="hljs-keyword">new</span> Server(  &#123;    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;ä»£ç è¯„å®¡å·¥å…·&quot;</span>,    <span class="hljs-attr">version</span>: <span class="hljs-string">&quot;0.1.0&quot;</span>,  &#125;,  &#123;    <span class="hljs-attr">capabilities</span>: &#123;      <span class="hljs-attr">tools</span>: &#123;&#125;,      <span class="hljs-attr">logging</span>: &#123;        <span class="hljs-attr">message</span>: <span class="hljs-literal">true</span>      &#125;    &#125;  &#125;);</code></pre></div><p>ç„¶åå†ä½¿ç”¨è¿™ç§æ–¹å¼æ¨é€logåˆ°å®¢æˆ·ç«¯ï¼š</p><div class="code-wrapper"><pre><code class="hljs typescript"><span class="hljs-keyword">const</span> &#123; filePaths &#125; = args;server.sendLoggingMessage(&#123;  <span class="hljs-attr">level</span>: <span class="hljs-string">&quot;info&quot;</span>,  <span class="hljs-attr">message</span>: <span class="hljs-string">`å¼€å§‹è¯„å®¡æ–‡ä»¶: <span class="hljs-subst">$&#123;filePaths&#125;</span>`</span>&#125;);</code></pre></div><p><img src="/img/blog/AI/review_code_mcp/11.png"></p><p>ä½¿ç”¨è¿™ç§è‡ªå®šä¹‰çš„SDKï¼ˆéä¸Šé¢çš„McpServerï¼‰åœ¨cursoré‡Œä¹Ÿæ˜¯å¯ä»¥æ­£å¸¸ä½¿ç”¨çš„ï¼š<br><img src="/img/blog/AI/review_code_mcp/12.png"></p><h3 id="ç¬¬å…­ä¸ªé—®é¢˜"><a href="#ç¬¬å…­ä¸ªé—®é¢˜" class="headerlink" title="ç¬¬å…­ä¸ªé—®é¢˜"></a>ç¬¬å…­ä¸ªé—®é¢˜</h3><p>è¿™ä¸€ç‰ˆæ”¹å®Œï¼Œæµ‹è¯•æ—¶å¶å°”ä¼šç¢°åˆ°é¡µé¢æ‰§è¡Œè¶…æ—¶ï¼Œä½†cursoré‡Œæµ‹è¯•æµç¨‹æ­£å¸¸ï¼š<br><img src="/img/blog/AI/review_code_mcp/13.png"></p><p>ç¥å¥‡çš„æ˜¯å†ç¨ç­‰å‡ åˆ†é’Ÿå°±èƒ½çœ‹åˆ°æœåŠ¡å™¨æ¨é€åˆ°logåˆ°è°ƒè¯•å¹³å°ï¼Œé‡Œé¢æ˜¯æœ‰æ‰“å°LLMçš„å®¡æŸ¥ç»“æœè¾“å‡ºçš„ï¼Œä½†åœ¨é¡µé¢ä¸Šå´æ˜¯ç­‰ä¸åˆ°LLMçš„è¿”å›å°±æŠ¥timeoutäº†ï¼Œä¸ç¡®å®šæ˜¯ä¸æ˜¯è¿™ä¸ªè°ƒè¯•å·¥å…·çš„å»¶è¿Ÿè®¾ç½®çš„é—®é¢˜è¿˜æ˜¯ä»£ç ä¸Šçš„æŸäº›åœ°æ–¹çš„å¼‚æ­¥è°ƒç”¨é—®é¢˜ï¼›ï¼ˆå¾…æ·±å…¥æ’æŸ¥ï¼‰</p><p><img src="/img/blog/AI/review_code_mcp/14.png"></p><p>ç»è¿‡æŸ¥çœ‹å’Œè¿è¡Œå®˜æ–¹è°ƒè¯•å·¥å…·çš„æºç <a href="https://github.com/modelcontextprotocol/inspector/tree/main">https://github.com/modelcontextprotocol/inspector/tree/main</a> </p><p>å‘ç°åœ¨APP.tsxé‡Œè°ƒç”¨äº†å·¥å…·æ–¹æ³•ï¼Œä½†æ²¡ä¼ è¶…æ—¶æ—¶é—´ï¼Œåœ¨å°è£…çš„useConnection.tsè„šæœ¬é‡Œè®¾ç½®çš„é»˜è®¤æ˜¯10sï¼Œæˆ‘æ‰‹åŠ¨æ”¹æˆ100sï¼Œç„¶åå°è¯•ï¼š<br><img src="/img/blog/AI/review_code_mcp/15.png"></p><p>æ­£å¸¸çš„è¾“å‡ºä½ç½®æ˜¯åœ¨è¿™é‡Œçš„ï¼Œæ‰€ä»¥åº”è¯¥æ˜¯å®˜æ–¹éœ€è¦è§£å†³çš„ä¸€ä¸ªé—®é¢˜ï¼š<br><img src="/img/blog/AI/review_code_mcp/16.png"></p><p>è¿™ä¸ªtimeoutæš‚æ—¶å…ˆå¿½ç•¥å§ï¼Œçœ‹å®˜æ–¹æ˜¯å¦ä¼˜åŒ–ï¼Œå¦‚æœè¦æƒ³åœ¨é¡µé¢ä¸ŠçŸ¥é“æ˜¯å¦å·²ç»ç»“æŸï¼ˆé¡µé¢è¿ä¸ªloadingä¹Ÿæ²¡æœ‰ï¼Œä½“éªŒå·®åŠ²å“ˆå“ˆå“ˆï¼‰ï¼Œå¯ä»¥é€šè¿‡ç¼–å†™ä¸€ä¸ªå®šæ—¶å™¨ï¼Œæ¯éš”ä¸€ç§’æ¨é€ä»¥ä¸‹æ¶ˆæ¯æ¥çŸ¥é“å½“å‰è¿˜æ²¡ç»“æŸï¼š</p><div class="code-wrapper"><pre><code class="hljs typescript">server.server.sendLoggingMessage(&#123;      <span class="hljs-attr">level</span>: <span class="hljs-string">&quot;info&quot;</span>,      <span class="hljs-attr">data</span>: <span class="hljs-string">`ç­‰å¾…LLMè¿”å›ä¸­`</span>    &#125;);</code></pre></div><h3 id="å¾…å‘å±•é—®é¢˜-ï¼š"><a href="#å¾…å‘å±•é—®é¢˜-ï¼š" class="headerlink" title="å¾…å‘å±•é—®é¢˜ ï¼š"></a>å¾…å‘å±•é—®é¢˜ ï¼š</h3><p>1.æ˜¯å¦è¦éƒ¨ç½²åˆ°å…¬å¸æœåŠ¡å™¨ï¼Œå¦‚æœéƒ¨ç½²åˆ°ç½‘ä¸Šéœ€è¦çš„ä¼˜åŒ–é¡¹</p><ul><li>mcp.jsonéœ€è¦å¸¦ä¸Štokenï¼ŒåŠ ä¸€å±‚é˜²æŠ¤</li><li>æœåŠ¡å™¨ä¸Šå¦‚ä½•è¯»å–è¦reviewçš„ä»£ç </li><li>æœåŠ¡å™¨ä¸Šéœ€è¦å°†ç»“æœè¿›è¡Œä¿å­˜åˆ°æŸä¸ªåœ°æ–¹</li></ul><h2 id="è§£å†³æ‰€æœ‰é—®é¢˜åå®Œæ•´ä»£ç "><a href="#è§£å†³æ‰€æœ‰é—®é¢˜åå®Œæ•´ä»£ç " class="headerlink" title="è§£å†³æ‰€æœ‰é—®é¢˜åå®Œæ•´ä»£ç "></a>è§£å†³æ‰€æœ‰é—®é¢˜åå®Œæ•´ä»£ç </h2><p>ä¸»æ–‡ä»¶ï¼šmcp_code_review.ts</p><div class="code-wrapper"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> OpenAI <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;openai&#x27;</span>;<span class="hljs-keyword">import</span> &#123; McpServer &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@modelcontextprotocol/sdk/server/mcp.js&quot;</span>;<span class="hljs-keyword">import</span> &#123; StdioServerTransport &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@modelcontextprotocol/sdk/server/stdio.js&quot;</span>;<span class="hljs-keyword">import</span> &#123; z &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;zod&quot;</span>;<span class="hljs-keyword">import</span> &#123; promises <span class="hljs-keyword">as</span> fs &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;fs&quot;</span>;<span class="hljs-keyword">import</span> path <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;path&quot;</span>;<span class="hljs-keyword">import</span> &#123; countCodeLines &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./sloc_tool.js&quot;</span>;<span class="hljs-comment">/**</span><span class="hljs-comment"> * åˆ›å»ºMCPæœåŠ¡å™¨å®ä¾‹</span><span class="hljs-comment"> */</span><span class="hljs-keyword">const</span> server = <span class="hljs-keyword">new</span> McpServer(&#123;  <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;ä»£ç è¯„å®¡å·¥å…·&quot;</span>,  <span class="hljs-attr">version</span>: <span class="hljs-string">&quot;0.1.0&quot;</span>,&#125;, &#123;  <span class="hljs-attr">capabilities</span>: &#123;    <span class="hljs-attr">tools</span>: &#123;&#125;,    <span class="hljs-attr">logging</span>: &#123;      <span class="hljs-attr">message</span>: <span class="hljs-literal">true</span>    &#125;  &#125;&#125;);<span class="hljs-comment">// Check for API key and baseURL</span><span class="hljs-comment">// è¿™é‡Œè°ƒè¯•æ—¶å¯ä»¥æ‰‹åŠ¨æ›¿æ¢æ‰æ¥è‡ªenvçš„é…ç½®</span><span class="hljs-comment">//  || &quot;11111111111111111111111&quot;</span><span class="hljs-comment">//  || &quot;https://xxxxxx/api/v1&quot;</span><span class="hljs-comment">//  || &quot;qwen/qwen-2.5-coder-32b-instruct:free&quot;</span><span class="hljs-keyword">const</span> OPENAI_API_KEY = process.env.OPENAI_API_KEY!;<span class="hljs-keyword">const</span> OPENAI_API_BASE = process.env.OPENAI_API_BASE!;<span class="hljs-keyword">const</span> OPENAI_API_MODEL = process.env.OPENAI_API_MODEL!;<span class="hljs-keyword">if</span> (!OPENAI_API_KEY || !OPENAI_API_BASE) &#123;  <span class="hljs-built_in">console</span>.error(<span class="hljs-string">&quot;Error: OPENAI_API_KEY or OPENAI_API_BASE environment variable is required&quot;</span>);  process.exit(<span class="hljs-number">1</span>);&#125;<span class="hljs-comment">/**</span><span class="hljs-comment"> * è¯»å–æ–‡ä»¶å†…å®¹</span><span class="hljs-comment"> * <span class="hljs-doctag">@param <span class="hljs-type">&#123;string&#125;</span> <span class="hljs-variable">filePath</span></span> - æ–‡ä»¶çš„ç»å¯¹è·¯å¾„</span><span class="hljs-comment"> * <span class="hljs-doctag">@returns <span class="hljs-type">&#123;Promise&lt;string&gt;&#125;</span> </span>æ–‡ä»¶å†…å®¹</span><span class="hljs-comment"> */</span><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">readFileContent</span>(<span class="hljs-params">filePath: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">Promise</span>&lt;<span class="hljs-title">string</span>&gt; </span>&#123;  <span class="hljs-keyword">try</span> &#123;    <span class="hljs-keyword">const</span> content = <span class="hljs-keyword">await</span> fs.readFile(filePath, <span class="hljs-string">&quot;utf-8&quot;</span>);    <span class="hljs-keyword">return</span> content;  &#125; <span class="hljs-keyword">catch</span> (error) &#123;    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">`æ— æ³•è¯»å–æ–‡ä»¶ <span class="hljs-subst">$&#123;filePath&#125;</span>: <span class="hljs-subst">$&#123;error&#125;</span>`</span>);  &#125;&#125;<span class="hljs-comment">/**</span><span class="hljs-comment"> * è·¯å¾„è§„èŒƒåŒ–å‡½æ•°</span><span class="hljs-comment"> * <span class="hljs-doctag">@param <span class="hljs-type">&#123;string&#125;</span> <span class="hljs-variable">rawPath</span></span> - åŸå§‹è·¯å¾„</span><span class="hljs-comment"> * <span class="hljs-doctag">@returns <span class="hljs-type">&#123;string&#125;</span> </span>è§„èŒƒåŒ–åçš„è·¯å¾„</span><span class="hljs-comment"> */</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">normalizeCrossPlatformPath</span>(<span class="hljs-params">rawPath: <span class="hljs-built_in">string</span></span>) </span>&#123;  <span class="hljs-keyword">if</span> (rawPath.startsWith(<span class="hljs-string">&#x27;/&#x27;</span>) &amp;&amp; <span class="hljs-regexp">/^\/[a-zA-Z]:\//</span>.test(rawPath)) &#123;    rawPath = rawPath.substring(<span class="hljs-number">1</span>);  &#125;  <span class="hljs-keyword">return</span> path.normalize(rawPath.replace(<span class="hljs-regexp">/[\\/]+/g</span>, path.sep));&#125;<span class="hljs-comment">/**</span><span class="hljs-comment"> * æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨</span><span class="hljs-comment"> * <span class="hljs-doctag">@param <span class="hljs-type">&#123;string&#125;</span> <span class="hljs-variable">filePath</span></span> - æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ </span><span class="hljs-comment"> * <span class="hljs-doctag">@returns <span class="hljs-type">&#123;Promise&lt;boolean&gt;&#125;</span> </span>æ–‡ä»¶æ˜¯å¦å­˜åœ¨</span><span class="hljs-comment"> */</span><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fileExists</span>(<span class="hljs-params">filePath: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">Promise</span>&lt;<span class="hljs-title">boolean</span>&gt; </span>&#123;  <span class="hljs-keyword">try</span> &#123;    <span class="hljs-keyword">await</span> fs.access(filePath);    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;  &#125; <span class="hljs-keyword">catch</span> (error) &#123;    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;  &#125;&#125;<span class="hljs-comment">/**</span><span class="hljs-comment"> * ä½¿ç”¨å¤§è¯­è¨€æ¨¡å‹åˆ†æä»£ç </span><span class="hljs-comment"> * <span class="hljs-doctag">@param <span class="hljs-type">&#123;string&#125;</span> <span class="hljs-variable">filePath</span></span> - æ–‡ä»¶è·¯å¾„</span><span class="hljs-comment"> * <span class="hljs-doctag">@param <span class="hljs-type">&#123;string&#125;</span> <span class="hljs-variable">content</span></span> - æ–‡ä»¶å†…å®¹</span><span class="hljs-comment"> */</span><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">analyzeLLM</span>(<span class="hljs-params">filePath: <span class="hljs-built_in">string</span>, content: <span class="hljs-built_in">string</span></span>) </span>&#123;  <span class="hljs-comment">// æå–æ–‡ä»¶ç±»å‹</span>  <span class="hljs-keyword">const</span> extension = path.extname(filePath).toLowerCase();  <span class="hljs-comment">// ç»Ÿè®¡ä»£ç è¡Œæ•°å’Œæ³¨é‡Šç‡</span>  <span class="hljs-keyword">const</span> &#123; sloc, comments, blank, loc, commentsToTotalRatio, commentsToCodeRatio &#125; = <span class="hljs-keyword">await</span> countCodeLines(filePath);  <span class="hljs-comment">// æ„å»ºæç¤ºè¯</span>  <span class="hljs-keyword">const</span> prompt = <span class="hljs-string">`</span><span class="hljs-string">    ## æ ¹æ®è¦æ±‚å¯¹ä»¥ä¸‹<span class="hljs-subst">$&#123;extension&#125;</span>ä»£ç è¿›è¡Œä»£ç è¯„å®¡ï¼Œè¯†åˆ«æ½œåœ¨çš„é—®é¢˜ã€‚</span><span class="hljs-string">    ä»¥ä¸‹æ˜¯ä»£ç è¡Œæ•°å’Œæ³¨é‡Šç‡ï¼š</span><span class="hljs-string">    æ–‡ä»¶åï¼š<span class="hljs-subst">$&#123;path.basename(filePath)&#125;</span></span><span class="hljs-string">    æ€»è¡Œæ•°ï¼š<span class="hljs-subst">$&#123;loc&#125;</span></span><span class="hljs-string">    æ³¨é‡Šè¡Œæ•°ï¼š<span class="hljs-subst">$&#123;comments&#125;</span></span><span class="hljs-string">    ä»£ç è¡Œæ•°ï¼š<span class="hljs-subst">$&#123;sloc&#125;</span></span><span class="hljs-string">    æ€»æ³¨é‡Šç‡ï¼ˆæ³¨é‡Šè¡Œæ•°/æ€»è¡Œæ•°ï¼‰ï¼š<span class="hljs-subst">$&#123;commentsToTotalRatio&#125;</span></span><span class="hljs-string">    ä»£ç è¡Œæ•°æ³¨é‡Šç‡ï¼ˆæ³¨é‡Šè¡Œæ•°/ä»£ç è¡Œæ•°ï¼‰ï¼š<span class="hljs-subst">$&#123;commentsToCodeRatio&#125;</span></span><span class="hljs-string">    è¦æ±‚ï¼š</span><span class="hljs-string">    1.**è¯„ä»·ä»£ç è´¨é‡**ï¼š</span><span class="hljs-string">      åœ¨ä»¥ä¸‹å…­ä¸ªæ–¹é¢è¿›è¡Œè¯„åˆ†ï¼ˆ0åˆ°10åˆ†ï¼‰ï¼Œå¹¶ç»™å‡ºå¹³å‡åˆ†ï¼š</span><span class="hljs-string">      - **å¯è¯»æ€§ï¼ˆReadabilityï¼‰**ï¼šä»£ç æ˜“äºç†è§£ç¨‹åº¦ã€‚</span><span class="hljs-string">      - **ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰**ï¼šç¼–ç é£æ ¼å’Œå‘½åçš„ä¸€è‡´æ€§ã€‚</span><span class="hljs-string">      - **æ¨¡å—åŒ–ï¼ˆModularityï¼‰**ï¼šä»£ç åˆ†å—å’ŒåŠŸèƒ½å•å…ƒåˆ’åˆ†ã€‚</span><span class="hljs-string">      - **å¯ç»´æŠ¤æ€§ï¼ˆMaintainabilityï¼‰**ï¼šä»£ç æ˜“äºä¿®æ”¹å’Œæ‰©å±•çš„èƒ½åŠ›ã€‚</span><span class="hljs-string">      - **æ€§èƒ½ï¼ˆPerformanceï¼‰**ï¼šä»£ç æ‰§è¡Œæ•ˆç‡ã€‚</span><span class="hljs-string">      - **æ–‡æ¡£åŒ–ï¼ˆDocumentationï¼‰**ï¼šä»£ç é™„å¸¦çš„è¯´æ˜å’Œæ–‡æ¡£è´¨é‡ã€‚</span><span class="hljs-string">    2. **ç”Ÿæˆæ€»ä½“æŠ¥å‘Š**ï¼š</span><span class="hljs-string">      - å°†æ‰€æœ‰åˆ†æ­¥ä¿¡æ¯æ•´ç†æˆä¸€ä¸ªmarkdownç»“æ„ã€‚</span><span class="hljs-string">      - å†…å®¹åº”åŒ…æ‹¬ï¼šç¬¬ä¸€éƒ¨åˆ†ï¼šæ–‡ä»¶åˆ—è¡¨æ±‡æ€»ï¼ˆæ¯ä¸ªæ–‡ä»¶çš„æ€»è¡Œæ•°ã€æ³¨é‡Šè¡Œæ•°ã€ä»£ç è¡Œæ•°ã€æ€»æ³¨é‡Šç‡ã€ä»£ç è¡Œæ•°æ³¨é‡Šç‡è¯„åˆ†ï¼Œ 6ç»´è¯„åˆ†ï¼Œå¾—åˆ†æ¯”è¾ƒä½æˆ–è€…è¡Œæ•°æ¯”è¾ƒå¤šï¼›ç¬¬äºŒéƒ¨åˆ†æ¯ä¸€ä¸ªæ–‡ä»¶çš„åŠŸèƒ½æè¿°ï¼Œä»¥åŠåœ¨å…­ä¸ªè´¨é‡å› ç´ ä¸Šçš„è¯„åˆ†ä»¥åŠè¯´æ˜ï¼›ç¬¬ä¸‰éƒ¨åˆ†ï¼Œæ€»ç»“</span><span class="hljs-string"></span><span class="hljs-string">      ä»¥ä¸‹æ˜¯è¦è¯„å®¡çš„ä»£ç ï¼š</span><span class="hljs-string">      \`\`\`</span><span class="hljs-string">      <span class="hljs-subst">$&#123;extension&#125;</span></span><span class="hljs-string">      <span class="hljs-subst">$&#123;content&#125;</span></span><span class="hljs-string">      \`\`\`</span><span class="hljs-string">    `</span>;  <span class="hljs-keyword">const</span> client = <span class="hljs-keyword">new</span> OpenAI(&#123;    <span class="hljs-attr">apiKey</span>: OPENAI_API_KEY,    <span class="hljs-attr">baseURL</span>: OPENAI_API_BASE,  &#125;);  <span class="hljs-keyword">const</span> llmResponse = <span class="hljs-keyword">await</span> client.chat.completions.create(&#123;    <span class="hljs-attr">model</span>: OPENAI_API_MODEL,    <span class="hljs-attr">temperature</span>: <span class="hljs-number">0.1</span>,    <span class="hljs-attr">messages</span>: [      &#123;        <span class="hljs-attr">role</span>: <span class="hljs-string">&#x27;user&#x27;</span>,        <span class="hljs-attr">content</span>: prompt,      &#125;,    ],  &#125;);  server.server.sendLoggingMessage(&#123;    <span class="hljs-attr">level</span>: <span class="hljs-string">&quot;info&quot;</span>,    <span class="hljs-attr">data</span>: <span class="hljs-string">`llmç»“æŸ: <span class="hljs-subst">$&#123;llmResponse.choices[<span class="hljs-number">0</span>].message.content&#125;</span>`</span>  &#125;);  <span class="hljs-keyword">let</span> llmMessage = llmResponse.choices &amp;&amp; llmResponse.choices.length &gt; <span class="hljs-number">0</span> ? llmResponse.choices[<span class="hljs-number">0</span>].message.content : <span class="hljs-string">&quot;&quot;</span>;  <span class="hljs-keyword">if</span> (!llmMessage) &#123;    <span class="hljs-built_in">console</span>.error(<span class="hljs-string">`LLMå“åº”å†…å®¹ä¸ºç©º`</span>);    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&quot;LLMå“åº”ä¸ºç©º&quot;</span>);  &#125;  <span class="hljs-keyword">return</span> &#123;    filePath,    <span class="hljs-attr">llmResponse</span>: llmMessage,    <span class="hljs-attr">message</span>: <span class="hljs-string">`å¯¹ <span class="hljs-subst">$&#123;path.basename(filePath)&#125;</span> çš„ä»£ç è¯„å®¡å®Œæˆ`</span>,  &#125;;&#125;<span class="hljs-comment">// åˆ†ç¦»ç»“æœå’Œé”™è¯¯</span><span class="hljs-comment">// å®šä¹‰ç»“æœç±»å‹</span><span class="hljs-keyword">type</span> ProcessResult = &#123;  <span class="hljs-attr">filePath</span>: <span class="hljs-built_in">string</span>;  llmResponse: <span class="hljs-built_in">string</span>;  message: <span class="hljs-built_in">string</span>;  error?: <span class="hljs-built_in">string</span>;&#125;;<span class="hljs-comment">// å°†æ–‡ä»¶å¤„ç†é€»è¾‘å°è£…æˆç‹¬ç«‹å‡½æ•°</span><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">processFile</span>(<span class="hljs-params">fp: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">Promise</span>&lt;<span class="hljs-title">ProcessResult</span>&gt; </span>&#123;  <span class="hljs-keyword">try</span> &#123;    <span class="hljs-keyword">let</span> rawPath = <span class="hljs-built_in">String</span>.raw<span class="hljs-string">`<span class="hljs-subst">$&#123;fp&#125;</span>`</span>;<span class="hljs-comment">// ä½¿ç”¨åŸå§‹å­—ç¬¦ä¸²æ ‡è®°</span>    <span class="hljs-keyword">let</span> filePath = normalizeCrossPlatformPath(rawPath);<span class="hljs-comment">// å°†æ‰€æœ‰åæ–œæ æ›¿æ¢ä¸ºæ­£æ–œæ ï¼ŒNode.jså¯ä»¥åœ¨æ‰€æœ‰å¹³å°ä¸Šç†è§£</span>    <span class="hljs-comment">// æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨</span>    <span class="hljs-keyword">const</span> exists = <span class="hljs-keyword">await</span> fileExists(filePath);    server.server.sendLoggingMessage(&#123;      <span class="hljs-attr">level</span>: <span class="hljs-string">&quot;info&quot;</span>,      <span class="hljs-attr">data</span>: <span class="hljs-string">`éœ€è¦reviewçš„æ–‡ä»¶æ˜¯å¦å­˜åœ¨: <span class="hljs-subst">$&#123;exists&#125;</span>`</span>,    &#125;);    <span class="hljs-keyword">if</span> (!exists) &#123;      <span class="hljs-keyword">const</span> errorMsg = <span class="hljs-string">`æ–‡ä»¶ä¸å­˜åœ¨: <span class="hljs-subst">$&#123;filePath&#125;</span>`</span>;      <span class="hljs-built_in">console</span>.error(errorMsg);      <span class="hljs-keyword">return</span> &#123;        <span class="hljs-attr">filePath</span>: fp,        <span class="hljs-attr">llmResponse</span>: <span class="hljs-string">&quot;&quot;</span>,        <span class="hljs-attr">message</span>: <span class="hljs-string">`LLMåˆ†æå¤±è´¥: <span class="hljs-subst">$&#123;errorMsg&#125;</span>`</span>,        <span class="hljs-attr">error</span>: errorMsg      &#125;;    &#125;    <span class="hljs-comment">// è¯»å–æ–‡ä»¶å†…å®¹</span>    <span class="hljs-keyword">const</span> content = <span class="hljs-keyword">await</span> readFileContent(filePath);    <span class="hljs-comment">// ä½¿ç”¨LLMåˆ†ææ–‡ä»¶</span>    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> analyzeLLM(filePath, content);    <span class="hljs-keyword">return</span> result;  &#125; <span class="hljs-keyword">catch</span> (error) &#123;    <span class="hljs-keyword">const</span> errorMsg = <span class="hljs-string">`LLMåˆ†æå¤±è´¥ï¼š <span class="hljs-subst">$&#123;fp&#125;</span>: <span class="hljs-subst">$&#123;error&#125;</span>`</span>;    <span class="hljs-built_in">console</span>.error(errorMsg);    <span class="hljs-keyword">return</span> &#123;      <span class="hljs-attr">filePath</span>: fp,      <span class="hljs-attr">llmResponse</span>: <span class="hljs-string">&quot;&quot;</span>,      <span class="hljs-attr">message</span>: <span class="hljs-string">`LLMåˆ†æå¤±è´¥: <span class="hljs-subst">$&#123;error&#125;</span>`</span>,      <span class="hljs-attr">error</span>: errorMsg    &#125;;  &#125;&#125;<span class="hljs-comment">/**</span><span class="hljs-comment"> * ä»£ç è¯„å®¡å·¥å…·</span><span class="hljs-comment"> * <span class="hljs-doctag">@param <span class="hljs-type">&#123;string[]&#125;</span> <span class="hljs-variable">filePaths</span></span> - æ–‡ä»¶çš„ç»å¯¹è·¯å¾„æ•°ç»„</span><span class="hljs-comment"> * <span class="hljs-doctag">@returns <span class="hljs-type">&#123;Promise&lt;&#123; content: &#123; type: string, text: string &#125;</span></span>[] &#125;&gt;&#125; ä»£ç è¯„å®¡ç»“æœ</span><span class="hljs-comment"> */</span>server.tool(  <span class="hljs-string">&quot;reviewCode_tool&quot;</span>,  <span class="hljs-string">&quot;å·¥å…·æè¿°ï¼šæ ¹æ®è¦æ±‚è¿›è¡Œä»£ç è¯„å®¡ï¼Œæ€»ç»“ä»£ç è´¨é‡ï¼Œä¼ å‚ä¸ºfilePathsæ•°ç»„ï¼Œæ•°ç»„å…ƒç´ æ˜¯æ¯ä¸ªæ–‡ä»¶çš„å®Œæ•´åœ°å€&quot;</span>,  &#123; <span class="hljs-attr">filePaths</span>: z.array(z.string()) &#125;,  <span class="hljs-keyword">async</span> (&#123; filePaths &#125;) =&gt; &#123;    <span class="hljs-comment">// ä½¿ç”¨ Promise.all å¹¶è¡Œå¤„ç†æ‰€æœ‰æ–‡ä»¶</span>    <span class="hljs-keyword">const</span> processResults = <span class="hljs-keyword">await</span> <span class="hljs-built_in">Promise</span>.all(      filePaths.map(<span class="hljs-function"><span class="hljs-params">fp</span> =&gt;</span> processFile(fp))    );    <span class="hljs-keyword">const</span> results = processResults <span class="hljs-keyword">as</span> ProcessResult[];    <span class="hljs-keyword">const</span> errors = processResults      .filter((r: ProcessResult): r is ProcessResult &amp; &#123; <span class="hljs-attr">error</span>: <span class="hljs-built_in">string</span> &#125; =&gt; <span class="hljs-built_in">Boolean</span>(r.error))      .map(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> r.error);    server.server.sendLoggingMessage(&#123;      <span class="hljs-attr">level</span>: <span class="hljs-string">&quot;info&quot;</span>,      <span class="hljs-attr">data</span>: <span class="hljs-string">`å½“å‰çš„resultsï¼š<span class="hljs-subst">$&#123;<span class="hljs-built_in">JSON</span>.stringify(results)&#125;</span>`</span>    &#125;);    <span class="hljs-comment">// æ„å»ºå“åº”</span>    <span class="hljs-keyword">const</span> failedCount = results.filter(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> r.llmResponse === <span class="hljs-string">&quot;&quot;</span>).length;    <span class="hljs-keyword">const</span> response = &#123;      results,      errors,      <span class="hljs-attr">message</span>: <span class="hljs-string">`å·²åˆ†æ <span class="hljs-subst">$&#123;results.length&#125;</span> ä¸ªæ–‡ä»¶ï¼Œå¤±è´¥ <span class="hljs-subst">$&#123;failedCount&#125;</span> ä¸ªæ–‡ä»¶`</span>,    &#125;;    <span class="hljs-keyword">return</span> &#123;      <span class="hljs-attr">content</span>: [&#123; <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;text&quot;</span>, <span class="hljs-attr">text</span>: <span class="hljs-built_in">JSON</span>.stringify(response, <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>) &#125;],    &#125;;  &#125;);<span class="hljs-keyword">const</span> transport = <span class="hljs-keyword">new</span> StdioServerTransport();<span class="hljs-keyword">await</span> server.connect(transport)</code></pre></div><p>è°ƒç”¨çš„å·¥å…·ï¼šsloc_tool.ts</p><div class="code-wrapper"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123; sloc &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;node-sloc&#x27;</span>;<span class="hljs-comment">/**</span><span class="hljs-comment"> * ä»£ç è¡Œæ•°ç»Ÿè®¡ç»“æœæ¥å£</span><span class="hljs-comment"> */</span><span class="hljs-keyword">interface</span> SlocResult &#123;  <span class="hljs-comment">/** ç»Ÿè®¡çš„æ–‡ä»¶è·¯å¾„åˆ—è¡¨ */</span>  <span class="hljs-attr">paths</span>: <span class="hljs-built_in">string</span>[];  <span class="hljs-comment">/** ç»Ÿè®¡çš„æ–‡ä»¶æ•°é‡ */</span>  files: <span class="hljs-built_in">number</span>;  <span class="hljs-comment">/** ä»£ç è¡Œæ•°ï¼ˆä¸åŒ…å«æ³¨é‡Šå’Œç©ºè¡Œï¼‰ */</span>  sloc: <span class="hljs-built_in">number</span>;  <span class="hljs-comment">/** æ³¨é‡Šè¡Œæ•° */</span>  comments: <span class="hljs-built_in">number</span>;  <span class="hljs-comment">/** ç©ºè¡Œæ•° */</span>  blank: <span class="hljs-built_in">number</span>;  <span class="hljs-comment">/** æ€»è¡Œæ•°ï¼ˆä»£ç +æ³¨é‡Š+ç©ºè¡Œï¼‰ */</span>  loc: <span class="hljs-built_in">number</span>;&#125;<span class="hljs-comment">/**</span><span class="hljs-comment"> * æ‰©å±•çš„ç»Ÿè®¡ç»“æœæ¥å£ï¼ŒåŒ…å«æ³¨é‡Šç‡è®¡ç®—</span><span class="hljs-comment"> */</span><span class="hljs-keyword">interface</span> ExtendedSlocResult <span class="hljs-keyword">extends</span> SlocResult &#123;  <span class="hljs-comment">/** æ³¨é‡Šè¡Œæ•°å æ€»è¡Œæ•°çš„æ¯”ç‡ */</span>  <span class="hljs-attr">commentsToTotalRatio</span>: <span class="hljs-built_in">number</span>;  <span class="hljs-comment">/** æ³¨é‡Šè¡Œæ•°å ä»£ç è¡Œæ•°çš„æ¯”ç‡ */</span>  commentsToCodeRatio: <span class="hljs-built_in">number</span>;&#125;<span class="hljs-comment">/**</span><span class="hljs-comment"> * ç»Ÿè®¡æŒ‡å®šæ–‡ä»¶çš„ä»£ç è¡Œæ•°å’Œæ³¨é‡Šæ¯”ç‡</span><span class="hljs-comment"> * <span class="hljs-doctag">@param <span class="hljs-variable">filePath</span></span> - éœ€è¦ç»Ÿè®¡çš„æ–‡ä»¶è·¯å¾„</span><span class="hljs-comment"> * <span class="hljs-doctag">@returns </span>Promise&lt;ExtendedSlocResult&gt; è¿”å›ç»Ÿè®¡ç»“æœï¼ŒåŒ…å«ä»£ç è¡Œæ•°ã€æ³¨é‡Šè¡Œæ•°ã€ç©ºè¡Œæ•°åŠæ³¨é‡Šæ¯”ç‡</span><span class="hljs-comment"> */</span><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">countCodeLines</span>(<span class="hljs-params">filePath: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">Promise</span>&lt;<span class="hljs-title">ExtendedSlocResult</span>&gt; </span>&#123;  <span class="hljs-keyword">const</span> options = &#123;    <span class="hljs-attr">path</span>: filePath,    <span class="hljs-comment">// æ·»åŠ å¯¹Vueæ–‡ä»¶çš„æ”¯æŒ</span>    <span class="hljs-attr">extensions</span>: [<span class="hljs-string">&#x27;.js&#x27;</span>, <span class="hljs-string">&#x27;.ts&#x27;</span>, <span class="hljs-string">&#x27;.jsx&#x27;</span>, <span class="hljs-string">&#x27;.tsx&#x27;</span>, <span class="hljs-string">&#x27;.vue&#x27;</span>, <span class="hljs-string">&#x27;.html&#x27;</span>, <span class="hljs-string">&#x27;.css&#x27;</span>],    <span class="hljs-attr">ignorePaths</span>: [<span class="hljs-string">&#x27;node_modules&#x27;</span>, <span class="hljs-string">&#x27;dist&#x27;</span>, <span class="hljs-string">&#x27;build&#x27;</span>]  &#125;;  <span class="hljs-keyword">try</span> &#123;    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> sloc(options);        <span class="hljs-keyword">if</span>(!result) &#123;      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;ç»Ÿè®¡ç»“æœä¸ºç©º&#x27;</span>);    &#125;    <span class="hljs-comment">// è®¡ç®—æ³¨é‡Šæ¯”ç‡</span>    <span class="hljs-keyword">const</span> commentsToTotalRatio = <span class="hljs-built_in">Number</span>((result.comments / result.loc).toFixed(<span class="hljs-number">2</span>));    <span class="hljs-keyword">const</span> commentsToCodeRatio = <span class="hljs-built_in">Number</span>((result.comments / result.sloc).toFixed(<span class="hljs-number">2</span>));    <span class="hljs-keyword">return</span> &#123;      ...result,      commentsToTotalRatio,      commentsToCodeRatio    &#125;;  &#125; <span class="hljs-keyword">catch</span> (error) &#123;    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">`ç»Ÿè®¡ä»£ç è¡Œæ•°å¤±è´¥: <span class="hljs-subst">$&#123;error&#125;</span>`</span>);  &#125;&#125;<span class="hljs-keyword">export</span> &#123; countCodeLines &#125;;<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹ æ§åˆ¶å°è¿è¡Œtsx src/utils/sloc_tool.ts</span><span class="hljs-comment">// const filePath = &#x27;E:\\DDI\\project\\Leader_Coach\\src\\views\\home\\component\\chatScrollButton\\chatScrollButton.vue&#x27;;</span><span class="hljs-comment">// countCodeLines(filePath)</span><span class="hljs-comment">//   .then((result) =&gt; &#123;</span><span class="hljs-comment">//     console.log(&#x27;æ–‡ä»¶ç»Ÿè®¡ç»“æœ:&#x27;);</span><span class="hljs-comment">//     console.log(&#x27;æ–‡ä»¶è·¯å¾„:&#x27;, result.paths);</span><span class="hljs-comment">//     console.log(&#x27;æ–‡ä»¶æ•°é‡:&#x27;, result.files);</span><span class="hljs-comment">//     console.log(&#x27;ä»£ç è¡Œæ•°:&#x27;, result.sloc);</span><span class="hljs-comment">//     console.log(&#x27;æ³¨é‡Šè¡Œæ•°:&#x27;, result.comments);</span><span class="hljs-comment">//     console.log(&#x27;ç©ºè¡Œæ•°:&#x27;, result.blank);</span><span class="hljs-comment">//     console.log(&#x27;æ€»è¡Œæ•°:&#x27;, result.loc);</span><span class="hljs-comment">//     console.log(&#x27;æ³¨é‡Šè¡Œæ•°/æ€»è¡Œæ•°:&#x27;, `$&#123;result.commentsToTotalRatio * 100&#125;%`);</span><span class="hljs-comment">//     console.log(&#x27;æ³¨é‡Šè¡Œæ•°/ä»£ç è¡Œæ•°:&#x27;, `$&#123;result.commentsToCodeRatio * 100&#125;%`);</span><span class="hljs-comment">//   &#125;)</span><span class="hljs-comment">//   .catch((error) =&gt; &#123;</span><span class="hljs-comment">//     console.error(&#x27;é”™è¯¯:&#x27;, error);</span><span class="hljs-comment">//   &#125;); </span></code></pre></div><h2 id="MCP-Serverä½¿ç”¨æ­¥éª¤"><a href="#MCP-Serverä½¿ç”¨æ­¥éª¤" class="headerlink" title="MCP Serverä½¿ç”¨æ­¥éª¤"></a>MCP Serverä½¿ç”¨æ­¥éª¤</h2><ul><li><p>æ‹‰å–MCPä»£ç åˆ°æœ¬åœ°</p></li><li><p>æ ¹æ®è‡ªå·±çš„windowså’Œmacç¯å¢ƒå¯¹jsonè¿›è¡ŒåŒºåˆ†é…ç½®ï¼ˆå‘½ä»¤è·¯å¾„ï¼‰</p></li><li><p>ç„¶åå°†å…·ä½“æ–‡ä»¶åœ°å€å’Œè¦æ±‚ç»™åˆ°AI</p></li><li><p>ç­‰å¾…è¾“å‡º</p></li></ul><h2 id="Cursorä½¿ç”¨ç¤ºä¾‹"><a href="#Cursorä½¿ç”¨ç¤ºä¾‹" class="headerlink" title="Cursorä½¿ç”¨ç¤ºä¾‹"></a>Cursorä½¿ç”¨ç¤ºä¾‹</h2><p>é…ç½®jsonï¼š</p><div class="code-wrapper"><pre><code class="hljs json">&#123;  <span class="hljs-attr">&quot;mcpServers&quot;</span>: &#123;    <span class="hljs-attr">&quot;ä»£ç è¯„å®¡å·¥å…·&quot;</span>: &#123;      <span class="hljs-attr">&quot;command&quot;</span>: <span class="hljs-string">&quot;node&quot;</span>,      <span class="hljs-attr">&quot;args&quot;</span>: [<span class="hljs-string">&quot;your path/dist/mcp_code_review.js&quot;</span>],      <span class="hljs-attr">&quot;cwd&quot;</span>: <span class="hljs-string">&quot;your path&quot;</span>,      <span class="hljs-attr">&quot;env&quot;</span>: &#123;        <span class="hljs-attr">&quot;OPENAI_API_KEY&quot;</span>: <span class="hljs-string">&quot;your api key&quot;</span>,        <span class="hljs-attr">&quot;OPENAI_API_BASE&quot;</span>: <span class="hljs-string">&quot;https://openrouter.ai/api/v1&quot;</span>,        <span class="hljs-attr">&quot;OPENAI_API_MODEL&quot;</span>: <span class="hljs-string">&quot;qwen/qwen-2.5-coder-32b-instruct:free&quot;</span>      &#125;    &#125;  &#125;&#125;</code></pre></div><p>cursorä¸­å¯åŠ¨MCPæœåŠ¡ï¼Œä¼šè§¦å‘ä¸€ä¸ªå‘½ä»¤è¡Œçª—å£ï¼Œè¿è¡Œè¿‡ç¨‹ä¸­ä¸è¦å…³é—­</p><p>cursoré‡Œå¿…é¡»ä½¿ç”¨agentæ¨¡å¼ï¼Œå¹¶ä¸”ä½¿ç”¨claudeæ¨¡å‹ï¼Œpromptå¦‚ä¸‹ï¼š</p><div class="code-wrapper"><pre><code class="hljs plantext">E:\project\Leader_Coach\src\views\home\component\chatScrollButton\chatScrollButton.vueE:\project\Leader_Coach\src\views\recommend\recommend.tsä½¿ç”¨ä»£ç å®¡æŸ¥å·¥å…·å¯¹è¿™ä»¥ä¸Šæ–‡ä»¶è·¯å¾„è¿›è¡Œcode reviewè°ƒç”¨å·¥å…·çš„è¦æ±‚ï¼š- å–å‡ºå·¥å…·è¿”å›çš„llmResponseå­—æ®µé‡Œçš„å†…å®¹ï¼Œå°†å®Œæ•´å†…å®¹æå–åˆ°markdowné‡Œçš„codeæ ‡ç­¾é‡Œä¸€èµ·å›å¤- å¦‚æœå·¥å…·è¾“å‡ºé‡Œerrorsæœ‰å€¼ï¼Œæˆ–è€…messageé‡Œå¤±è´¥nä¸ªæ–‡ä»¶ï¼Œç›´æ¥å°†errorså†…å®¹è¾“å‡ºï¼Œè¿™ç§æƒ…å†µä¸è¦æ€»ç»“ä»£ç </code></pre></div>]]></content>
    
    
    <categories>
      
      <category>AIç›¸å…³</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MCP</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>LLMå…è´¹apiå¹³å°</title>
    <link href="/2025/03/25/LLM%E5%85%8D%E8%B4%B9api%E5%B9%B3%E5%8F%B0/"/>
    <url>/2025/03/25/LLM%E5%85%8D%E8%B4%B9api%E5%B9%B3%E5%8F%B0/</url>
    
    <content type="html"><![CDATA[<blockquote><p>å¹³æ—¶ä½¿ç”¨AIæ¨¡å‹è¿›è¡Œå­¦ä¹ å’Œå°è¯•å¼€å‘ä¸€äº›ç®€å•çš„agentï¼Œä¼šæ¶ˆè€—å¤§é‡tokenï¼Œè¿™é‡Œä»‹ç»ä¸¤ä¸ªæä¾›å…è´¹APIçš„å¹³å°ï¼Œè‡ªç”¨ä¸‹æ¥æ„Ÿè§‰å›å¤é€Ÿåº¦å’ŒæœåŠ¡å™¨ç¨³å®šæ€§å¾ˆä¸é”™ï¼š</p></blockquote><h2 id="ç¡…åŸºæµåŠ¨"><a href="#ç¡…åŸºæµåŠ¨" class="headerlink" title="ç¡…åŸºæµåŠ¨"></a>ç¡…åŸºæµåŠ¨</h2><p><a href="https://siliconflow.cn/zh-cn/">https://siliconflow.cn/zh-cn/</a></p><p>å®˜ç½‘ä»‹ç»ï¼šä¸“ä¸ºå¤§æ¨¡å‹å¾®è°ƒä¸æ‰˜ç®¡æ‰“é€ çš„ä¸€ç«™å¼æœåŠ¡å¹³å°ã€‚é€šè¿‡è¯¥å¹³å°ï¼Œç”¨æˆ·å¯ä»¥å¿«é€Ÿã€æ— ç¼åœ°å°†è‡ªå®šä¹‰æ¨¡å‹éƒ¨ç½²ä¸ºæœåŠ¡ï¼Œå¹¶æ ¹æ®è‡ªå·±ä¸Šä¼ çš„æ•°æ®è¿›è¡Œæ¨¡å‹å¾®è°ƒã€‚</p><ul><li>ç™»å½•å®˜ç½‘åï¼Œå…ˆç”³è¯·apikeyï¼Œç„¶åè¿›å…¥æ¨¡å‹å¹¿åœºé€‰æ‹©æ¨¡å‹ <a href="https://cloud.siliconflow.cn/models">https://cloud.siliconflow.cn/models</a></li></ul><p><img src="/img/blog/AI/api_platform/guiji_model_list.png"></p><p>å¯ç”¨çš„å…è´¹æ¨¡å‹è¿˜æ˜¯å¾ˆå¤šçš„ï¼Œè¿™é‡Œæ¼”ç¤ºä¸€ä¸‹æ¨ç†æ¨¡å‹çš„ä½¿ç”¨ï¼Œå…ˆçœ‹ä¸€ä¸‹å‚æ•°ï¼š<br><img src="/img/blog/AI/api_platform/guiji_api_param.png"></p><p><strong>ä½¿ç”¨OpenAI SDKè¿›è¡Œæµå¼è¾“å‡ºçš„ç®€å•demoï¼š</strong></p><div class="code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> openai <span class="hljs-keyword">import</span> OpenAI<span class="hljs-keyword">import</span> osclient = OpenAI(    api_key=os.getenv(<span class="hljs-string">&quot;SILICONFLOW_API_KEY&quot;</span>), <span class="hljs-comment">#è¿™é‡Œä½¿ç”¨ä½ è‡ªå·±çš„api key </span>    base_url=<span class="hljs-string">&quot;https://api.siliconflow.cn/v1&quot;</span>)completion = client.chat.completions.create(    model=<span class="hljs-string">&quot;deepseek-ai/DeepSeek-R1-Distill-Qwen-7B&quot;</span>, <span class="hljs-comment">#è¿™ä¸ªæ˜¯æ¨ç†æ¨¡å‹ï¼Œæ¨ç†å†…å®¹åœ¨reasoning_contenté‡Œ</span>    <span class="hljs-comment"># model=&quot;Qwen/Qwen2-7B-Instruct&quot;, # è‡ªè¡Œåˆ‡æ¢éæ¨ç†æ¨¡å‹å¯¹æ¯”æ•ˆæœ</span>    messages=[&#123;        <span class="hljs-string">&quot;role&quot;</span>: <span class="hljs-string">&quot;user&quot;</span>,          <span class="hljs-string">&quot;content&quot;</span>: <span class="hljs-string">&quot;9.9å’Œ9.11è°å¤§?&quot;</span>      &#125;],    stream=<span class="hljs-literal">True</span>)reasoning = <span class="hljs-string">&quot;&quot;</span>content = <span class="hljs-string">&quot;&quot;</span><span class="hljs-keyword">for</span> chunk <span class="hljs-keyword">in</span> completion:    <span class="hljs-comment"># print(&#x27;chunk.choices[0]:&#x27;, chunk.choices[0])</span>    delta = chunk.choices[<span class="hljs-number">0</span>].delta        delta_reasoning = <span class="hljs-built_in">getattr</span>(delta, <span class="hljs-string">&#x27;reasoning_content&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>)    delta_content = <span class="hljs-built_in">getattr</span>(delta, <span class="hljs-string">&#x27;content&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>)        <span class="hljs-keyword">if</span> delta_reasoning:        reasoning += delta_reasoning        <span class="hljs-built_in">print</span>(delta_reasoning, end=<span class="hljs-string">&quot;&quot;</span>, flush=<span class="hljs-literal">True</span>)    <span class="hljs-keyword">if</span> delta_content:        content += delta_content        <span class="hljs-built_in">print</span>(delta_content, end=<span class="hljs-string">&quot;&quot;</span>, flush=<span class="hljs-literal">True</span>)<span class="hljs-comment"># print(&#x27;\n&#x27;*2)</span><span class="hljs-comment"># if reasoning:</span><span class="hljs-comment">#     print(&quot;-&quot;*50)</span><span class="hljs-comment">#     print(&quot;å®Œæ•´æ¨ç†:&quot;, reasoning)</span><span class="hljs-comment"># print(&quot;-&quot;*50)</span><span class="hljs-comment"># print(&quot;å®Œæ•´å›ç­”:&quot;, content)</span></code></pre></div><p><strong>è¿è¡Œæ¼”ç¤º</strong></p><video width="800" controls>  <source src="/img/blog/AI/api_platform/guiji_test.mp4" type="video/mp4"></video><hr><h2 id="OpenRouterå¹³å°"><a href="#OpenRouterå¹³å°" class="headerlink" title="OpenRouterå¹³å°"></a>OpenRouterå¹³å°</h2><p><a href="https://openrouter.ai/">https://openrouter.ai/</a></p><p>å®˜ç½‘ä»‹ç»ï¼šä¸€ä¸ªæ”¯æŒLLMç»Ÿä¸€æ¥å£çš„å¹³å°</p><p><img src="/img/blog/AI/api_platform/openrouter_jieshao.png"></p><p>å’Œç¡…åŸºæµåŠ¨ä¸€æ ·ï¼Œæ³¨å†Œã€åˆ›å»ºapikeyã€é€‰æ‹©æ¨¡å‹ï¼›</p><p><strong>æ¨¡å‹åˆ—è¡¨</strong> :<br>å…¶ä¸­ä¹Ÿæœ‰æ˜¨å¤©åˆšå‘å¸ƒçš„deepseekæœ€æ–°ç‰ˆV3ï¼Œä¹Ÿæœ‰Qwen: QwQ 32B å’Œ DeepSeek: R1ï¼Œè¿™äº›åœ¨ç¡…åŸºæµåŠ¨ä¸Šéƒ½æ˜¯æ”¶è´¹çš„ï¼Œä¸ç¡®å®šopenrouteråç»­ä¼šä¸ä¼šæ”¶è´¹ï¼Œè‡³å°‘å¯ä»¥è¯•ç”¨çš„æƒ…å†µä¸‹å¯ä»¥ä¼˜å…ˆä½¿ç”¨è¿™ä¸ªå¹³å°è¿›è¡Œæµ‹è¯•</p><p><img src="/img/blog/AI/api_platform/openrouter_model_list.png"></p><p><strong>åŒæ ·ä½¿ç”¨OpenAI SDKè¿›è¡Œæµå¼è¾“å‡ºçš„ç®€å•demoï¼š</strong></p><p>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ€è€ƒçš„å­—æ®µæ˜¯reasoningï¼Œä»¥ä¸‹æ˜¯å®Œæ•´ä»£ç ï¼ŒåŸºæœ¬å’Œä¸Šé¢ä¸€è‡´ï¼š</p><div class="code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> openai <span class="hljs-keyword">import</span> OpenAI<span class="hljs-keyword">import</span> osclient = OpenAI(    api_key=os.getenv(<span class="hljs-string">&quot;OPEN_ROUTER_API_KEY&quot;</span>), <span class="hljs-comment">#è¿™é‡Œä½¿ç”¨ä½ è‡ªå·±çš„api key </span>    base_url=<span class="hljs-string">&quot;https://openrouter.ai/api/v1&quot;</span>)<span class="hljs-comment"># è‡ªè¡Œåˆ‡æ¢éæ¨ç†æ¨¡å‹å¯¹æ¯”æ•ˆæœ</span>completion = client.chat.completions.create(<span class="hljs-comment">#   model=&quot;deepseek/deepseek-chat-v3-0324:free&quot;,</span><span class="hljs-comment">#   model=&quot;qwen/qwq-32b:free&quot;,</span><span class="hljs-comment">#   model=&quot;qwen/qwen-2.5-72b-instruct:free&quot;,</span>  model=<span class="hljs-string">&quot;deepseek/deepseek-r1:free&quot;</span>, <span class="hljs-comment">#è¿™ä¸ªæ˜¯æ¨ç†æ¨¡å‹ï¼Œæ¨ç†å†…å®¹åœ¨reasoningé‡Œ</span>  messages=[    &#123;      <span class="hljs-string">&quot;role&quot;</span>: <span class="hljs-string">&quot;user&quot;</span>,      <span class="hljs-string">&quot;content&quot;</span>: <span class="hljs-string">&quot;9.9å’Œ9.11è°å¤§?&quot;</span>    &#125;  ],  stream=<span class="hljs-literal">True</span>)reasoning = <span class="hljs-string">&quot;&quot;</span>content = <span class="hljs-string">&quot;&quot;</span><span class="hljs-keyword">for</span> chunk <span class="hljs-keyword">in</span> completion:    <span class="hljs-comment"># print(&#x27;chunk.choices[0]:&#x27;, chunk.choices[0])</span>    delta = chunk.choices[<span class="hljs-number">0</span>].delta        <span class="hljs-comment"># ä½¿ç”¨ getattr å®‰å…¨åœ°è·å–å±æ€§ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™è¿”å›ç©ºå­—ç¬¦ä¸²</span>    delta_reasoning = <span class="hljs-built_in">getattr</span>(delta, <span class="hljs-string">&#x27;reasoning&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>)    delta_content = <span class="hljs-built_in">getattr</span>(delta, <span class="hljs-string">&#x27;content&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>)        <span class="hljs-comment"># å¦‚æœdelta_reasoningå­˜åœ¨ï¼Œåˆ™å°†å®ƒæ·»åŠ åˆ°reasoningä¸­ï¼Œå¹¶æ‰“å°å‡ºæ¥</span>    <span class="hljs-keyword">if</span> delta_reasoning:        reasoning += delta_reasoning        <span class="hljs-built_in">print</span>(delta_reasoning, end=<span class="hljs-string">&quot;&quot;</span>, flush=<span class="hljs-literal">True</span>)    <span class="hljs-comment"># å¦‚æœdelta_contentå­˜åœ¨ï¼Œåˆ™å°†å®ƒæ·»åŠ åˆ°contentä¸­ï¼Œå¹¶æ‰“å°å‡ºæ¥</span>    <span class="hljs-keyword">if</span> delta_content:        content += delta_content        <span class="hljs-built_in">print</span>(delta_content, end=<span class="hljs-string">&quot;&quot;</span>, flush=<span class="hljs-literal">True</span>)<span class="hljs-comment"># print(&#x27;\n&#x27;*2)</span><span class="hljs-comment"># if reasoning:</span><span class="hljs-comment">#     print(&quot;-&quot;*50)</span><span class="hljs-comment">#     print(&quot;å®Œæ•´æ¨ç†:&quot;, reasoning)</span><span class="hljs-comment"># print(&quot;-&quot;*50)</span><span class="hljs-comment"># print(&quot;å®Œæ•´å›ç­”:&quot;, content)</span></code></pre></div><p>å°±ä¸æ”¾è§†é¢‘äº†ï¼ŒåŸºæœ¬æ•ˆæœå’Œä¸Šé¢è§†é¢‘é‡Œæ˜¯å·®ä¸å¤šçš„ï¼š</p><p><img src="/img/blog/AI/api_platform/openrouter_llm_test.png"></p>]]></content>
    
    
    <categories>
      
      <category>AIç›¸å…³</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Langgraphå­¦ä¹ 5ï¼šWebAgentæ”¯æŒç½‘é¡µå†…å®¹æŠ“å–</title>
    <link href="/2025/03/23/Langgraph%E5%AD%A6%E4%B9%A05%EF%BC%9AWebAgent%E6%94%AF%E6%8C%81%E7%BD%91%E9%A1%B5%E5%86%85%E5%AE%B9%E6%8A%93%E5%8F%96/"/>
    <url>/2025/03/23/Langgraph%E5%AD%A6%E4%B9%A05%EF%BC%9AWebAgent%E6%94%AF%E6%8C%81%E7%BD%91%E9%A1%B5%E5%86%85%E5%AE%B9%E6%8A%93%E5%8F%96/</url>
    
    <content type="html"><![CDATA[<p>åŠŸèƒ½å·²å®Œæˆï¼Œåšå®¢å¾…ç¼–å†™~~</p>]]></content>
    
    
    <categories>
      
      <category>AIç›¸å…³</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Langgraph</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Langgraphå­¦ä¹ 3ï¼šAIæœç´¢å·¥å…·çš„æ¯”è¾ƒ</title>
    <link href="/2025/03/22/Langgraph%E5%AD%A6%E4%B9%A03%EF%BC%9AAI%E6%90%9C%E7%B4%A2%E5%B7%A5%E5%85%B7%E7%9A%84%E6%AF%94%E8%BE%83/"/>
    <url>/2025/03/22/Langgraph%E5%AD%A6%E4%B9%A03%EF%BC%9AAI%E6%90%9C%E7%B4%A2%E5%B7%A5%E5%85%B7%E7%9A%84%E6%AF%94%E8%BE%83/</url>
    
    <content type="html"><![CDATA[<h1 id="AIæœç´¢å·¥å…·çš„æ¯”è¾ƒï¼šTavily-VS-DuckDuckGo"><a href="#AIæœç´¢å·¥å…·çš„æ¯”è¾ƒï¼šTavily-VS-DuckDuckGo" class="headerlink" title="AIæœç´¢å·¥å…·çš„æ¯”è¾ƒï¼šTavily VS DuckDuckGo"></a>AIæœç´¢å·¥å…·çš„æ¯”è¾ƒï¼šTavily VS DuckDuckGo</h1><p>åœ¨æ„å»ºAIåº”ç”¨ç¨‹åºæ—¶ï¼Œè·å–å‡†ç¡®ã€å®æ—¶çš„å¤–éƒ¨ä¿¡æ¯æ˜¯éå¸¸é‡è¦çš„ä¸€ç¯ã€‚LangChainæä¾›äº†å¤šç§æœç´¢å·¥å…·æ¥å¸®åŠ©AIç³»ç»Ÿè·å–ç½‘ç»œä¸Šçš„ä¿¡æ¯ã€‚æœ¬æ–‡å°†è¯¦ç»†æ¯”è¾ƒä¸¤ç§å¸¸ç”¨çš„æœç´¢å·¥å…·ï¼šTavilyå’ŒDuckDuckGoï¼Œåˆ†æå®ƒä»¬çš„ä½¿ç”¨æ–¹æ³•ã€ç‰¹ç‚¹ä»¥åŠæ€§èƒ½å·®å¼‚ã€‚</p><h2 id="æœç´¢å·¥å…·æ¦‚è¿°"><a href="#æœç´¢å·¥å…·æ¦‚è¿°" class="headerlink" title="æœç´¢å·¥å…·æ¦‚è¿°"></a>æœç´¢å·¥å…·æ¦‚è¿°</h2><h3 id="Tavily"><a href="#Tavily" class="headerlink" title="Tavily"></a>Tavily</h3><p>Tavilyæ˜¯ä¸€æ¬¾ä¸“ä¸ºAIåº”ç”¨ä¼˜åŒ–çš„æœç´¢å¼•æ“ï¼Œæä¾›äº†ç»“æ„åŒ–çš„æœç´¢ç»“æœã€‚å®ƒéœ€è¦APIå¯†é’¥æ‰èƒ½ä½¿ç”¨ï¼Œä½†èƒ½æä¾›é«˜è´¨é‡çš„AIå‹å¥½å‹æœç´¢ç»“æœã€‚</p><p>ç‰¹ç‚¹ï¼š</p><ul><li>éœ€è¦APIå¯†é’¥</li><li>ç»“æœæ ¼å¼ç»Ÿä¸€ï¼Œä¾¿äºAIå¤„ç†</li><li>ä¸“ä¸ºAIåº”ç”¨ä¼˜åŒ–</li><li>è¿”å›ç»“æ„åŒ–æ•°æ®</li><li>æ¯æœˆ1000æ¬¡å…è´¹è¯·æ±‚</li></ul><p>éœ€è¦å…ˆåˆ°å®˜ç½‘è¿›è¡Œæ³¨å†Œï¼Œå’Œåˆ›å»ºAPIKEYï¼š <a href="https://app.tavily.com/home">https://app.tavily.com/home</a><br><img src="/img/blog/AI/langgraph/2025-03-22_19-41-56.png"></p><h3 id="DuckDuckGo"><a href="#DuckDuckGo" class="headerlink" title="DuckDuckGo"></a>DuckDuckGo</h3><p>DuckDuckGoæ˜¯ä¸€ä¸ªæ³¨é‡éšç§çš„æœç´¢å¼•æ“ï¼Œåœ¨LangChainä¸­å¯ä»¥å…è´¹ä½¿ç”¨ï¼Œæ— éœ€APIå¯†é’¥ã€‚å®ƒæä¾›äº†ä¸€ç§æ— éœ€é¢å¤–å‡­è¯å³å¯è·å–ç½‘ç»œä¿¡æ¯çš„æ–¹å¼ã€‚</p><p>ç‰¹ç‚¹ï¼š</p><ul><li>æ— éœ€APIå¯†é’¥</li><li>æ³¨é‡éšç§ä¿æŠ¤</li><li>å…è´¹ä½¿ç”¨</li><li>è¦†ç›–èŒƒå›´å¹¿æ³›</li></ul><h2 id="å®Œæ•´ä»£ç "><a href="#å®Œæ•´ä»£ç " class="headerlink" title="å®Œæ•´ä»£ç "></a>å®Œæ•´ä»£ç </h2><p>ä»¥ä¸‹æ˜¯å®Œæ•´çš„æ¯”è¾ƒä»£ç ï¼Œå¯ä»¥ç›´æ¥è¿è¡Œæ¥æµ‹è¯•è¿™ä¸¤ç§æœç´¢å·¥å…·ï¼š</p><div class="code-wrapper"><pre><code class="hljs python"><span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">æœç´¢å·¥å…·æ¯”è¾ƒç¤ºä¾‹ï¼šTavily vs DuckDuckGo</span><span class="hljs-string"></span><span class="hljs-string">è¯¥ç¤ºä¾‹æ¯”è¾ƒäº†LangChainä¸­ä¸¤ä¸ªå¸¸ç”¨çš„æœç´¢å·¥å…·ï¼š</span><span class="hljs-string">1. Tavily - éœ€è¦APIå¯†é’¥çš„AIä¼˜åŒ–æœç´¢å¼•æ“</span><span class="hljs-string">2. DuckDuckGo - æ³¨é‡éšç§çš„å…è´¹æœç´¢å¼•æ“ï¼Œæ— éœ€APIå¯†é’¥</span><span class="hljs-string"></span><span class="hljs-string">é€šè¿‡ç›¸åŒçš„æŸ¥è¯¢ï¼Œè§‚å¯Ÿä¸¤ç§æœç´¢å·¥å…·è¿”å›ç»“æœçš„å·®å¼‚ã€‚</span><span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-keyword">import</span> os<span class="hljs-keyword">import</span> time<span class="hljs-keyword">import</span> json<span class="hljs-keyword">from</span> langchain_community.tools.tavily_search <span class="hljs-keyword">import</span> TavilySearchResults<span class="hljs-keyword">from</span> langchain_community.tools.ddg_search.tool <span class="hljs-keyword">import</span> DuckDuckGoSearchResults<span class="hljs-comment"># è®¾ç½®Tavily APIå¯†é’¥ï¼ˆå¦‚æœå­˜åœ¨ï¼‰</span>tavily_api_key = os.getenv(<span class="hljs-string">&#x27;TAVILY_API_KEY&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>)<span class="hljs-keyword">if</span> tavily_api_key:    os.environ[<span class="hljs-string">&#x27;TAVILY_API_KEY&#x27;</span>] = tavily_api_key<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">format_results</span>(<span class="hljs-params">results, tool_name</span>):</span>    <span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">    æ ¼å¼åŒ–æœç´¢ç»“æœä¸ºæ˜“è¯»çš„æ ¼å¼</span><span class="hljs-string">    </span><span class="hljs-string">    Args:</span><span class="hljs-string">        results (list or str): æœç´¢ç»“æœåˆ—è¡¨æˆ–å­—ç¬¦ä¸²</span><span class="hljs-string">        tool_name (str): æœç´¢å·¥å…·åç§°</span><span class="hljs-string">        </span><span class="hljs-string">    Returns:</span><span class="hljs-string">        str: æ ¼å¼åŒ–åçš„æœç´¢ç»“æœå­—ç¬¦ä¸²</span><span class="hljs-string">    &quot;&quot;&quot;</span>    formatted_output = <span class="hljs-string">f&quot;<span class="hljs-subst">&#123;tool_name&#125;</span> æœç´¢ç»“æœ:\n&quot;</span>        <span class="hljs-comment"># å¦‚æœç»“æœæ˜¯å­—ç¬¦ä¸²ï¼Œå°è¯•è§£æJSON</span>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(results, <span class="hljs-built_in">str</span>) <span class="hljs-keyword">and</span> tool_name == <span class="hljs-string">&quot;DuckDuckGo&quot;</span>:        <span class="hljs-keyword">try</span>:            parsed_results = json.loads(results)            results = parsed_results        <span class="hljs-keyword">except</span>:            <span class="hljs-keyword">return</span> formatted_output + results        <span class="hljs-comment"># æ ¹æ®ä¸åŒçš„å·¥å…·æ ¼å¼åŒ–ç»“æœ</span>    <span class="hljs-keyword">if</span> tool_name == <span class="hljs-string">&quot;Tavily&quot;</span>:        <span class="hljs-keyword">for</span> i, result <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(results, <span class="hljs-number">1</span>):            formatted_output += <span class="hljs-string">f&quot;<span class="hljs-subst">&#123;i&#125;</span>. æ ‡é¢˜: <span class="hljs-subst">&#123;result.get(<span class="hljs-string">&#x27;title&#x27;</span>, <span class="hljs-string">&#x27;N/A&#x27;</span>)&#125;</span>\n&quot;</span>            formatted_output += <span class="hljs-string">f&quot;   é“¾æ¥: <span class="hljs-subst">&#123;result.get(<span class="hljs-string">&#x27;url&#x27;</span>, <span class="hljs-string">&#x27;N/A&#x27;</span>)&#125;</span>\n&quot;</span>            formatted_output += <span class="hljs-string">f&quot;   å†…å®¹: <span class="hljs-subst">&#123;result.get(<span class="hljs-string">&#x27;content&#x27;</span>, <span class="hljs-string">&#x27;N/A&#x27;</span>)[:<span class="hljs-number">150</span>]&#125;</span>...\n\n&quot;</span>    <span class="hljs-keyword">else</span>:  <span class="hljs-comment"># DuckDuckGo</span>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(results, <span class="hljs-built_in">list</span>):            <span class="hljs-keyword">for</span> i, result <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(results, <span class="hljs-number">1</span>):                formatted_output += <span class="hljs-string">f&quot;<span class="hljs-subst">&#123;i&#125;</span>. æ ‡é¢˜: <span class="hljs-subst">&#123;result.get(<span class="hljs-string">&#x27;title&#x27;</span>, <span class="hljs-string">&#x27;N/A&#x27;</span>)&#125;</span>\n&quot;</span>                formatted_output += <span class="hljs-string">f&quot;   é“¾æ¥: <span class="hljs-subst">&#123;result.get(<span class="hljs-string">&#x27;link&#x27;</span>, <span class="hljs-string">&#x27;N/A&#x27;</span>)&#125;</span>\n&quot;</span>                 formatted_output += <span class="hljs-string">f&quot;   æ‘˜è¦: <span class="hljs-subst">&#123;result.get(<span class="hljs-string">&#x27;snippet&#x27;</span>, <span class="hljs-string">&#x27;N/A&#x27;</span>)&#125;</span>\n\n&quot;</span>        <span class="hljs-keyword">else</span>:            formatted_output += <span class="hljs-string">&quot;æ— æ³•è§£ææœç´¢ç»“æœæ ¼å¼\n&quot;</span>                <span class="hljs-keyword">return</span> formatted_output<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">search_with_tool</span>(<span class="hljs-params">query, tool_type, max_results</span>):</span>    <span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">    ä½¿ç”¨æŒ‡å®šçš„æœç´¢å·¥å…·è¿›è¡Œç½‘ç»œæœç´¢</span><span class="hljs-string">    </span><span class="hljs-string">    Args:</span><span class="hljs-string">        query (str): æœç´¢æŸ¥è¯¢</span><span class="hljs-string">        tool_type (str): æœç´¢å·¥å…·ç±»å‹ (&quot;tavily&quot; æˆ– &quot;duckduckgo&quot;)</span><span class="hljs-string">        max_results (int, optional): æœ€å¤§ç»“æœæ•°. é»˜è®¤ä¸º5.</span><span class="hljs-string">        </span><span class="hljs-string">    Returns:</span><span class="hljs-string">        dict: æœç´¢ç»“æœå’ŒçŠ¶æ€ä¿¡æ¯</span><span class="hljs-string">    &quot;&quot;&quot;</span>    <span class="hljs-keyword">try</span>:        <span class="hljs-comment"># æ ¹æ®å·¥å…·ç±»å‹åˆ›å»ºæœç´¢å·¥å…·</span>        <span class="hljs-keyword">if</span> tool_type.lower() == <span class="hljs-string">&quot;tavily&quot;</span>:            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> tavily_api_key:                <span class="hljs-keyword">return</span> &#123;                    <span class="hljs-string">&quot;success&quot;</span>: <span class="hljs-literal">False</span>,                    <span class="hljs-string">&quot;message&quot;</span>: <span class="hljs-string">&quot;æœªè®¾ç½®Tavily APIå¯†é’¥ï¼Œæ— æ³•ä½¿ç”¨Tavilyæœç´¢&quot;</span>,                    <span class="hljs-string">&quot;results&quot;</span>: []                &#125;            search_tool = TavilySearchResults(max_results=max_results)            tool_name = <span class="hljs-string">&quot;Tavily&quot;</span>        <span class="hljs-keyword">elif</span> tool_type.lower() == <span class="hljs-string">&quot;duckduckgo&quot;</span>:            search_tool = DuckDuckGoSearchResults(max_results=max_results, output_format=<span class="hljs-string">&quot;list&quot;</span>)            tool_name = <span class="hljs-string">&quot;DuckDuckGo&quot;</span>        <span class="hljs-keyword">else</span>:            <span class="hljs-keyword">return</span> &#123;                <span class="hljs-string">&quot;success&quot;</span>: <span class="hljs-literal">False</span>,                <span class="hljs-string">&quot;message&quot;</span>: <span class="hljs-string">f&quot;ä¸æ”¯æŒçš„æœç´¢å·¥å…·ç±»å‹: <span class="hljs-subst">&#123;tool_type&#125;</span>&quot;</span>,                <span class="hljs-string">&quot;results&quot;</span>: []            &#125;                <span class="hljs-comment"># è®¡æ—¶å¼€å§‹</span>        start_time = time.time()                <span class="hljs-comment"># è°ƒç”¨æœç´¢å·¥å…·</span>        results = search_tool.invoke(&#123;<span class="hljs-string">&quot;query&quot;</span>: query&#125;)                <span class="hljs-comment"># è®¡æ—¶ç»“æŸ</span>        end_time = time.time()        search_time = end_time - start_time                <span class="hljs-comment"># æ£€æŸ¥ç»“æœ</span>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> results:            <span class="hljs-keyword">return</span> &#123;                <span class="hljs-string">&quot;success&quot;</span>: <span class="hljs-literal">False</span>,                <span class="hljs-string">&quot;message&quot;</span>: <span class="hljs-string">f&quot;<span class="hljs-subst">&#123;tool_name&#125;</span>æœç´¢æœªè¿”å›ä»»ä½•ç»“æœ&quot;</span>,                <span class="hljs-string">&quot;results&quot;</span>: [],                <span class="hljs-string">&quot;tool_name&quot;</span>: tool_name,                <span class="hljs-string">&quot;search_time&quot;</span>: search_time            &#125;                    <span class="hljs-comment"># æ ¼å¼åŒ–ç»“æœ</span>        formatted_results = format_results(results, tool_name)                <span class="hljs-keyword">return</span> &#123;            <span class="hljs-string">&quot;success&quot;</span>: <span class="hljs-literal">True</span>,            <span class="hljs-string">&quot;message&quot;</span>: <span class="hljs-string">f&quot;<span class="hljs-subst">&#123;tool_name&#125;</span>æœç´¢æˆåŠŸå®Œæˆ&quot;</span>,            <span class="hljs-string">&quot;results&quot;</span>: results,            <span class="hljs-string">&quot;formatted_results&quot;</span>: formatted_results,            <span class="hljs-string">&quot;tool_name&quot;</span>: tool_name,            <span class="hljs-string">&quot;search_time&quot;</span>: search_time        &#125;            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:        <span class="hljs-keyword">return</span> &#123;            <span class="hljs-string">&quot;success&quot;</span>: <span class="hljs-literal">False</span>,            <span class="hljs-string">&quot;message&quot;</span>: <span class="hljs-string">f&quot;æœç´¢è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯: <span class="hljs-subst">&#123;<span class="hljs-built_in">str</span>(e)&#125;</span>&quot;</span>,            <span class="hljs-string">&quot;results&quot;</span>: [],            <span class="hljs-string">&quot;tool_name&quot;</span>: tool_type        &#125;<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">compare_search_tools</span>(<span class="hljs-params">query, max_results=<span class="hljs-number">3</span></span>):</span>    <span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">    æ¯”è¾ƒä¸åŒæœç´¢å·¥å…·çš„ç»“æœ</span><span class="hljs-string">    </span><span class="hljs-string">    Args:</span><span class="hljs-string">        query (str): æœç´¢æŸ¥è¯¢</span><span class="hljs-string">        max_results (int, optional): æ¯ä¸ªå·¥å…·è¿”å›çš„æœ€å¤§ç»“æœæ•°. é»˜è®¤ä¸º3.</span><span class="hljs-string">    &quot;&quot;&quot;</span>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">60</span>)    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;æœç´¢æŸ¥è¯¢: &#x27;<span class="hljs-subst">&#123;query&#125;</span>&#x27;&quot;</span>)    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">60</span>)        <span class="hljs-comment"># ä½¿ç”¨DuckDuckGoæœç´¢</span>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n[1] ä½¿ç”¨DuckDuckGoæœç´¢...&quot;</span>)    ddg_result = search_with_tool(query, <span class="hljs-string">&quot;duckduckgo&quot;</span>, max_results)        <span class="hljs-comment"># ä½¿ç”¨Tavilyæœç´¢ (å¦‚æœæœ‰APIå¯†é’¥)</span>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n[2] ä½¿ç”¨Tavilyæœç´¢...&quot;</span>)    tavily_result = search_with_tool(query, <span class="hljs-string">&quot;tavily&quot;</span>, max_results)        <span class="hljs-comment"># æ‰“å°ç»“æœæ¯”è¾ƒ</span>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n&quot;</span> + <span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">60</span>)    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;æœç´¢ç»“æœæ¯”è¾ƒ&quot;</span>)    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">60</span>)        <span class="hljs-comment"># DuckDuckGoç»“æœ</span>    <span class="hljs-keyword">if</span> ddg_result[<span class="hljs-string">&quot;success&quot;</span>]:        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\nDuckDuckGo æœç´¢æ—¶é—´: <span class="hljs-subst">&#123;ddg_result.get(<span class="hljs-string">&#x27;search_time&#x27;</span>, <span class="hljs-string">&#x27;N/A&#x27;</span>):<span class="hljs-number">.2</span>f&#125;</span> ç§’&quot;</span>)        <span class="hljs-built_in">print</span>(ddg_result[<span class="hljs-string">&quot;formatted_results&quot;</span>])    <span class="hljs-keyword">else</span>:        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\nDuckDuckGo æœç´¢å¤±è´¥: <span class="hljs-subst">&#123;ddg_result[<span class="hljs-string">&#x27;message&#x27;</span>]&#125;</span>&quot;</span>)        <span class="hljs-comment"># Tavilyç»“æœ</span>    <span class="hljs-keyword">if</span> tavily_result[<span class="hljs-string">&quot;success&quot;</span>]:        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\nTavily æœç´¢æ—¶é—´: <span class="hljs-subst">&#123;tavily_result.get(<span class="hljs-string">&#x27;search_time&#x27;</span>, <span class="hljs-string">&#x27;N/A&#x27;</span>):<span class="hljs-number">.2</span>f&#125;</span> ç§’&quot;</span>)        <span class="hljs-built_in">print</span>(tavily_result[<span class="hljs-string">&quot;formatted_results&quot;</span>])    <span class="hljs-keyword">else</span>:        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\nTavily æœç´¢å¤±è´¥: <span class="hljs-subst">&#123;tavily_result[<span class="hljs-string">&#x27;message&#x27;</span>]&#125;</span>&quot;</span>)        <span class="hljs-comment"># æ·»åŠ å·®å¼‚åˆ†æ</span>    <span class="hljs-keyword">if</span> ddg_result[<span class="hljs-string">&quot;success&quot;</span>] <span class="hljs-keyword">and</span> tavily_result[<span class="hljs-string">&quot;success&quot;</span>]:        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n&quot;</span> + <span class="hljs-string">&quot;-&quot;</span> * <span class="hljs-number">60</span>)        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;ç»“æœå·®å¼‚åˆ†æ:&quot;</span>)        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;-&quot;</span> * <span class="hljs-number">60</span>)                <span class="hljs-comment"># æ¯”è¾ƒç»“æœæ•°é‡</span>        ddg_results = ddg_result[<span class="hljs-string">&quot;results&quot;</span>]        tavily_results = tavily_result[<span class="hljs-string">&quot;results&quot;</span>]                <span class="hljs-comment"># å¤„ç†DuckDuckGoçš„ç»“æœæ•°é‡</span>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(ddg_results, <span class="hljs-built_in">str</span>):            <span class="hljs-keyword">try</span>:                <span class="hljs-keyword">import</span> json                ddg_results = json.loads(ddg_results)            <span class="hljs-keyword">except</span>:                ddg_results = []                        ddg_count = <span class="hljs-built_in">len</span>(ddg_results) <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(ddg_results, <span class="hljs-built_in">list</span>) <span class="hljs-keyword">else</span> <span class="hljs-number">0</span>        tavily_count = <span class="hljs-built_in">len</span>(tavily_results)                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;DuckDuckGo è¿”å›ç»“æœæ•°é‡: <span class="hljs-subst">&#123;ddg_count&#125;</span>&quot;</span>)        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Tavily è¿”å›ç»“æœæ•°é‡: <span class="hljs-subst">&#123;tavily_count&#125;</span>&quot;</span>)                <span class="hljs-comment"># æ¯”è¾ƒå“åº”æ—¶é—´</span>        <span class="hljs-keyword">if</span> <span class="hljs-string">&quot;search_time&quot;</span> <span class="hljs-keyword">in</span> ddg_result <span class="hljs-keyword">and</span> <span class="hljs-string">&quot;search_time&quot;</span> <span class="hljs-keyword">in</span> tavily_result:            ddg_time = ddg_result[<span class="hljs-string">&quot;search_time&quot;</span>]            tavily_time = tavily_result[<span class="hljs-string">&quot;search_time&quot;</span>]            faster = <span class="hljs-string">&quot;DuckDuckGo&quot;</span> <span class="hljs-keyword">if</span> ddg_time &lt; tavily_time <span class="hljs-keyword">else</span> <span class="hljs-string">&quot;Tavily&quot;</span>            time_diff = <span class="hljs-built_in">abs</span>(ddg_time - tavily_time)            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;å“åº”æ—¶é—´å·®å¼‚: <span class="hljs-subst">&#123;faster&#125;</span> æ›´å¿« <span class="hljs-subst">&#123;time_diff:<span class="hljs-number">.2</span>f&#125;</span> ç§’&quot;</span>)<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span>():</span>    <span class="hljs-string">&quot;&quot;&quot;ä¸»å‡½æ•°ï¼Œè¿è¡Œæœç´¢å·¥å…·æ¯”è¾ƒç¤ºä¾‹&quot;&quot;&quot;</span>    <span class="hljs-comment"># ç¤ºä¾‹æœç´¢æŸ¥è¯¢</span>    queries = [        <span class="hljs-string">&quot;2024å¹´äººå·¥æ™ºèƒ½çš„ä¸»è¦å‘å±•è¶‹åŠ¿&quot;</span>,        <span class="hljs-string">&quot;LangChainå’ŒLlamaIndexçš„æ¯”è¾ƒ&quot;</span>,        <span class="hljs-string">&quot;Pythonå’ŒJavaScriptçš„åŒºåˆ«&quot;</span>    ]        <span class="hljs-keyword">for</span> query <span class="hljs-keyword">in</span> queries:        compare_search_tools(query)        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n\n&quot;</span> + <span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">70</span> + <span class="hljs-string">&quot;\n&quot;</span>)                <span class="hljs-comment"># æš‚åœä¸€ä¸‹ï¼Œé¿å…æœç´¢é¢‘ç‡è¿‡é«˜</span>        time.sleep(<span class="hljs-number">2</span>)<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n&quot;</span> + <span class="hljs-string">&quot;*&quot;</span> * <span class="hljs-number">70</span>)    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;* LangChainæœç´¢å·¥å…·æ¯”è¾ƒ: Tavily vs DuckDuckGo *&quot;</span>.center(<span class="hljs-number">70</span>))    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;*&quot;</span> * <span class="hljs-number">70</span> + <span class="hljs-string">&quot;\n&quot;</span>)        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> tavily_api_key:        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;è­¦å‘Š: æœªè®¾ç½®TAVILY_API_KEYç¯å¢ƒå˜é‡ï¼ŒTavilyæœç´¢å°†ä¸å¯ç”¨\n&quot;</span>)        main()</code></pre></div><h2 id="å®é™…è¿è¡Œç»“æœ"><a href="#å®é™…è¿è¡Œç»“æœ" class="headerlink" title="å®é™…è¿è¡Œç»“æœ"></a>å®é™…è¿è¡Œç»“æœ</h2><p>ä¸‹é¢æ˜¯ä½¿ç”¨ä¸Šè¿°ä»£ç è¿è¡Œä¸‰ä¸ªä¸åŒæŸ¥è¯¢çš„å®é™…å¯¹æ¯”ç»“æœï¼Œå¯ä»¥ç›´è§‚åœ°çœ‹å‡ºä¸¤ç§æœç´¢å·¥å…·åœ¨ä¸åŒæ–¹é¢çš„è¡¨ç°å·®å¼‚ï¼š</p><div class="code-wrapper"><pre><code class="hljs log">**********************************************************************              * LangChainæœç´¢å·¥å…·æ¯”è¾ƒ: Tavily vs DuckDuckGo ***********************************************************************============================================================æœç´¢æŸ¥è¯¢: &#x27;2024å¹´äººå·¥æ™ºèƒ½çš„ä¸»è¦å‘å±•è¶‹åŠ¿&#x27;============================================================[1] ä½¿ç”¨DuckDuckGoæœç´¢...[2] ä½¿ç”¨Tavilyæœç´¢...============================================================æœç´¢ç»“æœæ¯”è¾ƒ============================================================DuckDuckGo æœç´¢æ—¶é—´: 6.33 ç§’DuckDuckGo æœç´¢ç»“æœ:1. æ ‡é¢˜: æé£é£å›¢é˜Ÿå‘å¸ƒã€Š2024å¹´äººå·¥æ™ºèƒ½æŒ‡æ•°æŠ¥å‘Šã€‹ï¼š10å¤§è¶‹åŠ¿ï¼Œæ­ç¤ºAIå¤§æ¨¡å‹å–œä¸å¿§_æ¾æ¹ƒå·Â·æ¹ƒå®¢_æ¾æ¹ƒæ–°é—»-The Paper   é“¾æ¥: https://www.thepaper.cn/newsDetail_forward_27045165   æ‘˜è¦: åˆšåˆšï¼Œç”±æé£é£è”åˆé¢†å¯¼çš„æ–¯å¦ç¦å¤§å­¦ä»¥äººä¸ºæœ¬äººå·¥æ™ºèƒ½ç ”ç©¶æ‰€ï¼ˆStanford HAIï¼‰å‘å¸ƒäº†ã€Š2024 å¹´äººå·¥æ™ºèƒ½æŒ‡æ•°æŠ¥å‘Šã€‹ï¼ˆArtificial Intelligence Index Report 2024ï¼‰ã€‚ è¿™ä»½é•¿è¾¾ 300 å¤šé¡µçš„æŠ¥å‘Šæ˜¯ Stanford HAI å‘å¸ƒçš„ç¬¬ 7 ä»½ AI Index ç ”ç©¶ï¼Œè¿½è¸ªäº† 2023 å¹´å…¨çƒäººå·¥æ™ºèƒ½çš„å‘å±•è¶‹åŠ¿ã€‚2. æ ‡é¢˜: ã€Š2024å¹´äººå·¥æ™ºèƒ½æŒ‡æ•°æŠ¥å‘Šã€‹   é“¾æ¥: https://cingai.nankai.edu.cn/2024/0914/c10233a550905/page.htm   æ‘˜è¦: 2024å¹´4æœˆï¼Œæ–¯å¦ç¦å¤§å­¦ä»¥äººä¸ºæœ¬äººå·¥æ™ºèƒ½ç ”ç©¶æ‰€ï¼ˆStanford HAIï¼‰å‘å¸ƒäº†ã€Š2024 å¹´äººå·¥æ™ºèƒ½æŒ‡æ•°æŠ¥å‘Šã€‹ï¼ˆArtificial Intelligence Index Report 2024ï¼‰ã€‚ æ®Stanford HAI å®˜æ–¹ä»‹ç»é“ï¼š&quot;è¿™æ˜¯æˆ‘ä»¬è¿„ä»Šä¸ºæ­¢æœ€å…¨é¢çš„æŠ¥å‘Šï¼Œè€Œä¸”æ˜¯åœ¨äººå·¥æ™ºèƒ½å¯¹ç¤¾ä¼šçš„å½±å“ä»æœªå¦‚æ­¤æ˜æ˜¾çš„é‡è¦æ—¶åˆ»å‘å¸ƒçš„ã€‚3. æ ‡é¢˜: ä¸­å›½ä¿¡æ¯é€šä¿¡ç ”ç©¶é™¢å‘å¸ƒã€Šäººå·¥æ™ºèƒ½å‘å±•æŠ¥å‘Š(2024å¹´)ã€‹   é“¾æ¥: https://d.wanfangdata.com.cn/periodical/Ch9QZXJpb2RpY2FsQ0hJTmV3UzIwMjUwMTE2MTYzNjE0Eg1tamd5MjAyNTAxMDEwGghkNGwzYXFocg==   æ‘˜è¦: 2024å¹´12æœˆ10æ—¥,ä¸­å›½ä¿¡æ¯é€šä¿¡ç ”ç©¶é™¢å‘å¸ƒã€Šäººå·¥æ™ºèƒ½å‘å±•æŠ¥å‘Š(2024å¹´)ã€‹.ã€Šäººå·¥æ™ºèƒ½å‘å±•æŠ¥å‘Š(2024å¹´)ã€‹ç«‹è¶³äº§ä¸šæ–°å‘å±•ã€æ–°å˜åŒ–ã€æ–°éœ€æ±‚,èšç„¦æ–°å½¢åŠ¿ä¸‹å…¨çƒäººå·¥æ™ºèƒ½å‘å±•é‡ç‚¹,æ€»ç»“æ¢³ç†äººå·¥æ™ºèƒ½æŠ€æœ¯åˆ›æ–°æ–¹å‘ã€äº§ä¸šå‡çº§é‡ç‚¹ã€è¡Œä¸šè½åœ°è¶‹åŠ¿å’Œå®‰å…¨æ²»ç†è¿›å±•,å±•æœ›äººå·¥æ™ºèƒ½å‘å±•æœºé‡,ä»¥æœŸä¸ä¸šç•Œåˆ†äº«,å…±åŒæ¨åŠ¨ ...4. æ ‡é¢˜: 2024-2025å¹´aié¢†åŸŸé‡å¤§äº‹ä»¶ç›˜ç‚¹ï¼šæŠ€æœ¯çªç ´ã€åº”ç”¨è½åœ°ä¸æœªæ¥è¶‹åŠ¿_2024-2025æœ€æ–°çš„äººå·¥æ™ºèƒ½&quot;äº‹ä»¶-csdnåšå®¢   é“¾æ¥: https://blog.csdn.net/TGQlovemm/article/details/145548021   æ‘˜è¦: æ–‡ç« æµè§ˆé˜…è¯»4kæ¬¡ï¼Œç‚¹èµ26æ¬¡ï¼Œæ”¶è—19æ¬¡ã€‚2024-2025å¹´ï¼ŒaiæŠ€æœ¯ä»å®éªŒå®¤èµ°å‘å¤§è§„æ¨¡åº”ç”¨ï¼Œç”Ÿæˆå¼aiã€å¤šæ¨¡æ€èåˆä¸å…·èº«æ™ºèƒ½æˆä¸ºæ ¸å¿ƒé©±åŠ¨åŠ›ã€‚ç„¶è€Œï¼ŒæŠ€æœ¯çªç ´ä¹Ÿä¼´éšä¼¦ç†ã€éšç§ä¸èƒ½æºæ¶ˆè€—çš„æŒ‘æˆ˜ã€‚æœªæ¥ï¼Œaiå°†ä¸ä»…æ˜¯å·¥å…·ï¼Œæ›´æ˜¯äººç±»æ™ºæ…§çš„å»¶ä¼¸ï¼Œéœ€åœ¨åˆ›æ–°ä¸æ²»ç†ä¸­å¯»æ‰¾å¹³è¡¡ç‚¹ï¼Œä»¥å®ç°&quot;æŠ€æœ¯å‘å–„&quot;çš„ ç»ˆæ ...Tavily æœç´¢æ—¶é—´: 7.20 ç§’Tavily æœç´¢ç»“æœ:1. æ ‡é¢˜: ç­æœ›| å‰ç»2024äººå·¥æ™ºèƒ½å››å¤§è¶‹åŠ¿ - æ–°åç½‘   é“¾æ¥: http://www.news.cn/tech/20240103/06334b17b41c44518168c2dea7bb844d/c.html   å†…å®¹: ç­æœ› | å‰ç»2024äººå·¥æ™ºèƒ½å››å¤§è¶‹åŠ¿2024-01-03 16:01:40 æ¥æºï¼šæ–°åç¤¾æ®æ¶ˆæ¯äººå£«ç§°ï¼ŒOpenAIæ­£åœ¨è®­ç»ƒä¸‹ä¸€ä»£çš„äººå·¥æ™ºèƒ½ï¼Œæš‚åâ€œQ*â€ï¼ˆè¯»ä½œQ-starï¼‰ã€‚æ–°çš„ä¸€å¹´ï¼ŒOpenAIä¸‹ä¸€ä»£äº§å“å¯èƒ½å‘å¸ƒæ•°æ®ç“¶é¢ˆæŒ‡çš„æ˜¯å¯ç”¨äºè®­ç»ƒAIçš„é«˜è´¨é‡æ•°æ®çš„æœ‰é™æ€§ï¼Œåˆæˆæ•°æ®æœ‰æœ›æ‰“ç ´è¿™ä¸€ç“¶é¢ˆã€‚é™¤...2. æ ‡é¢˜: 2024å¹´äººå·¥æ™ºèƒ½äº§ä¸šåå¤§å‘å±•è¶‹åŠ¿   é“¾æ¥: https://zhuanlan.zhihu.com/p/683509691   å†…å®¹: 2024å¹´äººå·¥æ™ºèƒ½äº§ä¸šåå¤§å‘å±•è¶‹åŠ¿æŠ€æœ¯å˜é©1. å¤šæ¨¡æ€é¢„è®­ç»ƒå¤§æ¨¡å‹å°†æ˜¯äººå·¥æ™ºèƒ½äº§ä¸šçš„æ ‡é…2. é«˜è´¨é‡æ•°æ®æ„ˆå‘ç¨€ç¼ºå°†å€’é€¼æ•°æ®æ™ºèƒ½é£è·ƒ3. æ™ºèƒ½ ç®—åŠ›æ— å¤„ä¸åœ¨...3. æ ‡é¢˜: 2024 å¹´æœ€é‡è¦çš„AI è¶‹åŠ¿ - IBM   é“¾æ¥: https://www.ibm.com/cn-zh/think/insights/artificial-intelligence-trends   å†…å®¹: äººå·¥æ™ºèƒ½ä¸»è¦è¶‹åŠ¿ | IBM2024 å¹´æœ€é‡è¦çš„ AI è¶‹åŠ¿æ ‡ç­¾Artificial Intelligence2024 å¹´ 2 æœˆ 9 æ—¥é˜…è¯»æ—¶é•¿ï¼š12 åˆ†é’Ÿå¤åˆ¶é“¾æ¥2022 å¹´æ˜¯ç”Ÿæˆå¼äººå·¥æ™ºèƒ½ (AI) è¿…é€Ÿè¿›å…¥å…¬ä¼—æ„è¯†çš„ä¸€å¹´ï¼Œè€Œ 2023 å¹´åˆ™æ˜¯å®ƒå¼€å§‹åœ¨å•†ä¸šä¸–ç•Œæ‰æ ¹ç”Ÿé•¿çš„ä¸€å¹´ã€‚å› æ­¤...------------------------------------------------------------ç»“æœå·®å¼‚åˆ†æ:------------------------------------------------------------DuckDuckGo è¿”å›ç»“æœæ•°é‡: 4Tavily è¿”å›ç»“æœæ•°é‡: 3å“åº”æ—¶é—´å·®å¼‚: DuckDuckGo æ›´å¿« 0.87 ç§’==================================================================================================================================æœç´¢æŸ¥è¯¢: &#x27;LangChainå’ŒLlamaIndexçš„æ¯”è¾ƒ&#x27;============================================================[1] ä½¿ç”¨DuckDuckGoæœç´¢...[2] ä½¿ç”¨Tavilyæœç´¢...============================================================æœç´¢ç»“æœæ¯”è¾ƒ============================================================DuckDuckGo æœç´¢æ—¶é—´: 6.44 ç§’DuckDuckGo æœç´¢ç»“æœ:1. æ ‡é¢˜: LangChain vs LlamaIndexï¼šä¸ºæ‚¨çš„AIåº”ç”¨é€‰æ‹©æœ€ä½³æ¡†æ¶   é“¾æ¥: https://myscale.com/blog/zh/llamaindex-vs-langchain-detailed-comparison/   æ‘˜è¦: æ€»ä¹‹ï¼ŒLlamaIndexå’ŒLangChainåœ¨æŠ€æœ¯é¢†åŸŸçš„ä¸åŒç”¨ä¾‹ä¸­æä¾›äº†ç‹¬ç‰¹çš„ä¼˜åŠ¿ã€‚å®ƒä»¬é€šè¿‡å…¶ä¸“ä¸šåŒ–çš„åŠŸèƒ½æ»¡è¶³äº†å„ç§åº”ç”¨éœ€æ±‚ã€‚å®ƒä»¬æé«˜äº†å¯ç”¨æ€§ï¼Œ å¹¶æ‰©å±•äº†AIå¼€å‘çš„è§†é‡ã€‚ # æ ¹æ®éœ€æ±‚åšå‡ºæ­£ç¡®é€‰æ‹©. åœ¨è€ƒè™‘é€‰æ‹©LlamaIndexå’ŒLangChainä¹‹é—´çš„é€‰æ‹©æ—¶ï¼Œä»”ç»†è¯„ä¼°æ‚¨çš„é¡¹ç›®éœ€æ±‚è‡³å…³ ...2. æ ‡é¢˜: Langchainä¸LlamaIndexåº”è¯¥é€‰å“ªä¸ª - 53AI-AIçŸ¥è¯†åº“|å¤§æ¨¡å‹çŸ¥è¯†åº“|å¤§æ¨¡å‹è®­ç»ƒ|æ™ºèƒ½ä½“å¼€å‘   é“¾æ¥: https://www.53ai.com/news/langchain/2025040387046.html   æ‘˜è¦: åœ¨é€‰æ‹©LangChainå’ŒLlamaIndexæ—¶ï¼Œéœ€è¦è€ƒè™‘ä»¥ä¸‹å› ç´ ï¼š é¡¹ç›®éœ€æ±‚ï¼š å¦‚æœåº”ç”¨ä¸»è¦å…³æ³¨æœç´¢å’Œæ£€ç´¢ï¼ŒLlamaIndexå¯èƒ½æ›´é€‚åˆã€‚å¯¹äºæ›´å¤šæ ·åŒ–çš„NLPä»»åŠ¡å’Œè‡ªå®šä¹‰å·¥ä½œæµç¨‹ï¼ŒLangChainæä¾›æ›´å¤§çš„çµæ´»æ€§ã€‚ ä½¿ç”¨ç®€æ˜“æ€§ï¼š LlamaIndexæä¾›æ›´ç®€åŒ–å’Œé€‚åˆåˆå­¦è€…çš„ç•Œé¢ï¼Œè€ŒLangChainéœ€è¦æ›´æ·±å…¥ ...3. æ ‡é¢˜: LangChain vs LlamaIndex: A Detailed Comparison - DataCamp   é“¾æ¥: https://www.datacamp.com/blog/langchain-vs-llamaindex   æ‘˜è¦: Langchain vs LlamaIndex: A Comparative Analysis. LlamaIndex is primarily designed for search and retrieval tasks. It excels at indexing large datasets and retrieving relevant information quickly and accurately. LangChain, on the other hand, provides a modular and adaptable framework for building a variety of NLP applications, including chatbots ...4. æ ‡é¢˜: LangChain vs LlamaIndex: In-Depth Comparison and Use   é“¾æ¥: https://www.deepchecks.com/langchain-vs-llamaindex-depth-comparison-use/   æ‘˜è¦: LangChain and LlamaIndex are both powerful frameworks for building applications with LLMs. While they share some common functionalities, they are usually quite different. In this section, you will explore LangChain vs. LlamaIndex across various aspects. Ease of use and configuration. LlamaIndex is designed with simplicity in mind.Tavily æœç´¢æ—¶é—´: 7.36 ç§’Tavily æœç´¢ç»“æœ:1. æ ‡é¢˜: LangChain ä¸LlamaIndexï¼šè¯¦ç»†æ¯”è¾ƒåŸåˆ› - CSDNåšå®¢   é“¾æ¥: https://blog.csdn.net/RamendeusStudio/article/details/140046035   å†…å®¹: LangChain ä¸“æ³¨äºæ„å»ºå¤æ‚çš„å·¥ä½œæµå’Œäº¤äº’å¼åº”ç”¨ç¨‹åºï¼Œè€ŒLlamaIndex åˆ™å¼ºè°ƒæ— ç¼æ•°æ®é›†æˆå’ŒåŠ¨æ€æ•°æ®ç®¡ç†ã€‚ æœ¬æ–‡å¯¹è¿™ä¸¤ä¸ªæ¡†æ¶è¿›è¡Œäº†å…¨é¢æ¯”è¾ƒï¼Œæ¢è®¨äº†å®ƒä»¬ç‹¬ç‰¹...2. æ ‡é¢˜: LangChain vs LlamaIndexï¼šä¸ºæ‚¨çš„AIåº”ç”¨é€‰æ‹©æœ€ä½³æ¡†æ¶ - MyScale   é“¾æ¥: https://myscale.com/blog/zh/llamaindex-vs-langchain-detailed-comparison/   å†…å®¹: è®©æˆ‘ä»¬è®¨è®ºä¸€ä¸‹LlamaIndexå’ŒLangChainçš„ä¸€äº›æ ¸å¿ƒåŠŸèƒ½å’ŒåŠŸèƒ½ã€‚# æ•°æ®ç´¢å¼•åœ¨æ•°æ®ç´¢å¼•çš„èƒŒæ™¯ä¸‹æ¯”è¾ƒLlamaIndexå’ŒLangChainæ—¶ï¼Œä¸åŒçš„æ–¹æ³•æµ®å‡ºæ°´é¢ã€‚LlamaIndexåœ¨å¿«é€Ÿç»„ç»‡å’Œåˆ†ç±»å¤§é‡ä¿¡æ¯æ–¹é¢è¡¨ç°å‡ºè‰²ï¼Œå°†ä¿¡æ¯é«˜æ•ˆåœ°è½¬åŒ–ä¸ºæ•°å€¼è¡¨ç¤ºï¼ˆåµŒå…¥å¼ï¼‰ã€‚å®ƒä¸“æ³¨äºé«˜æ•ˆç´¢å¼•ï¼Œä»¥ç¡®...3. æ ‡é¢˜: LlamaIndex å’ŒLangchain æœ‰å•¥åŒºåˆ«ï¼Ÿ - æ°åŠ›çš“åš   é“¾æ¥: https://www.aqwu.net/wp/?p=2902   å†…å®¹: ä¸¤è€…ä¹‹é—´çš„ä¸»è¦åŒºåˆ«åœ¨äºå®ƒä»¬çš„ä½¿ç”¨åœºæ™¯å’Œçµæ´»æ€§ã€‚LlamaIndexç‰¹åˆ«é€‚åˆäºæœç´¢å’Œæ£€ç´¢ä»»åŠ¡ï¼Œä½¿å…¶æˆä¸ºæ·±åº¦æ•°æ®æ¢ç´¢çš„æœ‰åŠ›å·¥å…·ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼ŒLangChainæä¾›äº†æ›´å¹¿æ³›çš„èƒ½åŠ›å’Œå·¥å…·é›†æˆï¼Œ...------------------------------------------------------------ç»“æœå·®å¼‚åˆ†æ:------------------------------------------------------------DuckDuckGo è¿”å›ç»“æœæ•°é‡: 4Tavily è¿”å›ç»“æœæ•°é‡: 3å“åº”æ—¶é—´å·®å¼‚: DuckDuckGo æ›´å¿« 0.92 ç§’==================================================================================================================================æœç´¢æŸ¥è¯¢: &#x27;Pythonå’ŒJavaScriptçš„åŒºåˆ«&#x27;============================================================[1] ä½¿ç”¨DuckDuckGoæœç´¢...[2] ä½¿ç”¨Tavilyæœç´¢...============================================================æœç´¢ç»“æœæ¯”è¾ƒ============================================================DuckDuckGo æœç´¢æ—¶é—´: 6.39 ç§’DuckDuckGo æœç´¢ç»“æœ:1. æ ‡é¢˜: JavaScriptä¸Pythonç¼–ç¨‹è¯­è¨€å¯¹æ¯”ï¼šæ€§èƒ½ã€åº”ç”¨åœºæ™¯åŠå­¦ä¹ å»ºè®® - äº‘åŸç”Ÿå®è·µ   é“¾æ¥: https://www.oryoy.com/news/javascript-yu-python-bian-cheng-yu-yan-dui-bi-xing-neng-ying-yong-chang-jing-ji-xue-xi-jian-yi.html     æ‘˜è¦: JavaScriptä¸Pythonç¼–ç¨‹è¯­è¨€å¯¹æ¯”ï¼šæ€§èƒ½ã€åº”ç”¨åœºæ™¯åŠå­¦ä¹ å»ºè®® åœ¨å½“ä»Šçš„ç¼–ç¨‹ä¸–ç•Œä¸­ï¼ŒJavaScriptå’ŒPythonæ— ç–‘æ˜¯ä¸¤ç§æœ€å—æ¬¢è¿ä¸”å¹¿æ³›åº”ç”¨çš„ç¼– ç¨‹è¯­è¨€ã€‚å®ƒä»¬å„è‡ªæ‹¥æœ‰åºå¤§çš„å¼€å‘è€…ç¤¾åŒºå’Œä¸°å¯Œçš„åº“èµ„æºï¼Œä½†åŒæ—¶ä¹Ÿå­˜åœ¨æ˜æ˜¾çš„å·®å¼‚ã€‚æœ¬æ–‡å°†ä»æ€§èƒ½ã€åº”ç”¨åœºæ™¯ä»¥åŠå­¦ä¹ å»ºè®®ä¸‰ä¸ªæ–¹é¢ï¼Œå¯¹JavaScriptå’ŒPythonè¿›è¡Œæ·±å…¥å¯¹æ¯” ...2. æ ‡é¢˜: JavaScript ä¸ Pythonï¼šæ‚¨åº”è¯¥å…ˆå­¦ä¹ å“ªä¸€ä¸ªï¼Ÿ - Webå‰ç«¯ä¹‹å®¶   é“¾æ¥: https://www.jiangweishan.com/article/PythonandavaScript.html   æ‘˜è¦: å¥æ³• è™½ç„¶æˆ‘ä»¬å·²ç»è®¨è®ºäº†è¿™ä¸¤ç§è¯­è¨€çš„è¯­æ³•ï¼Œä½†æˆ‘ä»¬å°†æ›´æ·±å…¥åœ°ç ”ç©¶è¿™ä¸¤ç§è¯­è¨€çš„ç»†å¾®å·®åˆ«ã€‚æˆ‘ä»¬å°†ç ”ç©¶æœ€æ ‡å‡†çš„ç¼–ç¨‹æŒ‡ä»¤ä»¥åŠ Python å’Œ JavaScript çš„åŒºåˆ«ã€‚ å°åˆ· ä»»ä½•ç¼–ç¨‹è¯­è¨€ä¸­ä¸€ä¸ªåŸºæœ¬æ¦‚å¿µå°±æ˜¯æ‰“å°ã€‚åœ¨ä»»ä½•ä¼˜ç§€çš„åˆå­¦è€…ç¼–ç¨‹æ•™ç¨‹ä¸­ï¼Œæ‚¨ç¼–å†™çš„ç¬¬ä¸€ä¸ªç¨‹åºéƒ½åº”è¯¥æ‰“å°çŸ­è¯­ Hello, World!ã€‚  ä½¿ç”¨ Python ...3. æ ‡é¢˜: Python vs Javaè„šæœ¬ï¼šå®ƒä»¬ä¹‹é—´çš„ä¸»è¦åŒºåˆ« - Guru99   é“¾æ¥: https://www.guru99.com/zh-CN/python-vs-javascript.html   æ‘˜è¦: ä¹‹é—´çš„åŒºåˆ« Python vs Javaè„šæœ¬ Python æ˜¯ä¸€ç§é«˜çº§é¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€ï¼Œå…·æœ‰å†…ç½®æ•°æ®ç»“æ„ä»¥åŠåŠ¨æ€ç»‘å®šå’Œç±»å‹ï¼Œéå¸¸é€‚åˆå¿«é€Ÿåº”ç”¨ç¨‹åºå¼€å‘ã€‚ JavaScript æ˜¯ä¸€ç§è„šæœ¬è¯­è¨€ï¼Œå¯ä»¥å¸®åŠ©æ‚¨åˆ›å»ºäº¤äº’å¼ç½‘é¡µã€‚ Python å…·æœ‰å¯å˜å’Œä¸å¯å˜çš„æ•°æ®ç±»å‹ï¼Œä½†æ˜¯ Javaè„šæœ¬æ²¡æœ‰å¯å˜å’Œä¸å¯å˜çš„æ¦‚å¿µã€‚ Python æº ä»£ç é»˜è®¤ä¸º ASCII ...4. æ ‡é¢˜: python å’Œ javascript æœ‰ä»€ä¹ˆåŒºåˆ« - PingCode   é“¾æ¥: https://docs.pingcode.com/ask/ask-ask/164914.html   æ‘˜è¦: Pythonå’ŒJavaScriptçš„ä¸»è¦åŒºåˆ«åœ¨äºå®ƒä»¬çš„è¿è¡Œç¯å¢ƒã€è¯­æ³•ã€åº”ç”¨èŒƒå›´å’Œè®¾è®¡å“²å­¦ã€‚ Pythoné€šå¸¸ç”¨äºæœåŠ¡å™¨ç«¯ç¼–ç¨‹ã€æ•°æ®ç§‘å­¦å’Œè„šæœ¬ç¼–å†™ï¼Œè€ŒJavaScriptä¸»è¦ç”¨äºå®¢æˆ·ç«¯çš„Webå¼€å‘ã€‚ Pythonä»¥ç®€æ´æ˜“è¯»è‘—ç§°ã€æ”¯æŒå¤šç§ç¼–ç¨‹èŒƒå¼ï¼Œä¾‹å¦‚é¢å‘å¯¹è±¡å’Œå‡½æ•°å¼ç¼–ç¨‹ã€‚Tavily æœç´¢æ—¶é—´: 7.98 ç§’Tavily æœç´¢ç»“æœ:1. æ ‡é¢˜: Pythonå’ŒJavaScriptåœ¨ä½¿ç”¨ä¸Šæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ - è‘¡è„åŸæŠ€æœ¯å›¢é˜Ÿ - åšå®¢å›­   é“¾æ¥: https://www.cnblogs.com/powertoolsteam/p/14450549.html   å†…å®¹: ä¸¤ç§æ–¹æ³•ä¹‹é—´çš„ä¸»è¦åŒºåˆ«åœ¨äºï¼Œåœ¨Pythonä¸­ï¼Œå°†æç¤ºç”¨æˆ·åœ¨æ§åˆ¶å°ä¸­è¾“å…¥å€¼ï¼Œè€Œåœ¨JavaScriptä¸­ï¼Œæµè§ˆå™¨ä¸­å°†æ˜¾ç¤ºä¸€ä¸ªå°æç¤ºï¼Œå¹¶è¦æ±‚ç”¨æˆ·è¾“å…¥å€¼ã€‚...2. æ ‡é¢˜: python å’Œjavascript æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ - çŸ¥ä¹   é“¾æ¥: https://www.zhihu.com/question/583932715   å†…å®¹: 1ã€è¯­æ³•å·®å¼‚ï¼šPython çš„è¯­æ³•æ¯”è¾ƒç®€å•ï¼Œå¼ºè°ƒä»£ç å¯è¯»æ€§ï¼Œæ¯”å¦‚å®ƒä½¿ç”¨ç¼©è¿›æ¥è¡¨ç¤ºä»£ç å—çš„èŒƒå›´ã€‚ JavaScript çš„è¯­æ³•æ¯”è¾ƒå¤æ‚ï¼Œç»“æ„æ›´åŠ çµæ´»ï¼Œæ¯”å¦‚å®ƒæ²¡æœ‰æ˜æ˜¾çš„ç¼©è¿›...3. æ ‡é¢˜: Pythonä¸JavaScriptæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ - ç¨€åœŸæ˜é‡‘   é“¾æ¥: https://juejin.cn/post/7112346448229990414   å†…å®¹: ä¸€æ–¹é¢ï¼ŒPythonæ˜¯å¼ºç±»å‹çš„ï¼Œå› æ­¤ç±»å‹ä¹‹é—´æ²¡æœ‰éšå¼è½¬æ¢ã€‚å¦ä¸€æ–¹é¢ï¼ŒJavaScriptæ˜¯å¼±ç±»å‹çš„ï¼Œæ„å‘³ç€ä¸ç›¸å…³çš„ç±»å‹ä¹‹é—´çš„è½¬æ¢æ˜¯éšå¼çš„ã€‚...   ------------------------------------------------------------ç»“æœå·®å¼‚åˆ†æ:------------------------------------------------------------DuckDuckGo è¿”å›ç»“æœæ•°é‡: 4Tavily è¿”å›ç»“æœæ•°é‡: 3å“åº”æ—¶é—´å·®å¼‚: DuckDuckGo æ›´å¿« 1.59 ç§’======================================================================</code></pre></div><h3 id="1-ç¯å¢ƒè®¾ç½®"><a href="#1-ç¯å¢ƒè®¾ç½®" class="headerlink" title="1.ç¯å¢ƒè®¾ç½®"></a>1.ç¯å¢ƒè®¾ç½®</h3><p>å…ˆéœ€è¦å¯¼å…¥å¿…è¦çš„åº“å¹¶è®¾ç½®ç¯å¢ƒå˜é‡</p><h3 id="2-ç»“æœæ ¼å¼åŒ–å‡½æ•°"><a href="#2-ç»“æœæ ¼å¼åŒ–å‡½æ•°" class="headerlink" title="2. ç»“æœæ ¼å¼åŒ–å‡½æ•°"></a>2. ç»“æœæ ¼å¼åŒ–å‡½æ•°</h3><p>æœç´¢å·¥å…·è¿”å›çš„åŸå§‹æ•°æ®æ ¼å¼å„ä¸ç›¸åŒï¼Œéœ€è¦ç»Ÿä¸€æ ¼å¼åŒ–ä»¥ä¾¿æ¯”è¾ƒã€‚</p><p>format_resultsè¿™ä¸ªå‡½æ•°æ¥æ”¶æœç´¢ç»“æœå’Œå·¥å…·åç§°ï¼Œæ ¹æ®ä¸åŒå·¥å…·è¿”å›çš„æ•°æ®ç»“æ„è¿›è¡Œæ ¼å¼åŒ–ï¼Œç”Ÿæˆä¸€ä¸ªæ˜“äºé˜…è¯»çš„å­—ç¬¦ä¸²è¾“å‡ºã€‚å¯¹äºTavilyï¼Œå®ƒå¤„ç†æ ‡é¢˜ã€URLå’Œå†…å®¹æ‘˜è¦ï¼›å¯¹äºDuckDuckGoï¼Œå®ƒå¤„ç†æ ‡é¢˜ã€é“¾æ¥å’Œsnippetæ‘˜è¦ã€‚</p><h3 id="3-æœç´¢å·¥å…·è°ƒç”¨å‡½æ•°"><a href="#3-æœç´¢å·¥å…·è°ƒç”¨å‡½æ•°" class="headerlink" title="3. æœç´¢å·¥å…·è°ƒç”¨å‡½æ•°"></a>3. æœç´¢å·¥å…·è°ƒç”¨å‡½æ•°</h3><p>search_with_toolæ ¸å¿ƒåŠŸèƒ½æ˜¯é€šè¿‡ä¸åŒçš„æœç´¢å·¥å…·æ‰§è¡ŒæŸ¥è¯¢ï¼š</p><p>è¿™ä¸ªå‡½æ•°æ ¹æ®æŒ‡å®šçš„å·¥å…·ç±»å‹ï¼ˆâ€tavilyâ€æˆ–â€duckduckgoâ€ï¼‰åˆ›å»ºç›¸åº”çš„æœç´¢å·¥å…·å®ä¾‹ï¼Œç„¶åæ‰§è¡ŒæŸ¥è¯¢ï¼Œè®°å½•æœç´¢æ—¶é—´ï¼Œå¹¶è¿”å›æ ¼å¼åŒ–çš„ç»“æœã€‚</p><p>å…³é”®APIä½¿ç”¨ï¼š</p><ul><li><code>TavilySearchResults(max_results=max_results)</code> - åˆ›å»ºTavilyæœç´¢å·¥å…·</li><li><code>DuckDuckGoSearchResults(max_results=max_results, output_format=&quot;list&quot;)</code> - åˆ›å»ºDuckDuckGoæœç´¢å·¥å…·</li><li><code>search_tool.invoke(&#123;&quot;query&quot;: query&#125;)</code> - æ‰§è¡Œæœç´¢æŸ¥è¯¢</li></ul><h3 id="4-æœç´¢å·¥å…·æ¯”è¾ƒå‡½æ•°"><a href="#4-æœç´¢å·¥å…·æ¯”è¾ƒå‡½æ•°" class="headerlink" title="4. æœç´¢å·¥å…·æ¯”è¾ƒå‡½æ•°"></a>4. æœç´¢å·¥å…·æ¯”è¾ƒå‡½æ•°</h3><p>compare_search_toolsæ¯”è¾ƒå‡½æ•°åè°ƒå¤šä¸ªæœç´¢å·¥å…·çš„ä½¿ç”¨å¹¶åˆ†æå·®å¼‚ï¼š</p><p>è¿™ä¸ªå‡½æ•°æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š</p><ol><li>ä½¿ç”¨DuckDuckGoæ‰§è¡Œæœç´¢</li><li>ä½¿ç”¨Tavilyæ‰§è¡Œç›¸åŒçš„æœç´¢</li><li>æ‰“å°ä¸¤ç§å·¥å…·çš„æœç´¢æ—¶é—´</li><li>æ˜¾ç¤ºæ ¼å¼åŒ–çš„æœç´¢ç»“æœ</li><li>åˆ†æç»“æœä¹‹é—´çš„å·®å¼‚ï¼ŒåŒ…æ‹¬ç»“æœæ•°é‡å’Œå“åº”æ—¶é—´</li></ol><h3 id="5-ä¸»å‡½æ•°"><a href="#5-ä¸»å‡½æ•°" class="headerlink" title="5. ä¸»å‡½æ•°"></a>5. ä¸»å‡½æ•°</h3><p>åœ¨ä¸»å‡½æ•°ä¸­ï¼Œå®šä¹‰äº†ä¸‰ä¸ªç¤ºä¾‹æŸ¥è¯¢ï¼Œå¹¶å¯¹æ¯ä¸ªæŸ¥è¯¢ä¾æ¬¡è¿è¡Œæ¯”è¾ƒå‡½æ•°ã€‚ä¸ºäº†é¿å…è¯·æ±‚é¢‘ç‡è¿‡é«˜ï¼Œæ¯æ¬¡æ¯”è¾ƒä¹‹é—´æ·»åŠ äº†çŸ­æš‚çš„å»¶è¿Ÿã€‚</p><h2 id="å·¥å…·æ€§èƒ½ä¸ç»“æœå·®å¼‚åˆ†æ"><a href="#å·¥å…·æ€§èƒ½ä¸ç»“æœå·®å¼‚åˆ†æ" class="headerlink" title="å·¥å…·æ€§èƒ½ä¸ç»“æœå·®å¼‚åˆ†æ"></a>å·¥å…·æ€§èƒ½ä¸ç»“æœå·®å¼‚åˆ†æ</h2><p>é€šè¿‡ä»£ç çš„è¿è¡Œï¼Œæˆ‘ä»¬å¯ä»¥è§‚å¯Ÿåˆ°ä¸¤ç§æœç´¢å·¥å…·çš„å‡ ä¸ªå…³é”®å·®å¼‚ï¼š</p><ol><li><p><strong>ç»“æœæ ¼å¼</strong>ï¼šTavilyè¿”å›ç»“æ„åŒ–çš„JSONæ•°æ®ï¼ŒåŒ…å«æ ‡é¢˜ã€URLå’Œå†…å®¹ï¼›DuckDuckGoè¿”å›çš„ç»“æœåŒ…å«æ ‡é¢˜ã€é“¾æ¥å’Œæ‘˜è¦ã€‚</p></li><li><p><strong>å“åº”æ—¶é—´</strong>ï¼šä»£ç ä¼šæµ‹é‡å¹¶æ¯”è¾ƒä¸¤ç§å·¥å…·çš„å“åº”æ—¶é—´ï¼Œå¸®åŠ©æˆ‘ä»¬äº†è§£å®ƒä»¬åœ¨æ€§èƒ½æ–¹é¢çš„å·®å¼‚ã€‚</p></li><li><p><strong>ç»“æœè´¨é‡</strong>ï¼šé€šè¿‡è¿è¡Œå¤šä¸ªæŸ¥è¯¢ï¼Œå¯ä»¥ä¸»è§‚è¯„ä¼°ä¸¤ç§å·¥å…·è¿”å›ç»“æœçš„ç›¸å…³æ€§å’Œè´¨é‡ã€‚</p></li><li><p><strong>å¯ç”¨æ€§</strong>ï¼šDuckDuckGoæ— éœ€APIå¯†é’¥ï¼Œéšæ—¶å¯ç”¨ï¼›Tavilyéœ€è¦æœ‰æ•ˆçš„APIå¯†é’¥ã€‚</p></li></ol><h2 id="åº”ç”¨åœºæ™¯"><a href="#åº”ç”¨åœºæ™¯" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h2><p>ä¸åŒçš„æœç´¢å·¥å…·é€‚åˆä¸åŒçš„åº”ç”¨åœºæ™¯ï¼š</p><ul><li><p><strong>Tavily</strong>ï¼šé€‚åˆéœ€è¦é«˜è´¨é‡ã€ç»“æ„åŒ–ç»“æœçš„ä¸“ä¸šAIåº”ç”¨ï¼Œç‰¹åˆ«æ˜¯é‚£äº›æœ‰é¢„ç®—æ”¯æŒAPIè°ƒç”¨çš„é¡¹ç›®ã€‚</p></li><li><p><strong>DuckDuckGo</strong>ï¼šé€‚åˆå¼€å‘é˜¶æ®µçš„é¡¹ç›®ã€æ•™è‚²ç›®çš„æˆ–ä¸éœ€è¦ç‰¹åˆ«ä¼˜åŒ–çš„åº”ç”¨ï¼Œå°¤å…¶æ˜¯å½“é¢„ç®—æœ‰é™æˆ–æ³¨é‡éšç§æ—¶ã€‚</p></li></ul><h2 id="ç»¼åˆæ¯”è¾ƒåˆ†æï¼ˆä»¥ä¸‹æ˜¯Claude-3-7-sonnetæ ¹æ®å®Œæ•´logè¿›è¡Œçš„åˆ†æç»“æœï¼‰"><a href="#ç»¼åˆæ¯”è¾ƒåˆ†æï¼ˆä»¥ä¸‹æ˜¯Claude-3-7-sonnetæ ¹æ®å®Œæ•´logè¿›è¡Œçš„åˆ†æç»“æœï¼‰" class="headerlink" title="ç»¼åˆæ¯”è¾ƒåˆ†æï¼ˆä»¥ä¸‹æ˜¯Claude-3.7-sonnetæ ¹æ®å®Œæ•´logè¿›è¡Œçš„åˆ†æç»“æœï¼‰"></a>ç»¼åˆæ¯”è¾ƒåˆ†æï¼ˆä»¥ä¸‹æ˜¯Claude-3.7-sonnetæ ¹æ®å®Œæ•´logè¿›è¡Œçš„åˆ†æç»“æœï¼‰</h2><p>é€šè¿‡å¯¹ä¸‰ç§ä¸åŒæŸ¥è¯¢çš„æµ‹è¯•æ¯”è¾ƒï¼Œæˆ‘ä»¬å¯ä»¥æ€»ç»“å‡ºä»¥ä¸‹å‡ ç‚¹å…³äºTavilyå’ŒDuckDuckGoæœç´¢å·¥å…·çš„å¯¹æ¯”ï¼š</p><h3 id="ç»“æœæ•°é‡"><a href="#ç»“æœæ•°é‡" class="headerlink" title="ç»“æœæ•°é‡"></a>ç»“æœæ•°é‡</h3><p>åœ¨æ‰€æœ‰æµ‹è¯•ä¸­ï¼ŒDuckDuckGoéƒ½è¿”å›äº†4æ¡ç»“æœï¼Œè€ŒTavilyè¿”å›äº†3æ¡ç»“æœã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬åœ¨ä»£ç ä¸­ä¸ºä¸¤ç§å·¥å…·è®¾ç½®äº†ä¸åŒçš„é»˜è®¤è¿”å›æ•°é‡ï¼Œä½†ä¹Ÿåæ˜ äº†ä¸¤è€…åœ¨ç»“æœå¤„ç†ä¸Šçš„å·®å¼‚ã€‚</p><h3 id="å“åº”é€Ÿåº¦"><a href="#å“åº”é€Ÿåº¦" class="headerlink" title="å“åº”é€Ÿåº¦"></a>å“åº”é€Ÿåº¦</h3><p>åœ¨æ‰€æœ‰æµ‹è¯•æŸ¥è¯¢ä¸­ï¼ŒDuckDuckGoçš„å“åº”é€Ÿåº¦éƒ½æ¯”Tavilyå¿«ï¼Œå¹³å‡å¿«çº¦1ç§’å·¦å³ï¼š</p><ul><li>æŸ¥è¯¢1ï¼šDuckDuckGoå¿«0.87ç§’</li><li>æŸ¥è¯¢2ï¼šDuckDuckGoå¿«0.92ç§’</li><li>æŸ¥è¯¢3ï¼šDuckDuckGoå¿«1.59ç§’</li></ul><p>è¿™å¯èƒ½æ˜¯å› ä¸ºDuckDuckGoä¸éœ€è¦é¢å¤–çš„APIè®¤è¯æ­¥éª¤ï¼Œä¸”å…¶æœåŠ¡å™¨å¯èƒ½é’ˆå¯¹ç®€å•æŸ¥è¯¢åšäº†æ›´å¥½çš„ä¼˜åŒ–ã€‚</p><h3 id="ç»“æœè´¨é‡ä¸ç›¸å…³æ€§"><a href="#ç»“æœè´¨é‡ä¸ç›¸å…³æ€§" class="headerlink" title="ç»“æœè´¨é‡ä¸ç›¸å…³æ€§"></a>ç»“æœè´¨é‡ä¸ç›¸å…³æ€§</h3><p>ä¸¤ç§å·¥å…·åœ¨ç»“æœè´¨é‡ä¸Šå„æœ‰ç‰¹ç‚¹ï¼š</p><ul><li><p><strong>DuckDuckGo</strong>ï¼šè¿”å›çš„ç»“æœæ›´å…¨é¢ï¼ŒåŒ…å«äº†æ›´å¤šæ¥æºçš„ä¿¡æ¯ã€‚ä¾‹å¦‚åœ¨â€2024å¹´äººå·¥æ™ºèƒ½çš„ä¸»è¦å‘å±•è¶‹åŠ¿â€çš„æŸ¥è¯¢ä¸­ï¼ŒDuckDuckGoè¿”å›äº†åŒ…æ‹¬æ–¯å¦ç¦ç ”ç©¶æ‰€å’Œä¸­å›½ä¿¡æ¯é€šä¿¡ç ”ç©¶é™¢çš„æŠ¥å‘Šï¼Œè¦†ç›–é¢è¾ƒå¹¿ã€‚</p></li><li><p><strong>Tavily</strong>ï¼šè™½ç„¶ç»“æœæ•°é‡è¾ƒå°‘ï¼Œä½†é’ˆå¯¹AIåº”ç”¨åœºæ™¯åšäº†ä¼˜åŒ–ï¼Œè¿”å›çš„å†…å®¹æ ¼å¼æ›´ç»Ÿä¸€ï¼Œä¸”å†…å®¹æ‘˜è¦å¾€å¾€ç›´æ¥åˆ‡å…¥ä¸»é¢˜ã€‚ä¾‹å¦‚åœ¨â€Pythonå’ŒJavaScriptçš„åŒºåˆ«â€æŸ¥è¯¢ä¸­ï¼ŒTavilyçš„ç»“æœæ›´ç›´æ¥åœ°åˆ—å‡ºäº†è¯­æ³•å·®å¼‚ç­‰å…³é”®ç‚¹ã€‚</p></li></ul><h3 id="ç»“æœæ ¼å¼"><a href="#ç»“æœæ ¼å¼" class="headerlink" title="ç»“æœæ ¼å¼"></a>ç»“æœæ ¼å¼</h3><p>ä¸¤ç§å·¥å…·è¿”å›çš„ç»“æœæ ¼å¼æœ‰æ˜æ˜¾å·®å¼‚ï¼š</p><ul><li><strong>DuckDuckGo</strong>ï¼šè¿”å›çš„å­—æ®µåŒ…æ‹¬titleã€linkå’Œsnippetï¼Œæ›´é€‚åˆä¼ ç»Ÿçš„æœç´¢ç»“æœå±•ç¤ºã€‚</li><li><strong>Tavily</strong>ï¼šè¿”å›çš„å­—æ®µåŒ…æ‹¬titleã€urlå’Œcontentï¼Œæ ¼å¼æ›´ä¸ºç»“æ„åŒ–ï¼Œä¾¿äºAIç³»ç»Ÿè¿›ä¸€æ­¥å¤„ç†ã€‚</li></ul><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>é€šè¿‡å®é™…çš„æœç´¢æµ‹è¯•æ¯”è¾ƒï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼š</p><ol><li><strong>æ€§èƒ½æ–¹é¢</strong>ï¼šDuckDuckGoåœ¨å“åº”é€Ÿåº¦ä¸Šç•¥èƒœä¸€ç­¹ã€‚</li><li><strong>å¯ç”¨æ€§æ–¹é¢</strong>ï¼šDuckDuckGoæ— éœ€APIå¯†é’¥ï¼Œæ›´å®¹æ˜“ä¸Šæ‰‹ä½¿ç”¨ã€‚</li><li><strong>ç»“æœè´¨é‡æ–¹é¢</strong>ï¼šTavilyçš„ç»“æœæ›´é€‚åˆAIåº”ç”¨å¤„ç†ï¼Œè€ŒDuckDuckGoæä¾›äº†æ›´å¹¿æ³›çš„ä¿¡æ¯è¦†ç›–ã€‚</li></ol><p>è¿™äº›ç»“æœéªŒè¯äº†ç†è®ºåˆ†æä¸­çš„é¢„æœŸï¼Œå¹¶æä¾›äº†ç›´è§‚çš„è¯æ®å¸®åŠ©å¼€å‘è€…æ ¹æ®è‡ªå·±çš„åº”ç”¨éœ€æ±‚é€‰æ‹©åˆé€‚çš„æœç´¢å·¥å…·ã€‚å¯¹äºæ³¨é‡é€Ÿåº¦å’Œæ— éœ€APIå¯†é’¥çš„åº”ç”¨ï¼ŒDuckDuckGoæ˜¯æ›´å¥½çš„é€‰æ‹©ï¼›è€Œå¯¹äºéœ€è¦é«˜è´¨é‡ã€ç»“æ„åŒ–ç»“æœçš„AIä¸“ä¸šåº”ç”¨ï¼ŒTavilyåˆ™èƒ½æä¾›æ›´å¥½çš„æ”¯æŒã€‚</p>]]></content>
    
    
    <categories>
      
      <category>AIç›¸å…³</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Langgraph</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Langgraphå­¦ä¹ 2ï¼šLLMè‡ªåŠ¨è°ƒç”¨å·¥å…·</title>
    <link href="/2025/03/22/Langgraph%E5%AD%A6%E4%B9%A02%EF%BC%9ALLM%E8%87%AA%E5%8A%A8%E8%B0%83%E7%94%A8%E5%B7%A5%E5%85%B7/"/>
    <url>/2025/03/22/Langgraph%E5%AD%A6%E4%B9%A02%EF%BC%9ALLM%E8%87%AA%E5%8A%A8%E8%B0%83%E7%94%A8%E5%B7%A5%E5%85%B7/</url>
    
    <content type="html"><![CDATA[<p>åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œé€šè¿‡å­¦ä¹ å®˜æ–¹ç¤ºä¾‹æ„å»ºäº†ä¸€ä¸ªåŸºç¡€çš„Langgraph chatbotå·¥ä½œæµã€‚ä»Šå¤©æ›´è¿›ä¸€æ­¥ï¼Œæ¢ç´¢å¦‚ä½•è®©chatbotèƒ½å¤Ÿè°ƒç”¨å·¥å…·æ¥å®Œæˆç‰¹å®šä»»åŠ¡ã€‚</p><h2 id="å®šä¹‰å·¥å…·"><a href="#å®šä¹‰å·¥å…·" class="headerlink" title="å®šä¹‰å·¥å…·"></a>å®šä¹‰å·¥å…·</h2><p>ç®€å•å®šä¹‰ä¸€ä¸ªæ— ä»»ä½•é€»è¾‘çš„å·¥å…·å‡½æ•°ï¼Œè¯¥å‡½æ•°ç›´æ¥ä¼šè¿”å›å¤©æ°”æŸ¥è¯¢çš„ç»“æœæ¥æ¨¡æ‹ŸLLMè°ƒç”¨å¤©æ°”apiçš„æµç¨‹ï¼š</p><div class="code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> langchain_core.tools <span class="hljs-keyword">import</span> tool<span class="hljs-keyword">from</span> langchain_core.utils.function_calling <span class="hljs-keyword">import</span> convert_to_openai_function<span class="hljs-comment"># å®šä¹‰å·¥å…·</span><span class="hljs-meta">@tool</span><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_weather</span>(<span class="hljs-params">query: <span class="hljs-built_in">str</span></span>):</span>    <span class="hljs-string">&quot;&quot;&quot;ç”¨äºè·å–å¤©æ°”ä¿¡æ¯ã€‚&quot;&quot;&quot;</span>    <span class="hljs-keyword">return</span> [<span class="hljs-string">&quot;ä»Šå¤©å¤©æ°”æ™´æœ—ï¼Œæ¸©åº¦20åº¦&quot;</span>, <span class="hljs-string">&quot;æ˜å¤©å¤©æ°”å¤šäº‘ï¼Œæ¸©åº¦25åº¦&quot;</span>]<span class="hljs-comment"># åˆ›å»ºå·¥å…·åˆ—è¡¨</span>tools = [get_weather]<span class="hljs-comment"># ç»‘å®šå·¥å…·åˆ°LLM</span>llm_with_tools = llm.bind_tools(tools)<span class="hljs-comment"># åˆ›å»ºOpenAIå‡½æ•°æ ¼å¼çš„å·¥å…·æè¿°</span>functions = [convert_to_openai_function(t) <span class="hljs-keyword">for</span> t <span class="hljs-keyword">in</span> tools]<span class="hljs-comment"># åˆ›å»ºtoolèŠ‚ç‚¹</span><span class="hljs-keyword">from</span> langgraph.prebuilt <span class="hljs-keyword">import</span> ToolNodetool_node = ToolNode(tools)</code></pre></div><p>ä½¿ç”¨äº†@toolè£…é¥°å™¨æ¥å®šä¹‰å·¥å…·å‡½æ•°ï¼Œè¿™æ˜¯Langchainæä¾›çš„ä¾¿æ·æ–¹å¼ã€‚ç„¶ååˆ›å»ºäº†å·¥å…·åˆ—è¡¨å¹¶å°†å…¶ç»‘å®šåˆ°LLMï¼ŒåŒæ—¶è¿˜åˆ›å»ºäº†ä¸€ä¸ªä¸“é—¨çš„ToolNodeæ¥å¤„ç†å·¥å…·è°ƒç”¨ã€‚</p><p><strong>ä»¥ä¸‹æ˜¯Claude-3.7-sonnetå¯¹toolè£…é¥°å™¨çš„ç”¨æ³•å’Œè§£é‡Šï¼š</strong></p><div class="code-wrapper"><pre><code class="hljs less"><span class="hljs-variable">@tool</span>è£…é¥°å™¨è¯¦è§£<span class="hljs-variable">@tool</span>æ˜¯LangChainæä¾›çš„è£…é¥°å™¨ï¼Œå®ƒçš„ä½œç”¨æ˜¯å°†æ™®é€šPythonå‡½æ•°è½¬æ¢ä¸ºLangChainå·¥å…·æ ¼å¼ã€‚è¿™ä¸ªè£…é¥°å™¨ä¼šè‡ªåŠ¨ï¼š- è§£æå‡½æ•°ç­¾åä¸­çš„å‚æ•°ç±»å‹- ä»å‡½æ•°æ–‡æ¡£å­—ç¬¦ä¸²ä¸­æå–æè¿°ä¿¡æ¯- åˆ›å»ºä¸€ä¸ªç¬¦åˆLangChainå·¥å…·æ ‡å‡†çš„åŒ…è£…å™¨- ä½¿ç”¨<span class="hljs-variable">@tool</span>æ—¶éœ€è¦æ³¨æ„ï¼š- å‡½æ•°å¿…é¡»æœ‰æ–‡æ¡£å­—ç¬¦ä¸²ï¼ˆdocstringï¼‰ï¼Œè¿™å°†ä½œä¸ºå·¥å…·çš„æè¿°ä¼ é€’ç»™LLM- å‚æ•°ç±»å‹æœ€å¥½æœ‰æ˜ç¡®çš„æ³¨è§£ï¼Œè¿™æ ·LLMæ‰èƒ½æ­£ç¡®ç†è§£å‚æ•°ç±»å‹- å‚æ•°åç§°åº”å°½é‡å…·æœ‰æè¿°æ€§ï¼Œè¿™æœ‰åŠ©äºLLMç†è§£å‚æ•°çš„ä½œç”¨- è¿”å›å€¼åº”è¯¥æ˜¯å­—ç¬¦ä¸²æˆ–å¯åºåˆ—åŒ–ä¸ºå­—ç¬¦ä¸²çš„å¯¹è±¡ï¼Œä»¥ä¾¿ä¼ é€’å›LLMllm_with_tools = llm.bind_tools(tools)è¿™ä¸€æ­¥æ˜¯å°†å·¥å…·ç»‘å®šåˆ°LLMå®ä¾‹ï¼Œè¿™æ ·LLMåœ¨ç”Ÿæˆå›å¤æ—¶å°±èƒ½æ„ŸçŸ¥åˆ°è¿™äº›å·¥å…·çš„å­˜åœ¨ã€‚convert_to_openai_functionå‡½æ•°åˆ™æ˜¯å°†LangChainå·¥å…·æ ¼å¼è½¬æ¢ä¸ºOpenAIå‡½æ•°è°ƒç”¨æ ¼å¼ï¼Œå› ä¸ºå¾ˆå¤šæ¨¡å‹éƒ½å…¼å®¹OpenAIçš„å‡½æ•°è°ƒç”¨APIæ ‡å‡†ã€‚</code></pre></div><h2 id="ä¿®æ”¹èŠå¤©èŠ‚ç‚¹å‡½æ•°"><a href="#ä¿®æ”¹èŠå¤©èŠ‚ç‚¹å‡½æ•°" class="headerlink" title="ä¿®æ”¹èŠå¤©èŠ‚ç‚¹å‡½æ•°"></a>ä¿®æ”¹èŠå¤©èŠ‚ç‚¹å‡½æ•°</h2><p>éœ€è¦æ”¹é€ åŸæ¥çš„èŠå¤©èŠ‚ç‚¹å‡½æ•°ï¼Œä½¿å…¶æ”¯æŒå·¥å…·è°ƒç”¨ï¼š</p><div class="code-wrapper"><pre><code class="hljs python"><span class="hljs-comment"># llmçš„è°ƒç”¨</span><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">chat_bot</span>(<span class="hljs-params">state: MessagesState</span>):</span>    <span class="hljs-string">&quot;&quot;&quot;ç”Ÿæˆæµå¼å›å¤çš„èŠ‚ç‚¹å‡½æ•°&quot;&quot;&quot;</span>    messages = state[<span class="hljs-string">&quot;messages&quot;</span>]    <span class="hljs-comment"># ä½¿ç”¨æ”¯æŒå·¥å…·è°ƒç”¨çš„æ–¹å¼è°ƒç”¨LLM</span>    response = <span class="hljs-keyword">await</span> llm_with_tools.ainvoke(        messages,        functions=functions,        function_call=<span class="hljs-string">&quot;auto&quot;</span>    )    <span class="hljs-keyword">return</span> &#123;<span class="hljs-string">&quot;messages&quot;</span>: [response]&#125;</code></pre></div><p>é€šè¿‡ä¼ å…¥functionså‚æ•°å’Œè®¾ç½®function_call=â€autoâ€ï¼Œè®©æ¨¡å‹è‡ªè¡Œå†³å®šæ˜¯å¦éœ€è¦è°ƒç”¨å·¥å…·ã€‚</p><p>è¿™æ„å‘³ç€æ¨¡å‹å°†æ ¹æ®ç”¨æˆ·çš„è¾“å…¥è‡ªåŠ¨åˆ¤æ–­æ˜¯å¦éœ€è¦è°ƒç”¨å·¥å…·ã€‚å¦‚æœæ¨¡å‹è®¤ä¸ºéœ€è¦è°ƒç”¨å·¥å…·ï¼Œå®ƒä¼šç”Ÿæˆä¸€ä¸ªç‰¹æ®Šçš„å›å¤ï¼ŒåŒ…å«å·¥å…·è°ƒç”¨ä¿¡æ¯è€Œä¸æ˜¯ç›´æ¥æ–‡æœ¬å›ç­”ã€‚</p><h2 id="å®šä¹‰æ¡ä»¶è·¯ç”±"><a href="#å®šä¹‰æ¡ä»¶è·¯ç”±" class="headerlink" title="å®šä¹‰æ¡ä»¶è·¯ç”±"></a>å®šä¹‰æ¡ä»¶è·¯ç”±</h2><div class="code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">Literal</span><span class="hljs-comment"># å®šä¹‰è¾¹çš„é€»è¾‘åˆ¤æ–­ï¼ˆæ¡ä»¶è¾¹ï¼‰ï¼Œåˆ¤æ–­æ˜¯å¦ç»§ç»­</span><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">tool_router</span>(<span class="hljs-params">state: MessagesState</span>) -&gt; <span class="hljs-type">Literal</span>[&quot;tools&quot;, &quot;__end__&quot;]:</span>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;state------&gt;&#x27;</span>,state,<span class="hljs-string">&#x27;\n&#x27;</span>)    messages = state[<span class="hljs-string">&#x27;messages&#x27;</span>]    last_message = messages[-<span class="hljs-number">1</span>]    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;last_message------&gt;&#x27;</span>,last_message,<span class="hljs-string">&#x27;\n&#x27;</span>)    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;last_message.tool_calls------&gt;&#x27;</span>,last_message.tool_calls,<span class="hljs-string">&#x27;\n&#x27;</span>)    <span class="hljs-keyword">if</span> last_message.tool_calls: <span class="hljs-comment"># åˆ¤æ–­æ¨¡å‹æ˜¯å¦è¿”å›toolsè°ƒç”¨</span>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;tools&quot;</span>    <span class="hljs-keyword">return</span> END</code></pre></div><p>è¿™ä¸ªå‡½æ•°æ£€æŸ¥æ¨¡å‹è¿”å›çš„æœ€åä¸€æ¡æ¶ˆæ¯æ˜¯å¦åŒ…å«å·¥å…·è°ƒç”¨è¯·æ±‚ã€‚å¦‚æœæœ‰ï¼Œå°±è·¯ç”±åˆ°â€toolsâ€èŠ‚ç‚¹ï¼›å¦‚æœæ²¡æœ‰ï¼Œå°±ç»“æŸå·¥ä½œæµã€‚</p><h3 id="å·¥å…·è°ƒç”¨æµç¨‹è¯¦è§£"><a href="#å·¥å…·è°ƒç”¨æµç¨‹è¯¦è§£" class="headerlink" title="å·¥å…·è°ƒç”¨æµç¨‹è¯¦è§£"></a>å·¥å…·è°ƒç”¨æµç¨‹è¯¦è§£</h3><p>å½“æ¨¡å‹å†³å®šè°ƒç”¨å·¥å…·æ—¶ï¼Œæ•´ä¸ªè¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼š</p><ul><li>æ¨¡å‹ç”Ÿæˆä¸€ä¸ªåŒ…å«tool_callså±æ€§çš„AIMessageå¯¹è±¡</li><li>tool_routerå‡½æ•°æ£€æŸ¥æœ€æ–°æ¶ˆæ¯æ˜¯å¦åŒ…å«tool_calls</li><li>å¦‚æœå­˜åœ¨tool_callsï¼Œå‡½æ•°è¿”å›â€toolsâ€ï¼ŒæŒ‡ç¤ºå·¥ä½œæµå»æ‰§è¡Œå·¥å…·èŠ‚ç‚¹</li><li>å¦‚æœä¸å­˜åœ¨ï¼Œå‡½æ•°è¿”å›ENDï¼Œè¡¨ç¤ºå·¥ä½œæµç»“æŸ</li></ul><p>ä»æ—¥å¿—ä¸­å¯ä»¥çœ‹åˆ°last_message.tool_callsçš„æ ¼å¼ï¼š</p><div class="code-wrapper"><pre><code class="hljs log">last_message.tool_calls------&gt; [&#123;&#x27;name&#x27;: &#x27;get_weather&#x27;, &#x27;args&#x27;: &#123;&#x27;query&#x27;: &#x27;ä»Šæ˜ä¸¤å¤©å¤©æ°”&#x27;&#125;, &#x27;id&#x27;: &#x27;019619eaea388a97f7e451f4cefc4bfe&#x27;, &#x27;type&#x27;: &#x27;tool_call&#x27;&#125;]</code></pre></div><p>è¿™ä¸ªç»“æ„åŒ…å«äº†å…³é”®ä¿¡æ¯ï¼š</p><ul><li>nameï¼šè¦è°ƒç”¨çš„å·¥å…·åç§°ï¼ˆå¯¹åº”æˆ‘ä»¬å®šä¹‰çš„å‡½æ•°åï¼‰</li><li>argsï¼šä¼ é€’ç»™å·¥å…·çš„å‚æ•°ï¼ˆè¿™é‡Œæ˜¯æŸ¥è¯¢å­—ç¬¦ä¸²ï¼‰</li><li>idï¼šå·¥å…·è°ƒç”¨çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼ˆç”¨äºåç»­åŒ¹é…è¿”å›ç»“æœï¼‰</li><li>typeï¼šè°ƒç”¨ç±»å‹ï¼Œå›ºå®šä¸ºâ€tool_callâ€</li></ul><h3 id="ToolNodeçš„å·¥ä½œåŸç†"><a href="#ToolNodeçš„å·¥ä½œåŸç†" class="headerlink" title="ToolNodeçš„å·¥ä½œåŸç†"></a>ToolNodeçš„å·¥ä½œåŸç†</h3><p>å½“å·¥ä½œæµè½¬åˆ°tool_nodeèŠ‚ç‚¹æ—¶ï¼ŒToolNodeä¼šè‡ªåŠ¨ï¼š</p><ul><li>ä»æœ€åä¸€æ¡æ¶ˆæ¯ä¸­æå–tool_calls</li><li>æ ¹æ®å·¥å…·åç§°æ‰¾åˆ°å¯¹åº”çš„å·¥å…·å‡½æ•°</li><li>ç”¨æå–çš„å‚æ•°è°ƒç”¨è¯¥å‡½æ•°</li><li>å°†ç»“æœå°è£…ä¸ºToolMessageæ·»åŠ åˆ°æ¶ˆæ¯å†å²ä¸­</li><li>è¿”å›æ›´æ–°åçš„çŠ¶æ€ç»™å·¥ä½œæµ<br>æœ€åï¼Œå·¥ä½œæµä¼šå†æ¬¡è¿›å…¥chat_botèŠ‚ç‚¹ï¼Œè®©æ¨¡å‹åŸºäºå·¥å…·è¿”å›çš„ç»“æœç”Ÿæˆæœ€ç»ˆå›å¤ã€‚</li></ul><h2 id="æ‰©å±•å·¥ä½œæµ"><a href="#æ‰©å±•å·¥ä½œæµ" class="headerlink" title="æ‰©å±•å·¥ä½œæµ"></a>æ‰©å±•å·¥ä½œæµ</h2><p>ç°åœ¨å¯ä»¥é‡æ–°æ„å»ºä¸€ä¸ªæ›´å¤æ‚çš„å·¥ä½œæµï¼ŒåŒ…å«å·¥å…·è°ƒç”¨å’Œæ¡ä»¶è·¯ç”±ï¼š</p><div class="code-wrapper"><pre><code class="hljs python"><span class="hljs-comment"># åˆ›å»ºå·¥ä½œæµç¨‹</span>workflow = StateGraph(MessagesState)<span class="hljs-comment"># æ·»åŠ èŠ‚ç‚¹</span>workflow.add_node(<span class="hljs-string">&quot;chat_bot&quot;</span>, chat_bot)<span class="hljs-comment"># è®¾ç½®å…¥å£èŠ‚ç‚¹</span>workflow.set_entry_point(<span class="hljs-string">&quot;chat_bot&quot;</span>)<span class="hljs-comment"># æ·»åŠ toolèŠ‚ç‚¹</span>workflow.add_node(<span class="hljs-string">&quot;tools&quot;</span>, tool_node)<span class="hljs-comment"># ä»toolsèŠ‚ç‚¹æŒ‡å‘chat_botèŠ‚ç‚¹ï¼Œä»¥ä¾¿å¯èƒ½çš„åç»­äº¤äº’</span>workflow.add_edge(<span class="hljs-string">&quot;tools&quot;</span>, <span class="hljs-string">&quot;chat_bot&quot;</span>)<span class="hljs-comment"># æ·»åŠ æ¡ä»¶è¾¹</span>workflow.add_conditional_edges(    <span class="hljs-string">&quot;chat_bot&quot;</span>,    tool_router,  <span class="hljs-comment"># åˆ¤æ–­ä¸‹ä¸€ä¸ªè°ƒç”¨çš„èŠ‚ç‚¹</span>)<span class="hljs-comment"># ç¼–è¯‘å›¾</span>app_graph = workflow.<span class="hljs-built_in">compile</span>()</code></pre></div><p>ä¸ç¬¬ä¸€ç¯‡ä¸åŒè¿™ä¸ªå·¥ä½œæµæœ‰äº†æ¡ä»¶è·¯ç”±ï¼Œæ‰§è¡Œè·¯å¾„ç°åœ¨æœ‰ä¸¤ç§å¯èƒ½ï¼š<br>chat_bot â†’ ENDï¼ˆå¦‚æœæ¨¡å‹ç›´æ¥å›ç­”ï¼‰<br>chat_bot â†’ tools â†’ chat_bot â†’ ENDï¼ˆå¦‚æœæ¨¡å‹éœ€è¦è°ƒç”¨å·¥å…·ï¼‰<br>add_conditional_edgesæ–¹æ³•æ˜¯å…³é”®ï¼Œå®ƒå…è®¸å·¥ä½œæµæ ¹æ®è·¯ç”±å‡½æ•°çš„è¿”å›å€¼é€‰æ‹©ä¸åŒçš„æ‰§è¡Œè·¯å¾„ã€‚</p><h2 id="æµ‹è¯•å·¥ä½œæµ"><a href="#æµ‹è¯•å·¥ä½œæµ" class="headerlink" title="æµ‹è¯•å·¥ä½œæµ"></a>æµ‹è¯•å·¥ä½œæµ</h2><div class="code-wrapper"><pre><code class="hljs python"><span class="hljs-comment"># æµ‹è¯•è¿è¡Œå‡½æ•°</span><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run_streaming_chain</span>():</span>    <span class="hljs-string">&quot;&quot;&quot;è¿è¡Œgraphçš„é“¾&quot;&quot;&quot;</span>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;å¼€å§‹ç”Ÿæˆå›å¤...\n&quot;</span>)    messages = [        SystemMessage(content=<span class="hljs-string">&quot;ä½ æ˜¯ä¸€ä¸ªæ™ºèƒ½åŠ©æ‰‹ï¼Œä½¿ç”¨ä¸“ä¸šä¸”å‡†ç¡®çš„è¯­è¨€å›å¤ç”¨æˆ·çš„é—®é¢˜ï¼Œä¸”ä½¿ç”¨ä¸­æ–‡è¿›è¡Œå›å¤&quot;</span>),        HumanMessage(content=<span class="hljs-string">&quot;å¸®æˆ‘æŸ¥ä¸€ä¸‹ä»Šæ˜ä¸¤å¤©çš„å¤©æ°”&quot;</span>)    ]        <span class="hljs-comment"># åˆå§‹åŒ–çŠ¶æ€</span>    initial_state = &#123;<span class="hljs-string">&quot;messages&quot;</span>: messages, <span class="hljs-string">&quot;streamed_output&quot;</span>: []&#125;        <span class="hljs-comment"># ä½¿ç”¨messagesæ¨¡å¼æ•è·æµå¼è¾“å‡º</span>    <span class="hljs-keyword">async</span> <span class="hljs-keyword">for</span> event <span class="hljs-keyword">in</span> app_graph.astream(initial_state, stream_mode=<span class="hljs-string">&#x27;messages&#x27;</span>):        <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(event, <span class="hljs-built_in">tuple</span>):            chunk: AIMessageChunk = event[<span class="hljs-number">0</span>]            <span class="hljs-keyword">if</span> chunk.<span class="hljs-built_in">type</span> == <span class="hljs-string">&#x27;AIMessageChunk&#x27;</span>:                <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;eventé‡Œç›‘å¬åˆ°çš„æµå¼è¾“å‡º------&gt;&#x27;</span>,chunk.content,<span class="hljs-string">&#x27;\n\n&#x27;</span>)</code></pre></div><p>ä¸ç¬¬ä¸€ç¯‡ä¸åŒï¼Œè¿™æ¬¡é€‰æ‹©äº†stream_mode=â€™messagesâ€™æ¥è§‚å¯Ÿæ¨¡å‹çš„å®æ—¶è¾“å‡ºã€‚</p><h2 id="æ‰§è¡Œç»“æœ"><a href="#æ‰§è¡Œç»“æœ" class="headerlink" title="æ‰§è¡Œç»“æœ"></a>æ‰§è¡Œç»“æœ</h2><p>æµ‹è¯•ç»“æœå±•ç¤ºäº†å®Œæ•´çš„å·¥ä½œæµæ‰§è¡Œè¿‡ç¨‹ï¼š</p><ul><li>æ¨¡å‹åˆ†æç”¨æˆ·é—®é¢˜â€å¸®æˆ‘æŸ¥ä¸€ä¸‹ä»Šæ˜ä¸¤å¤©çš„å¤©æ°”â€ï¼Œå†³å®šéœ€è¦è°ƒç”¨get_weatherå·¥å…·</li><li>å·¥å…·è°ƒç”¨èŠ‚ç‚¹æ‰§è¡Œget_weatherå‡½æ•°ï¼Œè¿”å›å¤©æ°”ä¿¡æ¯</li><li>æ¨¡å‹æ”¶åˆ°å¤©æ°”ä¿¡æ¯åï¼Œç”Ÿæˆäº†æœ€ç»ˆå›å¤</li></ul><p>å…³é”®æ˜¯å·¥å…·è°ƒç”¨å’Œè·¯ç”±éƒ¨åˆ†çš„æ‰§è¡Œï¼š</p><ul><li>å½“æ¨¡å‹è¿”å›åŒ…å«tool_callsçš„æ¶ˆæ¯æ—¶ï¼Œtool_routerå‡½æ•°è¿”å›â€toolsâ€</li><li>å·¥ä½œæµè½¬åˆ°toolsèŠ‚ç‚¹ï¼Œæ‰§è¡Œå·¥å…·è°ƒç”¨</li><li>è°ƒç”¨çš„ç»“æœä½œä¸ºæ–°æ¶ˆæ¯è¢«æ·»åŠ åˆ°å¯¹è¯å†å²</li><li>å·¥ä½œæµè¿”å›åˆ°chat_botèŠ‚ç‚¹ï¼Œè®©æ¨¡å‹åŸºäºå·¥å…·ç»“æœç”Ÿæˆæœ€ç»ˆå›å¤</li></ul><p><strong>ç”¨æˆ·è¯¢é—®</strong>ï¼š<br>å¸®æˆ‘æŸ¥ä¸€ä¸‹ä»Šæ˜ä¸¤å¤©çš„å¤©æ°”</p><p><strong>chatbotå›ç­”</strong>ï¼š<br>å¥½çš„ï¼Œæˆ‘æ¥å¸®æ‚¨æŸ¥è¯¢ä¸€ä¸‹ã€‚è¯·ç¨ç­‰ç‰‡åˆ»ç»è¿‡æŸ¥è¯¢ï¼Œä»Šå¤©å¤©æ°”æ™´æœ—ï¼Œæ¸©åº¦20åº¦ï¼Œæ˜å¤©å¤©æ°”å¤šäº‘ï¼Œæ¸©åº¦25åº¦ã€‚è¯·é—®è¿˜æœ‰å…¶ä»–éœ€è¦æˆ‘å¸®å¿™æŸ¥è¯¢çš„å—ï¼Ÿ</p><p>æ­¤æ—¶çš„graphå›¾ï¼š<br><img src="/img/blog/AI/langgraph/2025-03-22_17-39-01.png"></p><p>ä»¥ä¸‹æ˜¯å®Œæ•´è¾“å‡ºè¿‡ç¨‹ï¼š</p><div class="code-wrapper"><pre><code class="hljs xl">å¼€å§‹ç”Ÿæˆå›å¤...<span class="hljs-function"><span class="hljs-title">event</span>é‡Œç›‘å¬åˆ°çš„æµå¼è¾“å‡º------&gt;</span>  <span class="hljs-function"><span class="hljs-title">event</span>é‡Œç›‘å¬åˆ°çš„æµå¼è¾“å‡º------&gt;</span>  <span class="hljs-function"><span class="hljs-title">event</span>é‡Œç›‘å¬åˆ°çš„æµå¼è¾“å‡º------&gt;</span>  <span class="hljs-function"><span class="hljs-title">event</span>é‡Œç›‘å¬åˆ°çš„æµå¼è¾“å‡º------&gt;</span>  <span class="hljs-function"><span class="hljs-title">event</span>é‡Œç›‘å¬åˆ°çš„æµå¼è¾“å‡º------&gt;</span>  <span class="hljs-function"><span class="hljs-title">event</span>é‡Œç›‘å¬åˆ°çš„æµå¼è¾“å‡º------&gt;</span>  <span class="hljs-function"><span class="hljs-title">event</span>é‡Œç›‘å¬åˆ°çš„æµå¼è¾“å‡º------&gt;</span><span class="hljs-function"><span class="hljs-title">event</span>é‡Œç›‘å¬åˆ°çš„æµå¼è¾“å‡º------&gt;</span><span class="hljs-function"><span class="hljs-title">event</span>é‡Œç›‘å¬åˆ°çš„æµå¼è¾“å‡º------&gt;</span><span class="hljs-function"><span class="hljs-title">event</span>é‡Œç›‘å¬åˆ°çš„æµå¼è¾“å‡º------&gt;</span>  <span class="hljs-function"><span class="hljs-title">event</span>é‡Œç›‘å¬åˆ°çš„æµå¼è¾“å‡º------&gt;</span><span class="hljs-function"><span class="hljs-title">event</span>é‡Œç›‘å¬åˆ°çš„æµå¼è¾“å‡º------&gt;</span><span class="hljs-function"><span class="hljs-title">state</span>------&gt;</span> &#123;<span class="hljs-string">&#x27;messages&#x27;</span>: [SystemMessage(content=<span class="hljs-string">&#x27;ä½ æ˜¯ä¸€ä¸ªæ™ºèƒ½åŠ©æ‰‹ï¼Œä½¿ç”¨ä¸“ä¸šä¸”å‡†ç¡®çš„è¯­è¨€å›å¤ç”¨æˆ·çš„é—®é¢˜ï¼Œä¸”ä½¿ç”¨ä¸­æ–‡è¿›è¡Œå›å¤&#x27;</span>, additional_kwargs=&#123;&#125;, response_metadata=&#123;&#125;, id=<span class="hljs-string">&#x27;76b77c29-117e-4a0f-b36c-896e2eaf13ee&#x27;</span>), HumanMessage(content=<span class="hljs-string">&#x27;å¸®æˆ‘æŸ¥ä¸€ä¸‹ä»Šæ˜ä¸¤å¤©çš„å¤©æ°”&#x27;</span>, additional_kwargs=&#123;&#125;, response_metadata=&#123;&#125;, id=<span class="hljs-string">&#x27;e0b6808b-a4ad-4ee5-829b-7718dbe06d88&#x27;</span>), AIMessage(content=<span class="hljs-string">&#x27;&#x27;</span>, additional_kwargs=&#123;<span class="hljs-string">&#x27;tool_calls&#x27;</span>: [&#123;<span class="hljs-string">&#x27;index&#x27;</span>: <span class="hljs-number">0</span>, <span class="hljs-string">&#x27;id&#x27;</span>: <span class="hljs-string">&#x27;019619eaea388a97f7e451f4cefc4bfe&#x27;</span>, <span class="hljs-string">&#x27;function&#x27;</span>: &#123;<span class="hljs-string">&#x27;arguments&#x27;</span>: <span class="hljs-string">&#x27;&#123;&quot;query&quot;: &quot;ä»Šæ˜ä¸¤å¤©å¤©æ°”&quot;&#125;&#x27;</span>, <span class="hljs-string">&#x27;name&#x27;</span>: <span class="hljs-string">&#x27;get_weather&#x27;</span>&#125;, <span class="hljs-string">&#x27;type&#x27;</span>: <span class="hljs-string">&#x27;function&#x27;</span>&#125;]&#125;, response_metadata=&#123;<span class="hljs-string">&#x27;finish_reason&#x27;</span>: <span class="hljs-string">&#x27;tool_calls&#x27;</span>, <span class="hljs-string">&#x27;model_name&#x27;</span>: <span class="hljs-string">&#x27;THUDM/glm-4-9b-chat&#x27;</span>&#125;, id=<span class="hljs-string">&#x27;run-6b761404-e237-4cc4-a203-2316e0ecb3e3&#x27;</span>, tool_calls=[&#123;<span class="hljs-string">&#x27;name&#x27;</span>: <span class="hljs-string">&#x27;get_weather&#x27;</span>, <span class="hljs-string">&#x27;args&#x27;</span>: &#123;<span class="hljs-string">&#x27;query&#x27;</span>: <span class="hljs-string">&#x27;ä»Šæ˜ä¸¤å¤©å¤©æ°”&#x27;</span>&#125;, <span class="hljs-string">&#x27;id&#x27;</span>: <span class="hljs-string">&#x27;019619eaea388a97f7e451f4cefc4bfe&#x27;</span>, <span class="hljs-string">&#x27;type&#x27;</span>: <span class="hljs-string">&#x27;tool_call&#x27;</span>&#125;], usage_metadata=&#123;<span class="hljs-string">&#x27;input_tokens&#x27;</span>: <span class="hljs-number">2076</span>, <span class="hljs-string">&#x27;output_tokens&#x27;</span>: <span class="hljs-number">65</span>, <span class="hljs-string">&#x27;total_tokens&#x27;</span>: <span class="hljs-number">2141</span>, <span class="hljs-string">&#x27;input_token_details&#x27;</span>: &#123;&#125;, <span class="hljs-string">&#x27;output_token_details&#x27;</span>: &#123;&#125;&#125;)]&#125;<span class="hljs-function"><span class="hljs-title">last_message</span>------&gt;</span> content=<span class="hljs-string">&#x27;&#x27;</span> additional_kwargs=&#123;<span class="hljs-string">&#x27;tool_calls&#x27;</span>: [&#123;<span class="hljs-string">&#x27;index&#x27;</span>: <span class="hljs-number">0</span>, <span class="hljs-string">&#x27;id&#x27;</span>: <span class="hljs-string">&#x27;019619eaea388a97f7e451f4cefc4bfe&#x27;</span>, <span class="hljs-string">&#x27;function&#x27;</span>: &#123;<span class="hljs-string">&#x27;arguments&#x27;</span>: <span class="hljs-string">&#x27;&#123;&quot;query&quot;: &quot;ä»Šæ˜ä¸¤å¤©å¤©æ°”&quot;&#125;&#x27;</span>, <span class="hljs-string">&#x27;name&#x27;</span>: <span class="hljs-string">&#x27;get_weather&#x27;</span>&#125;, <span class="hljs-string">&#x27;type&#x27;</span>: <span class="hljs-string">&#x27;function&#x27;</span>&#125;]&#125; response_metadata=&#123;<span class="hljs-string">&#x27;finish_reason&#x27;</span>: <span class="hljs-string">&#x27;tool_calls&#x27;</span>, <span class="hljs-string">&#x27;model_name&#x27;</span>: <span class="hljs-string">&#x27;THUDM/glm-4-9b-chat&#x27;</span>&#125; id=<span class="hljs-string">&#x27;run-6b761404-e237-4cc4-a203-2316e0ecb3e3&#x27;</span> tool_calls=[&#123;<span class="hljs-string">&#x27;name&#x27;</span>: <span class="hljs-string">&#x27;get_weather&#x27;</span>, <span class="hljs-string">&#x27;args&#x27;</span>: &#123;<span class="hljs-string">&#x27;query&#x27;</span>: <span class="hljs-string">&#x27;ä»Šæ˜ä¸¤å¤©å¤©æ°”&#x27;</span>&#125;, <span class="hljs-string">&#x27;id&#x27;</span>: <span class="hljs-string">&#x27;019619eaea388a97f7e451f4cefc4bfe&#x27;</span>, <span class="hljs-string">&#x27;type&#x27;</span>: <span class="hljs-string">&#x27;tool_call&#x27;</span>&#125;] usage_metadata=&#123;<span class="hljs-string">&#x27;input_tokens&#x27;</span>: <span class="hljs-number">2076</span>, <span class="hljs-string">&#x27;output_tokens&#x27;</span>: <span class="hljs-number">65</span>, <span class="hljs-string">&#x27;total_tokens&#x27;</span>: <span class="hljs-number">2141</span>, <span class="hljs-string">&#x27;input_token_details&#x27;</span>: &#123;&#125;, <span class="hljs-string">&#x27;output_token_details&#x27;</span>: &#123;&#125;&#125;<span class="hljs-function"><span class="hljs-title">last_message</span>.tool_calls------&gt;</span> [&#123;<span class="hljs-string">&#x27;name&#x27;</span>: <span class="hljs-string">&#x27;get_weather&#x27;</span>, <span class="hljs-string">&#x27;args&#x27;</span>: &#123;<span class="hljs-string">&#x27;query&#x27;</span>: <span class="hljs-string">&#x27;ä»Šæ˜ä¸¤å¤©å¤©æ°”&#x27;</span>&#125;, <span class="hljs-string">&#x27;id&#x27;</span>: <span class="hljs-string">&#x27;019619eaea388a97f7e451f4cefc4bfe&#x27;</span>, <span class="hljs-string">&#x27;type&#x27;</span>: <span class="hljs-string">&#x27;tool_call&#x27;</span>&#125;]<span class="hljs-function"><span class="hljs-title">event</span>é‡Œç›‘å¬åˆ°çš„æµå¼è¾“å‡º------&gt;</span>  <span class="hljs-function"><span class="hljs-title">event</span>é‡Œç›‘å¬åˆ°çš„æµå¼è¾“å‡º------&gt;</span><span class="hljs-function"><span class="hljs-title">event</span>é‡Œç›‘å¬åˆ°çš„æµå¼è¾“å‡º------&gt;</span> å¥½çš„<span class="hljs-function"><span class="hljs-title">event</span>é‡Œç›‘å¬åˆ°çš„æµå¼è¾“å‡º------&gt;</span> ï¼Œ<span class="hljs-function"><span class="hljs-title">event</span>é‡Œç›‘å¬åˆ°çš„æµå¼è¾“å‡º------&gt;</span> æˆ‘æ¥<span class="hljs-function"><span class="hljs-title">event</span>é‡Œç›‘å¬åˆ°çš„æµå¼è¾“å‡º------&gt;</span> å¸®<span class="hljs-function"><span class="hljs-title">event</span>é‡Œç›‘å¬åˆ°çš„æµå¼è¾“å‡º------&gt;</span> æ‚¨<span class="hljs-function"><span class="hljs-title">event</span>é‡Œç›‘å¬åˆ°çš„æµå¼è¾“å‡º------&gt;</span> æŸ¥è¯¢ <span class="hljs-function"><span class="hljs-title">event</span>é‡Œç›‘å¬åˆ°çš„æµå¼è¾“å‡º------&gt;</span> ä¸€ä¸‹<span class="hljs-function"><span class="hljs-title">event</span>é‡Œç›‘å¬åˆ°çš„æµå¼è¾“å‡º------&gt;</span> ã€‚<span class="hljs-function"><span class="hljs-title">event</span>é‡Œç›‘å¬åˆ°çš„æµå¼è¾“å‡º------&gt;</span> è¯·<span class="hljs-function"><span class="hljs-title">event</span>é‡Œç›‘å¬åˆ°çš„æµå¼è¾“å‡º------&gt;</span> ç¨<span class="hljs-function"><span class="hljs-title">event</span>é‡Œç›‘å¬åˆ°çš„æµå¼è¾“å‡º------&gt;</span> ç­‰<span class="hljs-function"><span class="hljs-title">event</span>é‡Œç›‘å¬åˆ°çš„æµå¼è¾“å‡º------&gt;</span> ç‰‡åˆ»<span class="hljs-function"><span class="hljs-title">event</span>é‡Œç›‘å¬åˆ°çš„æµå¼è¾“å‡º------&gt;</span> ç»è¿‡ <span class="hljs-function"><span class="hljs-title">event</span>é‡Œç›‘å¬åˆ°çš„æµå¼è¾“å‡º------&gt;</span> æŸ¥è¯¢<span class="hljs-function"><span class="hljs-title">event</span>é‡Œç›‘å¬åˆ°çš„æµå¼è¾“å‡º------&gt;</span> ï¼Œ<span class="hljs-function"><span class="hljs-title">event</span>é‡Œç›‘å¬åˆ°çš„æµå¼è¾“å‡º------&gt;</span> ä»Šå¤©<span class="hljs-function"><span class="hljs-title">event</span>é‡Œç›‘å¬åˆ°çš„æµå¼è¾“å‡º------&gt;</span> å¤©æ°”<span class="hljs-function"><span class="hljs-title">event</span>é‡Œç›‘å¬åˆ°çš„æµå¼è¾“å‡º------&gt;</span> æ™´<span class="hljs-function"><span class="hljs-title">event</span>é‡Œç›‘å¬åˆ°çš„æµå¼è¾“å‡º------&gt;</span> æœ—<span class="hljs-function"><span class="hljs-title">event</span>é‡Œç›‘å¬åˆ°çš„æµå¼è¾“å‡º------&gt;</span> ï¼Œ<span class="hljs-function"><span class="hljs-title">event</span>é‡Œç›‘å¬åˆ°çš„æµå¼è¾“å‡º------&gt;</span> æ¸©åº¦<span class="hljs-function"><span class="hljs-title">event</span>é‡Œç›‘å¬åˆ°çš„æµå¼è¾“å‡º------&gt;</span> <span class="hljs-number">20</span><span class="hljs-function"><span class="hljs-title">event</span>é‡Œç›‘å¬åˆ°çš„æµå¼è¾“å‡º------&gt;</span> åº¦ <span class="hljs-function"><span class="hljs-title">event</span>é‡Œç›‘å¬åˆ°çš„æµå¼è¾“å‡º------&gt;</span> ï¼Œ<span class="hljs-function"><span class="hljs-title">event</span>é‡Œç›‘å¬åˆ°çš„æµå¼è¾“å‡º------&gt;</span> æ˜å¤©<span class="hljs-function"><span class="hljs-title">event</span>é‡Œç›‘å¬åˆ°çš„æµå¼è¾“å‡º------&gt;</span> å¤©æ°”<span class="hljs-function"><span class="hljs-title">event</span>é‡Œç›‘å¬åˆ°çš„æµå¼è¾“å‡º------&gt;</span> å¤šäº‘<span class="hljs-function"><span class="hljs-title">event</span>é‡Œç›‘å¬åˆ°çš„æµå¼è¾“å‡º------&gt;</span> ï¼Œ<span class="hljs-function"><span class="hljs-title">event</span>é‡Œç›‘å¬åˆ°çš„æµå¼è¾“å‡º------&gt;</span> æ¸©åº¦<span class="hljs-function"><span class="hljs-title">event</span>é‡Œç›‘å¬åˆ°çš„æµå¼è¾“å‡º------&gt;</span> <span class="hljs-number">25</span><span class="hljs-function"><span class="hljs-title">event</span>é‡Œç›‘å¬åˆ°çš„æµå¼è¾“å‡º------&gt;</span> åº¦<span class="hljs-function"><span class="hljs-title">event</span>é‡Œç›‘å¬åˆ°çš„æµå¼è¾“å‡º------&gt;</span> ã€‚<span class="hljs-function"><span class="hljs-title">event</span>é‡Œç›‘å¬åˆ°çš„æµå¼è¾“å‡º------&gt;</span> è¯·é—®<span class="hljs-function"><span class="hljs-title">event</span>é‡Œç›‘å¬åˆ°çš„æµå¼è¾“å‡º------&gt;</span> è¿˜æœ‰<span class="hljs-function"><span class="hljs-title">event</span>é‡Œç›‘å¬åˆ°çš„æµå¼è¾“å‡º------&gt;</span> å…¶ä»– <span class="hljs-function"><span class="hljs-title">event</span>é‡Œç›‘å¬åˆ°çš„æµå¼è¾“å‡º------&gt;</span> éœ€è¦ <span class="hljs-function"><span class="hljs-title">event</span>é‡Œç›‘å¬åˆ°çš„æµå¼è¾“å‡º------&gt;</span> æˆ‘ <span class="hljs-function"><span class="hljs-title">event</span>é‡Œç›‘å¬åˆ°çš„æµå¼è¾“å‡º------&gt;</span> å¸®å¿™ <span class="hljs-function"><span class="hljs-title">event</span>é‡Œç›‘å¬åˆ°çš„æµå¼è¾“å‡º------&gt;</span> æŸ¥è¯¢ <span class="hljs-function"><span class="hljs-title">event</span>é‡Œç›‘å¬åˆ°çš„æµå¼è¾“å‡º------&gt;</span> çš„å— <span class="hljs-function"><span class="hljs-title">event</span>é‡Œç›‘å¬åˆ°çš„æµå¼è¾“å‡º------&gt;</span> ï¼Ÿ <span class="hljs-function"><span class="hljs-title">event</span>é‡Œç›‘å¬åˆ°çš„æµå¼è¾“å‡º------&gt;</span>  <span class="hljs-function"><span class="hljs-title">state</span>------&gt;</span> &#123;<span class="hljs-string">&#x27;messages&#x27;</span>: [SystemMessage(content=<span class="hljs-string">&#x27;ä½ æ˜¯ä¸€ä¸ªæ™ºèƒ½åŠ©æ‰‹ï¼Œä½¿ç”¨ä¸“ä¸šä¸”å‡†ç¡®çš„è¯­è¨€å›å¤ç”¨æˆ·çš„é—®é¢˜ï¼Œä¸”ä½¿ç”¨ä¸­æ–‡è¿›è¡Œå›å¤&#x27;</span>, additional_kwargs=&#123;&#125;, response_metadata=&#123;&#125;, id=<span class="hljs-string">&#x27;76b77c29-117e-4a0f-b36c-896e2eaf13ee&#x27;</span>), HumanMessage(content=<span class="hljs-string">&#x27;å¸®æˆ‘æŸ¥ä¸€ä¸‹ä»Šæ˜ä¸¤å¤©çš„å¤©æ°”&#x27;</span>, additional_kwargs=&#123;&#125;, response_metadata=&#123;&#125;, id=<span class="hljs-string">&#x27;e0b6808b-a4ad-4ee5-829b-7718dbe06d88&#x27;</span>), AIMessage(content=<span class="hljs-string">&#x27;&#x27;</span>, additional_kwargs=&#123;<span class="hljs-string">&#x27;tool_calls&#x27;</span>: [&#123;<span class="hljs-string">&#x27;index&#x27;</span>: <span class="hljs-number">0</span>, <span class="hljs-string">&#x27;id&#x27;</span>: <span class="hljs-string">&#x27;019619eaea388a97f7e451f4cefc4bfe&#x27;</span>, <span class="hljs-string">&#x27;function&#x27;</span>: &#123;<span class="hljs-string">&#x27;arguments&#x27;</span>: <span class="hljs-string">&#x27;&#123;&quot;query&quot;: &quot;ä»Šæ˜ä¸¤å¤©å¤©æ°”&quot;&#125;&#x27;</span>, <span class="hljs-string">&#x27;name&#x27;</span>: <span class="hljs-string">&#x27;get_weather&#x27;</span>&#125;, <span class="hljs-string">&#x27;type&#x27;</span>: <span class="hljs-string">&#x27;function&#x27;</span>&#125;]&#125;, response_metadata=&#123;<span class="hljs-string">&#x27;finish_reason&#x27;</span>: <span class="hljs-string">&#x27;tool_calls&#x27;</span>, <span class="hljs-string">&#x27;model_name&#x27;</span>: <span class="hljs-string">&#x27;THUDM/glm-4-9b-chat&#x27;</span>&#125;, id=<span class="hljs-string">&#x27;run-6b761404-e237-4cc4-a203-2316e0ecb3e3&#x27;</span>, tool_calls=[&#123;<span class="hljs-string">&#x27;name&#x27;</span>: <span class="hljs-string">&#x27;get_weather&#x27;</span>, <span class="hljs-string">&#x27;args&#x27;</span>: &#123;<span class="hljs-string">&#x27;query&#x27;</span>: <span class="hljs-string">&#x27;ä»Šæ˜ä¸¤å¤©å¤©æ°”&#x27;</span>&#125;, <span class="hljs-string">&#x27;id&#x27;</span>: <span class="hljs-string">&#x27;019619eaea388a97f7e451f4cefc4bfe&#x27;</span>, <span class="hljs-string">&#x27;type&#x27;</span>: <span class="hljs-string">&#x27;tool_call&#x27;</span>&#125;], usage_metadata=&#123;<span class="hljs-string">&#x27;input_tokens&#x27;</span>: <span class="hljs-number">2076</span>, <span class="hljs-string">&#x27;output_tokens&#x27;</span>: <span class="hljs-number">65</span>, <span class="hljs-string">&#x27;total_tokens&#x27;</span>: <span class="hljs-number">2141</span>, <span class="hljs-string">&#x27;input_token_details&#x27;</span>: &#123;&#125;, <span class="hljs-string">&#x27;output_token_details&#x27;</span>: &#123;&#125;&#125;), ToolMessage(content=<span class="hljs-string">&#x27;[&quot;ä»Šå¤©å¤©æ°”æ™´æœ—ï¼Œæ¸©åº¦20åº¦&quot;, &quot;æ˜å¤©å¤©æ°”å¤šäº‘ï¼Œæ¸©åº¦25åº¦&quot;]&#x27;</span>, <span class="hljs-keyword">name</span>=<span class="hljs-string">&#x27;get_weather&#x27;</span>, id=<span class="hljs-string">&#x27;4d8564fa-8301-4672-8e8d-64f6cecbf936&#x27;</span>, tool_call_id=<span class="hljs-string">&#x27;019619eaea388a97f7e451f4cefc4bfe&#x27;</span>), AIMessage(content=<span class="hljs-string">&#x27;\nå¥½çš„ï¼Œæˆ‘æ¥å¸®æ‚¨æŸ¥è¯¢ä¸€ä¸‹ã€‚è¯·ç¨ç­‰ç‰‡ åˆ»ç»è¿‡æŸ¥è¯¢ï¼Œä»Šå¤©å¤©æ°”æ™´æœ—ï¼Œæ¸©åº¦20åº¦ï¼Œæ˜å¤©å¤©æ°”å¤šäº‘ï¼Œæ¸©åº¦25åº¦ã€‚è¯·é—®è¿˜æœ‰å…¶ä»–éœ€è¦æˆ‘å¸®å¿™æŸ¥è¯¢çš„å—ï¼Ÿ&#x27;</span>, additional_kwargs=&#123;&#125;, response_metadata=&#123;<span class="hljs-string">&#x27;finish_reason&#x27;</span>: <span class="hljs-string">&#x27;stop&#x27;</span>, <span class="hljs-string">&#x27;model_name&#x27;</span>: <span class="hljs-string">&#x27;THUDM/glm-4-9b-chat&#x27;</span>&#125;, id=<span class="hljs-string">&#x27;run-b9e66b49-9301-4343-8e51-67d3d48737c1&#x27;</span>, usage_metadata=&#123;<span class="hljs-string">&#x27;input_tokens&#x27;</span>: <span class="hljs-number">8668</span>, <span class="hljs-string">&#x27;output_tokens&#x27;</span>: <span class="hljs-number">945</span>, <span class="hljs-string">&#x27;total_tokens&#x27;</span>: <span class="hljs-number">9613</span>, <span class="hljs-string">&#x27;input_token_details&#x27;</span>: &#123;&#125;, <span class="hljs-string">&#x27;output_token_details&#x27;</span>: &#123;&#125;&#125;)]&#125;<span class="hljs-function"><span class="hljs-title">last_message</span>------&gt;</span> content=<span class="hljs-string">&#x27;\nå¥½çš„ï¼Œæˆ‘æ¥å¸®æ‚¨æŸ¥è¯¢ä¸€ä¸‹ã€‚è¯·ç¨ç­‰ç‰‡åˆ»ç»è¿‡æŸ¥è¯¢ï¼Œä»Šå¤©å¤©æ°”æ™´æœ—ï¼Œæ¸©åº¦20åº¦ï¼Œæ˜å¤©å¤©æ°”å¤šäº‘ï¼Œæ¸©åº¦25åº¦ã€‚è¯·é—®è¿˜æœ‰å…¶ä»–éœ€è¦æˆ‘å¸®å¿™æŸ¥è¯¢çš„å—ï¼Ÿ&#x27;</span> additional_kwargs=&#123;&#125; response_metadata=&#123;<span class="hljs-string">&#x27;finish_reason&#x27;</span>: <span class="hljs-string">&#x27;stop&#x27;</span>, <span class="hljs-string">&#x27;model_name&#x27;</span>: <span class="hljs-string">&#x27;THUDM/glm-4-9b-chat&#x27;</span>&#125; id=<span class="hljs-string">&#x27;run-b9e66b49-9301-4343-8e51-67d3d48737c1&#x27;</span> usage_metadata=&#123;<span class="hljs-string">&#x27;input_tokens&#x27;</span>: <span class="hljs-number">8668</span>, <span class="hljs-string">&#x27;output_tokens&#x27;</span>: <span class="hljs-number">945</span>, <span class="hljs-string">&#x27;total_tokens&#x27;</span>: <span class="hljs-number">9613</span>, <span class="hljs-string">&#x27;input_token_details&#x27;</span>: &#123;&#125;, <span class="hljs-string">&#x27;output_token_details&#x27;</span>: &#123;&#125;&#125;<span class="hljs-function"><span class="hljs-title">last_message</span>.tool_calls------&gt;</span> []</code></pre></div><p>ä»¥ä¸‹æ˜¯å®Œæ•´ä»£ç ï¼š</p><div class="code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">Literal</span><span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime<span class="hljs-keyword">from</span> langchain_openai <span class="hljs-keyword">import</span> ChatOpenAI<span class="hljs-keyword">from</span> langchain_core.messages <span class="hljs-keyword">import</span> HumanMessage, AIMessage, SystemMessage, AIMessageChunk<span class="hljs-keyword">from</span> langgraph.graph <span class="hljs-keyword">import</span> Graph, StateGraph, MessagesState, END<span class="hljs-keyword">from</span> langchain_community.chat_models <span class="hljs-keyword">import</span> QianfanChatEndpoint<span class="hljs-keyword">from</span> langchain_core.tools <span class="hljs-keyword">import</span> tool<span class="hljs-keyword">from</span> langgraph.prebuilt <span class="hljs-keyword">import</span> ToolNode<span class="hljs-keyword">import</span> asyncio<span class="hljs-keyword">from</span> langchain_core.runnables.graph <span class="hljs-keyword">import</span> MermaidDrawMethod<span class="hljs-keyword">from</span> langchain_core.utils.function_calling <span class="hljs-keyword">import</span> convert_to_openai_function<span class="hljs-comment"># ç™¾åº¦åƒå¸†çš„è°ƒç”¨æ–¹å¼</span><span class="hljs-comment"># llm = QianfanChatEndpoint(</span><span class="hljs-comment">#     model=&quot;ERNIE-Speed-128K&quot;,</span><span class="hljs-comment">#     streaming=True,  # å¯ç”¨æµå¼è¾“å‡º</span><span class="hljs-comment">#     api_key=os.getenv(&#x27;QIANFAN_AK&#x27;, &#x27;&#x27;),</span><span class="hljs-comment">#     secret_key=os.getenv(&#x27;QIANFAN_SK&#x27;, &#x27;&#x27;)</span><span class="hljs-comment"># )</span><span class="hljs-comment"># ç¡…åŸºæµåŠ¨çš„apiè°ƒç”¨æ–¹å¼</span>llm = ChatOpenAI(    <span class="hljs-comment">#THUDM/glm-4-9b-chat</span>    <span class="hljs-comment">#Qwen/Qwen2.5-7B-Instruct</span>    model=<span class="hljs-string">&quot;THUDM/glm-4-9b-chat&quot;</span>,    streaming=<span class="hljs-literal">False</span>,  <span class="hljs-comment"># å¯ç”¨æµå¼è¾“å‡º</span>    api_key=os.getenv(<span class="hljs-string">&#x27;SILICONFLOW_API_KEY&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>),     base_url=os.getenv(<span class="hljs-string">&#x27;SILICONFLOW_BASE_URL&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>),    temperature=<span class="hljs-number">0.1</span>,)<span class="hljs-comment"># å®šä¹‰å·¥å…·</span><span class="hljs-meta">@tool</span><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_weather</span>(<span class="hljs-params">query: <span class="hljs-built_in">str</span></span>):</span>    <span class="hljs-string">&quot;&quot;&quot;ç”¨äºè·å–å¤©æ°”ä¿¡æ¯ã€‚&quot;&quot;&quot;</span>    <span class="hljs-keyword">return</span> [<span class="hljs-string">&quot;ä»Šå¤©å¤©æ°”æ™´æœ—ï¼Œæ¸©åº¦20åº¦&quot;</span>, <span class="hljs-string">&quot;æ˜å¤©å¤©æ°”å¤šäº‘ï¼Œæ¸©åº¦25åº¦&quot;</span>]tools = [get_weather]llm_with_tools = llm.bind_tools(tools)<span class="hljs-comment"># åˆ›å»ºå·¥å…·åˆ—è¡¨çš„å‡½æ•°ç‰ˆæœ¬</span>functions = [convert_to_openai_function(t) <span class="hljs-keyword">for</span> t <span class="hljs-keyword">in</span> tools]<span class="hljs-comment"># åˆ›å»ºtoolèŠ‚ç‚¹</span>tool_node = ToolNode(tools)<span class="hljs-comment"># llmçš„è°ƒç”¨</span><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">chat_bot</span>(<span class="hljs-params">state: MessagesState</span>):</span>    <span class="hljs-string">&quot;&quot;&quot;ç”Ÿæˆæµå¼å›å¤çš„èŠ‚ç‚¹å‡½æ•°&quot;&quot;&quot;</span>    messages = state[<span class="hljs-string">&quot;messages&quot;</span>]    <span class="hljs-comment"># response = await llm.ainvoke(messages)</span>    response = <span class="hljs-keyword">await</span> llm_with_tools.ainvoke(        messages,        functions=functions,        function_call=<span class="hljs-string">&quot;auto&quot;</span>    )    <span class="hljs-keyword">return</span> &#123;<span class="hljs-string">&quot;messages&quot;</span>: [response]&#125;<span class="hljs-comment"># 4.å®šä¹‰è¾¹çš„é€»è¾‘åˆ¤æ–­ï¼ˆæ¡ä»¶è¾¹ï¼‰ï¼Œåˆ¤æ–­æ˜¯å¦ç»§ç»­</span><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">tool_router</span>(<span class="hljs-params">state: MessagesState</span>) -&gt; <span class="hljs-type">Literal</span>[&quot;tools&quot;, &quot;__end__&quot;]:</span> <span class="hljs-comment">#Literalç”¨äºé™åˆ¶è¿”å›çš„å€¼çš„å¯é€‰å€¼</span>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;state------&gt;&#x27;</span>,state,<span class="hljs-string">&#x27;\n&#x27;</span>)    messages = state[<span class="hljs-string">&#x27;messages&#x27;</span>]    last_message = messages[-<span class="hljs-number">1</span>]    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;last_message------&gt;&#x27;</span>,last_message,<span class="hljs-string">&#x27;\n&#x27;</span>)    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;last_message.tool_calls------&gt;&#x27;</span>,last_message.tool_calls,<span class="hljs-string">&#x27;\n&#x27;</span>)    <span class="hljs-keyword">if</span> last_message.tool_calls: <span class="hljs-comment">#åˆ¤æ–­modelsæ˜¯å¦è¿”å›toolsè°ƒç”¨ï¼Œæœ‰åˆ™å‘Šè¯‰è°ƒç”¨toolsèŠ‚ç‚¹ï¼Œå¦åˆ™ç»“æŸ</span>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;tools&quot;</span>    <span class="hljs-keyword">return</span> END<span class="hljs-comment"># åˆ›å»ºå·¥ä½œæµç¨‹</span>workflow = StateGraph(MessagesState)<span class="hljs-comment"># æ·»åŠ èŠ‚ç‚¹</span>workflow.add_node(<span class="hljs-string">&quot;chat_bot&quot;</span>, chat_bot)<span class="hljs-comment"># è®¾ç½®å…¥å£èŠ‚ç‚¹</span>workflow.set_entry_point(<span class="hljs-string">&quot;chat_bot&quot;</span>)<span class="hljs-comment"># æ·»åŠ toolèŠ‚ç‚¹</span>workflow.add_node(<span class="hljs-string">&quot;tools&quot;</span>, tool_node)<span class="hljs-comment"># ä»toolsèŠ‚ç‚¹æŒ‡å‘chat_botèŠ‚ç‚¹ï¼Œä»¥ä¾¿å¯èƒ½çš„åç»­äº¤äº’</span>workflow.add_edge(<span class="hljs-string">&quot;tools&quot;</span>, <span class="hljs-string">&quot;chat_bot&quot;</span>)workflow.add_conditional_edges(    <span class="hljs-string">&quot;chat_bot&quot;</span>,    tool_router,    <span class="hljs-comment">#åˆ¤æ–­ä¸‹ä¸€ä¸ªè°ƒç”¨çš„èŠ‚ç‚¹</span>)<span class="hljs-comment"># ç¼–è¯‘å›¾</span>app_graph = workflow.<span class="hljs-built_in">compile</span>()<span class="hljs-comment"># å®šä¹‰ä¸€ä¸ªå°†å›¾å¯¼å‡ºä¸ºPNGçš„å‡½æ•°</span><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">export_graph_to_png</span>():</span>    <span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">    å°†LangGraphå›¾å¯¼å‡ºä¸ºPNGæ ¼å¼</span><span class="hljs-string">    Returns:</span><span class="hljs-string">        str: ç”Ÿæˆçš„PNGæ–‡ä»¶è·¯å¾„</span><span class="hljs-string">    &quot;&quot;&quot;</span>    <span class="hljs-keyword">try</span>:        output_file=<span class="hljs-string">&#x27;ç®€å•çš„chatbot-&#x27;</span>+datetime.now().strftime(<span class="hljs-string">&quot;%Y-%m-%d_%H-%M-%S&quot;</span>)+<span class="hljs-string">&quot;.png&quot;</span>        app_graph.get_graph().draw_mermaid_png(            draw_method=MermaidDrawMethod.API,            output_file_path=output_file        )        <span class="hljs-comment"># return True</span>    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;å¯¼å‡ºPNGå›¾å½¢æ—¶å‡ºé”™: <span class="hljs-subst">&#123;e&#125;</span>&quot;</span>)        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><span class="hljs-comment"># æµ‹è¯•è¿è¡Œå‡½æ•°</span><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run_streaming_chain</span>():</span>    <span class="hljs-string">&quot;&quot;&quot;è¿è¡Œgraphçš„é“¾&quot;&quot;&quot;</span>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;å¼€å§‹ç”Ÿæˆå›å¤...\n&quot;</span>)    messages = [        SystemMessage(content=<span class="hljs-string">&quot;ä½ æ˜¯ä¸€ä¸ªæ™ºèƒ½åŠ©æ‰‹ï¼Œä½¿ç”¨ä¸“ä¸šä¸”å‡†ç¡®çš„è¯­è¨€å›å¤ç”¨æˆ·çš„é—®é¢˜ï¼Œä¸”ä½¿ç”¨ä¸­æ–‡è¿›è¡Œå›å¤&quot;</span>),        HumanMessage(content=<span class="hljs-string">&quot;å¸®æˆ‘æŸ¥ä¸€ä¸‹ä»Šæ˜ä¸¤å¤©çš„å¤©æ°”&quot;</span>)    ]        <span class="hljs-comment"># åˆå§‹åŒ–çŠ¶æ€</span>    initial_state = &#123;<span class="hljs-string">&quot;messages&quot;</span>: messages, <span class="hljs-string">&quot;streamed_output&quot;</span>: []&#125;        <span class="hljs-comment"># stream_mode valuesçš„æ•ˆæœ</span>    <span class="hljs-comment"># async for event in app_graph.astream(initial_state, config=&#123;&quot;configurable&quot;: &#123;&quot;thread_id&quot;: &quot;1&quot;&#125;&#125;, stream_mode=&quot;values&quot;):</span>    <span class="hljs-comment">#     # print(&#x27;event------&gt;&#x27;,event,&#x27;\n\n&#x27;)</span>    <span class="hljs-comment">#     if &quot;messages&quot; in event:</span>    <span class="hljs-comment">#         event[&quot;messages&quot;][-1].pretty_print()</span>    <span class="hljs-comment">#     pass</span>        <span class="hljs-comment"># stream_mode messagesçš„æµå¼æ•ˆæœ</span>    <span class="hljs-keyword">async</span> <span class="hljs-keyword">for</span> event <span class="hljs-keyword">in</span> app_graph.astream(initial_state, stream_mode=<span class="hljs-string">&#x27;messages&#x27;</span>):        <span class="hljs-comment"># print(&#x27;event------&gt;&#x27;,event,&#x27;\n\n&#x27;)</span>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(event, <span class="hljs-built_in">tuple</span>):            chunk: AIMessageChunk = event[<span class="hljs-number">0</span>]            <span class="hljs-keyword">if</span> chunk.<span class="hljs-built_in">type</span> == <span class="hljs-string">&#x27;AIMessageChunk&#x27;</span>:                <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;eventé‡Œç›‘å¬åˆ°çš„æµå¼è¾“å‡º------&gt;&#x27;</span>,chunk.content,<span class="hljs-string">&#x27;\n\n&#x27;</span>)        <span class="hljs-comment"># print(&quot;\nå›å¤å®Œæˆ&quot;)</span>        <span class="hljs-comment"># å±•ç¤ºå›¾å½¢</span>    <span class="hljs-keyword">try</span>:        <span class="hljs-comment"># å¯¼å‡ºä¸ºPNG</span>        export_graph_to_png()    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;å›¾è¡¨ç»˜åˆ¶å‡ºé”™: <span class="hljs-subst">&#123;e&#125;</span>&quot;</span>)<span class="hljs-comment"># è¿è¡Œæµå¼è¾“å‡º</span><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:    asyncio.run(run_streaming_chain())</code></pre></div>]]></content>
    
    
    <categories>
      
      <category>AIç›¸å…³</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Langgraph</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Langgraphå­¦ä¹ 1ï¼šåŸºç¡€æµç¨‹</title>
    <link href="/2025/03/22/Langgraph%E5%AD%A6%E4%B9%A01%EF%BC%9A%E5%9F%BA%E7%A1%80chatbot/"/>
    <url>/2025/03/22/Langgraph%E5%AD%A6%E4%B9%A01%EF%BC%9A%E5%9F%BA%E7%A1%80chatbot/</url>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘å¼€å§‹å­¦ä¹ Langgraphï¼Œå†³å®šä»åŸºç¡€çš„chatbotå¼€å§‹ï¼Œä¸€æ­¥æ­¥è®°å½•ä¸€ä¸‹å­¦ä¹ è¿‡ç¨‹</p><h2 id="1-LLMå…è´¹APIè°ƒç”¨æ–¹å¼"><a href="#1-LLMå…è´¹APIè°ƒç”¨æ–¹å¼" class="headerlink" title="1. LLMå…è´¹APIè°ƒç”¨æ–¹å¼"></a>1. LLMå…è´¹APIè°ƒç”¨æ–¹å¼</h2><p>å¼€å§‹æ„å»ºchatbotçš„ç¬¬ä¸€æ­¥æ˜¯é€‰æ‹©åˆé€‚çš„å¤§è¯­è¨€æ¨¡å‹ã€‚ä¸ºäº†èŠ‚çœè´¹ç”¨ï¼Œè¿™é‡Œå°è¯•äº†ä¸¤ç§ä¸åŒå¹³å°çš„çš„å…è´¹LLM APIçš„è°ƒç”¨æ–¹å¼ï¼šç™¾åº¦åƒå¸†å’Œç¡…åŸºæµåŠ¨ã€‚</p><h3 id="ç™¾åº¦åƒå¸†è°ƒç”¨"><a href="#ç™¾åº¦åƒå¸†è°ƒç”¨" class="headerlink" title="ç™¾åº¦åƒå¸†è°ƒç”¨"></a>ç™¾åº¦åƒå¸†è°ƒç”¨</h3><p>è¿™æ˜¯demoä¸­ç›®å‰ä½¿ç”¨çš„æ–¹å¼ï¼Œä¸»è¦é€šè¿‡QianfanChatEndpointæ¥è°ƒç”¨ç™¾åº¦çš„ERNIE-Speed-128Kå…è´¹æ¨¡å‹ï¼š</p><div class="code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<span class="hljs-keyword">from</span> langchain_community.chat_models <span class="hljs-keyword">import</span> QianfanChatEndpointllm = QianfanChatEndpoint(    model=<span class="hljs-string">&quot;ERNIE-Speed-128K&quot;</span>,    streaming=<span class="hljs-literal">True</span>,  <span class="hljs-comment"># å¯ç”¨æµå¼è¾“å‡º</span>    api_key=os.getenv(<span class="hljs-string">&#x27;QIANFAN_AK&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>),    secret_key=os.getenv(<span class="hljs-string">&#x27;QIANFAN_SK&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>))</code></pre></div><h3 id="ç¡…åŸºæµåŠ¨è°ƒç”¨æ–¹å¼"><a href="#ç¡…åŸºæµåŠ¨è°ƒç”¨æ–¹å¼" class="headerlink" title="ç¡…åŸºæµåŠ¨è°ƒç”¨æ–¹å¼"></a>ç¡…åŸºæµåŠ¨è°ƒç”¨æ–¹å¼</h3><p>å¦ä¸€ç§æ–¹å¼æ˜¯ä½¿ç”¨ç¡…åŸºæµåŠ¨çš„APIï¼Œé€šè¿‡ChatOpenAIæ¥è°ƒç”¨å›½äº§çš„GLMæˆ–Qwenç­‰å…è´¹æ¨¡å‹ï¼š</p><div class="code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> langchain_openai <span class="hljs-keyword">import</span> ChatOpenAIllm = ChatOpenAI(    <span class="hljs-comment">#THUDM/glm-4-9b-chat</span>    <span class="hljs-comment">#Qwen/Qwen2.5-7B-Instruct</span>    model=<span class="hljs-string">&quot;THUDM/glm-4-9b-chat&quot;</span>,    streaming=<span class="hljs-literal">False</span>,    api_key=os.getenv(<span class="hljs-string">&#x27;SILICONFLOW_API_KEY&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>),     base_url=os.getenv(<span class="hljs-string">&#x27;SILICONFLOW_BASE_URL&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>),    temperature=<span class="hljs-number">0.1</span>,)</code></pre></div><h2 id="2-æ„å»ºåŸºç¡€Langgraphå·¥ä½œæµ"><a href="#2-æ„å»ºåŸºç¡€Langgraphå·¥ä½œæµ" class="headerlink" title="2. æ„å»ºåŸºç¡€Langgraphå·¥ä½œæµ"></a>2. æ„å»ºåŸºç¡€Langgraphå·¥ä½œæµ</h2><p>æ¥ä¸‹æ¥å®šä¹‰ä¸€ä¸ªç®€å•çš„chatèŠ‚ç‚¹å‡½æ•°å’Œå·¥ä½œæµï¼š</p><div class="code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime<span class="hljs-keyword">from</span> langchain_core.messages <span class="hljs-keyword">import</span> HumanMessage, AIMessage, SystemMessage, AIMessageChunk<span class="hljs-keyword">from</span> langgraph.graph <span class="hljs-keyword">import</span> Graph, StateGraph, MessagesState, END<span class="hljs-keyword">import</span> asyncio<span class="hljs-keyword">from</span> langchain_core.runnables.graph <span class="hljs-keyword">import</span> MermaidDrawMethod<span class="hljs-comment"># llmçš„è°ƒç”¨</span><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">chat_bot</span>(<span class="hljs-params">state: MessagesState</span>):</span>    <span class="hljs-string">&quot;&quot;&quot;ç”Ÿæˆæµå¼å›å¤çš„èŠ‚ç‚¹å‡½æ•°&quot;&quot;&quot;</span>    messages = state[<span class="hljs-string">&quot;messages&quot;</span>]    <span class="hljs-comment"># ä½¿ç”¨éæµå¼æ–¹å¼æ¥æ”¶å®Œæ•´è¿”å›</span>    response = <span class="hljs-keyword">await</span> llm.ainvoke(messages)    <span class="hljs-keyword">return</span> &#123;<span class="hljs-string">&quot;messages&quot;</span>: [response]&#125;<span class="hljs-comment"># åˆ›å»ºå·¥ä½œæµç¨‹</span>workflow = StateGraph(MessagesState)<span class="hljs-comment"># æ·»åŠ èŠ‚ç‚¹</span>workflow.add_node(<span class="hljs-string">&quot;chat_bot&quot;</span>, chat_bot)<span class="hljs-comment"># è®¾ç½®å…¥å£èŠ‚ç‚¹</span>workflow.set_entry_point(<span class="hljs-string">&quot;chat_bot&quot;</span>)<span class="hljs-comment"># æ·»åŠ è¾¹ï¼Œä»chat_botèŠ‚ç‚¹åˆ°endèŠ‚ç‚¹</span>workflow.add_edge(<span class="hljs-string">&quot;chat_bot&quot;</span>, END)<span class="hljs-comment"># ç¼–è¯‘å›¾</span>app_graph = workflow.<span class="hljs-built_in">compile</span>()</code></pre></div><p>åœ¨è¿™ä¸ªå·¥ä½œæµä¸­ï¼Œåªè®¾ç½®äº†ä¸€ä¸ªchat_botèŠ‚ç‚¹ï¼Œå®ƒæ¥æ”¶æ¶ˆæ¯å¹¶è¿”å›LLMçš„å›å¤ã€‚å·¥ä½œæµçš„ç»“æ„å¾ˆç®€å•ï¼šå…¥å£ -&gt; chat_bot -&gt; ç»“æŸã€‚</p><h2 id="3-ä¸¤ç§æµå¼è¾“å‡ºæ–¹å¼"><a href="#3-ä¸¤ç§æµå¼è¾“å‡ºæ–¹å¼" class="headerlink" title="3. ä¸¤ç§æµå¼è¾“å‡ºæ–¹å¼"></a>3. ä¸¤ç§æµå¼è¾“å‡ºæ–¹å¼</h2><p>åœ¨Langgraphä¸­ï¼Œæœ‰å¤šç§è°ƒè¯•å’Œè¾“å‡ºæ–¹å¼ï¼Œè¿™é‡Œå°è¯•äº†ä¸¤ç§ä¸åŒçš„æµå¼è¾“å‡ºæ–¹å¼ï¼š</p><div class="code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run_streaming_chain</span>():</span>    <span class="hljs-string">&quot;&quot;&quot;è¿è¡Œgraphçš„é“¾&quot;&quot;&quot;</span>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;å¼€å§‹ç”Ÿæˆå›å¤...\n&quot;</span>)    messages = [        SystemMessage(content=<span class="hljs-string">&quot;ä½ æ˜¯ä¸€ä¸ªæ™ºèƒ½åŠ©æ‰‹ï¼Œä½¿ç”¨ä¸“ä¸šä¸”å‡†ç¡®çš„è¯­è¨€å›å¤ç”¨æˆ·çš„é—®é¢˜ï¼Œä¸”ä½¿ç”¨ä¸­æ–‡è¿›è¡Œå›å¤&quot;</span>),        HumanMessage(content=<span class="hljs-string">&quot;ä»€ä¹ˆèŠ±æœ€ä¸‘&quot;</span>)    ]    <span class="hljs-comment"># åˆå§‹åŒ–çŠ¶æ€</span>    initial_state = &#123;<span class="hljs-string">&quot;messages&quot;</span>: messages, <span class="hljs-string">&quot;streamed_output&quot;</span>: []&#125;    <span class="hljs-comment"># stream_mode valuesçš„æ•ˆæœ</span>    <span class="hljs-keyword">async</span> <span class="hljs-keyword">for</span> event <span class="hljs-keyword">in</span> app_graph.astream(initial_state, config=&#123;<span class="hljs-string">&quot;configurable&quot;</span>: &#123;<span class="hljs-string">&quot;thread_id&quot;</span>: <span class="hljs-string">&quot;1&quot;</span>&#125;&#125;, stream_mode=<span class="hljs-string">&quot;values&quot;</span>):        <span class="hljs-keyword">if</span> <span class="hljs-string">&quot;messages&quot;</span> <span class="hljs-keyword">in</span> event:            event[<span class="hljs-string">&quot;messages&quot;</span>][-<span class="hljs-number">1</span>].pretty_print()        <span class="hljs-keyword">pass</span></code></pre></div><p>è¿™ç§æ–¹å¼ä¼šè¿”å›å®Œæ•´çš„æ¶ˆæ¯å¯¹è±¡ï¼Œé€‚åˆéœ€è¦å¤„ç†å®Œæ•´çŠ¶æ€æ›´æ–°çš„åœºæ™¯ã€‚<br><img src="/img/blog/AI/langgraph/2025-03-22_16-27-58.png"></p><h3 id="ç¬¬äºŒç§ï¼šstream-mode-â€messagesâ€"><a href="#ç¬¬äºŒç§ï¼šstream-mode-â€messagesâ€" class="headerlink" title="ç¬¬äºŒç§ï¼šstream_mode=â€messagesâ€"></a>ç¬¬äºŒç§ï¼šstream_mode=â€messagesâ€</h3><p>è¿™ç§æ–¹å¼å¯ä»¥è·å–çœŸæ­£çš„æµå¼è¾“å‡ºç‰‡æ®µï¼š</p><div class="code-wrapper"><pre><code class="hljs python"><span class="hljs-comment"># stream_mode messagesçš„æµå¼æ•ˆæœ</span>    <span class="hljs-keyword">async</span> <span class="hljs-keyword">for</span> event <span class="hljs-keyword">in</span> app_graph.astream(initial_state, stream_mode=<span class="hljs-string">&#x27;messages&#x27;</span>):        <span class="hljs-comment"># print(&#x27;event------&gt;&#x27;,event,&#x27;\n\n&#x27;)</span>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(event, <span class="hljs-built_in">tuple</span>):            chunk: AIMessageChunk = event[<span class="hljs-number">0</span>]            <span class="hljs-keyword">if</span> chunk.<span class="hljs-built_in">type</span> == <span class="hljs-string">&#x27;AIMessageChunk&#x27;</span>:                <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;eventé‡Œç›‘å¬åˆ°çš„æµå¼è¾“å‡º------&gt;&#x27;</span>,chunk.content,<span class="hljs-string">&#x27;\n\n&#x27;</span>)</code></pre></div><p>ä½¿ç”¨messagesæ¨¡å¼å¯ä»¥è·å–æ¯ä¸ªå°ç‰‡æ®µçš„è¾“å‡ºï¼Œé€‚åˆéœ€è¦å®æ—¶å±•ç¤ºç”Ÿæˆå†…å®¹çš„åœºæ™¯ï¼Œæ¯”å¦‚æ‰“å­—æœºæ•ˆæœã€‚</p><p><img src="/img/blog/AI/langgraph/2025-03-22_16-34-30.png"></p><h2 id="4-ä½¿ç”¨MermaidDrawMethodå¯è§†åŒ–å·¥ä½œæµ"><a href="#4-ä½¿ç”¨MermaidDrawMethodå¯è§†åŒ–å·¥ä½œæµ" class="headerlink" title="4.ä½¿ç”¨MermaidDrawMethodå¯è§†åŒ–å·¥ä½œæµ"></a>4.ä½¿ç”¨MermaidDrawMethodå¯è§†åŒ–å·¥ä½œæµ</h2><p>æœ€åï¼Œå°†æ„å»ºçš„Langgraphå·¥ä½œæµå¯è§†åŒ–å‡ºæ¥ï¼Œä¾¿äºç†è§£å’Œè®°å½•ï¼š</p><div class="code-wrapper"><pre><code class="hljs python"><span class="hljs-comment"># å®šä¹‰ä¸€ä¸ªå°†å›¾å¯¼å‡ºä¸ºPNGçš„å‡½æ•°</span><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">export_graph_to_png</span>():</span>    <span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">    å°†LangGraphå›¾å¯¼å‡ºä¸ºPNGæ ¼å¼</span><span class="hljs-string">    Returns:</span><span class="hljs-string">        str: ç”Ÿæˆçš„PNGæ–‡ä»¶è·¯å¾„</span><span class="hljs-string">    &quot;&quot;&quot;</span>    <span class="hljs-keyword">try</span>:        output_file=<span class="hljs-string">&#x27;ç®€å•çš„chatbot-&#x27;</span>+datetime.now().strftime(<span class="hljs-string">&quot;%Y-%m-%d_%H-%M-%S&quot;</span>)+<span class="hljs-string">&quot;.png&quot;</span>        app_graph.get_graph().draw_mermaid_png(            draw_method=MermaidDrawMethod.API,            output_file_path=output_file        )    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;å¯¼å‡ºPNGå›¾å½¢æ—¶å‡ºé”™: <span class="hljs-subst">&#123;e&#125;</span>&quot;</span>)        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span></code></pre></div><p>åœ¨è¿™ä¸ªå‡½æ•°ä¸­ï¼Œä½¿ç”¨MermaidDrawMethod.APIæ–¹æ³•ç”Ÿæˆäº†å·¥ä½œæµçš„å¯è§†åŒ–å›¾ç‰‡ã€‚Langgraphæ”¯æŒå¤šç§å¯è§†åŒ–æ–¹å¼ï¼ŒAPIæ–¹å¼æ˜¯å…¶ä¸­æ¯”è¾ƒå¸¸ç”¨çš„ä¸€ç§ï¼Œå®ƒä¼šè°ƒç”¨Mermaidçš„åœ¨çº¿æœåŠ¡ç”Ÿæˆå›¾ç‰‡ã€‚ç”Ÿæˆçš„å›¾ç‰‡åç§°ä¼šæ ¹æ®ä»¥ä¸Šä»£ç é€»è¾‘ä»¥åŒ…å«æ—¶é—´æˆ³ï¼Œä¾¿äºåŒºåˆ†ä¸åŒæ‰¹æ¬¡è¿è¡Œåçš„ç»“æœã€‚</p><p><img src="/img/blog/AI/langgraph/2025-03-22_16-03-41.png"></p><p>å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š</p><div class="code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime<span class="hljs-keyword">from</span> langchain_openai <span class="hljs-keyword">import</span> ChatOpenAI<span class="hljs-keyword">from</span> langchain_core.messages <span class="hljs-keyword">import</span> HumanMessage, AIMessage, SystemMessage, AIMessageChunk<span class="hljs-keyword">from</span> langgraph.graph <span class="hljs-keyword">import</span> Graph, StateGraph, MessagesState, END<span class="hljs-keyword">from</span> langchain_community.chat_models <span class="hljs-keyword">import</span> QianfanChatEndpoint<span class="hljs-keyword">import</span> asyncio<span class="hljs-keyword">from</span> langchain_core.runnables.graph <span class="hljs-keyword">import</span> MermaidDrawMethod<span class="hljs-comment"># ç™¾åº¦åƒå¸†çš„è°ƒç”¨æ–¹å¼</span>llm = QianfanChatEndpoint(    model=<span class="hljs-string">&quot;ERNIE-Speed-128K&quot;</span>,    streaming=<span class="hljs-literal">True</span>,  <span class="hljs-comment"># å¯ç”¨æµå¼è¾“å‡º</span>    api_key=os.getenv(<span class="hljs-string">&#x27;QIANFAN_AK&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>),    secret_key=os.getenv(<span class="hljs-string">&#x27;QIANFAN_SK&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>))<span class="hljs-comment"># ç¡…åŸºæµåŠ¨çš„apiè°ƒç”¨æ–¹å¼</span><span class="hljs-comment"># llm = ChatOpenAI(</span><span class="hljs-comment">#     #THUDM/glm-4-9b-chat</span><span class="hljs-comment">#     #Qwen/Qwen2.5-7B-Instruct</span><span class="hljs-comment">#     model=&quot;THUDM/glm-4-9b-chat&quot;,</span><span class="hljs-comment">#     streaming=False,  # å¯ç”¨æµå¼è¾“å‡º</span><span class="hljs-comment">#     api_key=os.getenv(&#x27;SILICONFLOW_API_KEY&#x27;, &#x27;&#x27;), </span><span class="hljs-comment">#     base_url=os.getenv(&#x27;SILICONFLOW_BASE_URL&#x27;, &#x27;&#x27;),</span><span class="hljs-comment">#     temperature=0.1,</span><span class="hljs-comment"># )</span><span class="hljs-comment"># llmçš„è°ƒç”¨</span><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">chat_bot</span>(<span class="hljs-params">state: MessagesState</span>):</span>    <span class="hljs-string">&quot;&quot;&quot;ç”Ÿæˆæµå¼å›å¤çš„èŠ‚ç‚¹å‡½æ•°&quot;&quot;&quot;</span>    messages = state[<span class="hljs-string">&quot;messages&quot;</span>]   <span class="hljs-comment"># ä½¿ç”¨éæµå¼æ–¹å¼æ¥æ”¶å®Œæ•´è¿”å›</span>    response = <span class="hljs-keyword">await</span> llm.ainvoke(messages)    <span class="hljs-keyword">return</span> &#123;<span class="hljs-string">&quot;messages&quot;</span>: [response]&#125;<span class="hljs-comment"># åˆ›å»ºå·¥ä½œæµç¨‹</span>workflow = StateGraph(MessagesState)<span class="hljs-comment"># æ·»åŠ èŠ‚ç‚¹</span>workflow.add_node(<span class="hljs-string">&quot;chat_bot&quot;</span>, chat_bot)<span class="hljs-comment"># è®¾ç½®å…¥å£èŠ‚ç‚¹</span>workflow.set_entry_point(<span class="hljs-string">&quot;chat_bot&quot;</span>)<span class="hljs-comment"># æ·»åŠ è¾¹ï¼Œä»chat_botèŠ‚ç‚¹åˆ°endèŠ‚ç‚¹</span>workflow.add_edge(<span class="hljs-string">&quot;chat_bot&quot;</span>, END)<span class="hljs-comment"># ç¼–è¯‘å›¾</span>app_graph = workflow.<span class="hljs-built_in">compile</span>()<span class="hljs-comment"># å®šä¹‰ä¸€ä¸ªå°†å›¾å¯¼å‡ºä¸ºPNGçš„å‡½æ•°</span><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">export_graph_to_png</span>():</span>    <span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">    å°†LangGraphå›¾å¯¼å‡ºä¸ºPNGæ ¼å¼</span><span class="hljs-string">    Returns:</span><span class="hljs-string">        str: ç”Ÿæˆçš„PNGæ–‡ä»¶è·¯å¾„</span><span class="hljs-string">    &quot;&quot;&quot;</span>    <span class="hljs-keyword">try</span>:        output_file=<span class="hljs-string">&#x27;ç®€å•çš„chatbot-&#x27;</span>+datetime.now().strftime(<span class="hljs-string">&quot;%Y-%m-%d_%H-%M-%S&quot;</span>)+<span class="hljs-string">&quot;.png&quot;</span>        app_graph.get_graph().draw_mermaid_png(            draw_method=MermaidDrawMethod.API,            output_file_path=output_file        )        <span class="hljs-comment"># return True</span>    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;å¯¼å‡ºPNGå›¾å½¢æ—¶å‡ºé”™: <span class="hljs-subst">&#123;e&#125;</span>&quot;</span>)        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><span class="hljs-comment"># æµ‹è¯•è¿è¡Œå‡½æ•°</span><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run_streaming_chain</span>():</span>    <span class="hljs-string">&quot;&quot;&quot;è¿è¡Œgraphçš„é“¾&quot;&quot;&quot;</span>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;å¼€å§‹ç”Ÿæˆå›å¤...\n&quot;</span>)    messages = [        SystemMessage(content=<span class="hljs-string">&quot;ä½ æ˜¯ä¸€ä¸ªæ™ºèƒ½åŠ©æ‰‹ï¼Œä½¿ç”¨ä¸“ä¸šä¸”å‡†ç¡®çš„è¯­è¨€å›å¤ç”¨æˆ·çš„é—®é¢˜ï¼Œä¸”ä½¿ç”¨ä¸­æ–‡è¿›è¡Œå›å¤&quot;</span>),        HumanMessage(content=<span class="hljs-string">&quot;ä»€ä¹ˆèŠ±æœ€ä¸‘&quot;</span>)    ]    <span class="hljs-comment"># åˆå§‹åŒ–çŠ¶æ€</span>    initial_state = &#123;<span class="hljs-string">&quot;messages&quot;</span>: messages, <span class="hljs-string">&quot;streamed_output&quot;</span>: []&#125;    <span class="hljs-comment"># stream_mode valuesçš„æ•ˆæœ</span>    <span class="hljs-keyword">async</span> <span class="hljs-keyword">for</span> event <span class="hljs-keyword">in</span> app_graph.astream(initial_state, config=&#123;<span class="hljs-string">&quot;configurable&quot;</span>: &#123;<span class="hljs-string">&quot;thread_id&quot;</span>: <span class="hljs-string">&quot;1&quot;</span>&#125;&#125;, stream_mode=<span class="hljs-string">&quot;values&quot;</span>):        <span class="hljs-comment"># print(&#x27;event------&gt;&#x27;,event,&#x27;\n\n&#x27;)</span>        <span class="hljs-keyword">if</span> <span class="hljs-string">&quot;messages&quot;</span> <span class="hljs-keyword">in</span> event:            event[<span class="hljs-string">&quot;messages&quot;</span>][-<span class="hljs-number">1</span>].pretty_print()        <span class="hljs-keyword">pass</span>    <span class="hljs-comment"># stream_mode messagesçš„æµå¼æ•ˆæœ</span>    <span class="hljs-comment"># async for event in app_graph.astream(initial_state, stream_mode=&#x27;messages&#x27;):</span>    <span class="hljs-comment">#     # print(&#x27;event------&gt;&#x27;,event,&#x27;\n\n&#x27;)</span>    <span class="hljs-comment">#     if isinstance(event, tuple):</span>    <span class="hljs-comment">#         chunk: AIMessageChunk = event[0]</span>    <span class="hljs-comment">#         if chunk.type == &#x27;AIMessageChunk&#x27;:</span>    <span class="hljs-comment">#             print(&#x27;eventé‡Œç›‘å¬åˆ°çš„æµå¼è¾“å‡º------&gt;&#x27;,chunk.content,&#x27;\n\n&#x27;)</span>    <span class="hljs-comment"># print(&quot;\nå›å¤å®Œæˆ&quot;)</span>    <span class="hljs-comment"># å±•ç¤ºå›¾å½¢</span>    <span class="hljs-keyword">try</span>:        <span class="hljs-comment"># å¯¼å‡ºä¸ºPNG</span>        export_graph_to_png()    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;å›¾è¡¨ç»˜åˆ¶å‡ºé”™: <span class="hljs-subst">&#123;e&#125;</span>&quot;</span>)<span class="hljs-comment"># è¿è¡Œæµå¼è¾“å‡º</span><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:    asyncio.run(run_streaming_chain())</code></pre></div>]]></content>
    
    
    <categories>
      
      <category>AIç›¸å…³</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Langgraph</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>STARå½¢å¼åˆ†äº«AIç¼–ç¨‹-2</title>
    <link href="/2025/03/12/STAR%E5%BD%A2%E5%BC%8F%E5%88%86%E4%BA%ABAI%E7%BC%96%E7%A8%8B2/"/>
    <url>/2025/03/12/STAR%E5%BD%A2%E5%BC%8F%E5%88%86%E4%BA%ABAI%E7%BC%96%E7%A8%8B2/</url>
    
    <content type="html"><![CDATA[<h2 id="åˆ†äº«ä¸€ä¸ªä½¿ç”¨AIåŠ©æ‰‹ç¼–ç¨‹æ—¶AIè¡¨ç°ä¸è¶³çš„STARï¼š"><a href="#åˆ†äº«ä¸€ä¸ªä½¿ç”¨AIåŠ©æ‰‹ç¼–ç¨‹æ—¶AIè¡¨ç°ä¸è¶³çš„STARï¼š" class="headerlink" title="åˆ†äº«ä¸€ä¸ªä½¿ç”¨AIåŠ©æ‰‹ç¼–ç¨‹æ—¶AIè¡¨ç°ä¸è¶³çš„STARï¼š"></a>åˆ†äº«ä¸€ä¸ªä½¿ç”¨AIåŠ©æ‰‹ç¼–ç¨‹æ—¶AIè¡¨ç°ä¸è¶³çš„STARï¼š</h2><h2 id="å¼€å‘ç¯å¢ƒ"><a href="#å¼€å‘ç¯å¢ƒ" class="headerlink" title="å¼€å‘ç¯å¢ƒ"></a>å¼€å‘ç¯å¢ƒ</h2><p><strong>ç¼–ç å·¥å…·ï¼š</strong> Cursor<br><strong>AIæ¨¡å‹ï¼š</strong> claude-3.5-sonnet</p><h2 id="å®è·µæè¿°"><a href="#å®è·µæè¿°" class="headerlink" title="å®è·µæè¿°"></a>å®è·µæè¿°</h2><h3 id="Situation-amp-Task"><a href="#Situation-amp-Task" class="headerlink" title="Situation &amp; Task"></a>Situation &amp; Task</h3><p>æœ€è¿‘æ¥æ‰‹åšä¸€ä¸ªåˆ«çš„å›¢é˜Ÿæˆå‘˜ç»´æŠ¤çš„AIé¡¹ç›®ï¼Œåˆšå¼€å§‹çš„æ—¶å€™æˆ‘æ²¡æœ‰äº†è§£è¿‡è¿™ä¸ªé¡¹ç›®ä¹‹å‰çš„ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®å¤„ç†é€»è¾‘ï¼Œç¬¬ä¸€æ—¶é—´ä¼šè®©AIä»£æ›¿æˆ‘ç†è§£å’Œä¿®æ”¹ä¸€äº›åŠŸèƒ½ï¼Œæ¯”å¦‚æ‰“å­—æœºçš„å¤„ç†ã€SSEçš„æµå¼è¾“å‡ºå¤„ç†ã€å¯¹è¯æµç¨‹å¤„ç†ï¼Œé€šå¸¸å¤§å®¶ç¼–ç çš„æ—¶å€™ä¸€äº›å‡½æ•°é‡Œæˆ–å¤šæˆ–å°‘ä¼šæœ‰å’Œä¸šåŠ¡ç›¸å…³çš„ä»£ç ï¼Œè¿™æ—¶å€™ç›´æ¥è¯¢é—®AIä¼šå°†ä¸€äº›ä¸šåŠ¡ç›¸å…³çš„ä¸œè¥¿å¸®ä½ ä¸€èµ·å¤„ç†ï¼Œå¤„ç†çš„ç»“æœæœ‰å‡ ç§å¯èƒ½çš„æƒ…å†µï¼š</p><p>ä¸€æ˜¯å®ƒä¸ä¼šå»ç®¡é‚£äº›å’Œä¸šåŠ¡ç›¸å…³çš„ä»£ç ï¼Œåªå¸®ä½ åšæ•°æ®å¤„ç†</p><p>äºŒæ˜¯å®ƒä¼šç›´æ¥åˆ é™¤å®ƒè§‰å¾—è¿™é‡Œä¸åº”è¯¥æœ‰çš„ä»£ç ï¼ŒåŒ…æ‹¬ä¸šåŠ¡é€»è¾‘</p><p>ä¸‰å°±åƒæ˜¯å‰é¢ä¸¤è€…çš„æ··åˆï¼Œæœ‰åˆ æœ‰å¢ï¼Œå®ƒçœ‹å®Œä¸Šä¸‹æ–‡åè§‰å¾—ï¼Œå‰é¢ä¸€ä¸ªåœ°æ–¹æ”¹äº†æŸä¸ªé€»è¾‘ï¼Œè¿™é‡Œä¹Ÿè¦é…åˆæ”¹æ‰åˆé€‚ï¼Œç„¶åä¸»åŠ¨å¸®ä½ æŠŠå®ƒè§‰å¾—è¿™é‡Œä¸æ”¹å°±å¯èƒ½æ˜¯ä¸ªbugçš„åœ°æ–¹ç»™è¡¥ä¸Šå»</p><p>å—å„ç§ä¸šåŠ¡é€»è¾‘çš„å¹²æ‰°ï¼Œé€šå¸¸è®©AIæ”¹å®Œå†éªŒè¯ï¼Œå†ç»§ç»­é—®ç­”å†éªŒè¯ï¼Œå‡å¦‚ä¸€ä¸ªèƒ½2å°æ—¶å®Œæˆçš„äº‹æƒ…ï¼Œå‡ ä¸ªè½®æ¬¡ä¸‹æ¥å¯èƒ½æ—¶é—´å·²ç»è¿‡å»ä¸€åŠä»ç„¶æ²¡æœ‰è¿›å±•</p><h3 id="Action"><a href="#Action" class="headerlink" title="Action"></a>Action</h3><p>å°è¯•ç»†èŠ‚æ‹†åˆ†ï¼š</p><p>ä¸šåŠ¡æµç¨‹å½’ä¸šåŠ¡æµç¨‹ï¼Œæ•°æ®å¤„ç†å½’æ•°æ®å¤„ç†ï¼Œä¸¤è€…å°½é‡æ”¹ä¸ºç‹¬ç«‹çš„å‡½æ•°åšå¤„ç†ï¼Œå…³é”®é€»è¾‘è¦åƒâ€æŠŠå¤§è±¡è£…å†°ç®±åˆ†ä¸‰æ­¥â€é‚£æ ·å†™æ¸…æ¥š</p><p>æ¯”å¦‚æµå¼æ•°æ®å¤„ç†ï¼Œé‡Œé¢åŒ…å«thinkæ ‡ç­¾å’Œcontentä¸¤éƒ¨åˆ†ï¼Œè‡³äºä¸šåŠ¡ä¸Šæ˜¯ä»€ä¹ˆæµç¨‹ï¼Œä¸è¦åœ¨æ•°æ®å¤„ç†çš„åŒæ—¶è®©AIè¿‡å¤šå…³æ³¨ï¼Œåªéœ€è¦å‘Šè¯‰å®ƒï¼Œåœ¨å¦‚ä¸‹æ‰€ç¤ºçš„æ ¼å¼é‡Œï¼Œå‰é¢ä¸€æ®µthinkæ ‡ç­¾å’Œé‡Œé¢çš„å†…å®¹ï¼Œéœ€è¦å•ç‹¬æ”¾åœ¨ä¸€ä¸ªå­—æ®µï¼Œ</think>åé¢çš„å•ç‹¬æ”¾åœ¨ä¸€ä¸ªå­—æ®µï¼Œå¹¶ç¡®ä¿åœ¨æµå¼è¾“å‡ºä¸­ä¸ä¼šå› ä¸ºä¸åœ¨åŒä¸€å¸§é‡Œæœ‰æˆªæ–­æ¼æ‰çš„æƒ…å†µï¼Œå¹¶ä¸”æœ‰å¯èƒ½ä¼šå¤šä¸ªå¼€å§‹å’Œç»“å°¾æ ‡ç­¾éƒ½åœ¨åŒä¸€å¸§çš„æƒ…å†µç­‰ç­‰ç»†èŠ‚æè¿°</p><div class="code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">think</span>&gt;</span>è¿™é‡Œæ˜¯æ€è€ƒå†…å®¹è¿™é‡Œæ˜¯æ€è€ƒå†…å®¹è¿™é‡Œæ˜¯æ€è€ƒå†…å®¹è¿™é‡Œæ˜¯æ€è€ƒå†…å®¹è¿™é‡Œæ˜¯æ€è€ƒå†…å®¹è¿™é‡Œæ˜¯æ€è€ƒå†…å®¹è¿™é‡Œæ˜¯æ€è€ƒå†…å®¹è¿™é‡Œæ˜¯æ€è€ƒå†…å®¹è¿™é‡Œæ˜¯æ€è€ƒå†…å®¹è¿™é‡Œæ˜¯æ€è€ƒå†…å®¹è¿™é‡Œæ˜¯æ€è€ƒå†…å®¹è¿™é‡Œæ˜¯æ€è€ƒå†…å®¹è¿™é‡Œæ˜¯æ€è€ƒå†…å®¹è¿™é‡Œæ˜¯æ€è€ƒå†…å®¹ã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">think</span>&gt;</span>è¿™é‡Œæ˜¯æ­£æ–‡è¿™é‡Œæ˜¯æ­£æ–‡è¿™é‡Œæ˜¯æ­£æ–‡è¿™é‡Œæ˜¯æ­£æ–‡è¿™é‡Œæ˜¯æ­£æ–‡è¿™é‡Œæ˜¯æ­£æ–‡è¿™é‡Œæ˜¯æ­£æ–‡è¿™é‡Œæ˜¯æ­£æ–‡è¿™é‡Œæ˜¯æ­£æ–‡è¿™é‡Œæ˜¯æ­£æ–‡è¿™é‡Œæ˜¯æ­£æ–‡è¿™é‡Œæ˜¯æ­£æ–‡è¿™é‡Œæ˜¯æ­£æ–‡è¿™é‡Œæ˜¯æ­£æ–‡è¿™é‡Œæ˜¯æ­£æ–‡è¿™é‡Œæ˜¯æ­£æ–‡è¿™é‡Œæ˜¯æ­£æ–‡è¿™é‡Œæ˜¯æ­£æ–‡è¿™é‡Œæ˜¯æ­£æ–‡è¿™é‡Œæ˜¯æ­£æ–‡è¿™é‡Œæ˜¯æ­£æ–‡è¿™é‡Œæ˜¯æ­£æ–‡è¿™é‡Œæ˜¯æ­£æ–‡ã€‚</code></pre></div><p>é¦–å…ˆå¯¹æ•°æ®é€»è¾‘çš„å¯èƒ½æ€§è¿›è¡Œæè¿°</p><div class="code-wrapper"><pre><code class="hljs xml">å¤„ç†thinkContentçš„æ–¹æ³•é€»è¾‘- 1. å½“messageåŒ…å«<span class="hljs-tag">&lt;<span class="hljs-name">think</span>&gt;</span>æ ‡ç­¾æ—¶ï¼Œå°†messageä¸­çš„<span class="hljs-tag">&lt;<span class="hljs-name">think</span>&gt;</span>æ ‡ç­¾å’Œåé¢æ–‡æ¡ˆå¼€å¤´çš„bræ ‡ç­¾è¿›è¡Œå»é™¤- 2. å½“messageåŒ…å«<span class="hljs-tag">&lt;/<span class="hljs-name">think</span>&gt;</span>æ ‡ç­¾æ—¶ï¼Œå°†messageä¸­çš„<span class="hljs-tag">&lt;/<span class="hljs-name">think</span>&gt;</span>æ ‡ç­¾å’Œåé¢æ–‡æ¡ˆå¼€å¤´çš„bræ ‡ç­¾è¿›è¡Œå»é™¤ï¼ŒåŒæ—¶fullResponseContentéœ€è¦æ‹¼æ¥<span class="hljs-tag">&lt;/<span class="hljs-name">think</span>&gt;</span>åé¢çš„å†…å®¹ï¼Œå¦åˆ™æ­£æ–‡ä¼šç¼ºå¤±ä¸€éƒ¨åˆ†- 3. å³æ²¡æœ‰<span class="hljs-tag">&lt;<span class="hljs-name">think</span>&gt;</span>æ ‡ç­¾ä¹Ÿæ²¡æœ‰<span class="hljs-tag">&lt;/<span class="hljs-name">think</span>&gt;</span>æ ‡ç­¾æ—¶ï¼Œå³ä»£è¡¨æ˜¯<span class="hljs-tag">&lt;<span class="hljs-name">think</span>&gt;</span>æ ‡ç­¾å’Œ<span class="hljs-tag">&lt;/<span class="hljs-name">think</span>&gt;</span>æ ‡ç­¾ä¹‹é—´çš„å†…å®¹ï¼Œæ­£å¸¸æ‹¼æ¥- 4. å¦‚æœmessageæ—¢åŒ…å«<span class="hljs-tag">&lt;<span class="hljs-name">think</span>&gt;</span>æ ‡ç­¾ï¼Œä¹ŸåŒ…å«<span class="hljs-tag">&lt;/<span class="hljs-name">think</span>&gt;</span>æ ‡ç­¾ï¼Œé‚£ä¹ˆéœ€è¦æŠŠ<span class="hljs-tag">&lt;<span class="hljs-name">think</span>&gt;</span>æ ‡ç­¾å’Œ<span class="hljs-tag">&lt;/<span class="hljs-name">think</span>&gt;</span>æ ‡ç­¾ä¹‹é—´çš„å†…å®¹è¿›è¡Œæ‹¼æ¥ï¼ŒåŒæ—¶fullResponseContentéœ€è¦æ‹¼æ¥<span class="hljs-tag">&lt;/<span class="hljs-name">think</span>&gt;</span>åé¢çš„å†…å®¹ï¼Œå¦åˆ™æ­£æ–‡ä¼šåˆ°thinkå¡ç‰‡é‡Œå»</code></pre></div><p>ä»¥ä¸‹æ˜¯AIç»™å‡ºçš„functionçš„å®Œæ•´è¾“å‡ºï¼ŒåŸºæœ¬æ˜¯ç›´æ¥æ‹¿æ¥ç”¨çš„:</p><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">/**</span><span class="hljs-comment"> * å¤„ç†thinkContentï¼Œè¿™é‡Œéœ€è¦å¤„ç†&lt;think&gt;æ ‡ç­¾å’Œ&lt;/think&gt;æ ‡ç­¾ï¼Œå’Œ&lt;br&gt;æ ‡ç­¾</span><span class="hljs-comment"> * 1. å½“messageåŒ…å«&lt;think&gt;æ ‡ç­¾æ—¶ï¼Œå°†messageä¸­çš„&lt;think&gt;æ ‡ç­¾å’Œåé¢æ–‡æ¡ˆå¼€å¤´çš„bræ ‡ç­¾è¿›è¡Œå»é™¤</span><span class="hljs-comment"> * 2. å½“messageåŒ…å«&lt;/think&gt;æ ‡ç­¾æ—¶ï¼Œå°†messageä¸­çš„&lt;/think&gt;æ ‡ç­¾å’Œåé¢æ–‡æ¡ˆå¼€å¤´çš„bræ ‡ç­¾è¿›è¡Œå»é™¤ï¼ŒåŒæ—¶fullResponseContentéœ€è¦æ‹¼æ¥&lt;/think&gt;åé¢çš„å†…å®¹ï¼Œå¦åˆ™æ­£æ–‡ä¼šç¼ºå¤±ä¸€éƒ¨åˆ†</span><span class="hljs-comment"> * 3. å³æ²¡æœ‰&lt;think&gt;æ ‡ç­¾ä¹Ÿæ²¡æœ‰&lt;/think&gt;æ ‡ç­¾æ—¶ï¼Œå³ä»£è¡¨æ˜¯&lt;think&gt;æ ‡ç­¾å’Œ&lt;/think&gt;æ ‡ç­¾ä¹‹é—´çš„å†…å®¹ï¼Œæ­£å¸¸æ‹¼æ¥</span><span class="hljs-comment"> * 4. å¦‚æœmessageæ—¢åŒ…å«&lt;think&gt;æ ‡ç­¾ï¼Œä¹ŸåŒ…å«&lt;/think&gt;æ ‡ç­¾ï¼Œé‚£ä¹ˆéœ€è¦æŠŠ&lt;think&gt;æ ‡ç­¾å’Œ&lt;/think&gt;æ ‡ç­¾ä¹‹é—´çš„å†…å®¹è¿›è¡Œæ‹¼æ¥ï¼ŒåŒæ—¶fullResponseContentéœ€è¦æ‹¼æ¥&lt;/think&gt;åé¢çš„å†…å®¹ï¼Œå¦åˆ™æ­£æ–‡ä¼šåˆ°thinkå¡ç‰‡é‡Œå»</span><span class="hljs-comment"> * <span class="hljs-doctag">@param </span>message event.data</span><span class="hljs-comment"> */</span><span class="hljs-keyword">const</span> handleThinkContent = <span class="hljs-function">(<span class="hljs-params">message: string</span>) =&gt;</span> &#123;  thinkBuffer.value += message;  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;LOG: thinkBuffer:&quot;</span>, thinkBuffer.value);  <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦ä¸€æ¬¡æ€§æ¥æ”¶åˆ°å®Œæ•´çš„thinkå†…å®¹æˆ–è€…ä¸€æ¬¡æ€§æ¥æ”¶åˆ°æ‰€æœ‰æ€è€ƒ+æ­£æ–‡å†…å®¹ï¼Œè¿™æ—¶å€™éœ€è¦æŠŠthinkä¹‹åçš„å†…å®¹å…¨éƒ¨æ”¾åˆ°fullResponseContent.valueé‡Œ</span>  <span class="hljs-keyword">if</span> (message.includes(<span class="hljs-string">&quot;&lt;think&gt;&quot;</span>) &amp;&amp; message.includes(<span class="hljs-string">&quot;&lt;/think&gt;&quot;</span>)) &#123;    <span class="hljs-comment">// ä¸€æ¬¡æ€§æ¥æ”¶åˆ°å®Œæ•´å†…å®¹çš„å¤„ç†</span>    <span class="hljs-keyword">const</span> thinkStartIndex = message.indexOf(<span class="hljs-string">&quot;&lt;think&gt;&quot;</span>);    <span class="hljs-keyword">const</span> thinkEndIndex = message.indexOf(<span class="hljs-string">&quot;&lt;/think&gt;&quot;</span>);        <span class="hljs-comment">// æå–thinkå†…å®¹</span>    <span class="hljs-keyword">const</span> thinkContentStr = message.substring(thinkStartIndex + <span class="hljs-number">7</span>, thinkEndIndex + <span class="hljs-number">8</span>)      .replace(<span class="hljs-regexp">/^(?:&lt;br&gt;)+/</span>, <span class="hljs-string">&#x27;&#x27;</span>)  <span class="hljs-comment">// å»é™¤å¼€å¤´çš„&lt;br&gt;</span>      .replace(<span class="hljs-regexp">/(?:&lt;br&gt;)+$/</span>, <span class="hljs-string">&#x27;&#x27;</span>); <span class="hljs-comment">// å»é™¤ç»“å°¾çš„&lt;br&gt;</span>      <span class="hljs-comment">// æ›´æ–°thinkå†…å®¹</span>    thinkContent.value = thinkContentStr;    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;LOG: thinkContent:&quot;</span>, thinkContent.value);        <span class="hljs-comment">// æå–thinkä¹‹å‰å’Œä¹‹åçš„å†…å®¹ä½œä¸ºæ­£æ–‡</span>    <span class="hljs-keyword">let</span> afterThinkContent = (thinkBuffer.value.substring(thinkBuffer.value.indexOf(<span class="hljs-string">&quot;&lt;/think&gt;&quot;</span>) + <span class="hljs-number">8</span>)).replace(<span class="hljs-regexp">/^(?:&lt;br&gt;)+/</span>, <span class="hljs-string">&#x27;&#x27;</span>);    <span class="hljs-comment">// æ›´æ–°æ­£æ–‡å†…å®¹</span>    fullResponseContent.value += afterThinkContent;    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;LOG: fullResponseContent:&quot;</span>, fullResponseContent.value);    handleFullResponseContent();        <span class="hljs-comment">// é‡ç½®çŠ¶æ€</span>    isCollectingThink.value = <span class="hljs-literal">false</span>;    thinkBuffer.value = <span class="hljs-string">&quot;&quot;</span>;  &#125; <span class="hljs-keyword">else</span> &#123;    <span class="hljs-keyword">if</span> (message.includes(<span class="hljs-string">&quot;&lt;think&gt;&quot;</span>)) &#123;      isCollectingThink.value = <span class="hljs-literal">true</span>;      thinkBuffer.value = (message.substring(message.indexOf(<span class="hljs-string">&quot;&lt;think&gt;&quot;</span>) + <span class="hljs-number">7</span>)).replace(<span class="hljs-regexp">/^(?:&lt;br&gt;)+/</span>, <span class="hljs-string">&#x27;&#x27;</span>);      thinkContent.value = thinkBuffer.value;      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;LOG: thinkContent:&quot;</span>, thinkContent.value);    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (message.includes(<span class="hljs-string">&quot;&lt;/think&gt;&quot;</span>)) &#123;      isCollectingThink.value = <span class="hljs-literal">false</span>;      <span class="hljs-comment">// è·å–&lt;/think&gt;æ ‡ç­¾åçš„å†…å®¹å¹¶å»é™¤å¼€å¤´çš„æ‰€æœ‰&lt;br&gt;æ ‡ç­¾</span>      <span class="hljs-keyword">let</span> afterThinkContent = (thinkBuffer.value.substring(thinkBuffer.value.indexOf(<span class="hljs-string">&quot;&lt;/think&gt;&quot;</span>) + <span class="hljs-number">8</span>)).replace(<span class="hljs-regexp">/^(?:&lt;br&gt;)+/</span>, <span class="hljs-string">&#x27;&#x27;</span>);      fullResponseContent.value += afterThinkContent;      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;LOG: fullResponseContent:&quot;</span>, fullResponseContent.value);      handleFullResponseContent();      <span class="hljs-comment">// è¿™é‡Œéœ€è¦æŠŠthinkBuffer.valueè¿›è¡Œæˆªå–ï¼Œå»é™¤&lt;/think&gt; åé¢çš„å†…å®¹</span>      <span class="hljs-keyword">let</span> finalThinkPart = message.substring(<span class="hljs-number">0</span>, message.indexOf(<span class="hljs-string">&quot;&lt;/think&gt;&quot;</span>));      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;LOG: content:&quot;</span>, finalThinkPart);      thinkContent.value += finalThinkPart;      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;LOG: thinkContent:&quot;</span>, thinkContent.value);    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isCollectingThink.value) &#123;      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;LOG: message:&quot;</span>, message);      thinkContent.value += message;    &#125;  &#125;&#125;</code></pre></div><h3 id="Result"><a href="#Result" class="headerlink" title="Result"></a>Result</h3><p>ç»è¿‡è¿™æ ·çš„æ‹†åˆ†å’Œå¯¹åŠŸèƒ½ç‚¹çš„ç»†èŠ‚æè¿°ç»™åˆ°AIï¼ŒAIå¯ä»¥å®Œç¾çš„å¤„ç†å¹¶å°è£…å¥½æ–¹æ³•ï¼ŒåŸºæœ¬å¯ä»¥ç›´æ¥æ‹¿æ¥ç”¨ï¼Œä¸”å¤§å¤§ç¼©çŸ­äº†è‡ªå·±å†™ä»£ç æ¥è°ƒè¯•å’ŒAIå¹²æ‰°äº†ä¸šåŠ¡ä»£ç åè¿›è¡ŒéªŒè¯çš„æ—¶é—´ï¼Œè¿™ä¸€ç‚¹ç»è¿‡å¤šæ¬¡å°è¯•ï¼Œéå¸¸æœ‰æ•ˆ~</p><p>ğŸ¤” ä¸¾ä¸ªæ —å­ï¼š<br>åŸæ¥è®©AIæ”¹ä»£ç å°±åƒè®©ä¸€ä¸ªæ–°æ¥çš„å¨æˆ¿å­¦å¾’ç›´æ¥ä¸Šæ‰‹ç‚’èœâ€”â€”taåˆ†ä¸æ¸…å“ªäº›æ˜¯ç§˜åˆ¶è°ƒæ–™ï¼ˆä¸šåŠ¡é€»è¾‘ï¼‰ï¼Œå“ªäº›æ˜¯æ™®é€šé…èœï¼ˆæ•°æ®å¤„ç†ï¼‰ï¼Œç»“æœæŠŠä½ çš„æ‹›ç‰Œèœæ”¹æˆäº†â€é»‘æš—æ–™ç†â€ã€‚</p><p>ç°åœ¨åªè®©ä»–åšé£Ÿæé¢„å¤„ç†ï¼š<br>âœ… åœŸè±†åˆ‡ä¸<br>âœ… é’èœæ‘˜å¶<br>âœ… è‚‰ç‰‡è…Œåˆ¶</p><p>è‡³äºç«å€™æŠŠæ§å’Œè°ƒæ–™æ­é…ï¼ˆä¸šåŠ¡é€»è¾‘ï¼‰ï¼Œç‰¢ç‰¢æŒæ¡åœ¨è‡ªå·±æ‰‹é‡Œï¼ä»–åªéœ€è¦ä¿è¯åˆ‡å¥½çš„åœŸè±†ä¸ç²—ç»†å‡åŒ€ï¼Œå‰©ä¸‹çš„äº¤ç»™ä½ è¿™ä¸ªå¤§å¨æ¥æŒå‹º ğŸ§‘â€ğŸ³</p><p>æ€»ç»“æ¥è¯´ï¼Œé’ˆå¯¹ä¸ç†Ÿæ‚‰çš„é¡¹ç›®ï¼Œä¸”åœ¨ä¿è¯åŸæœ‰åŠŸèƒ½çš„åŸºç¡€ä¹‹ä¸Šï¼Œè¿™æ ·åšä¼šå¾ˆçœå¿ƒçœåŠ›ï¼Œä¸”æŒ‰æ—¶çš„å®Œæˆäº†ä»»åŠ¡ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>AIç›¸å…³</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Prompt</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰ç«¯é¡¹ç›®é€‰å‹åŠæ­å»ºï¼šReactæŠ€æœ¯æ ˆ</title>
    <link href="/2025/01/04/%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE%E9%80%89%E5%9E%8B%E5%8F%8A%E6%90%AD%E5%BB%BA%EF%BC%9AReact%E6%8A%80%E6%9C%AF%E6%A0%88/"/>
    <url>/2025/01/04/%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE%E9%80%89%E5%9E%8B%E5%8F%8A%E6%90%AD%E5%BB%BA%EF%BC%9AReact%E6%8A%80%E6%9C%AF%E6%A0%88/</url>
    
    <content type="html"><![CDATA[<h2 id="ä¸ºä»€ä¹ˆæ¨èç”¨Reactæ­å»ºé¡¹ç›®"><a href="#ä¸ºä»€ä¹ˆæ¨èç”¨Reactæ­å»ºé¡¹ç›®" class="headerlink" title="ä¸ºä»€ä¹ˆæ¨èç”¨Reactæ­å»ºé¡¹ç›®"></a>ä¸ºä»€ä¹ˆæ¨èç”¨Reactæ­å»ºé¡¹ç›®</h2><h3 id="å„ä¸ªä¸»æµæ¡†æ¶çš„ä½¿ç”¨æƒ…å†µ"><a href="#å„ä¸ªä¸»æµæ¡†æ¶çš„ä½¿ç”¨æƒ…å†µ" class="headerlink" title="å„ä¸ªä¸»æµæ¡†æ¶çš„ä½¿ç”¨æƒ…å†µ"></a>å„ä¸ªä¸»æµæ¡†æ¶çš„ä½¿ç”¨æƒ…å†µ</h3><h4 id="1-npmä¸‹è½½é‡"><a href="#1-npmä¸‹è½½é‡" class="headerlink" title="1. npmä¸‹è½½é‡"></a>1. npmä¸‹è½½é‡</h4><blockquote><p>æ•°æ®æ¥æºï¼š<a href="https://npmtrends.com/@angular/core-vs-jquery-vs-react-vs-svelte-vs-vue">npm trends æ¡†æ¶å¯¹æ¯”æ•°æ®</a></p></blockquote><p>é€šè¿‡ä¸‹é¢è¿™å¼ å›¾å¯ä»¥çœ‹å‡ºreactçš„å…¨çƒä¸‹è½½é‡åœ¨æœ€è¿‘ä¸€å¹´çš„ä¸‹è½½é‡ç¨³å±…ç¬¬ä¸€ï¼›<br><img src="/img/blog/Js_Research/1.PNG"></p><p>GitHubä¸Šçš„ä¸€äº›æ•°æ®ä¹Ÿå¯ä»¥é€šè¿‡å¯¹æ¯”æ˜æ˜¾çœ‹å‡ºï¼Œæ— è®ºæ˜¯Staræ•°è¿˜æ˜¯å¼€æºåº“çš„ç»´æŠ¤é¢‘ç‡éƒ½æ˜¯éå¸¸é«˜çš„ï¼›</p><table><thead><tr><th>æ¡†æ¶</th><th>Stars</th><th>Issues</th><th>æœ€åä¸€æ¬¡æ›´æ–°ï¼ˆ2025.1.05ï¼‰</th><th>æ€»å¼€æºæ—¶é•¿</th></tr></thead><tbody><tr><td>React</td><td>231,030</td><td>933</td><td>1ä¸ªæœˆå‰</td><td>13å¹´</td></tr><tr><td>Vue</td><td>48,294</td><td>920</td><td>2ä¸ªæœˆå‰</td><td>11å¹´</td></tr><tr><td>Angular</td><td>96,575</td><td>1740</td><td>17å¤©å‰</td><td>9å¹´</td></tr><tr><td>jQuery</td><td>59,282</td><td>91</td><td>1å¹´å‰</td><td>14å¹´</td></tr><tr><td>Svelte</td><td>80750</td><td>803</td><td>2å¤©å‰</td><td>8å¹´</td></tr></tbody></table><h4 id="2-Stack-Overflow-æ ‡ç­¾æ•°é‡æ’è¡Œ"><a href="#2-Stack-Overflow-æ ‡ç­¾æ•°é‡æ’è¡Œ" class="headerlink" title="2. Stack Overflow æ ‡ç­¾æ•°é‡æ’è¡Œ"></a>2. Stack Overflow æ ‡ç­¾æ•°é‡æ’è¡Œ</h4><blockquote><p>æ•°æ®æ¥æºï¼š<a href="https://trends.stackoverflow.co/?tags=reactjs,vue.js,angular,svelte,jquery">Stack Overflow æ ‡ç­¾æ•°é‡æ’è¡Œ</a></p></blockquote><p>é€šè¿‡è¯¥æ ‡ç­¾æ’è¡Œå¯ä»¥çœ‹å‡ºåœ¨Stack Overflowç¤¾åŒºé‡ŒReactç›®å‰æ˜¯æœ€å—æ¬¢è¿çš„ç°ä»£å‰ç«¯æ¡†æ¶ã€ç¤¾åŒºæ´»è·ƒåº¦æœ€é«˜ã€æŠ€æœ¯é—®é¢˜è§£å†³èµ„æºæœ€ä¸°å¯Œï¼›<br><img src="/img/blog/Js_Research/2.PNG"></p><h4 id="3-JSç°çŠ¶è°ƒæŸ¥"><a href="#3-JSç°çŠ¶è°ƒæŸ¥" class="headerlink" title="3. JSç°çŠ¶è°ƒæŸ¥"></a>3. JSç°çŠ¶è°ƒæŸ¥</h4><blockquote><p>æ•°æ®æ¥æºï¼š<a href="https://2024.stateofjs.com/en-US/libraries/front-end-frameworks/">JSç°çŠ¶è°ƒæŸ¥</a></p></blockquote><p>é€šè¿‡è¯¥å›¾å¯ä»¥çœ‹åˆ°ç›®å‰ä¸»æµjsåº“çš„ã€ä½¿ç”¨é‡ã€‘ä¸­ï¼Œreactä¸€ç›´æ˜¯å¤šå¹´æ¥æ’åæœ€é«˜çš„ï¼Œä½†è¿‘å‡ å¹´å‰ç«¯å‘å±•è¿…é€Ÿæœ‰äº†æ–°çš„jsåº“ï¼Œåé¢å‡ ä¸ªtagé‡Œçš„ã€å…³æ³¨é‡ã€‘å’Œã€ç•™å­˜é‡ã€‘ï¼Œreactå¹¶æ²¡æœ‰å§‹ç»ˆæ’åœ¨ç¬¬ä¸€ï¼Œä½†ä¹Ÿåœ¨å‰å‡ åé‡Œï¼›<br><img src="/img/blog/Js_Research/3.PNG"></p><h4 id="4-ç™¾åº¦æœç´¢æŒ‡æ•°"><a href="#4-ç™¾åº¦æœç´¢æŒ‡æ•°" class="headerlink" title="4. ç™¾åº¦æœç´¢æŒ‡æ•°"></a>4. ç™¾åº¦æœç´¢æŒ‡æ•°</h4><blockquote><p>æ•°æ®æ¥æºï¼š<a href="https://index.baidu.com/v2/main/index.html#/trend/react?words=react,vue.js,angular,jquery,">ç™¾åº¦æœç´¢æŒ‡æ•°</a></p></blockquote><p>å›½å†…å¼€å‘åœ¨ä¸å€ŸåŠ©é­”æ³•ç½‘ç»œçš„æƒ…å†µä¸‹åŸºæœ¬ä¾èµ–ç™¾åº¦æœç´¢ï¼Œä»¥ä¸‹æ˜¯å‡ ä¸ªä¸»æµæ¡†æ¶çš„æœç´¢æŒ‡æ•°ï¼š<br><img src="/img/blog/Js_Research/4.PNG"></p><h3 id="ç»¼åˆæœç´¢åŠAIæ€»ç»“ï¼š"><a href="#ç»¼åˆæœç´¢åŠAIæ€»ç»“ï¼š" class="headerlink" title="ç»¼åˆæœç´¢åŠAIæ€»ç»“ï¼š"></a>ç»¼åˆæœç´¢åŠAIæ€»ç»“ï¼š</h3><table><thead><tr><th>è¯„ä¼°ç»´åº¦</th><th>React</th><th>Vue</th><th>Angular</th></tr></thead><tbody><tr><td>å­¦ä¹ æ›²çº¿</td><td>ä¸­ç­‰</td><td>è¾ƒä½</td><td>è¾ƒé™¡</td></tr><tr><td>ç”Ÿæ€ç³»ç»Ÿ</td><td>éå¸¸æˆç†Ÿï¼ˆå›½å†…å¤–ï¼‰</td><td>æˆç†Ÿ,ä½†ç›¸å¯¹å›½å†…ä½¿ç”¨è€…è¾ƒå¤š</td><td>æˆç†Ÿï¼Œå›½å¤–ä½¿ç”¨è¾ƒå¤š</td></tr><tr><td>çµæ´»æ€§</td><td>é«˜</td><td>ä¸­ç­‰</td><td>ä¸­ç­‰</td></tr><tr><td>ç¤¾åŒºæ´»è·ƒåº¦</td><td>æé«˜</td><td>é«˜</td><td>ä¸­ç­‰</td></tr><tr><td>å·¥ç¨‹åŒ–æ”¯æŒ</td><td>å®Œå–„</td><td>å®Œå–„</td><td>å®Œå–„</td></tr></tbody></table><h3 id="å“ªäº›å¸¸è§å›½å†…åº”ç”¨æ˜¯åŸºäºReactå¼€å‘çš„ï¼Ÿ"><a href="#å“ªäº›å¸¸è§å›½å†…åº”ç”¨æ˜¯åŸºäºReactå¼€å‘çš„ï¼Ÿ" class="headerlink" title="å“ªäº›å¸¸è§å›½å†…åº”ç”¨æ˜¯åŸºäºReactå¼€å‘çš„ï¼Ÿ"></a>å“ªäº›å¸¸è§å›½å†…åº”ç”¨æ˜¯åŸºäºReactå¼€å‘çš„ï¼Ÿ</h3><p>äº‘æ•ˆã€é£ä¹¦ã€èš‚èšæ•°æ®å¯è§†åŒ–ã€é£çŒªã€è™¾ç±³éŸ³ä¹ã€æ–—é±¼ç›´æ’­ã€çŸ¥ä¹ã€è±†ç“£ã€ç¾å›¢å¤–å–H5ã€çŸ³å¢¨æ–‡æ¡£ã€36æ°ªã€ä¼˜é…·ã€æºç¨‹ã€æ»´æ»´å®˜ç½‘ã€ä»Šæ—¥å¤´æ¡â€¦</p><h3 id="å“ªäº›AIäº§å“æ˜¯åŸºäºReactå¼€å‘çš„ï¼Ÿ"><a href="#å“ªäº›AIäº§å“æ˜¯åŸºäºReactå¼€å‘çš„ï¼Ÿ" class="headerlink" title="å“ªäº›AIäº§å“æ˜¯åŸºäºReactå¼€å‘çš„ï¼Ÿ"></a>å“ªäº›AIäº§å“æ˜¯åŸºäºReactå¼€å‘çš„ï¼Ÿ</h3><p>AIåº”ç”¨ï¼šOpenaiã€è®¯é£æ˜Ÿç«ã€é€šä¸€åƒé—®ã€Deepseekâ€¦</p><p>AIåº”ç”¨å¼€å‘å¹³å°ï¼šCozeã€Difyã€Lobechatâ€¦</p><h3 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h3><p>ç»¼ä¸Šæ‰€è¿°ï¼ŒReact å‡­å€Ÿå…¶ç»„ä»¶åŒ–å¼€å‘ã€è™šæ‹Ÿ DOMã€å•å‘æ•°æ®æµç­‰ä¼˜åŠ¿ï¼Œä»¥åŠåºå¤§çš„ç”Ÿæ€ç³»ç»Ÿï¼ˆç»„ä»¶åº“ã€UIåº“ï¼‰å’Œæ´»è·ƒçš„ç¤¾åŒºï¼Œæˆä¸ºæ„å»ºç°ä»£ Web åº”ç”¨çš„ç†æƒ³é€‰æ‹©ã€‚ä¼—å¤šçŸ¥å AI åº”ç”¨å’Œå¹³å°çš„æˆåŠŸæ¡ˆä¾‹ä¹Ÿè¯æ˜äº† React çš„å¯é æ€§å’Œé«˜æ•ˆæ€§ã€‚å› æ­¤ï¼Œæ¨èä½¿ç”¨ React ä½œä¸ºé¡¹ç›®å¼€å‘çš„é¦–é€‰æ¡†æ¶ã€‚</p><h2 id="é¡¹ç›®æ­å»º"><a href="#é¡¹ç›®æ­å»º" class="headerlink" title="é¡¹ç›®æ­å»º"></a>é¡¹ç›®æ­å»º</h2><h3 id="ç¯å¢ƒä¾èµ–"><a href="#ç¯å¢ƒä¾èµ–" class="headerlink" title="ç¯å¢ƒä¾èµ–"></a>ç¯å¢ƒä¾èµ–</h3><p>Node &gt;= 18+ (æœ¬åœ°ç‰ˆæœ¬ï¼š18.20.4)</p><h3 id="è·¯ç”±ã€å·¥å…·ã€ç»„ä»¶åº“"><a href="#è·¯ç”±ã€å·¥å…·ã€ç»„ä»¶åº“" class="headerlink" title="è·¯ç”±ã€å·¥å…·ã€ç»„ä»¶åº“"></a>è·¯ç”±ã€å·¥å…·ã€ç»„ä»¶åº“</h3><table><thead><tr><th>ç±»åˆ«</th><th>ä¾èµ–åŒ…</th><th>ç‰ˆæœ¬</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>æ ¸å¿ƒæ¡†æ¶</td><td>React</td><td>^18.3.1</td><td>ç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„ JavaScript åº“</td></tr><tr><td></td><td>TypeScript</td><td>^5.4.5</td><td>JavaScript çš„è¶…é›†ï¼Œæ·»åŠ äº†ç±»å‹ç³»ç»Ÿ</td></tr><tr><td></td><td>Vite</td><td>^5.2.11</td><td>ç°ä»£åŒ–çš„å‰ç«¯æ„å»ºå·¥å…·ï¼Œå¼€å‘ä½“éªŒå¥½ï¼Œæ„å»ºé€Ÿåº¦å¿«</td></tr><tr><td></td><td>@vitejs/plugin-react-swc</td><td>^3.7.0</td><td>åŸºäº SWC çš„ React æ’ä»¶ï¼Œæä¾›æ›´å¿«çš„ç¼–è¯‘é€Ÿåº¦</td></tr><tr><td>çŠ¶æ€ç®¡ç†ä¸è·¯ç”±</td><td>Zustand</td><td>^4.5.2</td><td>è½»é‡çº§çŠ¶æ€ç®¡ç†åº“ï¼Œä½¿ç”¨ç®€å•ï¼Œæ”¯æŒ Hooks</td></tr><tr><td></td><td>React Router</td><td>^6.23.1</td><td>React å®˜æ–¹è·¯ç”±æ–¹æ¡ˆ</td></tr><tr><td></td><td>Ahooks</td><td>^3.8.4</td><td>é˜¿é‡Œå‡ºå“çš„ React Hooks åº“ï¼Œæä¾›ä¸°å¯Œçš„è‡ªå®šä¹‰ Hooks</td></tr><tr><td>UIç»„ä»¶åº“</td><td>Ant Design</td><td>^5.22.7</td><td>ä¼ä¸šçº§ UI ç»„ä»¶åº“ï¼Œæä¾›ä¸°å¯Œçš„ç»„ä»¶å’Œä¸»é¢˜å®šåˆ¶</td></tr><tr><td></td><td>@iconify/react</td><td>^4.1.1</td><td>å›¾æ ‡åº“ï¼Œæ”¯æŒå¤šä¸ªå›¾æ ‡é›†åˆ</td></tr><tr><td></td><td>@livekit/components-react</td><td>^2.6.7</td><td>LiveKit çš„ React ç»„ä»¶åº“ï¼Œç”¨äºå®æ—¶éŸ³è§†é¢‘</td></tr><tr><td></td><td>@livekit/components-styles</td><td>^1.1.4</td><td>LiveKit ç»„ä»¶æ ·å¼åº“</td></tr><tr><td>å·¥å…·åº“</td><td>Axios</td><td>^1.7.2</td><td>åŸºäº Promise çš„ HTTP å®¢æˆ·ç«¯</td></tr><tr><td></td><td>Dayjs</td><td>^1.11.11</td><td>è½»é‡çº§æ—¥æœŸå¤„ç†åº“ï¼Œæ”¯æŒé“¾å¼æ“ä½œ</td></tr><tr><td></td><td>Lodash-unified</td><td>^1.0.3</td><td>å®ç”¨å·¥å…·åº“ï¼Œæä¾›æ•°ç»„ã€å¯¹è±¡ç­‰æ“ä½œæ–¹æ³•</td></tr><tr><td></td><td>Qs</td><td>^6.13.0</td><td>URL å‚æ•°è§£æå’Œå­—ç¬¦ä¸²åŒ–å·¥å…·</td></tr><tr><td></td><td>axios-mock-adapter</td><td>^1.22.0</td><td>Axios çš„æ¨¡æ‹Ÿè¯·æ±‚é€‚é…å™¨ï¼Œç”¨äºå¼€å‘è°ƒè¯•</td></tr></tbody></table><h3 id="æ•´ä½“é¡¹ç›®ç»“æ„"><a href="#æ•´ä½“é¡¹ç›®ç»“æ„" class="headerlink" title="æ•´ä½“é¡¹ç›®ç»“æ„"></a>æ•´ä½“é¡¹ç›®ç»“æ„</h3><div class="code-wrapper"><pre><code class="hljs plaintext">â”œâ”€â”€ src/ # æºä»£ç ç›®å½•â”œâ”€â”€ public/ # é™æ€èµ„æºç›®å½•â”œâ”€â”€ node_modules/ # ä¾èµ–åŒ…ç›®å½•â”œâ”€â”€ index.html # HTML å…¥å£æ–‡ä»¶â”œâ”€â”€ vite.config.ts # Vite é…ç½®æ–‡ä»¶â”œâ”€â”€ package.json # é¡¹ç›®é…ç½®å’Œä¾èµ–ç®¡ç†â”œâ”€â”€ tsconfig.json # TypeScript é…ç½®â”‚â”œâ”€â”€ ç¯å¢ƒé…ç½®æ–‡ä»¶â”‚ â”œâ”€â”€ .env.dev # å¼€å‘ç¯å¢ƒé…ç½®â”‚ â””â”€â”€ .env.prod # ç”Ÿäº§ç¯å¢ƒé…ç½®â”‚â”œâ”€â”€ ä»£ç è§„èŒƒé…ç½®â”‚ â”œâ”€â”€ .eslintrc.cjs # ESLint é…ç½®â”‚ â”œâ”€â”€ .prettierrc.cjs # Prettier é…ç½®â”‚ â”œâ”€â”€ .stylelintrc.cjs # StyleLint é…ç½®â”‚ â”œâ”€â”€ .editorconfig # ç¼–è¾‘å™¨é…ç½®â”‚ â””â”€â”€ .commitlintrc.cjs # Git æäº¤è§„èŒƒé…ç½®â”‚â”œâ”€â”€ å¿½ç•¥æ–‡ä»¶é…ç½®â”‚ â”œâ”€â”€ .gitignore # Git å¿½ç•¥æ–‡ä»¶â”‚ â”œâ”€â”€ .eslintignore # ESLint å¿½ç•¥æ–‡ä»¶â”‚ â”œâ”€â”€ .prettierignore # Prettier å¿½ç•¥æ–‡ä»¶â”‚ â””â”€â”€ .stylelintignore # StyleLint å¿½ç•¥æ–‡ä»¶â”‚â””â”€â”€ é¡¹ç›®æ–‡æ¡£â”œâ”€â”€ README.md # é¡¹ç›®è¯´æ˜æ–‡æ¡£â””â”€â”€ LICENSE # å¼€æºåè®®</code></pre></div><h3 id="æºä»£ç ç›®å½•ç»“æ„"><a href="#æºä»£ç ç›®å½•ç»“æ„" class="headerlink" title="æºä»£ç ç›®å½•ç»“æ„"></a>æºä»£ç ç›®å½•ç»“æ„</h3><div class="code-wrapper"><pre><code class="hljs plaintext">src/â”œâ”€â”€ apis/ # API æ¥å£ç®¡ç†â”‚ â”œâ”€â”€ request.ts # Axios è¯·æ±‚å°è£…â”‚ â””â”€â”€ modules/ # æŒ‰æ¨¡å—åˆ’åˆ†çš„ APIâ”‚â”œâ”€â”€ assets/ # é™æ€èµ„æºâ”‚ â”œâ”€â”€ images/ # å›¾ç‰‡èµ„æºâ”‚ â”œâ”€â”€ icons/ # å›¾æ ‡èµ„æºâ”‚ â””â”€â”€ styles/ # å…¨å±€æ ·å¼â”‚â”œâ”€â”€ components/ # å…¨å±€å…¬å…±ç»„ä»¶â”‚ â”œâ”€â”€ Layout/ # å¸ƒå±€ç»„ä»¶â”‚ â”œâ”€â”€ Button/ # æŒ‰é’®ç»„ä»¶â”‚ â””â”€â”€ Form/ # è¡¨å•ç»„ä»¶â”‚â”œâ”€â”€ constants/ # å¸¸é‡å®šä¹‰â”‚ â”œâ”€â”€ index.ts # å…¬å…±å¸¸é‡â”‚ â””â”€â”€ routes.ts # è·¯ç”±å¸¸é‡â”‚â”œâ”€â”€ hooks/ # è‡ªå®šä¹‰ Hooksâ”‚ â”œâ”€â”€ useRequest.ts # è¯·æ±‚ Hookâ”‚ â””â”€â”€ useAuth.ts # è®¤è¯ Hookâ”‚â”œâ”€â”€ pages/ # é¡µé¢ç»„ä»¶â”‚ â”œâ”€â”€ Home/ # é¦–é¡µâ”‚ â”œâ”€â”€ Login/ # ç™»å½•é¡µâ”‚ â””â”€â”€ User/ # ç”¨æˆ·é¡µé¢â”‚â”œâ”€â”€ router/ # è·¯ç”±é…ç½®â”‚ â”œâ”€â”€ index.tsx # è·¯ç”±å…¥å£â”‚ â””â”€â”€ routes.tsx # è·¯ç”±å®šä¹‰â”‚â”œâ”€â”€ store/ # çŠ¶æ€ç®¡ç†â”‚ â”œâ”€â”€ index.ts # Store å…¥å£â”‚ â””â”€â”€ modules/ # çŠ¶æ€æ¨¡å—â”‚â”œâ”€â”€ types/ # TypeScript ç±»å‹å®šä¹‰â”‚ â”œâ”€â”€ global.d.ts # å…¨å±€ç±»å‹â”‚ â””â”€â”€ api.d.ts # API ç›¸å…³ç±»å‹â”‚â”œâ”€â”€ utils/ # å·¥å…·å‡½æ•°â”‚ â”œâ”€â”€ storage.ts # å­˜å‚¨å·¥å…·â”‚ â””â”€â”€ validator.ts # éªŒè¯å·¥å…·â”‚â”œâ”€â”€ App.tsx # åº”ç”¨æ ¹ç»„ä»¶â”œâ”€â”€ main.tsx # åº”ç”¨å…¥å£â””â”€â”€ env.d.ts # ç¯å¢ƒå˜é‡ç±»å‹å£°æ˜</code></pre></div><h3 id="é¡¹ç›®å‘½ä»¤"><a href="#é¡¹ç›®å‘½ä»¤" class="headerlink" title="é¡¹ç›®å‘½ä»¤"></a>é¡¹ç›®å‘½ä»¤</h3><table><thead><tr><th>å‘½ä»¤</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>npm run dev</code></td><td>å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼Œé»˜è®¤ç«¯å£ 8000</td></tr><tr><td><code>npm run build</code></td><td>æ„å»ºç”Ÿäº§ç¯å¢ƒä»£ç </td></tr><tr><td><code>npm run analyzer</code></td><td>æ„å»ºå¹¶åˆ†ææ‰“åŒ…ç»“æœ</td></tr><tr><td><code>npm run serve</code></td><td>é¢„è§ˆç”Ÿäº§ç¯å¢ƒæ„å»º</td></tr><tr><td><code>npm run lint:js</code></td><td>JavaScript/TypeScript ä»£ç æ£€æŸ¥</td></tr><tr><td><code>npm run lint:css</code></td><td>CSS ä»£ç æ£€æŸ¥</td></tr><tr><td><code>npm run check</code></td><td>TypeScript ç±»å‹æ£€æŸ¥</td></tr><tr><td><code>npm run commit</code></td><td>è§„èŒƒåŒ–çš„ Git æäº¤</td></tr></tbody></table><h3 id="å¼€å‘è§„èŒƒ"><a href="#å¼€å‘è§„èŒƒ" class="headerlink" title="å¼€å‘è§„èŒƒ"></a>å¼€å‘è§„èŒƒ</h3><ul><li>ä½¿ç”¨ ESLint è¿›è¡Œä»£ç æ£€æŸ¥</li><li>ä½¿ç”¨ Prettier è¿›è¡Œä»£ç æ ¼å¼åŒ–</li><li>ä½¿ç”¨ StyleLint è¿›è¡Œæ ·å¼æ£€æŸ¥</li><li>ä½¿ç”¨ Commitlint è¿›è¡Œæäº¤ä¿¡æ¯æ£€æŸ¥</li><li>éµå¾ª TypeScript å¼€å‘è§„èŒƒ</li></ul>]]></content>
    
    
    <categories>
      
      <category>Webå¼€å‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>JavaScript</tag>
      
      <tag>React</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>STARå½¢å¼åˆ†äº«AIç¼–ç¨‹-1</title>
    <link href="/2024/11/28/STAR%E5%BD%A2%E5%BC%8F%E5%88%86%E4%BA%ABAI%E7%BC%96%E7%A8%8B1/"/>
    <url>/2024/11/28/STAR%E5%BD%A2%E5%BC%8F%E5%88%86%E4%BA%ABAI%E7%BC%96%E7%A8%8B1/</url>
    
    <content type="html"><![CDATA[<h2 id="å¼€å‘ç¯å¢ƒ"><a href="#å¼€å‘ç¯å¢ƒ" class="headerlink" title="å¼€å‘ç¯å¢ƒ"></a>å¼€å‘ç¯å¢ƒ</h2><p><strong>ç¼–ç å·¥å…·ï¼š</strong> Cursor<br><strong>AIæ¨¡å‹ï¼š</strong> claude-3.5-sonnet</p><h2 id="å®è·µæè¿°"><a href="#å®è·µæè¿°" class="headerlink" title="å®è·µæè¿°"></a>å®è·µæè¿°</h2><h3 id="Situation-amp-Task"><a href="#Situation-amp-Task" class="headerlink" title="Situation &amp; Task"></a>Situation &amp; Task</h3><p>åœ¨å¼€å‘æŸä¸ªç»Ÿè®¡åŠŸèƒ½æ—¶ï¼Œéœ€è¦æ ¹æ®åç«¯è¿”å›çš„æ•°æ®ç»“æ„è®¡ç®—ä¸åŒç®¡ç†è€…ç±»å‹çš„åˆ†å¸ƒæƒ…å†µã€‚ä¼ ç»Ÿçš„çº¯æ–‡å­—promptæ–¹å¼å¾€å¾€éœ€è¦å¤šè½®å¯¹è¯æ‰èƒ½è·å¾—å‡†ç¡®çš„ä»£ç å®ç°ã€‚</p><p>ä¸ºäº†æå‡æ•ˆç‡ï¼Œæˆ‘ä»¬é‡‡ç”¨äº†ä»¥ä¸‹æ–¹æ¡ˆï¼š</p><ol><li>è®¾è®¡ä¸€ä¸ªæ¸…æ™°çš„ä¼ªä»£ç promptï¼ŒåŒ…å«ï¼š<ul><li>å®Œæ•´çš„æ•°æ®ç»“æ„ç¤ºä¾‹</li><li>è¯¦ç»†çš„è®¡ç®—é€»è¾‘è§„åˆ™</li><li>é¢„æœŸçš„è¿”å›å€¼æ ¼å¼</li></ul></li><li>åˆ©ç”¨è¯¥promptç”ŸæˆTypeScriptä»£ç ï¼Œå¹¶å°è£…ä¸ºç‹¬ç«‹æ–¹æ³•</li></ol><h3 id="Action"><a href="#Action" class="headerlink" title="Action"></a>Action</h3><p>å…·ä½“å®æ–½æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li><p>ç¼–å†™ä¼ªä»£ç æ„å»ºæ¸…æ™°åŒ–çš„promptï¼š</p><ul><li>ç®¡ç†è€…ç±»å‹çš„å®Œæ•´å®šä¹‰</li><li>åç«¯è¿”å›çš„JSONæ•°æ®ç»“æ„ç¤ºä¾‹</li><li>ä½¿ç”¨if-elseå½¢å¼æè¿°çš„ä¸‰å±‚åˆ¤æ–­é€»è¾‘</li><li>æ¸…æ™°çš„è¿”å›å€¼æ•°æ®ç»“æ„</li></ul></li><li><p>ç”Ÿæˆ<code>CalculationManagerType.ts</code>æ–‡ä»¶ï¼ŒåŒ…å«ï¼š</p><ul><li>ç±»å‹å®šä¹‰å’Œå‡½æ•°</li><li>è¾…åŠ©å‡½æ•°çš„æ¨¡å—åŒ–è®¾è®¡</li><li>ä¸»è®¡ç®—å‡½æ•°<code>calculateManagerDistribution</code></li><li>å®Œæ•´çš„TypeScriptç±»å‹æ³¨è§£å’Œæ³¨é‡Š</li></ul></li></ol><h3 id="Result"><a href="#Result" class="headerlink" title="Result"></a>Result</h3><h4 id="æŠ€æœ¯æˆæœ"><a href="#æŠ€æœ¯æˆæœ" class="headerlink" title="æŠ€æœ¯æˆæœ"></a>æŠ€æœ¯æˆæœ</h4><ul><li>ç”Ÿæˆçš„ä»£ç æ— éœ€è¿‡å¤šä¿®æ”¹å³å¯æŠ•å…¥ä½¿ç”¨</li><li>ä»£ç ç»“æ„æ¸…æ™°ï¼ŒåŒ…å«å®Œæ•´çš„ç±»å‹å®šä¹‰å’Œæ³¨é‡Š</li><li>å®ç°äº†ä¸šåŠ¡é€»è¾‘è¦æ±‚</li></ul><h4 id="æ•ˆç‡æå‡"><a href="#æ•ˆç‡æå‡" class="headerlink" title="æ•ˆç‡æå‡"></a>æ•ˆç‡æå‡</h4><ul><li>ç›¸æ¯”çº¯æ–‡å­—promptï¼Œå‡å°‘äº†å¤šè½®å¯¹è¯çš„éœ€æ±‚</li><li>æ˜¾è‘—æé«˜äº†ä»£ç ç”Ÿæˆçš„å‡†ç¡®æ€§</li><li>ç¼©çŸ­äº†ä»éœ€æ±‚åˆ°å®ç°çš„æ—¶é—´ï¼š1h â†’ 10min</li></ul><h4 id="æœ€ä½³å®è·µ"><a href="#æœ€ä½³å®è·µ" class="headerlink" title="æœ€ä½³å®è·µ"></a>æœ€ä½³å®è·µ</h4><ul><li>è¯å®äº†ç»“æ„åŒ–ä¼ªä»£ç promptçš„ä¼˜åŠ¿</li><li>ä¸ºç±»ä¼¼åœºæ™¯æ€»ç»“äº†å¯å¤ç”¨çš„promptå†™æ³•</li></ul><h2 id="ä»¥ä¸‹æ˜¯å®Œæˆæ­¤ä»»åŠ¡çš„è¯¦ç»†promptå’ŒAIç”Ÿæˆçš„ä»£ç "><a href="#ä»¥ä¸‹æ˜¯å®Œæˆæ­¤ä»»åŠ¡çš„è¯¦ç»†promptå’ŒAIç”Ÿæˆçš„ä»£ç " class="headerlink" title="ä»¥ä¸‹æ˜¯å®Œæˆæ­¤ä»»åŠ¡çš„è¯¦ç»†promptå’ŒAIç”Ÿæˆçš„ä»£ç "></a>ä»¥ä¸‹æ˜¯å®Œæˆæ­¤ä»»åŠ¡çš„è¯¦ç»†promptå’ŒAIç”Ÿæˆçš„ä»£ç </h2><p>æ•´ç†çš„ä¼ªä»£ç çš„promptå¦‚ä¸‹ï¼š</p><div class="code-wrapper"><pre><code class="hljs prolog">ä»¥ä¸‹æ˜¯ç®¡ç†è€…ç±»å‹åˆ†å¸ƒçš„é€»è¾‘ï¼šäº§å“åˆ¶å®šçš„ç®¡ç†è€…ç±»å‹ï¼šæ¢ç´¢æ–¹å‘å‹ï¼Œé©±åŠ¨å¢é•¿å‹ï¼Œå¼ºåŒ–æ‰§è¡Œå‹ï¼Œå¡‘é€ ç¯å¢ƒå‹ï¼Œå¾…åˆ†åŒ–å‹åç«¯è¿”å›çš„æ•°æ®ç»“æ„å¦‚ä¸‹ï¼šâ€œtotalPeopleâ€ï¼š<span class="hljs-number">4</span>ï¼Œ<span class="hljs-string">&quot;assessmentGroupReportCpaTalentDistributionVO&quot;</span>: [&#123;<span class="hljs-string">&quot;typeName&quot;</span>: <span class="hljs-string">&quot;æ¢ç´¢æ–¹å‘å‹&quot;</span>,<span class="hljs-string">&quot;definition&quot;</span>: <span class="hljs-string">&quot;ä¸€æ®µæ–‡æœ¬ä¸€æ®µæ–‡æœ¬ä¸€æ®µæ–‡æœ¬â€‹&quot;</span>,<span class="hljs-string">&quot;exerciseOpportunity&quot;</span>: <span class="hljs-string">&quot;ä¸€æ®µæ–‡æœ¬ä¸€æ®µæ–‡æœ¬ä¸€æ®µæ–‡æœ¬&quot;</span>,<span class="hljs-string">&quot;cpaTalentDistributionTypeCode&quot;</span>: <span class="hljs-string">&quot;exploratoryDirection&quot;</span>,<span class="hljs-string">&quot;peopleList&quot;</span>: []&#125;,&#123;<span class="hljs-string">&quot;typeName&quot;</span>: <span class="hljs-string">&quot;é©±åŠ¨å¢é•¿å‹&quot;</span>,<span class="hljs-string">&quot;definition&quot;</span>: <span class="hljs-string">&quot;ä½œä¸ºä¸šåŠ¡æˆ˜å°†ï¼Œå¸®åŠ©ç»„ç»‡å®ç°ä¸šåŠ¡å¢é•¿â€‹&quot;</span>,<span class="hljs-string">&quot;exerciseOpportunity&quot;</span>: <span class="hljs-string">&quot;ä¸€æ®µæ–‡æœ¬ä¸€æ®µæ–‡æœ¬ä¸€æ®µæ–‡æœ¬&quot;</span>,<span class="hljs-string">&quot;cpaTalentDistributionTypeCode&quot;</span>: <span class="hljs-string">&quot;growthDriven&quot;</span>,<span class="hljs-string">&quot;peopleList&quot;</span>: [<span class="hljs-string">&quot;ç”¨æˆ·26&quot;</span>]&#125;,&#123;<span class="hljs-string">&quot;typeName&quot;</span>: <span class="hljs-string">&quot;å¼ºåŒ–æ‰§è¡Œå‹&quot;</span>,<span class="hljs-string">&quot;definition&quot;</span>: <span class="hljs-string">&quot;ä¸€æ®µæ–‡æœ¬ä¸€æ®µæ–‡æœ¬ä¸€æ®µæ–‡æœ¬â€‹&quot;</span>,<span class="hljs-string">&quot;exerciseOpportunity&quot;</span>: <span class="hljs-string">&quot;ä¸€æ®µæ–‡æœ¬ä¸€æ®µæ–‡æœ¬ä¸€æ®µæ–‡æœ¬ä¸€æ®µæ–‡æœ¬&quot;</span>,<span class="hljs-string">&quot;cpaTalentDistributionTypeCode&quot;</span>: <span class="hljs-string">&quot;executionEnhancer&quot;</span>,<span class="hljs-string">&quot;peopleList&quot;</span>: [<span class="hljs-string">&quot;ç”¨æˆ·24&quot;</span>,<span class="hljs-string">&quot;ç”¨æˆ·27&quot;</span>]&#125;,&#123;<span class="hljs-string">&quot;typeName&quot;</span>: <span class="hljs-string">&quot;å¡‘é€ ç¯å¢ƒå‹&quot;</span>,<span class="hljs-string">&quot;definition&quot;</span>: <span class="hljs-string">&quot;ä¸€æ®µæ–‡æœ¬ä¸€æ®µæ–‡æœ¬ä¸€æ®µæ–‡æœ¬&quot;</span>,<span class="hljs-string">&quot;exerciseOpportunity&quot;</span>: <span class="hljs-string">&quot;ä¸€æ®µæ–‡æœ¬ä¸€æ®µæ–‡æœ¬ä¸€æ®µæ–‡æœ¬ä¸€æ®µæ–‡æœ¬&quot;</span>,<span class="hljs-string">&quot;cpaTalentDistributionTypeCode&quot;</span>: <span class="hljs-string">&quot;environmentShaper&quot;</span>,<span class="hljs-string">&quot;peopleList&quot;</span>: [<span class="hljs-string">&quot;ç”¨æˆ·25&quot;</span>]&#125;,&#123;<span class="hljs-string">&quot;typeName&quot;</span>: <span class="hljs-string">&quot;å¾…åˆ†åŒ–å‹&quot;</span>,<span class="hljs-string">&quot;definition&quot;</span>: <span class="hljs-string">&quot;ä¸€æ®µæ–‡æœ¬ä¸€æ®µæ–‡æœ¬ä¸€æ®µæ–‡æœ¬&quot;</span>,<span class="hljs-string">&quot;exerciseOpportunity&quot;</span>: <span class="hljs-string">&quot;ä¸€æ®µæ–‡æœ¬ä¸€æ®µæ–‡æœ¬ä¸€æ®µæ–‡æœ¬ä¸€æ®µæ–‡æœ¬&quot;</span>,<span class="hljs-string">&quot;cpaTalentDistributionTypeCode&quot;</span>: <span class="hljs-string">&quot;pendingDifferentiation&quot;</span>,<span class="hljs-string">&quot;peopleList&quot;</span>: []&#125;]äººæ•°å æ¯”è®¡ç®—é€»è¾‘ï¼šif (æ¡ä»¶ <span class="hljs-number">1</span>ï¼šå¾…åˆ†åŒ–å‹çš„äººæ•°æœ€é«˜)ï¼š&#123;return &#123; å¾…åˆ†åŒ–å‹äººæ•°æœ€é«˜ï¼štrueï¼ŒhighList:[], lowList:[] &#125;&#125;else if( æ¡ä»¶<span class="hljs-number">2</span> ï¼šå½“éå¾…åˆ†åŒ–å‹çš„å››ç§ç±»å‹çš„äººæ•°ç›¸åŒ )&#123;return &#123;  å¾…åˆ†åŒ–å‹å æ¯”æœ€é«˜ï¼šfalseï¼ŒhighList:[], lowList:[] &#125;&#125;else&#123;highList = [æ‰¾å‡ºéå¾…åˆ†åŒ–å‹äººæ•°æœ€å¤šçš„é‚£ä¸ªç®¡ç†è€…ç±»å‹å¯¹è±¡ï¼Œå¹¶åˆ—çš„ä¹Ÿä¸€èµ·æ”¾åˆ°è¿™ä¸ªæ•°ç»„é‡Œ]lowList: = [æ‰¾å‡ºéå¾…åˆ†åŒ–å‹äººæ•°æœ€å°‘çš„é‚£ä¸ªç®¡ç†è€…ç±»å‹å¯¹è±¡ï¼Œå¹¶åˆ—çš„ä¹Ÿä¸€èµ·æ”¾åˆ°è¿™ä¸ªæ•°ç»„é‡Œ]return &#123; å¾…åˆ†åŒ–å‹äººæ•°æœ€é«˜ï¼šfalseï¼ŒhighList:highListï¼ŒlowList:lowList &#125;&#125;æ ¹æ®ä¸Šé¢çš„é€»è¾‘å’Œæ•°æ®è¿”å›ç»“æ„ç”Ÿæˆä¸€ä¸ªæ–¹æ³•æ¥è®¡ç®—å‡ºè¿”å›å€¼</code></pre></div><p>ç”Ÿæˆçš„ä»£ç CalculationManagerType.tsï¼š</p><p>å¯ä»¥çœ‹åˆ°aiç›´æ¥ä¼šæŠŠéœ€è¦å®šä¹‰çš„æ•°æ®è¿”å›ç±»å‹å’Œè®¡ç®—é€»è¾‘å®Œå…¨æŒ‰ç…§ä¼ªä»£ç prompté‡Œçš„è¦æ±‚å»ç”Ÿæˆï¼Œå¹¶ä¸”ä¸‹é¢è¿™æ®µcalculateManagerDistribution çš„å‡½æ•°ä»£ç æ˜¯å®Œå…¨æ²¡æœ‰äºŒæ¬¡ä¿®æ”¹çš„ç›´æ¥å¯ä»¥ä½¿ç”¨çš„ï¼š</p><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">/**</span><span class="hljs-comment"> * <span class="hljs-doctag">@fileoverview </span>ç®¡ç†è€…ç±»å‹åˆ†å¸ƒè®¡ç®—å·¥å…·</span><span class="hljs-comment"> */</span><span class="hljs-keyword">import</span> &#123; ManagerTypeVO, DistributionResult &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../data&#x27;</span><span class="hljs-comment">/**</span><span class="hljs-comment"> * <span class="hljs-doctag">@function <span class="hljs-variable">getPendingDifferentiationType</span></span></span><span class="hljs-comment"> * <span class="hljs-doctag">@description </span>ä»åˆ—è¡¨ä¸­è·å–å¾…åˆ†åŒ–ç±»å‹</span><span class="hljs-comment"> */</span><span class="hljs-keyword">const</span> getPendingDifferentiationType = (types: ManagerTypeVO[]): <span class="hljs-function"><span class="hljs-params">ManagerTypeVO</span> =&gt;</span> &#123;<span class="hljs-keyword">return</span> types.find(<span class="hljs-function">(<span class="hljs-params">type</span>) =&gt;</span> type.cpaTalentDistributionTypeCode === <span class="hljs-string">&#x27;pendingDifferentiation&#x27;</span>)!&#125;<span class="hljs-comment">/**</span><span class="hljs-comment"> * <span class="hljs-doctag">@function <span class="hljs-variable">getNonPendingTypes</span></span></span><span class="hljs-comment"> * <span class="hljs-doctag">@description </span>è·å–é™¤å¾…åˆ†åŒ–ç±»å‹å¤–çš„æ‰€æœ‰ç±»å‹</span><span class="hljs-comment"> */</span><span class="hljs-keyword">const</span> getNonPendingTypes = (types: ManagerTypeVO[]): ManagerTypeVO[] =&gt; &#123;<span class="hljs-keyword">return</span> types.filter(<span class="hljs-function">(<span class="hljs-params">type</span>) =&gt;</span> type.cpaTalentDistributionTypeCode !== <span class="hljs-string">&#x27;pendingDifferentiation&#x27;</span>)&#125;<span class="hljs-comment">/**</span><span class="hljs-comment"> * <span class="hljs-doctag">@function <span class="hljs-variable">findExtremeTypes</span></span></span><span class="hljs-comment"> * <span class="hljs-doctag">@description </span>æ‰¾å‡ºäººæ•°æœ€å¤šå’Œæœ€å°‘çš„ç±»å‹</span><span class="hljs-comment"> */</span><span class="hljs-keyword">const</span> findExtremeTypes = (types: ManagerTypeVO[]): &#123; <span class="hljs-attr">highList</span>: ManagerTypeVO[]; lowList: ManagerTypeVO[] &#125; =&gt; &#123;<span class="hljs-keyword">const</span> counts = types.map(<span class="hljs-function">(<span class="hljs-params">type</span>) =&gt;</span> type.peopleList.length)<span class="hljs-keyword">const</span> maxCount = <span class="hljs-built_in">Math</span>.max(...counts)<span class="hljs-keyword">const</span> minCount = <span class="hljs-built_in">Math</span>.min(...counts)<span class="hljs-keyword">return</span> &#123;<span class="hljs-attr">highList</span>: types.filter(<span class="hljs-function">(<span class="hljs-params">type</span>) =&gt;</span> type.peopleList.length === maxCount),<span class="hljs-attr">lowList</span>: types.filter(<span class="hljs-function">(<span class="hljs-params">type</span>) =&gt;</span> type.peopleList.length === minCount)&#125;&#125;<span class="hljs-comment">/**</span><span class="hljs-comment"> * <span class="hljs-doctag">@function <span class="hljs-variable">calculateManagerDistribution</span></span></span><span class="hljs-comment"> * <span class="hljs-doctag">@description </span>è®¡ç®—ç®¡ç†è€…ç±»å‹çš„åˆ†å¸ƒæƒ…å†µ</span><span class="hljs-comment"> * <span class="hljs-doctag">@param </span>types ç®¡ç†è€…ç±»å‹æ•°æ®æ•°ç»„</span><span class="hljs-comment"> * <span class="hljs-doctag">@returns </span>åˆ†å¸ƒè®¡ç®—ç»“æœ</span><span class="hljs-comment"> */</span><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> calculateManagerDistribution = (types: ManagerTypeVO[]): <span class="hljs-function"><span class="hljs-params">DistributionResult</span> =&gt;</span> &#123;<span class="hljs-keyword">const</span> pendingType = getPendingDifferentiationType(types)<span class="hljs-keyword">const</span> nonPendingTypes = getNonPendingTypes(types)<span class="hljs-keyword">const</span> pendingCount = pendingType.peopleList.length<span class="hljs-comment">// æ¡ä»¶1ï¼šå¾…åˆ†åŒ–ç±»å‹äººæ•°æœ€å¤š</span><span class="hljs-keyword">const</span> nonPendingCounts = nonPendingTypes.map(<span class="hljs-function">(<span class="hljs-params">type</span>) =&gt;</span> type.peopleList.length)<span class="hljs-keyword">const</span> maxNonPendingCount = <span class="hljs-built_in">Math</span>.max(...nonPendingCounts)<span class="hljs-keyword">if</span> (pendingCount &gt; maxNonPendingCount) &#123;<span class="hljs-keyword">return</span> &#123;<span class="hljs-attr">isPendingDifferentiationHighest</span>: <span class="hljs-literal">true</span>,<span class="hljs-attr">highList</span>: [],<span class="hljs-attr">lowList</span>: []&#125;&#125;<span class="hljs-comment">// æ¡ä»¶2ï¼šæ‰€æœ‰éå¾…åˆ†åŒ–ç±»å‹äººæ•°ç›¸ç­‰</span><span class="hljs-keyword">const</span> allNonPendingEqual = nonPendingCounts.every(<span class="hljs-function">(<span class="hljs-params">count</span>) =&gt;</span> count === nonPendingCounts[<span class="hljs-number">0</span>])<span class="hljs-keyword">if</span> (allNonPendingEqual) &#123;<span class="hljs-keyword">return</span> &#123;<span class="hljs-attr">isPendingDifferentiationHighest</span>: <span class="hljs-literal">false</span>,<span class="hljs-attr">highList</span>: [],<span class="hljs-attr">lowList</span>: []&#125;&#125;<span class="hljs-comment">// æ¡ä»¶3ï¼šæ‰¾å‡ºéå¾…åˆ†åŒ–ç±»å‹ä¸­äººæ•°æœ€å¤šå’Œæœ€å°‘çš„ç»„</span><span class="hljs-keyword">const</span> &#123; highList, lowList &#125; = findExtremeTypes(nonPendingTypes)<span class="hljs-keyword">return</span> &#123;<span class="hljs-attr">isPendingDifferentiationHighest</span>: <span class="hljs-literal">false</span>,highList,lowList&#125;&#125;</code></pre></div>]]></content>
    
    
    <categories>
      
      <category>AIç›¸å…³</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Prompt</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰ç«¯é¡µé¢åª’ä½“èµ„æºé˜²ä¸‹è½½</title>
    <link href="/2024/07/04/%E5%AA%92%E4%BD%93%E8%B5%84%E6%BA%90%E9%98%B2%E4%B8%8B%E8%BD%BD/"/>
    <url>/2024/07/04/%E5%AA%92%E4%BD%93%E8%B5%84%E6%BA%90%E9%98%B2%E4%B8%8B%E8%BD%BD/</url>
    
    <content type="html"><![CDATA[<h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><p>å‰ç«¯è¿›è¡Œå±•ç¤ºå›¾ç‰‡ã€è§†é¢‘ã€pdfç­‰åª’ä½“èµ„æºæ—¶ï¼Œå¯¹äºç§æœ‰åŒ–çŸ¥è¯†çš„èµ„æºéœ€è¦åšä¸€ä¸ªä¿æŠ¤æœºåˆ¶ï¼Œå³é˜²æ­¢ç”¨æˆ·ä¸‹è½½ç•™å­˜ã€‚</p><p>é˜²èŒƒç»´åº¦ï¼š</p><ul><li><p>æ— ä»»ä½•webæŠ€æœ¯çš„äººç¾¤ï¼šå¤§ä¼—ç”¨æˆ·</p></li><li><p>æ‡‚webæŠ€æœ¯çš„äººç¾¤</p></li></ul><p>æ­¤æ–‡æ¡£è®°å½•çš„æŠ€æœ¯æ–¹å‘ä¸»è¦æ˜¯é’ˆå¯¹ç¬¬ä¸€ç±»ï¼šå¤§ä¼—ç”¨æˆ·</p><h2 id="è§†é¢‘"><a href="#è§†é¢‘" class="headerlink" title="è§†é¢‘"></a>è§†é¢‘</h2><p>é’ˆå¯¹è§†é¢‘ï¼Œå¯ä½¿ç”¨ç°æˆjsæ’ä»¶æ¥å®ç°é˜²ä¸‹è½½åŠŸèƒ½ï¼Œæ¨èä»¥ä¸‹ä¸¤ä¸ªæ’ä»¶ï¼š</p><ul><li><p>video.js GitHub 37.5kï¼›Demoåœ°å€ï¼š<br><a href="https://videojs.com/advanced/?video=disneys-oceans">https://videojs.com/advanced/?video=disneys-oceans</a></p></li><li><p>plyr  Github 26kï¼›Demoåœ°å€ï¼š<a href="https://plyr.io/">https://plyr.io/</a> </p></li></ul><p>video-jsä½¿ç”¨ç¤ºä¾‹ï¼š</p><div class="code-wrapper"><pre><code class="hljs javascript">&lt;link href=<span class="hljs-string">&quot;https://vjs.zencdn.net/7.11.4/video-js.css&quot;</span> rel=<span class="hljs-string">&quot;stylesheet&quot;</span>&gt;<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://vjs.zencdn.net/7.11.4/video.min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">video</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;my-video&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;video-js&quot;</span> <span class="hljs-attr">controls</span> <span class="hljs-attr">preload</span>=<span class="hljs-string">&quot;auto&quot;</span> <span class="hljs-attr">width</span>=<span class="hljs-string">&quot;640&quot;</span> <span class="hljs-attr">height</span>=<span class="hljs-string">&quot;264&quot;</span> <span class="hljs-attr">poster</span>=<span class="hljs-string">&quot;MY_VIDEO_POSTER.jpg&quot;</span> <span class="hljs-attr">data-setup</span>=<span class="hljs-string">&quot;&#123;&#125;&quot;</span>&gt;</span></span><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">source</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;MY_VIDEO.mp4&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;video/mp4&quot;</span>&gt;</span></span><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;vjs-no-js&quot;</span>&gt;</span></span><span class="xml">    To view this video please enable JavaScript, and consider upgrading to a web browser that</span><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;https://videojs.com/html5-video-support/&quot;</span> <span class="hljs-attr">target</span>=<span class="hljs-string">&quot;_blank&quot;</span>&gt;</span>supports HTML5 video<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">video</span>&gt;</span></span><span class="xml"></span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span></span><span class="javascript"><span class="xml">  <span class="hljs-keyword">var</span> player = videojs(<span class="hljs-string">&#x27;my-video&#x27;</span>);</span></span><span class="javascript"><span class="xml">  player.ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;</span></span><span class="javascript"><span class="xml">    <span class="hljs-comment">// ç¦ç”¨å³é”®èœå•</span></span></span><span class="javascript"><span class="xml">    player.el().oncontextmenu = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123; <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; &#125;;</span></span><span class="javascript"><span class="xml"></span></span><span class="javascript"><span class="xml">    <span class="hljs-comment">// éšè—ä¸‹è½½æŒ‰é’®</span></span></span><span class="javascript"><span class="xml">    <span class="hljs-keyword">var</span> controlBar = player.getChild(<span class="hljs-string">&#x27;controlBar&#x27;</span>);</span></span><span class="javascript"><span class="xml">    <span class="hljs-keyword">var</span> fullscreenToggle = controlBar.getChild(<span class="hljs-string">&#x27;fullscreenToggle&#x27;</span>);</span></span><span class="javascript"><span class="xml">    <span class="hljs-keyword">if</span> (fullscreenToggle) &#123;</span></span><span class="javascript"><span class="xml">      fullscreenToggle.hide();</span></span><span class="javascript"><span class="xml">    &#125;</span></span><span class="javascript"><span class="xml">  &#125;);</span></span><span class="javascript"><span class="xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span></code></pre></div><p>plyä½¿ç”¨ç¤ºä¾‹:</p><div class="code-wrapper"><pre><code class="hljs javascript">&lt;link rel=<span class="hljs-string">&quot;stylesheet&quot;</span> href=<span class="hljs-string">&quot;https://cdn.plyr.io/3.6.8/plyr.css&quot;</span> /&gt;<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.plyr.io/3.6.8/plyr.polyfilled.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">video</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;player&quot;</span> <span class="hljs-attr">playsinline</span> <span class="hljs-attr">controls</span>&gt;</span></span><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">source</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;MY_VIDEO.mp4&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;video/mp4&quot;</span> /&gt;</span></span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">video</span>&gt;</span></span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span></span><span class="javascript"><span class="xml">  <span class="hljs-keyword">const</span> player = <span class="hljs-keyword">new</span> Plyr(<span class="hljs-string">&#x27;#player&#x27;</span>, &#123;</span></span><span class="javascript"><span class="xml">    <span class="hljs-attr">controls</span>: [<span class="hljs-string">&#x27;play&#x27;</span>, <span class="hljs-string">&#x27;progress&#x27;</span>, <span class="hljs-string">&#x27;current-time&#x27;</span>, <span class="hljs-string">&#x27;mute&#x27;</span>, <span class="hljs-string">&#x27;volume&#x27;</span>, <span class="hljs-string">&#x27;fullscreen&#x27;</span>]</span></span><span class="javascript"><span class="xml">  &#125;);</span></span><span class="javascript"><span class="xml"></span></span><span class="javascript"><span class="xml">  <span class="hljs-comment">// ç¦ç”¨å³é”®èœå•</span></span></span><span class="javascript"><span class="xml">  <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;player&#x27;</span>).oncontextmenu = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123; <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; &#125;;</span></span><span class="javascript"><span class="xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span></code></pre></div><h2 id="PDF"><a href="#PDF" class="headerlink" title="PDF"></a>PDF</h2><p>å¦‚æœä½¿ç”¨æµè§ˆå™¨æ‰“å¼€pdfä¼šæœ‰æµè§ˆå™¨è‡ªå¸¦çš„ä¸‹è½½åŠŸèƒ½ï¼Œè¿™é‡Œæ¨èä½¿ç”¨ä»¥ä¸‹æ’ä»¶æ¥å±•ç¤ºpdfï¼š</p><p>pdf.js GitHub 47.1kï¼›Demoåœ°å€ï¼š<a href="https://mozilla.github.io/pdf.js/examples/index.html#interactive-examples">https://mozilla.github.io/pdf.js/examples/index.html#interactive-examples</a></p><p>ä½¿ç”¨æ•ˆæœï¼Œåœ¨çŸ©å½¢åŒºåŸŸæ˜¾ç¤ºä¸€ä¸ªpdfæ–‡ä»¶çš„å†…å®¹ï¼š</p><p><img src="/img/blog/js/07.png" alt="img.png"></p><p><strong>ä½†æ˜¯ï¼šåœ¨çŸ©å½¢åŒºåŸŸä¸Šæ–¹ç‚¹å‡»é¼ æ ‡å³é”®ä¼šå‡ºç°ä¸€ä¸ªã€å›¾ç‰‡å¦å­˜ä¸ºã€‘ï¼Œè¿™æ—¶å€™éœ€è¦ä½¿ç”¨ä¸‹æ–¹å’Œã€å›¾ç‰‡ã€‘ä¸€æ ·çš„è®¾ç½®</strong></p><h2 id="å›¾ç‰‡"><a href="#å›¾ç‰‡" class="headerlink" title="å›¾ç‰‡"></a>å›¾ç‰‡</h2><p>åˆ©ç”¨cssè®¾ç½®ç¦æ­¢é€‰ä¸­å’Œjsä¸­çš„ç¦æ­¢å³é”®ï¼š<br>css:</p><div class="code-wrapper"><pre><code class="hljs css"><span class="hljs-selector-tag">img</span> &#123;    -webkit-user-select: none; <span class="hljs-comment">/* Safari */</span>    -moz-user-select: none;    <span class="hljs-comment">/* Firefox */</span>    -ms-user-select: none;     <span class="hljs-comment">/* IE10+/Edge */</span>    user-select: none;         <span class="hljs-comment">/* Standard */</span>    <span class="hljs-attribute">pointer-events</span>: none;&#125;</code></pre></div><p>jsï¼š</p><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">//é˜²æ­¢å³é”®ä¸‹è½½å›¾ç‰‡</span><span class="hljs-built_in">document</span>.oncontextmenu = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;&#125;<span class="hljs-comment">// æˆ–è€…</span>&lt;div id=<span class="hljs-string">&quot;myElement&quot;</span> oncontextmenu=<span class="hljs-string">&quot;return false;&quot;</span>&gt;...&lt;/div&gt;</code></pre></div><p>vueä¸­çš„å†™æ³•ç¤ºä¾‹ï¼š</p><div class="code-wrapper"><pre><code class="hljs vue">&lt;template&gt;  &lt;img ref=&quot;myImage&quot; src=&quot;your-image.jpg&quot; /&gt;&lt;/template&gt;&lt;script&gt;export default &#123;  mounted() &#123;    this.$refs.myImage.oncontextmenu = function(event) &#123;      event.preventDefault();      return false;    &#125;;  &#125;&#125;&lt;/script&gt;</code></pre></div>]]></content>
    
    
    <categories>
      
      <category>Webå¼€å‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Vue</tag>
      
      <tag>JavaScript</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰ç«¯è®°å½•é¡µé¢åœç•™æ—¶é•¿</title>
    <link href="/2024/07/04/%E5%89%8D%E7%AB%AF%E8%AE%B0%E5%BD%95%E9%A1%B5%E9%9D%A2%E5%81%9C%E7%95%99%E6%97%B6%E9%95%BF/"/>
    <url>/2024/07/04/%E5%89%8D%E7%AB%AF%E8%AE%B0%E5%BD%95%E9%A1%B5%E9%9D%A2%E5%81%9C%E7%95%99%E6%97%B6%E9%95%BF/</url>
    
    <content type="html"><![CDATA[<h2 id="ä¸»è¦é€»è¾‘"><a href="#ä¸»è¦é€»è¾‘" class="headerlink" title="ä¸»è¦é€»è¾‘"></a>ä¸»è¦é€»è¾‘</h2><div class="code-wrapper"><pre><code class="hljs text">1.è¿›å…¥é¡µé¢å¼€å§‹è®¡æ—¶ 2.å¦‚æœæµè§ˆå™¨tabåˆ‡æ¢ï¼Œåœæ­¢è®¡æ—¶ï¼Œé‡æ–°åˆ‡æ¢å›å½“å‰é¡µé¢ï¼Œç»§ç»­ç´¯åŠ è®¡æ—¶ 3.å¦‚æœæµè§ˆå™¨ç¼©å°æˆ–è¢«é®ç›–ï¼Œåœæ­¢è®¡æ—¶ï¼Œé‡æ–°åˆ‡æ¢å›å½“å‰é¡µé¢ï¼Œç»§ç»­ç´¯åŠ è®¡æ—¶ 4.å¦‚æœæµè§ˆå™¨åˆ·æ–°ï¼Œé‡æ–°è®¡æ—¶5.å¦‚æœæµè§ˆå™¨å…³é—­ï¼Œåœæ­¢è®¡æ—¶</code></pre></div><h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><p>åŸºäºä»¥ä¸Šé€»è¾‘ï¼Œä½¿ç”¨ä»¥ä¸‹ä»£ç è¿›è¡Œå®ç°ï¼š</p><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> startTime;   <span class="hljs-keyword">let</span> elapsedTime = <span class="hljs-number">0</span>;   <span class="hljs-keyword">let</span> timerInterval;   <span class="hljs-keyword">let</span> isTimerRunning = <span class="hljs-literal">false</span>;   <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">startTimer</span>(<span class="hljs-params"></span>) </span>&#123;       <span class="hljs-keyword">if</span> (!isTimerRunning) &#123;           startTime = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getTime() / <span class="hljs-number">1000</span> - elapsedTime;           timerInterval = <span class="hljs-built_in">setInterval</span>(updateTimer, <span class="hljs-number">1000</span>);           isTimerRunning = <span class="hljs-literal">true</span>;       &#125;   &#125;   <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">stopTimer</span>(<span class="hljs-params"></span>) </span>&#123;       <span class="hljs-keyword">if</span> (isTimerRunning) &#123;           <span class="hljs-built_in">clearInterval</span>(timerInterval);           elapsedTime = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getTime() / <span class="hljs-number">1000</span> - startTime;           isTimerRunning = <span class="hljs-literal">false</span>;       &#125;   &#125;   <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">updateTimer</span>(<span class="hljs-params"></span>) </span>&#123;       <span class="hljs-keyword">const</span> currentTime = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getTime() / <span class="hljs-number">1000</span>;       elapsedTime = currentTime - startTime;       displayTime(elapsedTime);   &#125;   <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">displayTime</span>(<span class="hljs-params">time</span>) </span>&#123;       <span class="hljs-keyword">const</span> timeString = <span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-built_in">Math</span>.floor(time)&#125;</span>ç§’`</span>;       <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;timeString&#x27;</span>, timeString);   &#125;   <span class="hljs-comment">// ç›‘å¬é¡µé¢å¯è§æ€§å˜åŒ–</span>   <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">&#x27;visibilitychange&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;       <span class="hljs-keyword">if</span> (<span class="hljs-built_in">document</span>.hidden) &#123;           stopTimer();       &#125; <span class="hljs-keyword">else</span> &#123;           startTimer();       &#125;   &#125;);   <span class="hljs-comment">// é¡µé¢åŠ è½½å®Œæˆåå¼€å§‹è®¡æ—¶</span>   <span class="hljs-built_in">window</span>.addEventListener(<span class="hljs-string">&#x27;load&#x27;</span>, startTimer);   <span class="hljs-comment">// ç›‘å¬é¡µé¢å…³é—­æˆ–åˆ·æ–°</span>   <span class="hljs-built_in">window</span>.addEventListener(<span class="hljs-string">&#x27;beforeunload&#x27;</span>, stopTimer);</code></pre></div><p>ç»è¿‡æµ‹è¯•ï¼Œå‘ç°ä¸€ä¸ªç‰¹æ®Šæƒ…å†µï¼šå½“ç¼©å°æµè§ˆå™¨æˆ–è€…åˆ‡æ¢tabåˆ°å…¶ä»–é¡µé¢ï¼ˆå…¶ä»–ç”µè„‘åº”ç”¨ï¼‰åï¼Œç»è¿‡åå‡ åˆ†é’Ÿï¼ˆæˆ–è€…æ›´é•¿æ—¶é—´ï¼‰åå†é‡æ–°å›åˆ°å½“å‰è®¡æ—¶é¡µé¢ï¼Œä»¥ä¸Šä»£ç ä¼šå‡ºç°ä¸€ä¸ªæ—¶é—´åå·®ï¼Œä¾‹å¦‚åŸæœ¬ç¦»å¼€çš„æ—¶é—´æ˜¯6ç§’ï¼Œå†å›æ¥åº”è¯¥ä»ç¬¬7ç§’å¼€å§‹ç´¯åŠ ï¼Œä½†å›æ¥åä¼šä»10ç§’æˆ–è€…20ç§’å¼€å§‹ç´¯åŠ ï¼›</p><p>åŸå› å¦‚ä¸‹ï¼š</p><blockquote><p>jsæ‰§è¡Œçš„ä»»åŠ¡é˜Ÿåˆ—åˆ†åˆ«æœ‰å¾®ä»»åŠ¡å’Œå®ä»»åŠ¡ä¸¤ç§ï¼Œè€ŒsetInterval å’ŒsetTimeout å±äºå®ä»»åŠ¡ï¼Œåœ¨æµè§ˆå™¨é¡µé¢çš„æ‰§è¡Œæœºåˆ¶é‡Œï¼Œå½“é¡µé¢å¤±ç„¦è¢«ç½®äºåå°æ—¶ï¼Œä¼šå› ä¸ºæµè§ˆå™¨çš„æ€§èƒ½æœºåˆ¶å¯¼è‡´è¢«å»¶è¿Ÿæ‰§è¡Œï¼Œå…·ä½“å»¶è¿Ÿæ‰§è¡Œæ—¶é•¿æ˜¯ä¸ç¡®å®šçš„ï¼ˆå–å†³äºå½“å‰é¡µé¢çš„ä»£ç é€»è¾‘å’Œæµè§ˆå™¨æœ¬èº«çš„è°ƒåº¦ï¼‰ï¼š</p></blockquote><p><img src="/img/blog/js/03.png" alt="img.png"></p><p><img src="/img/blog/js/04.png" alt="img.png"></p><p>æ ¹æ®ä»¥ä¸Šçš„æƒ…å†µå’ŒåŸå› è¯´æ˜ï¼Œä¸ä½¿ç”¨å®šæ—¶å™¨ï¼Œæ”¹ç”¨requestAnimationFrame æ–¹æ³•æ¥å®ç°æ›´ç²¾å‡†çš„æ—¶é•¿è®¡ç®—</p><p><strong>ä¸ºä»€ä¹ˆä½¿ç”¨requestAnimationFrame å¯ä»¥è§£å†³æ—¶é•¿ç²¾å‡†åº¦çš„é—®é¢˜ï¼Ÿ</strong></p><p>å¯ä»¥æ¦‚æ‹¬ä¸ºï¼šrequestAnimationFrameä¸æµè§ˆå™¨çš„æ¸²æŸ“å‘¨æœŸåŒæ­¥ï¼Œè¿™æ„å‘³ç€å®ƒä»¥ä¸æµè§ˆå™¨çš„æ¸²æŸ“å¸§é€Ÿç‡ä¸€è‡´çš„ä¸€è‡´é€Ÿç‡ï¼ˆé€šå¸¸ä¸ºæ¯ç§’ 60 æ¬¡ï¼‰è°ƒç”¨ã€‚è¿™ç§åŒæ­¥æœ‰åŠ©äºå‡å°‘æ—¶é—´æµ‹é‡çš„å·®å¼‚ã€‚ä¸”å½“æµè§ˆå™¨è¢«ç¼©å°ï¼Œæˆ–åˆ‡æ¢tabï¼Œè¯¥äº‹ä»¶ä¼šè¢«æš‚åœè°ƒç”¨ï¼Œé‡æ–°æ¿€æ´»é¡µé¢æ—¶ä¼šå†æ¬¡ä»¥æ¯ç§’60æ¬¡çš„é¢‘ç‡è°ƒç”¨</p><p>å®˜æ–¹è¯´æ˜ï¼š<br><img src="/img/blog/js/05.png" alt="img.png"></p><p>ä»¥ä¸‹æ˜¯ä¿®æ”¹ä¹‹åçš„ä»£ç ï¼š</p><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> startTime = <span class="hljs-number">0</span>;<span class="hljs-keyword">let</span> pauseTime = <span class="hljs-number">0</span>;<span class="hljs-keyword">let</span> accumulatedTime = <span class="hljs-number">0</span>;<span class="hljs-keyword">let</span> timerId = <span class="hljs-literal">null</span>;<span class="hljs-keyword">let</span> isRunning = <span class="hljs-literal">false</span>;<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">startTimer</span>(<span class="hljs-params"></span>) </span>&#123;    <span class="hljs-keyword">if</span> (!isRunning) &#123;        startTime = performance.now();        isRunning = <span class="hljs-literal">true</span>;        requestAnimationFrame(updateTimer);    &#125;&#125;<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">updateTimer</span>(<span class="hljs-params">timestamp</span>) </span>&#123;    <span class="hljs-keyword">if</span> (isRunning) &#123;        <span class="hljs-keyword">const</span> currentTime = timestamp;        <span class="hljs-keyword">const</span> elapsed = <span class="hljs-built_in">Math</span>.floor(currentTime - startTime + accumulatedTime);        <span class="hljs-comment">// æ›´æ–°è®¡æ—¶å™¨çš„æ˜¾ç¤º</span>        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`Elapsed time: <span class="hljs-subst">$&#123;elapsed&#125;</span>ms:::`</span>,elapsed/<span class="hljs-number">1000</span>);        timerId = requestAnimationFrame(updateTimer);    &#125;&#125;<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">pauseTimer</span>(<span class="hljs-params"></span>) </span>&#123;    <span class="hljs-keyword">if</span> (isRunning) &#123;        pauseTime = performance.now();        accumulatedTime += pauseTime - startTime;        isRunning = <span class="hljs-literal">false</span>;        cancelAnimationFrame(timerId);    &#125;&#125;<span class="hljs-comment">// ç›‘å¬æµè§ˆå™¨çš„ visibilitychange äº‹ä»¶</span><span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">&#x27;visibilitychange&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">document</span>.visibilityState === <span class="hljs-string">&#x27;hidden&#x27;</span>) &#123;        pauseTimer();    &#125; <span class="hljs-keyword">else</span> &#123;        startTimer();    &#125;&#125;);<span class="hljs-comment">// åˆå§‹åŒ–è®¡æ—¶å™¨</span>startTimer();</code></pre></div><p>åœ¨htmlé‡Œå¼•ç”¨ä»¥ä¸Šä¿®æ”¹åçš„ä»£ç ï¼Œæœªå‡ºç°ç¦»å¼€æ—¶é—´è¾ƒé•¿æ—¶é—´åå·®çš„é—®é¢˜ï¼Œç‰¹æ­¤è®°å½•ã€‚</p><p>requestAnimationFrameçš„æµè§ˆå™¨å…¼å®¹æ€§ï¼ˆ2024/7/3ï¼‰ï¼š<br><img src="/img/blog/js/06.png" alt="img.png"></p><h2 id="å‚è€ƒæ–‡æ¡£ï¼š"><a href="#å‚è€ƒæ–‡æ¡£ï¼š" class="headerlink" title="å‚è€ƒæ–‡æ¡£ï¼š"></a>å‚è€ƒæ–‡æ¡£ï¼š</h2><blockquote><p>åŠ¨ç”»æ¼”ç¤ºjsçš„EventLoopï¼š<a href="https://juejin.cn/post/6969028296893792286">https://juejin.cn/post/6969028296893792286</a></p><p>requestAnimationFrameçš„ä½¿ç”¨åœºæ™¯ä¸¾ä¾‹ï¼š<a href="https://juejin.cn/post/7190728064458817591#heading-1">https://juejin.cn/post/7190728064458817591#heading-1</a></p></blockquote>]]></content>
    
    
    <categories>
      
      <category>Webå¼€å‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>JavaScript</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Cordovaæ¡†æ¶æ­å»ºåŠæ‰“åŒ…å°è¯•ï¼ˆè¿‡ç¨‹è®°å½•ï¼‰</title>
    <link href="/2024/06/30/Cordova%E6%A1%86%E6%9E%B6%E6%90%AD%E5%BB%BA%E5%8F%8A%E6%89%93%E5%8C%85%E5%B0%9D%E8%AF%95/"/>
    <url>/2024/06/30/Cordova%E6%A1%86%E6%9E%B6%E6%90%AD%E5%BB%BA%E5%8F%8A%E6%89%93%E5%8C%85%E5%B0%9D%E8%AF%95/</url>
    
    <content type="html"><![CDATA[<h3 id="å®‰è£…-amp-åˆ›å»ºé¡¹ç›®"><a href="#å®‰è£…-amp-åˆ›å»ºé¡¹ç›®" class="headerlink" title="å®‰è£…&amp;åˆ›å»ºé¡¹ç›®"></a>å®‰è£…&amp;åˆ›å»ºé¡¹ç›®</h3><p>å…¨å±€å®‰è£…cordova</p><div class="code-wrapper"><pre><code class="hljs text">npm install -g cordova</code></pre></div><p>åˆ›å»ºé¡¹ç›®åä¸ºHelloWorldçš„å‘½ä»¤ï¼Œcom.example.helloæŒ‰ç…§æ–‡æ¡£è¯´æ³•éœ€è¦æ”¹ä¸ºå®é™…é¡¹ç›®åŸŸåï¼š</p><div class="code-wrapper"><pre><code class="hljs text">cordova create hello com.example.hello HelloWorld</code></pre></div><p>æ·»åŠ androidç¯å¢ƒï¼ˆè¿™æ¬¡æ˜¯åœ¨Windowsä¸Šå°è¯•ï¼Œæ‰€ä»¥åªèƒ½é…ç½®androidç¯å¢ƒï¼›(æ‰“ioséœ€è¦macç³»ç»Ÿçš„xcodeï¼Œæ²¡æœ‰å®è·µè®°å½•)ï¼‰ï¼š</p><div class="code-wrapper"><pre><code class="hljs text">cordova platform add android</code></pre></div><h3 id="ç¯å¢ƒé…ç½®"><a href="#ç¯å¢ƒé…ç½®" class="headerlink" title="ç¯å¢ƒé…ç½®"></a>ç¯å¢ƒé…ç½®</h3><p>androidå¹³å°çš„ç¯å¢ƒé…ç½®ï¼š</p><div class="code-wrapper"><pre><code class="hljs text">å®‰è£…jdk17ç‰ˆæœ¬ï¼›gradle7.6-allç‰ˆæœ¬ï¼›Android sdkå®‰è£…æœ€é«˜ç‰ˆæœ¬å’Œæœ€ä½ç‰ˆæœ¬å³å¯ï¼›</code></pre></div><p>ä»¥ä¸‹é…ç½®æ ¹æ®å®é™…å®‰è£…ä½ç½®ï¼Œå˜é‡åå¦‚ä¸‹ï¼š</p><div class="code-wrapper"><pre><code class="hljs text">ANDROID_HOMEï¼šE:\AndroidSDK\SDKANDROID_SDK_ROOTï¼šE:\AndroidSDK\SDKGRADLE_HOMEï¼šE:\AndroidSDK\gradle-7.6-all\gradle-7.6JAVA_HOMEï¼šC:\Program Files\Java\jdk-17PATHä¸‹çš„ç¯å¢ƒå˜é‡é…ç½®ï¼š%ANDROID_HOME%\platform-tools%ANDROID_HOME%\tools%ANDROID_HOME%\tools\bin%ANDROID_HOME%\build-tools%ANDROID_HOME%\emulator%ANDROID_HOME%\cmdline-tools\latest\bin%GRADLE_HOME%\bin%JAVA_HOME%\bin</code></pre></div><p>æŸ¥çœ‹å¯¹åº”å¹³å°çš„æ‰“åŒ…ç¯å¢ƒæ˜¯å¦æ»¡è¶³</p><div class="code-wrapper"><pre><code class="hljs text">cordova requirements</code></pre></div><p>æ‰§è¡Œä¸é€šè¿‡çš„è¯ä¼šæŠ¥é”™ï¼Œéœ€è¦æ ¹æ®æŠ¥é”™ä¿¡æ¯æŸ¥æ‰¾åŸå› ï¼Œå¤§éƒ¨åˆ†æ˜¯å› ä¸ºç¯å¢ƒå’Œç‰ˆæœ¬ä¸åŒ¹é…ï¼ŒæŸ¥ä¸€ä¸‹jdkå’Œandroidç‰ˆæœ¬çš„å…¼å®¹ç‰ˆæœ¬é‡æ–°å®‰è£…å³å¯ï¼›<br>ä¸‹å›¾æ˜¯androidç¯å¢ƒé…ç½®æ­£ç¡®çš„å‘½ä»¤è¾“å‡ºï¼š<br><img src="/img/blog/cordova/1.png" alt="img.png"></p><h3 id="æ‰“åŒ…"><a href="#æ‰“åŒ…" class="headerlink" title="æ‰“åŒ…"></a>æ‰“åŒ…</h3><p>æœ€åæ‰§è¡Œæ‰“åŒ…å‘½ä»¤:</p><div class="code-wrapper"><pre><code class="hljs text">cordova build android</code></pre></div><p>ç­‰åˆ°æ‰“åŒ…ç»“æŸï¼Œapkæ–‡ä»¶è¾“å‡ºåœ¨é¡¹ç›®ä¸‹æ­¤ç›®å½•ï¼šplatforms\android\app\build\outputs\apk\debug<br><img src="/img/blog/cordova/2.png" alt="img.png"></p><h3 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h3><p>æ­¤è®°å½•åªæ˜¯è·‘é€šäº†cordovaçš„é¡¹ç›®åˆ›å»ºå’Œæ‰“åŒ…ç¯å¢ƒé…ç½®ä»¥åŠæ‰“åŒ…å°è¯•ï¼Œä¸­é—´å› ä¸ºé…ç½®å…¼å®¹é—®é¢˜å¡äº†ä¸€æ®µæ—¶é—´ï¼Œåç»­å†æµ‹è¯•ç›¸å…³apiåŠŸèƒ½è½¬æ¢~~</p>]]></content>
    
    
    <categories>
      
      <category>Cordova</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Cordova</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>è…¾è®¯äº‘æ­å»ºWEBæœåŠ¡å™¨æ­¥éª¤è®°å½•</title>
    <link href="/2024/04/25/%E8%85%BE%E8%AE%AF%E4%BA%91%E6%90%AD%E5%BB%BAWEB%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%AD%A5%E9%AA%A4%E8%AE%B0%E5%BD%95/"/>
    <url>/2024/04/25/%E8%85%BE%E8%AE%AF%E4%BA%91%E6%90%AD%E5%BB%BAWEB%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%AD%A5%E9%AA%A4%E8%AE%B0%E5%BD%95/</url>
    
    <content type="html"><![CDATA[<p>æ–°è´­å…¥äº†ä¸€ä¸ªè½»é‡åº”ç”¨æœåŠ¡å™¨ï¼Œä¹‹å‰æ²¡æœ‰ä½¿ç”¨dockeréƒ¨ç½²ï¼Œéœ€è¦å†é‡å¤´æ­ä¸€ä¸‹ç¯å¢ƒï¼Œä»¥ä¸‹æ˜¯ç›¸å…³æ­¥éª¤ï¼š</p><h3 id="æ›´æ–°ç³»ç»Ÿ"><a href="#æ›´æ–°ç³»ç»Ÿ" class="headerlink" title="æ›´æ–°ç³»ç»Ÿ"></a>æ›´æ–°ç³»ç»Ÿ</h3><p>é¦–å…ˆï¼Œä½ éœ€è¦æ›´æ–°ä½ çš„CentOSç³»ç»Ÿã€‚åœ¨ç»ˆç«¯ä¸­ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><div class="code-wrapper"><pre><code class="hljs text">sudo yum update -y</code></pre></div><p>å®‰è£…åŸºæœ¬çš„ä¾èµ–å’Œå·¥å…·</p><p>ä½ å¯èƒ½éœ€è¦ä¸€äº›åŸºç¡€çš„ä¾èµ–å’Œå·¥å…·ï¼Œå¦‚curlã€wgetå’Œunzipã€‚åœ¨ç»ˆç«¯ä¸­ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥å®‰è£…è¿™äº›å·¥å…·ï¼š</p><div class="code-wrapper"><pre><code class="hljs text">sudo yum install -y curl wget unzip</code></pre></div><h3 id="å®‰è£…NVM"><a href="#å®‰è£…NVM" class="headerlink" title="å®‰è£…NVM"></a>å®‰è£…NVM</h3><p>åœ¨ç»ˆç«¯ä¸­ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥å®‰è£…NVMï¼š</p><div class="code-wrapper"><pre><code class="hljs text">curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.38.0/install.sh | bash</code></pre></div><p>æŸ¥çœ‹æ˜¯å¦å®‰è£…å®Œæˆ</p><div class="code-wrapper"><pre><code class="hljs text">command -v nvm</code></pre></div><h3 id="å®‰è£…Node-js"><a href="#å®‰è£…Node-js" class="headerlink" title="å®‰è£…Node.js"></a>å®‰è£…Node.js</h3><p>é€šè¿‡NVMï¼Œä½ å¯ä»¥å®‰è£…ä»»ä½•ç‰ˆæœ¬çš„Node.jsã€‚<br>æŸ¥çœ‹è¿œç¨‹nodeç‰ˆæœ¬ï¼Œè¯¥å‘½ä»¤ä¼šåˆ—å‡ºæ‰€æœ‰nodeç‰ˆæœ¬ï¼Œå¹¶ä¼šæ ‡æ³¨å“ªäº›æ˜¯LTSç‰ˆæœ¬</p><div class="code-wrapper"><pre><code class="hljs text">nvm ls-remote</code></pre></div><p>å®‰è£…å‘½ä»¤</p><div class="code-wrapper"><pre><code class="hljs text">nvm install v16.xx.xx</code></pre></div><p>ç„¶åï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥æ£€æŸ¥Node.jsæ˜¯å¦å·²ç»æˆåŠŸå®‰è£…ï¼š</p><div class="code-wrapper"><pre><code class="hljs text">nvm install v16.xx.xx</code></pre></div><h3 id="å®‰è£…PM2"><a href="#å®‰è£…PM2" class="headerlink" title="å®‰è£…PM2"></a>å®‰è£…PM2</h3><p>PM2 æ˜¯ä¸€ä¸ªNode.jsåº”ç”¨ç¨‹åºçš„ç”Ÿäº§è¿‡ç¨‹ç®¡ç†å™¨ã€‚åœ¨ç»ˆç«¯ä¸­ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥å®‰è£…PM2ï¼š</p><div class="code-wrapper"><pre><code class="hljs text">npm install -g pm2</code></pre></div><p>ç„¶åï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥æ£€æŸ¥PM2æ˜¯å¦å·²ç»æˆåŠŸå®‰è£…ï¼š</p><div class="code-wrapper"><pre><code class="hljs text">pm2 -v</code></pre></div><h3 id="å®‰è£…MySQL"><a href="#å®‰è£…MySQL" class="headerlink" title="å®‰è£…MySQL"></a>å®‰è£…MySQL</h3><p>åœ¨ç»ˆç«¯ä¸­ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥å®‰è£…MySQLï¼š</p><div class="code-wrapper"><pre><code class="hljs text">sudo yum install -y mysql-server</code></pre></div><p>ç„¶åï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥å¯åŠ¨MySQLæœåŠ¡ï¼š</p><div class="code-wrapper"><pre><code class="hljs text">sudo systemctl start mysqld</code></pre></div><p>è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥ç¡®ä¿MySQLåœ¨å¯åŠ¨æ—¶è‡ªåŠ¨å¯åŠ¨ï¼š</p><div class="code-wrapper"><pre><code class="hljs text">sudo systemctl enable mysqld</code></pre></div><p>ç„¶åï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥æ£€æŸ¥MySQLæ˜¯å¦å·²ç»æˆåŠŸå®‰è£…ï¼š</p><div class="code-wrapper"><pre><code class="hljs text">mysql --version</code></pre></div><h3 id="å®‰è£…Nginx"><a href="#å®‰è£…Nginx" class="headerlink" title="å®‰è£…Nginx"></a>å®‰è£…Nginx</h3><p>åœ¨ç»ˆç«¯ä¸­ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥å®‰è£…Nginxï¼š</p><div class="code-wrapper"><pre><code class="hljs text">sudo yum install -y nginx</code></pre></div><p>ç„¶åï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥å¯åŠ¨NginxæœåŠ¡ï¼š</p><div class="code-wrapper"><pre><code class="hljs text">sudo systemctl start nginx</code></pre></div><p>è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥ç¡®ä¿Nginxåœ¨å¯åŠ¨æ—¶è‡ªåŠ¨å¯åŠ¨ï¼š</p><div class="code-wrapper"><pre><code class="hljs text">sudo systemctl enable nginx</code></pre></div><p>æŸ¥çœ‹nginxæ˜¯å¦æ˜¯è‡ªå¯åŠ¨</p><div class="code-wrapper"><pre><code class="hljs text">systemctl is-enabled nginx</code></pre></div><p>ç„¶åï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥æ£€æŸ¥Nginxæ˜¯å¦å·²ç»æˆåŠŸå®‰è£…</p><div class="code-wrapper"><pre><code class="hljs text">nginx -v</code></pre></div><p>ä¿®æ”¹/etc/nginx.conf é…ç½®ï¼ŒåŒæ—¶éœ€è¦å¼€æ”¾äº‘æœåŠ¡å™¨çš„è®¿é—®ç«¯å£</p><div class="code-wrapper"><pre><code class="hljs text">server &#123;        listen       8001;                location / &#123;            root   /opt/scorm-player;            index  scormplayer.html;            try_files $uri $uri/ /index.html;        &#125;    &#125;</code></pre></div>]]></content>
    
    
    <categories>
      
      <category>Webå¼€å‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è…¾è®¯äº‘</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç®€å•ç»“æ„åŒ–promptå®è·µè®°å½•</title>
    <link href="/2024/02/02/prompt%E7%BB%93%E6%9E%84%E5%8C%96%E5%AE%9E%E8%B7%B5/"/>
    <url>/2024/02/02/prompt%E7%BB%93%E6%9E%84%E5%8C%96%E5%AE%9E%E8%B7%B5/</url>
    
    <content type="html"><![CDATA[<h3 id="èƒŒæ™¯è¯´æ˜"><a href="#èƒŒæ™¯è¯´æ˜" class="headerlink" title="èƒŒæ™¯è¯´æ˜"></a>èƒŒæ™¯è¯´æ˜</h3><p>æœ€è¿‘åŠå¹´å‡ºç°å¾ˆå¤šaiå¹³å°ï¼Œå¹³æ—¶ä½¿ç”¨æœ€å¤šçš„æ˜¯æ™ºè°±æ¸…è¨€ï¼Œæ­¤æ¬¡ä¹Ÿæ˜¯åˆ©ç”¨glmæ¨¡å‹ï¼Œé€šè¿‡å°è¯•promptæ¥è®©aiå®Œæˆæ•°æ®æå–çš„ä»»åŠ¡ï¼›</p><h3 id="è¦åšçš„äº‹"><a href="#è¦åšçš„äº‹" class="headerlink" title="è¦åšçš„äº‹"></a>è¦åšçš„äº‹</h3><p>å°†ä¸€ä¸ªexcelæ•°æ®é›†ä¸­æ¯è¡Œjsonæ•°æ®é‡Œçš„userQueryçš„å€¼å–å‡ºæ¥ï¼Œç„¶åå†æŒ‰ç…§æ¡ä»¶è¿›è¡Œç»„è£…<br>å³excelé‡Œçš„æŸåˆ—æ•°æ®æ˜¯ä¸€ä¸ªjsonï¼Œjsonå¯¹è±¡é‡Œæœ‰å¾ˆå¤šå­—æ®µï¼ŒåŸæœ¬éœ€è¦æ‰‹åŠ¨å»å¤åˆ¶é»è´´åˆ°æŸä¸ªä½ç½®ï¼Œå†è¿›è¡ŒäºŒæ¬¡ç»„è£…æˆæ–°çš„æ•°æ®é›†</p><p>åˆæ­¥å°è¯•çš„promptï¼š</p><blockquote><p>è¯·å°†Excelé‡Œçš„ç¬¬ä¸€åˆ—ä¸­70è¡Œé‡Œçš„jsonå¯¹è±¡é‡Œé¢çš„userQueryè¿›è¡Œç»„è£…ï¼Œ<br>ç»„è£…è§„å¾‹ä¸ºï¼š<br>[é¢†å¯¼ï¼šç‹æµ©ï¼š]<br>è¿™ä¸ªè§„å¾‹çš„ç»“æœä¾‹å­ ï¼š[é¢†å¯¼ï¼šå—¯ï¼Œç¡®å®éå¸¸å¿™ç¢Œï¼Œä½†è¿™ä¸ªé¡¹ç›®å»¶æœŸä¹Ÿä¼šé€ æˆå¾ˆä¸¥é‡çš„åæœï¼Œé‚£ä½ æœ‰ä»€ä¹ˆæœ‰ä»€ä¹ˆæ–¹é¢æ˜¯æˆ‘å¯ä»¥å¸®åŠ©æˆ–è€…æ”¯æŒåˆ°ä½ çš„å‘¢ï¼Ÿç‹æµ©ï¼šè€æ¿ï¼Œè¦ä¸ç„¶ä½ æŠŠè¿™æ¬¡çš„Wé¡¹ç›®çš„ç­–åˆ’æ–¹æ¡ˆäº¤ç»™å…¶ä»–äººåšå§ã€‚é¢†å¯¼ï¼šå—¯ï¼Œè¿™ä¸ªå…·ä½“æ€ä¹ˆåšï¼Œæˆ‘ä»¬å¯ä»¥ä¹‹åå†å†å…·ä½“è®¨è®ºï¼Œæ‚¨åˆšåˆšè¯´åˆ°æœ‰å¾ˆå¤šäº‹æƒ…è®©ä½ å¿™ä¸å¼€èº«æ˜¯æ—¶é—´åˆ†é…ä¸Šçš„ä¸€ä¸ªæ–¹é¢ï¼Œé‚£ä½ è¿˜æœ‰æ²¡æœ‰åˆ«çš„æ–¹é¢æ˜¯å¯ä»¥æ›´å¥½çš„å¸®åŠ©åˆ°ä½ å»æŒ‰æ—¶å®Œæˆè¿™æ ·ä¸€ä¸ªè®¡åˆ’çš„å‘¢ï¼Ÿç‹æµ©ï¼šè€æ¿ï¼Œæˆ‘ç°åœ¨ç¡®å®ä¹Ÿæ²¡æœ‰ä»€ä¹ˆå¥½åŠæ³•ã€‚]</p></blockquote><p><img src="/img/blog/prompt/1.png" alt="img.png"></p><p><img src="/img/blog/prompt/2.png" alt="img.png"></p><p>é¦–æ¬¡ç»“æœï¼šé¦–å…ˆæ„Ÿè§‰æ ¼å¼ä¸å¯¹ï¼Œç„¶åç»„è£…æ•°æ®ä¹Ÿæœ‰é—®é¢˜ï¼›</p><p>ç»è¿‡å¤šæ¬¡å°è¯•ï¼Œä»¥ä¸‹æ˜¯æœ€ç»ˆçš„ã€ç»“æ„åŒ–+æ­¥éª¤ã€‘çš„ä¼˜åŒ–ä¹‹åçš„promptï¼š</p><div class="code-wrapper"><pre><code class="hljs text"># è§’è‰²- è¯·ä½ ä½œä¸ºæ•°æ®åˆ†æå¸ˆï¼Œåˆ†æexcelä¸­çš„æ•°æ®## ä»»åŠ¡- å…ˆè¯»å–excelä¸­çš„ç¬¬ä¸€åˆ—ï¼Œæ‰€æœ‰æœ‰jsonæ•°æ®çš„è¡Œ- å–å‡ºæ¯è¡Œjsoné‡Œçš„userQueryå­—æ®µçš„value- å°†å–å‡ºçš„valueæ•°æ®è¿›è¡Œå‰”é™¤æ‰€æœ‰ &#x27;\n&#x27; ç¬¦å·- ç„¶åå°†å‰”é™¤åçš„æ•°æ®è£…åˆ°æ–°çš„excelæ–‡ä»¶é‡Œï¼ˆä¸åŒ…æ‹¬åŸjsonï¼‰- æ‰€æœ‰è¡Œçš„æ•°æ®éƒ½è½¬æ¢ä¹‹åï¼Œæä¾›ä¸‹è½½è¿™ä¸ªexcel</code></pre></div><p><img src="/img/blog/prompt/3.png" alt="img.png"></p><p><img src="/img/blog/prompt/4.png" alt="img.png"></p><p>å®é™…æµ‹è¯•æ•ˆæœé€šè¿‡æœ€åè¿™ç§promptï¼Œä¸€æ¬¡å¯¹è¯å°±å®Œæˆäº†æƒ³è¦çš„æ•ˆæœï¼›</p><h3 id="æ•ˆæœå¯¹æ¯”"><a href="#æ•ˆæœå¯¹æ¯”" class="headerlink" title="æ•ˆæœå¯¹æ¯”"></a>æ•ˆæœå¯¹æ¯”</h3><blockquote><p>é€šè¿‡ç»“æ„åŒ–+åˆ†æ­¥æŒ‡ä»¤ï¼Œaiä¼šé€æ­¥å®ŒæˆæŒ‡ä»¤ä¸­è¯¦ç»†æ­¥éª¤æ¥å®ç°æœ€ç»ˆæ•ˆæœã€‚<br>è€Œä»¥æœ€å¼€å§‹çš„é‚£ç§ç®€å•æè¿°ï¼Œé¦–å…ˆaiåªèƒ½å®Œæˆç®€å•ä»»åŠ¡ï¼Œå¦‚æœå†æ¬¡é€šè¿‡æ¯æ¬¡çš„ä¸Šä¸‹å¯¹è¯è®©aiå»åšæ•ˆç‡å¾ˆä½ã€‚<br>ç”±æ­¤å¯è§ä¸€ä¸ªéœ€æ±‚æè¿°å‡†ç¡®å’Œæ­¥éª¤ç»†åŒ–çš„promptåœ¨ç»“æœä¸Šä¼šæœ‰å·¨å¤§çš„å·®å¼‚ã€‚</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>AIç›¸å…³</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Prompt</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>nvmçš„å®‰è£…&amp;ä½¿ç”¨ä»¥åŠnpmå’Œyarnçš„æºè®¾ç½®</title>
    <link href="/2023/12/27/npm%E5%92%8Cyarn%E7%9A%84%E6%BA%90%E8%AE%BE%E7%BD%AE/"/>
    <url>/2023/12/27/npm%E5%92%8Cyarn%E7%9A%84%E6%BA%90%E8%AE%BE%E7%BD%AE/</url>
    
    <content type="html"><![CDATA[<h2 id="nvm"><a href="#nvm" class="headerlink" title="nvm"></a>nvm</h2><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p>å®‰è£…nvmä¹‹å‰éœ€è¦å…ˆå¸è½½ç”µè„‘ä¸­çš„nodeç‰ˆæœ¬ï¼Œå¹¶æ¸…ç†æ‰ç¼“å­˜:</p><div class="code-wrapper"><pre><code class="hljs taggerscript">æ§åˆ¶é¢æ¿ -&gt; å¸è½½ç¨‹åº -&gt; å¸è½½nodejsåˆ é™¤ä»¥ä¸‹æ–‡ä»¶å¤¹ï¼ˆå¦‚æœå­˜åœ¨çš„è¯ï¼‰C:<span class="hljs-symbol">\P</span>rogram Files (x86)<span class="hljs-symbol">\N</span>odejsC:<span class="hljs-symbol">\P</span>rogram Files<span class="hljs-symbol">\N</span>odejsC:<span class="hljs-symbol">\U</span>sers&#123;User&#125;<span class="hljs-symbol">\A</span>ppData<span class="hljs-symbol">\R</span>oaming<span class="hljs-symbol">\n</span>pmC:<span class="hljs-symbol">\U</span>sers&#123;User&#125;<span class="hljs-symbol">\A</span>ppData<span class="hljs-symbol">\R</span>oaming<span class="hljs-symbol">\n</span>pm-cacheåˆ é™¤C:<span class="hljs-symbol">\U</span>sers<span class="hljs-symbol">\ç”¨</span>æˆ·å ä¸‹çš„ .npmrcæ–‡ä»¶ä»¥åŠ .yarnrc æ–‡ä»¶</code></pre></div><p>nvm GitHubåœ°å€ï¼š<br><a href="https://github.com/nvm-sh/nvm">https://github.com/nvm-sh/nvm</a></p><p>Windowså®‰è£…åŒ…ä¸‹è½½åœ°å€ï¼š<br><a href="https://github.com/coreybutler/nvm-windows/releases">https://github.com/coreybutler/nvm-windows/releases</a></p><p>å®‰è£…å®Œæˆè¾“å…¥å‘½ä»¤æŸ¥çœ‹nvmç‰ˆæœ¬ï¼š<br><img src="/img/blog/nvm/version.png" alt="img.png"></p><p>ä½¿ç”¨<code>nvm list available</code>å‘½ä»¤æŸ¥çœ‹å½“å‰å¯å®‰è£…ç‰ˆæœ¬ï¼š<br><img src="/img/blog/nvm/node_list.png" alt="img.png"></p><p>é€šè¿‡ <a href="https://nodejs.org/en/download/releases">https://nodejs.org/en/download/releases</a> åœ°å€æŸ¥çœ‹nodeçš„é•¿æœŸç»´æŠ¤ç‰ˆæœ¬ï¼›</p><h3 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h3><div class="code-wrapper"><pre><code class="hljs stylus">æŸ¥çœ‹å·²å®‰è£…ç‰ˆæœ¬ï¼šnvm listå®‰è£…æŸä¸ªç‰ˆæœ¬: nvm install xx<span class="hljs-selector-class">.xx</span><span class="hljs-selector-class">.xx</span>ä½¿ç”¨æŸä¸ªç‰ˆæœ¬ï¼šnvm use xx<span class="hljs-selector-class">.xx</span>.xx</code></pre></div><p>å¸¦æ˜Ÿå·çš„æŒ‡å‘ä¸ºå½“å‰ä½¿ç”¨çš„ç‰ˆæœ¬ï¼š<br><img src="/img/blog/nvm/current_node.png" alt="img.png"></p><h2 id="yarnæºè®¾ç½®"><a href="#yarnæºè®¾ç½®" class="headerlink" title="yarnæºè®¾ç½®"></a>yarnæºè®¾ç½®</h2><div class="code-wrapper"><pre><code class="hljs arduino"><span class="hljs-comment">// æŸ¥è¯¢æº</span>yarn config get registry<span class="hljs-comment">// æ›´æ¢å›½å†…æº</span>yarn config set registry https:<span class="hljs-comment">//registry.npmmirror.com</span><span class="hljs-comment">// æ¢å¤å®˜æ–¹æº</span>yarn config set registry https:<span class="hljs-comment">//registry.yarnpkg.com</span><span class="hljs-comment">// åˆ é™¤æ³¨å†Œè¡¨</span>yarn config <span class="hljs-keyword">delete</span> registry</code></pre></div><h2 id="Npmæºè®¾ç½®"><a href="#Npmæºè®¾ç½®" class="headerlink" title="Npmæºè®¾ç½®"></a>Npmæºè®¾ç½®</h2><div class="code-wrapper"><pre><code class="hljs awk"><span class="hljs-regexp">//</span> æŸ¥è¯¢æºnpm config get registry<span class="hljs-regexp">//</span> æ›´æ¢å›½å†…æºnpm config set registry https:<span class="hljs-regexp">//</span>registry.npmmirror.com<span class="hljs-regexp">//</span> æ¢å¤å®˜æ–¹æºnpm config set registry https:<span class="hljs-regexp">//</span>registry.npmjs.org<span class="hljs-regexp">//</span> åˆ é™¤æ³¨å†Œè¡¨npm config <span class="hljs-keyword">delete</span> registryå¦‚æœæ˜¯ä¸€æ¬¡æ€§çš„ä½¿ç”¨ä¸´æ—¶æºï¼šæ·˜å®ï¼šnpm --registry https:<span class="hljs-regexp">//</span>registry.npm.taobao.org install XXXï¼ˆæ¨¡å—åï¼‰è…¾è®¯ï¼šnpm --registry http:<span class="hljs-regexp">//mi</span>rrors.cloud.tencent.com<span class="hljs-regexp">/npm/</span>  install xxxï¼ˆæ¨¡å—åï¼‰--legacy-peer-deps å¿½ç•¥npmåŒ…çš„ä¾èµ–</code></pre></div><p>è½¬å‘ï¼š<a href="https://juejin.cn/post/6971268824288985118">æ˜é‡‘ï¼šlegacy-peer-depsåˆ°åº•åšäº†äº›ä»€ä¹ˆï¼Ÿ</a></p>]]></content>
    
    
    <categories>
      
      <category>Webå¼€å‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Npm</tag>
      
      <tag>Yarn</tag>
      
      <tag>Nvm</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰ç«¯ç‰ˆæœ¬æ›´æ–°æŠ€æœ¯æ–¹æ¡ˆ</title>
    <link href="/2023/12/22/%E5%89%8D%E7%AB%AF%E7%89%88%E6%9C%AC%E6%9B%B4%E6%96%B0%E6%8A%80%E6%9C%AF%E6%96%B9%E6%A1%88/"/>
    <url>/2023/12/22/%E5%89%8D%E7%AB%AF%E7%89%88%E6%9C%AC%E6%9B%B4%E6%96%B0%E6%8A%80%E6%9C%AF%E6%96%B9%E6%A1%88/</url>
    
    <content type="html"><![CDATA[<h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><blockquote><p>å…¬å¸çš„ç§»åŠ¨ç«¯å’ŒPCç«¯ï¼Œåˆ†åˆ«æ˜¯angularå’Œvueåº“å¼€å‘çš„é¡¹ç›®ï¼Œæ¯æ¬¡åœ¨æ‰“åŒ…å‘å¸ƒæ–°ç‰ˆæœ¬åï¼Œç”¨æˆ·éƒ½éœ€è¦æ‰‹åŠ¨åˆ·æ–°é¡µé¢è·å–æœ€æ–°ä»£ç æˆ–æ ·å¼ï¼Œå¦åˆ™å‘å¸ƒçš„æœ€æ–°çš„js\css\imageç­‰èµ„æºæ–‡ä»¶å¾—ä¸åˆ°æ›´æ–°ï¼Œä¸ºè§£å†³æ­¤é—®é¢˜å¯¹ä¸¤ä¸ªé¡¹ç›®åšäº†ä»¥ä¸‹æ”¹é€ ï¼›</p></blockquote><h2 id="æŠ€æœ¯æ–¹æ¡ˆè¯´æ˜"><a href="#æŠ€æœ¯æ–¹æ¡ˆè¯´æ˜" class="headerlink" title="æŠ€æœ¯æ–¹æ¡ˆè¯´æ˜"></a>æŠ€æœ¯æ–¹æ¡ˆè¯´æ˜</h2><ul><li><p>é¡¹ç›®åœ¨æ‰“åŒ…æ—¶åˆ©ç”¨æ’ä»¶ç”Ÿæˆä¸€ä¸ªæ—¶é—´æˆ³ä½œä¸ºç‰ˆæœ¬ä¿¡æ¯ï¼Œæ‰“å…¥åˆ°ä¸€ä¸ªjsonæ–‡ä»¶é‡Œ</p></li><li><p>å‰ç«¯è·¯ç”±æ‹¦æˆªå™¨é‡Œç›‘å¬åˆ°è·¯ç”±å˜åŒ–æ—¶ï¼Œè¯·æ±‚è¿™ä¸ªjsonæ–‡ä»¶ï¼Œå’Œæœ¬åœ°çš„localStorageé‡Œçš„ç‰ˆæœ¬ä¿¡æ¯åšå¯¹æ¯”ï¼š</p><ul><li><p>å¦‚æœæœ¬åœ°æ²¡æœ‰ç¼“å­˜ï¼šç›´æ¥åšè‡ªåŠ¨åˆ·æ–°æµè§ˆå™¨å¤„ç†ï¼ŒåŒæ—¶æŠŠjsonæ–‡ä»¶é‡Œçš„ç‰ˆæœ¬ä¿¡æ¯å­˜åˆ°ç¼“å­˜é‡Œ</p></li><li><p>å¦‚æœæœ¬åœ°æœ‰ç¼“å­˜ï¼šå¯¹æ¯”æ˜¯å¦æœ‰å·®å¼‚ï¼Œæ— å·®å¼‚ä¸åšå¤„ç†ï¼›æœ‰å·®å¼‚åˆ™è°ƒç”¨æµè§ˆå™¨çš„location.reload()åšè‡ªåŠ¨åˆ·æ–°å¤„ç†ï¼ŒåŒæ—¶å°†æœåŠ¡å™¨çš„ç‰ˆæœ¬ä¿¡æ¯å­˜åˆ°localStorageé‡Œï¼Œå†æœ‰è·¯ç”±å˜åŒ–æ—¶åˆ™ä¸ä¼šå†æ¬¡åˆ·æ–°äº†ï¼Œç›´åˆ°ä¸‹æ¬¡æ–°ç‰ˆæœ¬å‘å¸ƒé‡æ–°èµ°æ­¥éª¤2</p></li></ul></li></ul><h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><h3 id="PCç«¯"><a href="#PCç«¯" class="headerlink" title="PCç«¯"></a>PCç«¯</h3><p>é¦–å…ˆç¼–å†™ä¸€ä¸ªwebpack plugin ï¼šVersionFilePlugin.jsï¼Œä¸»è¦é€»è¾‘ä¸ºç”Ÿæˆä¸€ä¸ªversion.jsonåœ¨é¡¹ç›®æ‰“åŒ…é…ç½®output.pathçš„staticæ–‡ä»¶å¤¹ä¸‹</p><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;fs&#x27;</span>);<span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;path&#x27;</span>);<span class="hljs-comment">/**</span><span class="hljs-comment"> * ç”Ÿæˆç‰ˆæœ¬ä¿¡æ¯</span><span class="hljs-comment"> */</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">VersionFilePlugin</span> </span>&#123;  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">options</span>)</span> &#123;    <span class="hljs-built_in">this</span>.options = options || &#123;&#125;;  &#125;  <span class="hljs-function"><span class="hljs-title">apply</span>(<span class="hljs-params">compiler</span>)</span> &#123;    compiler.plugin(<span class="hljs-string">&#x27;done&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">stat</span>) =&gt;</span> &#123;      <span class="hljs-comment">//æ–¹æ¡ˆï¼šä½œä¸ºjsonæ–‡ä»¶æ‰“åˆ°disté‡Œï¼Œç„¶åé€šè¿‡ç½‘ç»œè¯·æ±‚è¿›è¡ŒæŸ¥æ‰¾version.jsonæ–‡ä»¶</span>      <span class="hljs-keyword">const</span> version = <span class="hljs-built_in">Date</span>.now(); <span class="hljs-comment">// è·å–å½“å‰æ—¶é—´æˆ³</span>      <span class="hljs-keyword">const</span> versionData = &#123; version &#125;;      <span class="hljs-keyword">const</span> versionFilePath = path.join(compiler.options.output.path, <span class="hljs-string">&#x27;static/version.json&#x27;</span>);      <span class="hljs-comment">// å†™å…¥version.jsonæ–‡ä»¶</span>      fs.writeFileSync(versionFilePath, <span class="hljs-built_in">JSON</span>.stringify(versionData));    &#125;);  &#125;&#125;<span class="hljs-built_in">module</span>.exports = VersionFilePlugin;</code></pre></div><p>åœ¨webpack.prod.confé‡Œå¼•å…¥è¿™ä¸ªæ’ä»¶ï¼ˆuatå’Œprodçš„æ‰“åŒ…éƒ½æ˜¯ä½¿ç”¨çš„è¿™ä¸ªæ–‡ä»¶ï¼Œå¼€å‘ç¯å¢ƒçš„webpack.dev.confä¸éœ€è¦å¼•å…¥æ­¤æ’ä»¶åŠŸèƒ½ï¼‰</p><div class="code-wrapper"><pre><code class="hljs text">const VersionFilePlugin = require(&#x27;../plugins/VersionFilePlugin&#x27;);pluginsï¼š[    ...çœç•¥å…¶ä»–ä»£ç     new VersionFilePlugin()  åœ¨æ‰€æœ‰pluginçš„æœ€åå¼•å…¥è¿™ä¸ªVersionFilePlugin]</code></pre></div><p>åˆ°æ­¤æ­¥ä¸ºæ­¢ï¼Œè¿è¡Œpcçš„npm run build:shuat æˆ–è€… npm run build:shprodå¯ä»¥çœ‹åˆ°æ‰“åŒ…å‡ºçš„distæ–‡ä»¶å¤¹ä¸‹å·²æœ‰ä¸€ä¸ªversion.jsonæ–‡ä»¶äº†</p><p><img src="/img/blog/page_version/1.png" alt="img.png"></p><p><img src="/img/blog/page_version/2.png" alt="img.png"></p><p>æ¥ä¸‹æ¥åœ¨apié‡Œè¯·æ±‚è¿™ä¸ªjsonæ–‡ä»¶ï¼Œ/api/version.js</p><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> request <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../utils/request&#x27;</span>;<span class="hljs-comment">//è·å–ç‰ˆæœ¬ä¿¡æ¯</span><span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getVersion</span>(<span class="hljs-params"></span>) </span>&#123;  <span class="hljs-keyword">return</span> request.MainService(&#123;    <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/pc/static/version.json&#x27;</span>,    <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;get&#x27;</span>,  &#125;);&#125;</code></pre></div><p>åœ¨app.vueé‡Œçš„å…¨å±€ç›‘å¬è·¯ç”±å˜åŒ–è¿›è¡Œè°ƒç”¨ä¸Šé¢çš„api</p><div class="code-wrapper"><pre><code class="hljs vue">watch: &#123;  $route(val, old) &#123;    //è·å–ç‰ˆæœ¬ä¿¡æ¯    getVersion().then(data =&gt; &#123;      if(data &amp;&amp; data.version)&#123;        versionExamine(data.version);      &#125;    &#125;)  &#125;&#125;</code></pre></div><p>versionExamineæ–¹æ³•æ˜¯utilé‡Œçš„å·¥å…·æ–¹æ³•ï¼Œç”¨äºå¯¹æ¯”æœ¬åœ°ç¼“å­˜é‡Œçš„versionDataï¼Œæ­¤å·¥å…·æ–¹æ³•ç§»åŠ¨å’Œpcå¯ä»¥å…±ç”¨</p><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">//ç‰ˆæœ¬æ£€æŸ¥ï¼šæ ¹æ®æœ¬åœ°ç¼“å­˜çš„ç‰ˆæœ¬ä¿¡æ¯å’ŒæœåŠ¡å™¨çš„ç‰ˆæœ¬ä¿¡æ¯è¿›è¡Œå¯¹æ¯”</span><span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">versionExamine</span>(<span class="hljs-params">timestamp</span>)</span>&#123;  <span class="hljs-keyword">let</span> storage_version = <span class="hljs-built_in">localStorage</span>.getItem(<span class="hljs-string">&#x27;versionData&#x27;</span>);  <span class="hljs-keyword">if</span>(storage_version)&#123;<span class="hljs-comment">//æœ¬åœ°æœ‰ç‰ˆæœ¬ä¿¡æ¯åˆ™è¿›è¡Œå¯¹æ¯”</span>    <span class="hljs-keyword">if</span>(<span class="hljs-built_in">Number</span>(timestamp) !== <span class="hljs-built_in">Number</span>(storage_version))&#123;      <span class="hljs-built_in">localStorage</span>.setItem(<span class="hljs-string">&#x27;versionData&#x27;</span>,timestamp);      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;å¼ºåˆ¶åˆ·æ–°é¡µé¢~~&#x27;</span>);      location.reload();    &#125;  &#125;<span class="hljs-keyword">else</span>&#123;<span class="hljs-comment">//æ²¡æœ‰çš„è¯å…ˆå­˜ä¸‹ç‰ˆæœ¬ä¿¡æ¯ï¼Œå†è¿›è¡Œåˆ·æ–°é¡µé¢</span>    <span class="hljs-built_in">localStorage</span>.setItem(<span class="hljs-string">&#x27;versionData&#x27;</span>,timestamp);    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;å¼ºåˆ¶åˆ·æ–°é¡µé¢~~&#x27;</span>);    location.reload();  &#125;&#125;</code></pre></div><p>æœ€åï¼Œå¦‚æœ‰ç‰ˆæœ¬æ›´æ–°ï¼Œåœ¨pcçš„é¡µé¢è¿›è¡Œè·¯ç”±è·³è½¬æ—¶ä¼šè‡ªåŠ¨è¿›è¡Œåˆ·æ–°æµè§ˆå™¨çš„å½“å‰tabé¡µï¼ŒåŒæ—¶å¯çœ‹åˆ°ã€å¼ºåˆ¶åˆ·æ–°é¡µé¢~~ã€‘çš„log<br><img src="/img/blog/page_version/3.png" alt="img.png"></p><h3 id="ç§»åŠ¨ç«¯"><a href="#ç§»åŠ¨ç«¯" class="headerlink" title="ç§»åŠ¨ç«¯"></a>ç§»åŠ¨ç«¯</h3><p>ç”±äºç§»åŠ¨ç«¯çš„çš„angularé¡¹ç›®å¾ˆè€ï¼Œæ˜¯angular5çš„ç‰ˆæœ¬ï¼ˆç›®å‰å®˜æ–¹å·²æ›´æ–°16ï¼‰ï¼Œç›´æ¥ä½¿ç”¨PCçš„åŒä¸€ä¸ªwebpackæ’ä»¶çš„æ–¹å¼ä¸é€‚ç”¨äºè¿™ä¸ªç‰ˆæœ¬ï¼Œæ‰€ä»¥åšäº†ä»¥ä¸‹ä¿®æ”¹ï¼š</p><p>è¿™ä¸ªç”Ÿæˆversion.jsonçš„æ’ä»¶ä¸å†æ˜¯ä¸€ä¸ªwebpackå½¢å¼ï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨nodeé‡Œçš„fsæ¨¡å—ç”Ÿæˆä¸€ä¸ªæ–‡ä»¶å‡ºæ¥ï¼Œåœ¨æ‰§è¡Œæ‰“åŒ…æ—¶æŠŠå®ƒå½“åšä¸€ä¸ªå‘½ä»¤é¡ºåºæ‰§è¡Œï¼š</p><p>version-plugin.js</p><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> fs= <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;fs&#x27;</span>);<span class="hljs-keyword">const</span> version = <span class="hljs-built_in">Date</span>.now(); <span class="hljs-comment">// è·å–å½“å‰æ—¶é—´æˆ³</span><span class="hljs-keyword">const</span> versionData = &#123; version &#125;;<span class="hljs-comment">// å†™å…¥version.jsonæ–‡ä»¶</span><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;versionData&#x27;</span>, versionData);fs.writeFileSync(<span class="hljs-string">&#x27;./dist/assets/version.json&#x27;</span>, <span class="hljs-built_in">JSON</span>.stringify(versionData));</code></pre></div><p>ç°åœ¨package.jsoné‡Œå¢åŠ ä¸€ä¸ªå‘½ä»¤ï¼Œç„¶åä¿®æ”¹uatçš„æ‰“åŒ…å‘½ä»¤ï¼š</p><div class="code-wrapper"><pre><code class="hljs shell">&quot;version-plugin&quot;: &quot;node ./version-plugin.js&quot;,</code></pre></div><p>uatä¿®æ”¹å‰çš„æ‰“åŒ…å‘½ä»¤ï¼š</p><div class="code-wrapper"><pre><code class="hljs shell">&quot;produat&quot;: &quot;npm run git-plugin --max_old_space_size=16384 &amp;&amp; node --max_old_space_size=16384 ./node_modules/@angular/cli/bin/ng build  --dev --aot --build-optimizer  --environment=uat&quot;</code></pre></div><p>åœ¨åŸæœ¬çš„å‘½ä»¤åé¢åŠ ä¸Š &amp;&amp; npm run version-pluginï¼Œä¿®æ”¹åï¼š</p><div class="code-wrapper"><pre><code class="hljs shell">&quot;produat&quot;: &quot;npm run git-plugin --max_old_space_size=16384 &amp;&amp; node --max_old_space_size=16384 ./node_modules/@angular/cli/bin/ng build  --dev --aot --build-optimizer  --environment=uat &amp;&amp; npm run version-plugin&quot;</code></pre></div><p>ç„¶åè¿è¡Œæµæ°´çº¿ï¼Œå¯çœ‹åˆ°è¿è¡Œè®°å½•ï¼š<br><img src="/img/blog/page_version/4.png" alt="img.png"></p><p><img src="/img/blog/page_version/5.png" alt="img.png"></p><p>å†æŸ¥çœ‹ç§»åŠ¨ç«¯çš„éƒ¨ç½²æ—¥å¿—å¯çœ‹åˆ°ï¼Œå·²ç”ŸæˆæˆåŠŸï¼š<br><img src="/img/blog/page_version/6.png" alt="img.png"></p><p>å’Œpcä¸€æ ·ï¼Œæ¥ä¸‹æ¥åœ¨app.component.tsçš„è·¯ç”±é‡Œè°ƒç”¨apiï¼Œæ‰§è¡Œutilé‡Œçš„versionExamineæ–¹æ³•ï¼Œè¿›è¡Œå¯¹æ¯”å¤„ç†ï¼š<br><img src="/img/blog/page_version/7.png" alt="img.png"></p><p>å¦‚æœ‰ç‰ˆæœ¬æ›´æ–°ä¼šè‡ªåŠ¨è¿›è¡Œåˆ·æ–°æµè§ˆå™¨çš„å½“å‰tabé¡µï¼Œå¯åŒæ ·çœ‹åˆ°ã€å¼ºåˆ¶åˆ·æ–°é¡µé¢~~ã€‘çš„log<br><img src="/img/blog/page_version/8.png" alt="img.png"></p><h2 id="å£°æ˜"><a href="#å£°æ˜" class="headerlink" title="å£°æ˜"></a>å£°æ˜</h2><p>æ­¤åŠŸèƒ½ä¸Šçº¿ä¹‹åï¼Œåªæœ‰æ›´æ–°åˆ°è¿™ä¸ªæ–¹æ¡ˆçš„å®¢æˆ·ç«¯æ‰å…·å¤‡è·¯ç”±è·³è½¬è¿›è¡Œç‰ˆæœ¬æ›´æ–°çš„åŠŸèƒ½</p><p>æ­¤åŠŸèƒ½ä¸å…·å¤‡è§£å†³çº¿ä¸Šæœ‰å…³é€»è¾‘æ€§çš„æŠ¥éšœï¼Œå¯è§£å†³ä¸€äº›å› ä¸ºç‰ˆæœ¬è½åå¯¼è‡´çš„js/css/imageç­‰èµ„æºæ›´æ–°çš„æƒ…å†µ</p>]]></content>
    
    
    <categories>
      
      <category>Webå¼€å‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Vue</tag>
      
      <tag>JavaScript</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å…³äºChromeæ–°ç‰ˆæµè§ˆå™¨å­˜å‚¨åˆ†åŒºçš„æŠ€æœ¯å‰ç»ï¼ˆ2023.10ï¼‰</title>
    <link href="/2023/10/30/%E5%85%B3%E4%BA%8EChrome%E6%96%B0%E7%89%88%E6%B5%8F%E8%A7%88%E5%99%A8%E5%AD%98%E5%82%A8%E5%88%86%E5%8C%BA%E7%9A%84%E6%8A%80%E6%9C%AF%E5%89%8D%E7%9E%BB/"/>
    <url>/2023/10/30/%E5%85%B3%E4%BA%8EChrome%E6%96%B0%E7%89%88%E6%B5%8F%E8%A7%88%E5%99%A8%E5%AD%98%E5%82%A8%E5%88%86%E5%8C%BA%E7%9A%84%E6%8A%80%E6%9C%AF%E5%89%8D%E7%9E%BB/</url>
    
    <content type="html"><![CDATA[<h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><blockquote><p>äº‹ä»¶è¯´æ˜ï¼š2023.10.25ï¼Œç¬¬ä¸‰æ–¹å­¦ä¹ å¹³å°æŠ¥éšœï¼ŒPCç«¯çš„æŠ¥å‘Šé¡µæ–°å¼€tabæŸ¥çœ‹æŠ¥å‘Šè¯¦æƒ…ï¼Œè¢«è·³è½¬åˆ°äº†ç™»å½•é¡µï¼Œç”¨æˆ·åœ¨ä¸ç™»å½•çš„æƒ…å†µä¸‹æ— æ³•æŸ¥çœ‹æŠ¥å‘Šè¯¦æƒ…ã€‚<br>æ’æŸ¥è¿‡ç¨‹ï¼šéƒ¨åˆ†åŒäº‹ç”µè„‘çš„Chromeå¯ä»¥æ­£å¸¸è·³è½¬ï¼Œéƒ¨åˆ†ç”µè„‘çš„Chromeä¸å¯ä»¥ï¼Œç¬¬ä¸€æ—¶é—´å‘ç°æ˜¯ç‰ˆæœ¬ä¸åŒï¼Œç„¶åå‘ç°åœ¨æµè§ˆå™¨å­˜å‚¨é‡Œï¼Œä½ç‰ˆæœ¬çš„Chromeï¼ˆ106.xï¼‰å’Œé«˜ç‰ˆæœ¬çš„Chrome(118.x)ä¸Šæ˜¾ç¤ºæœ‰å·®å¼‚ï¼Œåœ¨å½“æ—¶ä¸ç¡®å®šå…·ä½“åŸå› çš„æƒ…å†µä¸‹åšäº†å¦‚ä¸‹ä¿®æ”¹ï¼Œè§£å†³äº†æŠ¥éšœé—®é¢˜ï¼š<br>è§£å†³æ–¹æ¡ˆï¼šåœ¨pcç«¯æ–°æ‰“å¼€tabçš„ä»£ç é‡Œï¼ŒæŠŠtokenåŠ åˆ°è¦æ‰“å¼€çš„urlåé¢ï¼ŒåŒæ—¶åœ¨app.vueé‡Œåšurlå–tokençš„å¤„ç†ï¼Œæ¥è·å–userinfoä¿¡æ¯ã€‚é¿å…å› ä¸ºæ²¡æœ‰tokenï¼Œè€Œè¢«è·³è½¬åˆ°ç™»å½•é¡µã€‚</p></blockquote><p>æ­¤æ¬¡çº¿ä¸ŠæŠ¥éšœè™½ç„¶å·²ç»ä¿®å¤ï¼Œä½†ä¸ºäº†æ‰¾åˆ°æ ¹æœ¬åŸå› ï¼Œä»¥æ–¹ä¾¿åç»­webå¼€å‘çš„åº”ç”¨èƒ½å¤Ÿæ­£å¸¸è¿è¡Œåœ¨ä¸åŒç‰ˆæœ¬æµè§ˆå™¨ï¼Œå»åˆ° Chromeå®˜ç½‘äº†è§£åˆ°äº†å¦‚ä¸‹ä¿¡æ¯ï¼š</p><h2 id="Chromeç‰ˆæœ¬å·®å¼‚"><a href="#Chromeç‰ˆæœ¬å·®å¼‚" class="headerlink" title="Chromeç‰ˆæœ¬å·®å¼‚"></a>Chromeç‰ˆæœ¬å·®å¼‚</h2><p>Chromeåœ¨æœ€è¿‘å‡ å¹´çš„ç”¨æˆ·éšç§ä¸Šåšäº†å¾ˆå¤šçš„æŠ€æœ¯ææ¡ˆä»¥åŠåŠŸèƒ½ä¸Šçš„å¼€å‘æ¢è®¨ï¼Œæ­¤æ¬¡é—®é¢˜çš„åŸå› åœ¨äºæ–°ç‰ˆæœ¬Chromeæµè§ˆå™¨å¢åŠ äº†<a href="https://developers.google.com/privacy-sandbox/3pcd/storage-partitioning?hl=zh-cn#how-to-test-storage-partitioning">ã€åˆ†åŒºå­˜å‚¨ã€‘</a>çš„æœºåˆ¶ï¼Œä»€ä¹ˆæ˜¯åˆ†åŒºå­˜å‚¨ï¼Ÿï¼ˆç‚¹å‡»æ–‡å­—å¯æŸ¥çœ‹å®˜ç½‘åŸæ–‡ï¼‰</p><blockquote><p>To prevent certain types of side-channel cross-site tracking, Chrome is partitioning storage and communications APIs in third-party contexts.</p><p>ä¸ºäº†é˜²æ­¢æŸäº›ç±»å‹çš„æ—è·¯è·¨ç«™ç‚¹è·Ÿè¸ªï¼ŒChromeæ­£åœ¨ç¬¬ä¸‰æ–¹ä¸Šä¸‹æ–‡ä¸­å¯¹å­˜å‚¨å’Œé€šä¿¡APIè¿›è¡Œåˆ†åŒºã€‚</p></blockquote><blockquote><p>Without storage partitioning, a site can join data across different sites to track the user across the web. Also, it allows the embedded site to infer specific states about the user in the top-level site using side-channel techniques such as Timing Attacks, XS-Leaks, and COSI.</p><p>å¦‚æœæ²¡æœ‰å­˜å‚¨åˆ†åŒºï¼Œä¸€ä¸ªç«™ç‚¹å¯ä»¥è¿æ¥ä¸åŒç«™ç‚¹çš„æ•°æ®ï¼Œä»è€Œåœ¨æ•´ä¸ªWebä¸Šè·Ÿè¸ªç”¨æˆ·ã€‚æ­¤å¤–ï¼Œå®ƒè¿˜å…è®¸åµŒå…¥å¼ç«™ç‚¹ä½¿ç”¨ä¾§ä¿¡é“æŠ€æœ¯ï¼ˆå¦‚å®šæ—¶æ”»å‡»ã€XSæ³„æ¼å’ŒCOSIï¼‰æ¥æ¨æ–­é¡¶çº§ç«™ç‚¹ä¸­ç”¨æˆ·çš„ç‰¹å®šçŠ¶æ€ã€‚</p></blockquote><blockquote><p>Historically, storage has been keyed only by origin. This means that if an iframe from example.com is embedded on a.com and b.com, it could learn about your browsing habits for those two sites by storing and successfully retrieving an ID from storage. With third-party storage partitioning enabled, storage for example.com exists in two different partitions, one for a.com and the other for b.com.</p><p>ä»å†å²ä¸Šçœ‹ï¼Œå­˜å‚¨ä»…æŒ‰æ¥æºè¿›è¡Œç›‘æ§ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœexample.comä¸­çš„iframeåµŒå…¥åˆ°a.comå’Œb.comä¸­ï¼Œå®ƒå¯ä»¥é€šè¿‡å­˜å‚¨å¹¶æˆåŠŸä»å­˜å‚¨ä¸­æ£€ç´¢IDæ¥äº†è§£è¿™ä¸¤ä¸ªç½‘ç«™çš„æµè§ˆä¹ æƒ¯ã€‚åœ¨å¯ç”¨ç¬¬ä¸‰æ–¹å­˜å‚¨åˆ†åŒºçš„æƒ…å†µä¸‹ï¼Œexample.comçš„å­˜å‚¨å­˜åœ¨äºä¸¤ä¸ªä¸åŒçš„åˆ†åŒºä¸­ï¼Œä¸€ä¸ªç”¨äºa.comï¼Œå¦ä¸€ä¸ªç”¨äºb.comã€‚</p></blockquote><blockquote><p>Partitioning generally means that data stored by storage APIs like local storage and IndexedDB by an iframe will no longer be accessible to all contexts in the same origin. Instead, the data will only be available to contexts with the same origin and same top-level site.</p><p>åˆ†åŒºé€šå¸¸æ„å‘³ç€å­˜å‚¨APIï¼ˆå¦‚æœ¬åœ°å­˜å‚¨å’ŒIndexedDBï¼‰é€šè¿‡iframeå­˜å‚¨çš„æ•°æ®å°†ä¸å†å¯ä»¥è®¿é—®åŒä¸€æ¥æºçš„æ‰€æœ‰ä¸Šä¸‹æ–‡ã€‚ç›¸åï¼Œæ•°æ®å°†ä»…å¯ç”¨äºå…·æœ‰ç›¸åŒæ¥æºå’Œç›¸åŒé¡¶çº§ç«™ç‚¹çš„ä¸Šä¸‹æ–‡ã€‚</p></blockquote><p>æœ€åä¸€å¥è¯è¯´æ˜äº†é‡ç‚¹ï¼šå­˜å‚¨çš„æ•°æ®åªèƒ½åœ¨å…·æœ‰ç›¸åŒæ¥æºå’Œç›¸åŒé¡¶çº§ç«™ç‚¹è¿›è¡Œè®¿é—®ã€‚<br>ç„¶åå¯¹äºwebå¼€å‘æ¥è¯´ï¼Œæœ€å¸¸ç”¨çš„local storageå’Œsession storageå—åˆ°äº†å½±å“ï¼Œå¦‚ä¸‹è¯´æ˜:</p><blockquote><p>The Web Storage API provides mechanisms by which browsers can store key/value pairs. There are two mechanisms: Local Storage and Session Storage. They are not currently quota-managed, but will still be partitioned.</p><p>Web Storage API æä¾›äº†æµè§ˆå™¨å¯ä»¥å­˜å‚¨é”®/å€¼å¯¹çš„æœºåˆ¶ã€‚æœ‰ä¸¤ç§æœºåˆ¶: æœ¬åœ°å­˜å‚¨å’Œä¼šè¯å­˜å‚¨ã€‚å®ƒä»¬å½“å‰ä¸å—é…é¢ç®¡ç†ï¼Œä½†ä»å°†è¢«åˆ†åŒºã€‚</p></blockquote><p>è¿™å¥è¯é‡Œçš„ä¸å—é…é¢ç®¡ç†ï¼Œç›®å‰ä¸ç¡®å®šæ˜¯ä¸æ˜¯å¤§å°é™åˆ¶çš„æœºåˆ¶æœ‰æ‰€ä¿®æ”¹ï¼Œä½†å­˜å‚¨åˆ†åŒºè¿™ä»¶äº‹å·²ç»ç¡®å®šåœ¨115ä»¥ä¸Šç‰ˆæœ¬çš„Chromeä¸Šåšäº†æ­¤æœºåˆ¶ï¼Œä½†å®é™…æµ‹è¯•ï¼Œ116ç‰ˆæœ¬ä¹Ÿæ˜¯å¯ä»¥è®¿é—®çš„ï¼Œå¯èƒ½åªæœ‰å‡çº§åˆ°117æˆ–è€…118æ‰æœ‰è¿™ä¸ªæœºåˆ¶ï¼ˆä¸ªäººåˆ¤æ–­ï¼‰ã€‚</p><p>ä¸‹å›¾æ˜¯å®˜æ–¹ä»‹ç»ç¬¬ä¸‰æ–¹ç«™ç‚¹åµŒå¥—æŸä¸ªç«™ç‚¹ï¼Œå…³äºå­˜å‚¨åˆ†åŒºæ¦‚å¿µçš„å›¾ä¾‹ï¼š<br>å­˜å‚¨åˆ†åŒºç‰ˆæœ¬ä¹‹å‰ï¼š</p><p><img src="/img/blog/chrome/1.png" alt="img.png"></p><p>å­˜å‚¨åˆ†åŒºç‰ˆæœ¬ä¹‹åï¼š</p><p><img src="/img/blog/chrome/2.png" alt="img.png"></p><p>ç»“åˆä¸Šå›¾æ‰€ç¤ºï¼Œå¦‚æœä¸€ä¸ªç¬¬ä¸‰æ–¹ç«™ç‚¹ä½¿ç”¨iframeçš„å½¢å¼æ‰“å¼€äº†aç«™ç‚¹ï¼Œaæœ¬èº«å­˜å‚¨çš„æ•°æ®ä¼šåªå­˜åœ¨è¯¥ç¬¬ä¸‰æ–¹ç«™ç‚¹+aç«™ç‚¹ä¸‹ã€‚<br>æ¯”å¦‚10æœˆåˆaç«™ç‚¹çš„scormåŒ–ï¼Œå®é™…æœºåˆ¶å°±ç­‰äºæ˜¯LMSå¹³å°ä½œä¸ºé¡¶çº§ç«™ç‚¹åˆ©ç”¨iframeçš„å½¢å¼æ‰“å¼€äº†aç«™ç‚¹ï¼Œè¿™ä¸ªæ—¶å€™å­˜å‚¨çš„æ•°æ®æ˜¾ç¤ºåœ¨118ç‰ˆæœ¬çš„æµè§ˆå™¨ä¸Šå¦‚ä¸‹æ‰€ç¤ºï¼š<br>é¦–å…ˆæ˜¯scorm cloudè¿™ä¸ªå¹³å°çš„å­˜å‚¨ï¼Œæœ‰ä¸€ä¸ªæºåœ°å€ï¼š</p><p><img src="/img/blog/chrome/3.png" alt="img.png"></p><p>ç„¶åç‚¹å‡»m-uatï¼Œæ¯”ä½ç‰ˆæœ¬çš„Chromeæµè§ˆå™¨å¤šäº†ä¸€ä¸ªé¡¶çº§ç«™ç‚¹å’Œæ˜¯å¦å±äºç¬¬ä¸‰æ–¹çš„å±æ€§ï¼š</p><p><img src="/img/blog/chrome/4.png" alt="img.png"></p><p>å†æ ¹æ®å®˜æ–¹å›¾ä¾‹çš„æœºåˆ¶ï¼Œæ­¤æ—¶åœ¨scorm cloudçš„ç«™ç‚¹ä¸‹ï¼Œå­˜å‚¨çš„æ•°æ®ç­‰äºæ˜¯åœ¨ã€<a href="https://cloud.scorm.com/">https://cloud.scorm.com</a> + <a href="https://abc.abcã€‘çš„ç«™ç‚¹ä¸Š,è¿™ä¸ªæ—¶å€™æ–°å¼€tabé¡µè®¿é—®dnaæˆ–è€…å…¶ä»–é¡µé¢,å®é™…æ˜¯æ‹¿ä¸åˆ°ã€https//abc.abc%E3%80%91%E8%BF%99%E4%B8%AA%E7%BC%93%E5%AD%98%E4%B8%8B%E7%9A%84%E6%95%B0%E6%8D%AE%E7%9A%84%E3%80%82">https://abc.abcã€‘çš„ç«™ç‚¹ä¸Šï¼Œè¿™ä¸ªæ—¶å€™æ–°å¼€tabé¡µè®¿é—®DNAæˆ–è€…å…¶ä»–é¡µé¢ï¼Œå®é™…æ˜¯æ‹¿ä¸åˆ°ã€https://abc.abcã€‘è¿™ä¸ªç¼“å­˜ä¸‹çš„æ•°æ®çš„ã€‚</a></p><p>æ‰€ä»¥æ­¤æ¬¡æŠ¥éšœçš„åŸå› åŸºæœ¬å¦‚ä¸Šï¼Œæœ€è¿‘å‡ å¹´å…³äºç”¨æˆ·ä¿¡æ¯åœ¨æ³•å¾‹ä¿æŠ¤ä¸Šè¶Šæ¥è¶Šä¸¥æ ¼åŒ–ï¼Œå¯¹äºåº”ç”¨å¼€å‘æ¥è¯´ï¼Œéœ€è¦è·Ÿéšæ–°æŠ€æœ¯æˆ–å¹³å°çš„æœºåˆ¶åšä¸€äº›å¤„ç†æˆ–æŠ€æœ¯æ–¹æ¡ˆå‡çº§ã€‚</p><h2 id="å­˜å‚¨åˆ†åŒºçš„æŠ€æœ¯æ–¹æ¡ˆ"><a href="#å­˜å‚¨åˆ†åŒºçš„æŠ€æœ¯æ–¹æ¡ˆ" class="headerlink" title="å­˜å‚¨åˆ†åŒºçš„æŠ€æœ¯æ–¹æ¡ˆ"></a>å­˜å‚¨åˆ†åŒºçš„æŠ€æœ¯æ–¹æ¡ˆ</h2><h3 id="å®˜æ–¹æŠ€æœ¯æ–¹æ¡ˆ"><a href="#å®˜æ–¹æŠ€æœ¯æ–¹æ¡ˆ" class="headerlink" title="å®˜æ–¹æŠ€æœ¯æ–¹æ¡ˆ"></a>å®˜æ–¹æŠ€æœ¯æ–¹æ¡ˆ</h3><p>é’ˆå¯¹å­˜å‚¨åˆ†åŒºæ¥è¯´ï¼Œå¹¶ä¸æ˜¯é™åˆ¶äº†ä»¥åä»»ä½•æƒ…å†µä¸‹éƒ½ä¸èƒ½è·¨ç«™ç‚¹è®¿é—®æ•°æ®äº†ï¼Œè€Œæ˜¯æœ‰äº†æ–°çš„APIï¼šshare storageã€‚<br>é¡¾åæ€ä¹‰ï¼Œæ˜¯åœ¨ä¸åŒé¡¶çº§ç«™ç‚¹ä¸‹ï¼Œåˆ†äº«è‡ªå·±ç«™ç‚¹çš„æ•°æ®ç»™å…¶ä»–é¡¶çº§ç«™ç‚¹ä¸‹çš„ç›¸åŒç«™ç‚¹è®¿é—®ã€‚<br>å…·ä½“æ–‡æ¡£ï¼š<a href="https://github.com/WICG/shared-storage/blob/main/README.md#worklets-can-outlive-the-associated-document">https://github.com/WICG/shared-storage/blob/main/README.md#worklets-can-outlive-the-associated-document</a><br>ä½†ç”±äºæ˜¯æ–°æŠ€æœ¯ï¼Œç›®å‰æœªåœ¨é¡¹ç›®ä¸Šå»åšå°è¯•ï¼Œå¹¶ä¸”æ­¤APIåœ¨å¸‚é¢ä¸Šçš„æµè§ˆå™¨å¹¶ä¸é€šç”¨ï¼š<br>ï¼ˆå¯è§Chromeå’ŒEdgeä¸”åªæœ‰117å’Œ118æ‰æœ‰ï¼‰<br><img src="/img/blog/chrome/5.png" alt="img.png"></p><h3 id="åº”ç”¨ä¸Šçš„æŠ€æœ¯æ–¹æ¡ˆ"><a href="#åº”ç”¨ä¸Šçš„æŠ€æœ¯æ–¹æ¡ˆ" class="headerlink" title="åº”ç”¨ä¸Šçš„æŠ€æœ¯æ–¹æ¡ˆ"></a>åº”ç”¨ä¸Šçš„æŠ€æœ¯æ–¹æ¡ˆ</h3><p>å‡å¦‚åç«¯æœåŠ¡å·²æ”¯æŒtokenæœºåˆ¶ï¼Œåœ¨å¤§éƒ¨åˆ†åœºæ™¯ä¸‹å¯é€šè¿‡urlä¸­æ‹¼æ¥tokençš„æ–¹å¼æ¥è§£å†³é—®é¢˜ï¼›<br>æ²¡æœ‰tokenæœºåˆ¶ï¼Ÿemmmmâ€¦..</p><h2 id="å†™åœ¨ç»“å°¾ï¼š"><a href="#å†™åœ¨ç»“å°¾ï¼š" class="headerlink" title="å†™åœ¨ç»“å°¾ï¼š"></a>å†™åœ¨ç»“å°¾ï¼š</h2><p>Chromeæµè§ˆå™¨å‘ç‰ˆå†…å®¹åœ°å€ï¼š<br><a href="https://chromestatus.com/roadmap">https://chromestatus.com/roadmap</a><br><a href="https://chromestatus.com/features#milestone%3D118">https://chromestatus.com/features#milestone%3D118</a><br>å¦‚æœæœ‰åœ¨æœ¬æœˆæˆ–è€…æœ¬å‘¨æŠŠChromeå‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬çš„å°ä¼™ä¼´ï¼Œå¯ä»¥çœ‹ä¸‹å¯¹åº”çš„åº”ç”¨æ˜¯å¦éœ€è¦åšä¸€äº›å¤„ç†ï¼ˆä¸»è¦æ˜¯è¢«ç¬¬ä¸‰æ–¹ä½¿ç”¨iframeæ‰“å¡&amp;&amp;æ‰“å¼€æ–°tabçš„ç›¸åŒç«™ç‚¹ï¼‰ã€‚<br>ç”±äºæœ¬æ¬¡åªåœ¨Chromeä¸Šåšäº†æ–°æŠ€æœ¯äº†è§£ï¼Œå…¶ä»–å¦‚firefoxç­‰æµè§ˆå™¨ä¹Ÿè®¸ä¹Ÿæœ‰å„è‡ªçš„é™åˆ¶æˆ–æŠ€æœ¯å‡çº§ï¼Œå¦‚æœæœ‰å°ä¼™ä¼´åœ¨å¼€å‘æœŸé—´äº†è§£åˆ°æˆ–åº”ç”¨åˆ°äº†æ–°çš„æŠ€æœ¯ï¼Œå¯ä»¥åˆ†äº«ç»™å¤§å®¶ï¼Œå…±åŒå­¦ä¹ ï¼Œå…±åŒè¿›æ­¥~</p>]]></content>
    
    
    <categories>
      
      <category>Webå¼€å‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Chrome</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SCORMå…¥é—¨å­¦ä¹ è®°å½•</title>
    <link href="/2023/07/26/SCORM%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/"/>
    <url>/2023/07/26/SCORM%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/</url>
    
    <content type="html"><![CDATA[<p>SCORMæ–‡æ¡£ï¼š<a href="https://scorm.com/scorm-explained/technical-scorm/">https://scorm.com/scorm-explained/technical-scorm/</a></p><h2 id="1-SCORM1-2è§„èŒƒ"><a href="#1-SCORM1-2è§„èŒƒ" class="headerlink" title="1. SCORM1.2è§„èŒƒ"></a>1. SCORM1.2è§„èŒƒ</h2><p>SCORMæ˜¯â€Sharable Content Object Reference Modelï¼ˆå¯å…±äº«è¯¾ç¨‹å¯¹è±¡å‚è€ƒæ¨¡å‹ï¼‰â€çš„ç¼©å†™ï¼Œæ˜¯ç”±ADLç»„ç»‡æ‰€æ‹Ÿå®šçš„æ ‡å‡†ã€‚å·²ä½œä¸ºå…¨ä¸–ç•Œé€šç”¨çš„æ ‡å‡†è§„æ ¼ã€‚</p><h3 id="SCORMè§„å®šä¸€ä¸ªæ ‡å‡†çš„è¯¾ä»¶åŒ…åº”æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š"><a href="#SCORMè§„å®šä¸€ä¸ªæ ‡å‡†çš„è¯¾ä»¶åŒ…åº”æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š" class="headerlink" title="SCORMè§„å®šä¸€ä¸ªæ ‡å‡†çš„è¯¾ä»¶åŒ…åº”æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š"></a>SCORMè§„å®šä¸€ä¸ªæ ‡å‡†çš„è¯¾ä»¶åŒ…åº”æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š</h3><ul><li>æ‰“åŒ…æˆZIPæ–‡ä»¶ã€‚</li><li>åœ¨XMLæ–‡ä»¶ä¸­æè¿°ã€‚</li><li>é€šè¿‡JavaScriptè¿›è¡Œé€šä¿¡ã€‚</li><li>ä½¿ç”¨XMLä¸­çš„è§„åˆ™æ’åºã€‚</li></ul><h3 id="SCORMç”±ä¸‰ä¸ªå­è§„èŒƒç»„æˆ"><a href="#SCORMç”±ä¸‰ä¸ªå­è§„èŒƒç»„æˆ" class="headerlink" title="SCORMç”±ä¸‰ä¸ªå­è§„èŒƒç»„æˆ"></a>SCORMç”±ä¸‰ä¸ªå­è§„èŒƒç»„æˆ</h3><ul><li>CAMï¼ˆContent Aggregation Modelï¼‰ï¼š æŒ‡å®šåº”å¦‚ä½•æ‰“åŒ…å’Œæè¿°å†…å®¹ã€‚å®ƒä¸»è¦åŸºäºXMLã€‚</li><li>Run-Timeï¼šæŒ‡å®šå†…å®¹åº”è¯¥å¦‚ä½•å¯åŠ¨ä»¥åŠå®ƒå¦‚ä½•ä¸LMSé€šä¿¡ã€‚å®ƒä¸»è¦åŸºäºECMAScriptï¼ˆJavaScriptï¼‰ã€‚</li><li>Sequencingï¼šæŒ‡å®šå­¦ä¹ è€…å¦‚ä½•åœ¨è¯¾ç¨‹çš„å„ä¸ªéƒ¨åˆ†ï¼ˆSCOsï¼‰ä¹‹é—´å¯¼èˆªã€‚å®ƒç”±ä¸€ç»„ç”¨XMLç¼–å†™çš„è§„åˆ™å’Œå±æ€§å®šä¹‰ã€‚</li></ul><p><img src="/img/blog/scorm/1.png" alt="img.png"></p><h2 id="2-LMSçš„APIä¸DATA-MODEL"><a href="#2-LMSçš„APIä¸DATA-MODEL" class="headerlink" title="2. LMSçš„APIä¸DATA MODEL"></a>2. LMSçš„APIä¸DATA MODEL</h2><p>APIåœ°å€ï¼š<a href="https://scorm.com/scorm-explained/technical-scorm/run-time/run-time-reference/#section-2">https://scorm.com/scorm-explained/technical-scorm/run-time/run-time-reference/#section-2</a></p><p>å¸¸ç”¨APIæ•´ç†ï¼š</p><div class="code-wrapper"><pre><code class="hljs text">LMSInitialize å¼€å§‹ä¸LMSçš„é€šä¿¡ä¼šè¯ã€‚ LMSFinish ç»“æŸä¸LMSçš„é€šä¿¡ä¼šè¯ã€‚ LMSGetValue å­˜å€¼ LMSSetValue å–å€¼ LMSCommit å‘LMSæŒ‡ç¤ºæ‰€æœ‰æ•°æ®éƒ½åº”ä¿å­˜ LMSGetLastError è¿”å›ä¸Šæ¬¡APIè°ƒç”¨å¯¼è‡´çš„é”™è¯¯ä»£ç ã€‚ LMSGetErrorString è¿”å›æè¿°æŒ‡å®šé”™è¯¯ä»£ç çš„çŸ­å­—ç¬¦ä¸²ã€‚ LMSGetDiagnostic è¿”å›æœ‰å…³ä¸Šæ¬¡å‘ç”Ÿçš„é”™è¯¯çš„è¯¦ç»†ä¿¡æ¯ã€‚</code></pre></div><p>DATA MODEL:ä¸€ç»„å®šä¹‰çš„æ•°æ®ç‚¹ï¼Œå†…å®¹å’ŒLMSå¯ä»¥é€šè¿‡SCORM APIäº¤æ¢.ç¤ºä¾‹æ•°æ®æ¨¡å‹å…ƒç´ åŒ…æ‹¬â€œcmi.score.scaledâ€ï¼ˆä»¥è®°å½•ç”¨æˆ·çš„æµ‹è¯•åˆ†æ•°ï¼‰å’Œâ€œcmi.completion_statusâ€ä»¥è®°å½•å­¦ä¹ è€…ä½•æ—¶/æ˜¯å¦å·²ç»å®Œæˆä¸€äº›è®­ç»ƒã€‚<br>å¸¸ç”¨MODELæ•´ç†ï¼š</p><ul><li>cmi.core._children - returns â€œstudent_id, student_name, lesson_location, credit, lesson_status, entry, score, total_time, exit, session_timeâ€</li><li>cmi.core.student_id</li><li>cmi.core.student_name</li><li>cmi.core.lesson_location - 255 char string typically used for bookmarking</li><li>cmi.core.credit - returns â€œno-creditâ€ or â€œcreditâ€</li><li>cmi.core.lesson_status - indicates SCO completion - returns one of the following: â€œpassedâ€, â€œcompletedâ€, â€œfailedâ€, â€œincompleteâ€, â€œbrowsedâ€, or â€œnot attemptedâ€</li><li>cmi.core.entry - returns â€œab-initioâ€, â€œresumeâ€, or â€œâ€</li><li>cmi.core.score._children - returns â€œraw, min, maxâ€</li><li>cmi.core.score.raw - the raw score value</li><li>cmi.core.score.max - the maximum possible score - if not set, assumed 100</li><li>cmi.core.score.min - the minimum possible score - if not set, assumed 0</li><li>cmi.core.total_time - returns the sum of all a learnerâ€™s session times</li><li>cmi.core.lesson_mode - returns â€œbrowseâ€, â€œnormalâ€, or â€œreviewâ€</li><li>cmi.suspend_data - 4096 char string usually used for progress data</li><li>cmi.launch_data - 4096 char string used to pass data to the SCO on launch from the LMS</li><li>cmi.objectives._children - returns â€œid, score, statusâ€</li><li>cmi.objectives._count - returns the number of objectives currently stored for this SCO.</li><li>cmi.objectives.n.id - returns the objective identifier where â€œnâ€ is the objective number</li><li>cmi.objectives.n.score._children - returns â€œraw, min, max â€œ</li><li>cmi.objectives.n.score.raw - the raw objective score value</li><li>cmi.objectives.n.score.min - The minimum possible score - if not set, assumed 0</li><li>cmi.objectives.n.score.max - the maximum possible objective score - if not set, assumed 100</li><li>cmi.objectives.n.status - indicates if the learner has completed the objective - returns one of the following: â€œpassedâ€, â€œcompletedâ€, â€œfailedâ€, â€œincompleteâ€, â€œbrowsedâ€, or â€œnot attemptedâ€</li><li>cmi.core.exit</li><li>cmi.core.session_time</li></ul><h2 id="3-imsmanifest-xml"><a href="#3-imsmanifest-xml" class="headerlink" title="3. imsmanifest.xml"></a>3. imsmanifest.xml</h2><p>åœ¨SCORM 1.2è§„èŒƒä¸­æ¯ä¸ªè¯¾ç¨‹å¿…é¡»åŒ…å«ä¸€ä¸ªimsmanifest.xmlæ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶å‘LMSæè¿°å…¶ç»“æ„å’Œå…¶ä»–ç‰¹å¾ã€‚<br>æ¸…å•æ–‡ä»¶ç”±4ä¸ªä¸»è¦éƒ¨åˆ†ç»„æˆï¼š</p><ol><li>Meta-dataï¼šå†…å®¹åŒ…æ•°æ®æè¿°çš„å…¥å£ã€‚</li><li>Organizationsï¼šåŒ…å«äº†å­¦ä¹ èµ„æºçš„ç»„ç»‡æˆ–å†…å®¹ç»“æ„ã€‚</li><li>Resourcesï¼šåœ¨å†…å®¹åŒ…ä¸­å®šä¹‰çš„å­¦ä¹ èµ„æºï¼ˆé›†åˆï¼‰ã€‚</li><li>SubManifestï¼šåµŒå¥—çš„å­æ¸…å•ã€‚</li></ol><p>åœ¨â€imsmanifest.xmlâ€æ–‡ä»¶ä¸­ï¼Œä½¿ç”¨XMLæ ‡è®°è¯­è¨€æ¥å®šä¹‰è¯¾ä»¶åŒ…çš„ç»“æ„å’Œå†…å®¹ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨çš„XMLæ ‡è®°å’Œå…ƒç´ ï¼š</p><ul><li><code>&lt;manifest&gt;</code>ï¼šæ ¹å…ƒç´ ï¼Œå®šä¹‰è¯¾ä»¶åŒ…çš„åŸºæœ¬ä¿¡æ¯ã€‚</li><li><code>&lt;metadata&gt;</code>ï¼šå…ƒæ•°æ®å…ƒç´ ï¼Œç”¨äºæè¿°è¯¾ä»¶åŒ…çš„ç›¸å…³ä¿¡æ¯ï¼Œå¦‚æ ‡é¢˜ã€ä½œè€…ã€æè¿°ç­‰ã€‚</li><li><code>&lt;organizations&gt;</code>ï¼šç»„ç»‡å…ƒç´ ï¼Œç”¨äºå®šä¹‰è¯¾ç¨‹çš„ç»„ç»‡ç»“æ„å’Œç« èŠ‚ã€‚</li><li><code>&lt;resources&gt;</code>ï¼šèµ„æºå…ƒç´ ï¼Œç”¨äºå®šä¹‰è¯¾ç¨‹æ‰€éœ€çš„èµ„æºæ–‡ä»¶ï¼Œå¦‚HTMLã€CSSã€JavaScriptç­‰ã€‚</li><li><code>&lt;item&gt;</code>ï¼šé¡¹ç›®å…ƒç´ ï¼Œç”¨äºå®šä¹‰è¯¾ç¨‹çš„ç« èŠ‚å’Œå­ç« èŠ‚ã€‚</li><li><code>&lt;file&gt;</code>ï¼šæ–‡ä»¶å…ƒç´ ï¼Œç”¨äºå¼•ç”¨è¯¾ç¨‹æ‰€éœ€çš„èµ„æºæ–‡ä»¶ã€‚<br>ä¸‹é¢æ˜¯ä¸€ä¸ªåŸºç¡€çš„æ¨¡æ¿ç¤ºä¾‹ï¼š</li></ul><div class="code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">manifest</span> <span class="hljs-attr">identifier</span>=<span class="hljs-string">&quot;com.scorm.manifesttemplates.scorm12&quot;</span> <span class="hljs-attr">version</span>=<span class="hljs-string">&quot;1&quot;</span></span><span class="hljs-tag">       <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.imsproject.org/xsd/imscp_rootv1p1p2&quot;</span></span><span class="hljs-tag">       <span class="hljs-attr">xmlns:adlcp</span>=<span class="hljs-string">&quot;http://www.adlnet.org/xsd/adlcp_rootv1p2&quot;</span></span><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.imsproject.org/xsd/imscp_rootv1p1p2 imscp_rootv1p1p2.xsd</span></span><span class="hljs-string"><span class="hljs-tag">                           http://www.imsglobal.org/xsd/imsmd_rootv1p2p1 imsmd_rootv1p2p1.xsd</span></span><span class="hljs-string"><span class="hljs-tag">                           http://www.adlnet.org/xsd/adlcp_rootv1p2 adlcp_rootv1p2.xsd&quot;</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">metadata</span>&gt;</span>                <span class="hljs-tag">&lt;<span class="hljs-name">schema</span>&gt;</span>ADL SCORM<span class="hljs-tag">&lt;/<span class="hljs-name">schema</span>&gt;</span>                <span class="hljs-tag">&lt;<span class="hljs-name">schemaversion</span>&gt;</span>1.2<span class="hljs-tag">&lt;/<span class="hljs-name">schemaversion</span>&gt;</span>        <span class="hljs-tag">&lt;/<span class="hljs-name">metadata</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">organizations</span> <span class="hljs-attr">default</span>=<span class="hljs-string">&quot;B0&quot;</span>&gt;</span>                <span class="hljs-tag">&lt;<span class="hljs-name">organization</span> <span class="hljs-attr">identifier</span>=<span class="hljs-string">&quot;B0&quot;</span>&gt;</span>                        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>æ¼”ç¤ºæ–‡ä»¶<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>                         <span class="hljs-tag">&lt;<span class="hljs-name">item</span> <span class="hljs-attr">identifier</span>=<span class="hljs-string">&quot;i1&quot;</span> <span class="hljs-attr">identifierref</span>=<span class="hljs-string">&quot;r1&quot;</span>&gt;</span>                                <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Title<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>                         <span class="hljs-tag">&lt;/<span class="hljs-name">item</span>&gt;</span>                <span class="hljs-tag">&lt;/<span class="hljs-name">organization</span>&gt;</span>        <span class="hljs-tag">&lt;/<span class="hljs-name">organizations</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">resources</span>&gt;</span>                <span class="hljs-tag">&lt;<span class="hljs-name">resource</span> <span class="hljs-attr">identifier</span>=<span class="hljs-string">&quot;r1&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;webcontent&quot;</span> <span class="hljs-attr">adlcp:scormtype</span>=<span class="hljs-string">&quot;sco&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;index.html&quot;</span>&gt;</span>                        <span class="hljs-tag">&lt;<span class="hljs-name">file</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;index.html&quot;</span> /&gt;</span>                <span class="hljs-tag">&lt;/<span class="hljs-name">resource</span>&gt;</span>        <span class="hljs-tag">&lt;/<span class="hljs-name">resources</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">manifest</span>&gt;</span></code></pre></div><p>ç»„ç»‡ç»“æ„ç¤ºä¾‹ï¼š</p><p><img src="/img/blog/scorm/2.png" alt="img.png"></p><p>æœ‰å¿…è¦ç‰¹åˆ«æŒ‡å‡ºçš„æ˜¯ä»¥ä¸‹å‡ ç‚¹ï¼š</p><ol><li>å„èŠ‚ç‚¹çš„â€œidentifierâ€å±æ€§åº”è¯¥å”¯ä¸€ï¼›</li><li>â€œorganizationsâ€èŠ‚ç‚¹ä¸‹å¯ä»¥æœ‰å¤šä¸ªâ€œorganizationâ€èŠ‚ç‚¹ï¼Œé€šè¿‡â€œorganizationsâ€çš„â€œdefaultâ€å±æ€§æŒ‡å‘æŸä¸€ä¸ª</li><li>â€œorganizationâ€æ¥å†³å®šä½¿ç”¨é‚£ä¸€ç§ç»„ç»‡ç»“æ„ï¼›</li><li>â€œorganizationâ€ä¸‹çš„â€œitemâ€èŠ‚ç‚¹æ˜¯å¯ä»¥åµŒå¥—çš„ï¼Œç”¨æ¥å®ç°è¯¾ç¨‹ç« èŠ‚çš„å±‚æ¬¡å…³ç³»ï¼›</li><li>â€œitemâ€èŠ‚ç‚¹çš„â€œidentifierrefâ€å±æ€§çš„å€¼ä¸ºæŸä¸€ä¸ªâ€œresourceâ€èŠ‚ç‚¹çš„â€œidentifierâ€å±æ€§çš„å€¼ï¼Œä½¿æŸä¸€ç« èŠ‚ä¸è¯¾ç¨‹èµ„æºå»ºç«‹å¯¹åº”å…³ç³»ï¼›</li><li>â€œtitleâ€èŠ‚ç‚¹é‡Œçš„æ–‡æœ¬æ˜¯è¯¾ç¨‹ä»¥åŠç« èŠ‚åœ¨å¹³å°ä¸Šçš„æ˜¾ç¤ºæ–‡æœ¬ï¼›</li><li>â€œresourceâ€èŠ‚ç‚¹çš„â€œhrefâ€å±æ€§æ˜¯è¯¾ç¨‹èµ„æºçš„å­˜å‚¨ä½ç½®ã€‚</li></ol><h2 id="4-åˆ¶ä½œä¸€ä¸ªSCORMè¯¾ä»¶"><a href="#4-åˆ¶ä½œä¸€ä¸ªSCORMè¯¾ä»¶" class="headerlink" title="4. åˆ¶ä½œä¸€ä¸ªSCORMè¯¾ä»¶"></a>4. åˆ¶ä½œä¸€ä¸ªSCORMè¯¾ä»¶</h2><p>åŸºç¡€ç¤ºä¾‹ï¼š<br><img src="/img/blog/scorm/3.png" alt="img.png"></p><h2 id="5-SCORMæ‰“åŒ…æµç¨‹å›¾"><a href="#5-SCORMæ‰“åŒ…æµç¨‹å›¾" class="headerlink" title="5. SCORMæ‰“åŒ…æµç¨‹å›¾"></a>5. SCORMæ‰“åŒ…æµç¨‹å›¾</h2><p><img src="/img/blog/scorm/4.png" alt="img.png"></p>]]></content>
    
    
    <categories>
      
      <category>Webå¼€å‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>SCORM</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>WEBæŠ€æœ¯è°ƒç ”ï¼šã€è§†é¢‘åˆ‡ç‰‡+æ’­æ”¾ã€‘</title>
    <link href="/2023/03/12/WEB%E6%8A%80%E6%9C%AF%E8%B0%83%E7%A0%94%E8%A7%86%E9%A2%91%E5%88%87%E7%89%87%E6%92%AD%E6%94%BE/"/>
    <url>/2023/03/12/WEB%E6%8A%80%E6%9C%AF%E8%B0%83%E7%A0%94%E8%A7%86%E9%A2%91%E5%88%87%E7%89%87%E6%92%AD%E6%94%BE/</url>
    
    <content type="html"><![CDATA[<h2 id="æºç åœ°å€"><a href="#æºç åœ°å€" class="headerlink" title="æºç åœ°å€"></a>æºç åœ°å€</h2><p>æ­¤æ¬¡è°ƒç ”çš„æºä»£ç å·²æ”¾åœ¨GitHubï¼Œæ¬¢è¿è®¿é—®ï¼š<br><a href="https://github.com/wenkil/video-m3u8-demo">https://github.com/wenkil/video-m3u8-demo</a></p><h2 id="è°ƒç ”èƒŒæ™¯"><a href="#è°ƒç ”èƒŒæ™¯" class="headerlink" title="è°ƒç ”èƒŒæ™¯"></a>è°ƒç ”èƒŒæ™¯</h2><p>SCORMè§†é¢‘åŒ…é€šå¸¸ä¼šå°†ä¸€äº›å›¾ç‰‡ã€è§†é¢‘èµ„æºç›´æ¥æ”¾åˆ°åŒ…å†…æä¾›ï¼Œä»å…¬å¸äº§å“è§’åº¦éœ€è¦è€ƒè™‘å†…å®¹çš„ä¼ æ’­å’Œä½¿ç”¨ï¼Œæ¯”å¦‚ç›´æ¥æ‰“å¼€åŒ…å†…æ‰¾åˆ°è§†é¢‘çš„mp4æ–‡ä»¶ï¼Œè‡ªå·±å­˜ä¸‹æ¥æˆ–è½¬æ’­ç»™å…¶ä»–äººçš„æ“ä½œæ˜¯ä¸è¢«å…è®¸çš„ï¼Œè¿™æ—¶å€™éœ€è¦å€ŸåŠ©ä¸€äº›æ‰‹æ®µæ¥åšä¸€å±‚é˜²æŠ¤ï¼Œé˜²æ­¢ç”¨æˆ·ç›´æ¥æ‹¿èµ°mp4æ ¼å¼çš„è§†é¢‘èµ„æºã€‚<br>æœ¬æ–‡ä¸»è¦å€ŸåŠ©ffmpegè§†é¢‘åˆ†å‰²æŠ€æœ¯æ¥å±•ç¤ºå¦‚ä½•å°†ä¸€ä¸ªMP4è§†é¢‘åˆ†å‰²ä¸ºM3U8åˆ—è¡¨æ ¼å¼çš„è§†é¢‘åˆ‡ç‰‡ï¼Œå¹¶åœ¨å‰ç«¯é¡¹ç›®é‡ŒåŠ è½½è¿™äº›åˆ†å‰²åçš„åˆ‡ç‰‡è¿›è¡Œæ’­æ”¾ï¼›</p><p>(ä»¥ä¸‹å†…å®¹æ¥è‡ªæ™ºè°±æ¸…è¨€)</p><blockquote><p>ä»€ä¹ˆæ˜¯FFmpegï¼Ÿ</p></blockquote><blockquote><p>FFmpegæ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œå®ƒåŒ…å«äº†ä¸€å¥—å®Œæ•´çš„è·¨å¹³å°çš„éŸ³è§†é¢‘å¤„ç†å·¥å…·å’Œåº“ï¼Œç”¨äºå¤„ç†éŸ³é¢‘å’Œè§†é¢‘æ–‡ä»¶ã€‚FFmpegæ˜¯ç”±FFmpegç¤¾åŒºç»´æŠ¤çš„ï¼Œå®ƒæ”¯æŒå¤§é‡çš„éŸ³è§†é¢‘æ ¼å¼ï¼Œå¹¶ä¸”å¯ä»¥åœ¨å¤šç§æ“ä½œç³»ç»Ÿä¸Šè¿è¡Œï¼ŒåŒ…æ‹¬Windowsã€macOSå’ŒLinuxç­‰ã€‚<br>FFmpegçš„ä¸»è¦ç»„ä»¶åŒ…æ‹¬ï¼š<br>FFmpegå‘½ä»¤è¡Œå·¥å…·ï¼šè¿™æ˜¯FFmpegä¸­æœ€å¸¸ç”¨çš„éƒ¨åˆ†ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªå‘½ä»¤è¡Œç•Œé¢ï¼Œå…è®¸ç”¨æˆ·æ‰§è¡Œå„ç§éŸ³è§†é¢‘å¤„ç†ä»»åŠ¡ï¼Œå¦‚è½¬æ¢æ ¼å¼ã€å‹ç¼©ã€è§£ç ã€ç¼–ç ã€å‰ªè¾‘ã€è¿‡æ»¤å’Œæ’­æ”¾ç­‰ã€‚<br>libavcodecï¼šè¿™æ˜¯FFmpegçš„æ ¸å¿ƒåº“ä¹‹ä¸€ï¼Œæä¾›äº†éŸ³è§†é¢‘ç¼–è§£ç åŠŸèƒ½ã€‚å®ƒåŒ…å«äº†å¤§é‡çš„ç¼–è§£ç å™¨ï¼Œå¯ä»¥å¤„ç†å‡ ä¹æ‰€æœ‰çš„éŸ³è§†é¢‘æ ¼å¼ã€‚<br>libavformatï¼šè¿™ä¸ªåº“è´Ÿè´£å¤„ç†å„ç§éŸ³è§†é¢‘å°è£…æ ¼å¼ï¼Œå¦‚MP4ã€MKVã€OGGç­‰ã€‚å®ƒæä¾›äº†è¯»å–å’Œå†™å…¥è¿™äº›æ ¼å¼çš„èƒ½åŠ›ã€‚<br>libavutilï¼šè¿™æ˜¯ä¸€ä¸ªåŒ…å«äº†ä¸€äº›é€šç”¨å·¥å…·å’Œå®ç”¨ç¨‹åºçš„åº“ï¼Œå¦‚æ•°å­¦è®¡ç®—ã€æ•°æ®ç»“æ„ã€éšæœºæ•°ç”Ÿæˆå™¨ç­‰ã€‚<br>libavfilterï¼šè¿™ä¸ªåº“æä¾›äº†ä¸€ç³»åˆ—çš„éŸ³è§†é¢‘è¿‡æ»¤å™¨ï¼Œå¯ä»¥ç”¨æ¥å¤„ç†éŸ³è§†é¢‘æµï¼Œå¦‚åº”ç”¨æ•ˆæœã€è¿›è¡Œè½¬æ¢ç­‰ã€‚<br>libavresampleï¼šè¿™ä¸ªåº“ç”¨äºéŸ³è§†é¢‘é‡‡æ ·ç‡è½¬æ¢å’Œé€šé“å¸ƒå±€è½¬æ¢ã€‚<br>FFmpegçš„ä½¿ç”¨éå¸¸å¹¿æ³›ï¼Œå®ƒè¢«ç”¨äºå„ç§åœºåˆï¼Œå¦‚è§†é¢‘å‰ªè¾‘ã€è§†é¢‘è½¬æ¢ã€éŸ³é¢‘å¤„ç†ã€æµåª’ä½“ä¼ è¾“ç­‰ã€‚FFmpegçš„å‘½ä»¤è¡Œå·¥å…·æ˜¯é€šè¿‡æ‰§è¡Œä¸€ç³»åˆ—çš„FFmpegåº“æ¥å®Œæˆçš„ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªç®€æ´çš„å‘½ä»¤è¡Œç•Œé¢ï¼Œå…è®¸ç”¨æˆ·é€šè¿‡è¾“å…¥å‘½ä»¤æ¥æ‰§è¡Œå„ç§æ“ä½œã€‚<br>FFmpegçš„å®‰è£…é€šå¸¸æ¶‰åŠåˆ°ä¸‹è½½æºä»£ç æˆ–é¢„ç¼–è¯‘çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œç„¶åå°†å…¶å®‰è£…åˆ°ç³»ç»Ÿä¸­ã€‚åœ¨å®‰è£…åï¼Œä½ å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨FFmpegçš„å‘½ä»¤æ¥æ‰§è¡Œå„ç§éŸ³è§†é¢‘å¤„ç†ä»»åŠ¡ã€‚<br>ä¾‹å¦‚ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨çš„FFmpegå‘½ä»¤ï¼š<br>ffmpeg -i input.mp4 output.aviï¼šå°†è¾“å…¥æ–‡ä»¶input.mp4è½¬æ¢ä¸ºoutput.aviã€‚<br>ffmpeg -i input.mp3 output.wavï¼šå°†è¾“å…¥æ–‡ä»¶input.mp3è½¬æ¢ä¸ºoutput.wavã€‚<br>ffmpeg -i input.mp4 -ss 00:00:10 -to 00:00:20 -c copy output.mp4ï¼šä»input.mp4ä¸­å‰ªè¾‘å‡ºä»ç¬¬10ç§’åˆ°ç¬¬20ç§’çš„ç‰‡æ®µï¼Œå¹¶ä¿å­˜ä¸ºoutput.mp4ã€‚<br>FFmpegæ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„å·¥å…·ï¼Œå¯¹äºéŸ³è§†é¢‘å¤„ç†æ¥è¯´æ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„èµ„æºã€‚ç”±äºå…¶å¼€æºå’Œè·¨å¹³å°çš„ç‰¹æ€§ï¼Œå®ƒè¢«å¹¿æ³›åº”ç”¨äºä¸ªäººå’Œå•†ä¸šé¡¹ç›®ä¸­ã€‚</p></blockquote><blockquote><p>ä»€ä¹ˆæ˜¯M3U8ï¼Ÿ</p></blockquote><blockquote><p>M3U8æ˜¯ä¸€ç§ç”¨äºå¤šåª’ä½“æ’­æ”¾åˆ—è¡¨çš„æ ¼å¼ï¼Œå®ƒå¹¿æ³›ç”¨äºç½‘ç»œæµåª’ä½“ä¸­ï¼Œå°¤å…¶æ˜¯ç”¨äºè§†é¢‘æµå’ŒéŸ³é¢‘æµã€‚M3U8æ’­æ”¾åˆ—è¡¨å¯ä»¥åŒ…å«å¤šä¸ªåª’ä½“æ–‡ä»¶çš„URLï¼Œè¿™äº›æ–‡ä»¶æŒ‰é¡ºåºæ’åˆ—ï¼Œä»¥ä¾¿äºæ’­æ”¾å™¨èƒ½å¤Ÿä¾æ¬¡æ’­æ”¾å®ƒä»¬ã€‚M3U8æ ¼å¼æ”¯æŒè§†é¢‘æµåª’ä½“æœåŠ¡ä¸­çš„æ— ç¼æ’­æ”¾ï¼Œå³è§†é¢‘åœ¨ç¼“å†²æœŸé—´å¯ä»¥æ’­æ”¾ä¸‹ä¸€æ®µçš„é¢„åŠ è½½å†…å®¹ï¼Œä»è€Œç»™ç”¨æˆ·å¸¦æ¥å¹³æ»‘çš„è§‚çœ‹ä½“éªŒã€‚<br>M3U8æ’­æ”¾åˆ—è¡¨çš„æ–‡ä»¶æ‰©å±•åé€šå¸¸æ˜¯.m3u8ã€‚è¿™ç§æ ¼å¼çš„æ’­æ”¾åˆ—è¡¨å¯ä»¥åŒ…å«ä»¥ä¸‹ä¿¡æ¯ï¼š<br>åª’ä½“æ–‡ä»¶çš„URLï¼šæ’­æ”¾åˆ—è¡¨ä¸­åŒ…å«æ¯ä¸ªåª’ä½“æ–‡ä»¶çš„URLï¼Œè¿™äº›URLæŒ‡å‘å­˜å‚¨åª’ä½“æ–‡ä»¶çš„æœåŠ¡å™¨åœ°å€ã€‚<br>åª’ä½“æ–‡ä»¶çš„æ’­æ”¾é¡ºåºï¼šæ’­æ”¾åˆ—è¡¨ä¸­æ–‡ä»¶çš„æ’åˆ—é¡ºåºæŒ‡ç¤ºäº†åª’ä½“æ–‡ä»¶åº”æŒ‰ç…§è¯¥é¡ºåºæ’­æ”¾ã€‚<br>åª’ä½“æ–‡ä»¶çš„æŒç»­æ—¶é—´ï¼šæœ‰æ—¶æ’­æ”¾åˆ—è¡¨ä¸­è¿˜åŒ…å«åª’ä½“çš„æŒç»­æ—¶é—´ä¿¡æ¯ï¼Œä»¥ä¾¿äºæ’­æ”¾å™¨è¿›è¡Œæ—¶é—´åŒæ­¥å’Œæ’­æ”¾è¿›åº¦æ§åˆ¶ã€‚<br>M3U8æ ¼å¼æœ‰ä¸¤ç§ä¸»è¦çš„å˜ä½“ï¼š<br>åŸºæœ¬M3U8ï¼šè¿™ç§å˜ä½“ä¸åŒ…å«å…³äºåª’ä½“æ–‡ä»¶ç‰‡æ®µçš„ä»»ä½•ä¿¡æ¯ï¼Œåªæ˜¯ç®€å•åœ°åˆ—å‡ºäº†åª’ä½“æ–‡ä»¶çš„URLã€‚åŸºæœ¬M3U8é€‚ç”¨äºä¸æ”¯æŒæµåª’ä½“çš„æ—§ç‰ˆæ’­æ”¾å™¨ã€‚<br>æ‰©å±•M3U8ï¼šè¿™ç§å˜ä½“åŒ…å«äº†å…³äºåª’ä½“æ–‡ä»¶ç‰‡æ®µçš„æ›´å¤šä¿¡æ¯ï¼Œå¦‚ç‰‡æ®µçš„æŒç»­æ—¶é—´å’Œbyterangeï¼Œè¿™æœ‰åŠ©äºæ’­æ”¾å™¨æ›´æœ‰æ•ˆåœ°å¤„ç†å’Œæ’­æ”¾è§†é¢‘æµã€‚æ‰©å±•M3U8é€šå¸¸ç”¨äºç°ä»£æµåª’ä½“æœåŠ¡ä¸­ã€‚<br>åœ¨è§†é¢‘æµåª’ä½“æœåŠ¡ä¸­ï¼Œè§†é¢‘æ–‡ä»¶é€šå¸¸ä¼šè¢«åˆ†å‰²æˆå¤šä¸ªè¾ƒå°çš„ç‰‡æ®µï¼Œæ¯ä¸ªç‰‡æ®µæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„åª’ä½“æ–‡ä»¶ã€‚M3U8æ’­æ”¾åˆ—è¡¨åŒ…å«äº†è¿™äº›ç‰‡æ®µçš„URLï¼Œå¹¶ä¸”æŒ‰ç…§æ’­æ”¾é¡ºåºæ’åˆ—ã€‚å½“ç”¨æˆ·è¯·æ±‚æ’­æ”¾è§†é¢‘æ—¶ï¼Œæµåª’ä½“æœåŠ¡å™¨ä¼šæ ¹æ®M3U8æ’­æ”¾åˆ—è¡¨ä¾æ¬¡ä¼ è¾“è¿™äº›ç‰‡æ®µï¼Œå¹¶åœ¨æ’­æ”¾å™¨ä¸­æŒ‰é¡ºåºæ’­æ”¾å®ƒä»¬ã€‚ç”±äºM3U8æ”¯æŒæ— ç¼æ’­æ”¾ï¼Œè§†é¢‘æµåœ¨ç¼“å†²æœŸé—´å¯ä»¥æ’­æ”¾ä¸‹ä¸€æ®µçš„é¢„åŠ è½½å†…å®¹ï¼Œä»è€Œå®ç°å¹³æ»‘çš„è§‚çœ‹ä½“éªŒï¼Œæ— éœ€ç­‰å¾…æ•´ä¸ªè§†é¢‘ä¸‹è½½å®Œæˆã€‚<br>M3U8æ ¼å¼åœ¨ç›´æ’­è§†é¢‘å’ŒVoDï¼ˆè§†é¢‘ç‚¹æ’­ï¼‰æœåŠ¡ä¸­å¾—åˆ°äº†å¹¿æ³›åº”ç”¨ï¼Œå› ä¸ºå®ƒèƒ½å¤Ÿé€‚åº”ä¸åŒçš„ç½‘ç»œæ¡ä»¶å’Œè®¾å¤‡æ€§èƒ½ï¼Œæä¾›ç¨³å®šå¯é çš„æµåª’ä½“æœåŠ¡ã€‚</p></blockquote><h2 id="è§†é¢‘åˆ‡ç‰‡ä»£ç "><a href="#è§†é¢‘åˆ‡ç‰‡ä»£ç " class="headerlink" title="è§†é¢‘åˆ‡ç‰‡ä»£ç "></a>è§†é¢‘åˆ‡ç‰‡ä»£ç </h2><p>é¦–å…ˆåˆ›å»ºä¸€ä¸ªnodeé¡¹ç›®ï¼Œæä¾›ä¸€ä¸ªapiï¼Œå¯ä»¥å°†æä¾›çš„è§†é¢‘è¿›è¡Œåˆ†å‰²ï¼Œä¸»è¦å€ŸåŠ©FFmpeg çš„npmåº“ï¼Œæ‰§è¡ŒFFmpeg å‘½ä»¤è¿›è¡Œåˆ†å‰²ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;express&#x27;</span>);<span class="hljs-keyword">const</span> router = express.Router();<span class="hljs-keyword">const</span> multer = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;multer&#x27;</span>);<span class="hljs-keyword">const</span> ffmpeg = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;ffmpeg-static&#x27;</span>);<span class="hljs-keyword">const</span> &#123; exec &#125; = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;child_process&#x27;</span>);<span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;path&#x27;</span>);<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;fs&#x27;</span>);<span class="hljs-comment">// è®¾ç½®ä¸Šä¼ ç›®å½•å’Œæ–‡ä»¶å</span><span class="hljs-keyword">const</span> storage = multer.diskStorage(&#123;    <span class="hljs-attr">destination</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req, file, cb</span>) </span>&#123;        <span class="hljs-keyword">const</span> uploadDir = path.join(__dirname, <span class="hljs-string">&#x27;../uploads/&#x27;</span>);        <span class="hljs-comment">// ç¡®ä¿ä¸Šä¼ ç›®å½•å­˜åœ¨</span>        <span class="hljs-keyword">if</span> (!fs.existsSync(uploadDir))&#123;            fs.mkdirSync(uploadDir, &#123; <span class="hljs-attr">recursive</span>: <span class="hljs-literal">true</span> &#125;);        &#125;        cb(<span class="hljs-literal">null</span>, uploadDir);    &#125;,    <span class="hljs-attr">filename</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req, file, cb</span>) </span>&#123;        cb(<span class="hljs-literal">null</span>, file.originalname);    &#125;&#125;);<span class="hljs-keyword">const</span> upload = multer(&#123; <span class="hljs-attr">storage</span>: storage &#125;);<span class="hljs-comment">// å®šä¹‰ä¸Šä¼ å’Œè½¬æ¢è§†é¢‘çš„è·¯ç”±</span>router.post(<span class="hljs-string">&#x27;/upload&#x27;</span>, upload.single(<span class="hljs-string">&#x27;video&#x27;</span>), <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;    <span class="hljs-keyword">const</span> videoPath = req.file.path;    <span class="hljs-keyword">const</span> outputDir = path.join(__dirname, <span class="hljs-string">&#x27;../uploads/&#x27;</span>, path.parse(videoPath).name);    <span class="hljs-keyword">if</span> (!fs.existsSync(outputDir))&#123;        fs.mkdirSync(outputDir, &#123; <span class="hljs-attr">recursive</span>: <span class="hljs-literal">true</span> &#125;);    &#125;    <span class="hljs-keyword">const</span> outputPath = path.join(outputDir, <span class="hljs-string">&#x27;video.m3u8&#x27;</span>);    <span class="hljs-comment">// ä½¿ç”¨FFmpegè½¬åŒ–è§†é¢‘</span>    <span class="hljs-keyword">const</span> ffmpegCommand = $&#123;ffmpeg&#125; -i <span class="hljs-string">&quot;$&#123;videoPath&#125;&quot;</span> -codec: copy -start_number <span class="hljs-number">0</span> -hls_time <span class="hljs-number">10</span> -hls_list_size <span class="hljs-number">0</span> -f hls <span class="hljs-string">&quot;$&#123;outputPath&#125;&quot;</span>;    exec(ffmpegCommand, <span class="hljs-function">(<span class="hljs-params">error, stdout, stderr</span>) =&gt;</span> &#123;        <span class="hljs-keyword">if</span> (error) &#123;            <span class="hljs-built_in">console</span>.error(exec error: $&#123;error&#125;);            <span class="hljs-keyword">return</span> res.status(<span class="hljs-number">500</span>).send(&#123; <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;è§†é¢‘è½¬æ¢å¤±è´¥ï¼š&#x27;</span>+error &#125;);        &#125;        <span class="hljs-built_in">console</span>.log(stdout: $&#123;stdout&#125;);        <span class="hljs-built_in">console</span>.error(stderr: $&#123;stderr&#125;);        res.send(&#123; <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;è§†é¢‘è½¬æ¢å®Œæˆï¼Œè½¬æ¢ç›®å½•ï¼š&#x27;</span>, <span class="hljs-attr">path</span>: outputPath &#125;);    &#125;);&#125;);router.get(<span class="hljs-string">&#x27;/convert-videos&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;    <span class="hljs-keyword">const</span> videosDir = path.join(__dirname, <span class="hljs-string">&#x27;../videos&#x27;</span>); <span class="hljs-comment">// è§†é¢‘æ–‡ä»¶æ‰€åœ¨ç›®å½•</span>    fs.readdir(videosDir, <span class="hljs-function">(<span class="hljs-params">err, files</span>) =&gt;</span> &#123;        <span class="hljs-keyword">if</span> (err) &#123;            <span class="hljs-built_in">console</span>.error(<span class="hljs-built_in">Error</span> reading directory: $&#123;err&#125;);            <span class="hljs-keyword">return</span> res.status(<span class="hljs-number">500</span>).send(&#123; <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;è¯»å–æ–‡ä»¶å¤¹å¤±è´¥ï¼ï¼ï¼&#x27;</span> &#125;);        &#125;        <span class="hljs-comment">// è¿‡æ»¤å‡ºè§†é¢‘æ–‡ä»¶ï¼Œè¿™é‡Œç®€å•ä»¥.mp4ä¸ºä¾‹</span>        <span class="hljs-keyword">const</span> videoFiles = files.filter(<span class="hljs-function"><span class="hljs-params">file</span> =&gt;</span> file.endsWith(<span class="hljs-string">&#x27;.mp4&#x27;</span>));        <span class="hljs-keyword">if</span> (videoFiles.length === <span class="hljs-number">0</span>) &#123;            <span class="hljs-keyword">return</span> res.send(&#123; <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;æ²¡æœ‰æ‰¾åˆ°mp4æ–‡ä»¶ï¼ï¼ï¼&#x27;</span> &#125;);        &#125;        videoFiles.forEach(<span class="hljs-function"><span class="hljs-params">videoName</span> =&gt;</span> &#123;            <span class="hljs-keyword">const</span> videoPath = path.join(videosDir, videoName);            <span class="hljs-keyword">const</span> outputDir = path.join(videosDir, <span class="hljs-string">&#x27;output&#x27;</span>, path.parse(videoName).name);            <span class="hljs-keyword">if</span> (!fs.existsSync(outputDir)) &#123;                fs.mkdirSync(outputDir, &#123; <span class="hljs-attr">recursive</span>: <span class="hljs-literal">true</span> &#125;);            &#125;            <span class="hljs-keyword">const</span> outputPath = path.join(outputDir, <span class="hljs-string">&#x27;video.m3u8&#x27;</span>);            <span class="hljs-comment">// ä½¿ç”¨FFmpegè½¬åŒ–è§†é¢‘</span>            <span class="hljs-keyword">const</span> ffmpegCommand = $&#123;ffmpeg&#125; -i <span class="hljs-string">&quot;$&#123;videoPath&#125;&quot;</span> -codec: copy -start_number <span class="hljs-number">0</span> -hls_time <span class="hljs-number">10</span> -hls_list_size <span class="hljs-number">0</span> -f hls <span class="hljs-string">&quot;$&#123;outputPath&#125;&quot;</span>;            exec(ffmpegCommand, <span class="hljs-function">(<span class="hljs-params">error, stdout, stderr</span>) =&gt;</span> &#123;                <span class="hljs-keyword">if</span> (error) &#123;                    <span class="hljs-built_in">console</span>.error(<span class="hljs-built_in">Error</span> converting $&#123;videoName&#125;: $&#123;error&#125;);                    <span class="hljs-keyword">return</span>; <span class="hljs-comment">// åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ç®€å•åœ°è¿”å›ï¼Œä½ å¯èƒ½æƒ³è¦å¤„ç†é”™è¯¯æˆ–è®°å½•åˆ°é”™è¯¯æ—¥å¿—</span>                &#125;                <span class="hljs-built_in">console</span>.log($&#123;videoName&#125; conversion succeeded.);            &#125;);        &#125;);        res.send(&#123; <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;videosæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰è§†é¢‘è½¬æ¢å®Œæˆï¼~~&#x27;</span> &#125;);    &#125;);&#125;);<span class="hljs-built_in">module</span>.exports = router;</code></pre></div><p>è¿™é‡Œçš„jsé‡Œæä¾›äº†ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§ä¸Šä¼ çš„æ–¹å¼ï¼Œä¸€ç§æ˜¯ç›´æ¥éå†æŒ‡å®šæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰è§†é¢‘è€Œä¸éœ€è¦ä¸Šä¼ çš„æ–¹å¼ï¼›</p><p>æ–°å»ºä¸€ä¸ªupload.html</p><div class="code-wrapper"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Upload Video<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Upload a Video<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;/upload&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;post&quot;</span> <span class="hljs-attr">enctype</span>=<span class="hljs-string">&quot;multipart/form-data&quot;</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;file&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;video&quot;</span> <span class="hljs-attr">accept</span>=<span class="hljs-string">&quot;video/*&quot;</span> <span class="hljs-attr">required</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span>&gt;</span>Upload Video<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></code></pre></div><p>å¯åŠ¨nodeé¡¹ç›®ï¼Œåœ¨æµè§ˆå™¨æ‰“å¼€ï¼š<a href="http://localhost:xxxx/upload.html">http://localhost:xxxx/upload.html</a> ï¼Œ å±•ç¤ºå¦‚ä¸‹:<br>ç‚¹å‡»é€‰æ‹©æ–‡ä»¶ï¼Œä¸Šä¼ è§†é¢‘ï¼Œç„¶åç‚¹å‡»Upload VideoæŒ‰é’®ï¼Œè¿™æ—¶å€™ä¼šè‡ªåŠ¨æ‰§è¡Œrouter.post(â€˜/uploadâ€™) çš„æ–¹æ³•ï¼Œä¸»è¦é€»è¾‘ä¸ºè¯»å–è§†é¢‘æ–‡ä»¶åç§°ï¼Œå¹¶é€šè¿‡ffmpegå‘½ä»¤æ‰§è¡Œåˆ†å‰²ï¼Œè¯¥å‘½ä»¤ä¼šè‡ªåŠ¨æŠŠåˆ†å‰²åçš„æ–‡ä»¶è¾“å‡ºåˆ°æŒ‡å®šç›®å½•ï¼Œå³uploadsæ–‡ä»¶å¤¹ä¸‹ï¼Œé¡µé¢å±•ç¤ºå¦‚å›¾ï¼š<br><img src="/img/blog/m3u8/1.png" alt="img.png"></p><p>åœ¨æ–‡ä»¶å¤¹çš„ç›®å½•å±•ç¤ºå¦‚ä¸‹ï¼šä¼šæœ‰ä¸€ä¸ªxxx.m3u8å’Œnä¸ªtsæ ¼å¼çš„æ–‡ä»¶:<br><img src="/img/blog/m3u8/2.png" alt="img.png"><br>æ³¨ï¼šä»£ç ä¸­/convert-videos çš„æ–¹æ³•é€»è¾‘ç›¸åŒï¼Œä¼šå°†æŒ‡å®šæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰è§†é¢‘è‡ªåŠ¨è½¬æ¢å®Œæˆï¼Œå¹¶æŒ‰ç…§è§†é¢‘æ–‡ä»¶åè¿›è¡Œå•ç‹¬çš„ç›®å½•ä¿å­˜ï¼›<br><img src="/img/blog/m3u8/3.png" alt="img.png"></p><h2 id="å‰ç«¯æ’­æ”¾m3u8æ ¼å¼çš„è§†é¢‘"><a href="#å‰ç«¯æ’­æ”¾m3u8æ ¼å¼çš„è§†é¢‘" class="headerlink" title="å‰ç«¯æ’­æ”¾m3u8æ ¼å¼çš„è§†é¢‘"></a>å‰ç«¯æ’­æ”¾m3u8æ ¼å¼çš„è§†é¢‘</h2><p>æ¥ä¸‹æ¥æ‹¿åˆ°è¿™äº›åˆ‡ç‰‡çš„è§†é¢‘ï¼Œåœ¨å‰ç«¯é¡¹ç›®é‡Œè¿›è¡Œä¿å­˜ï¼›<br>å‰ç«¯æ’­æ”¾ä¸»è¦ä½¿ç”¨äº†hls.jsè¿™ä¸ªåº“ï¼ŒGitHubåœ°å€ï¼š<a href="https://github.com/video-dev/hls.js">https://github.com/video-dev/hls.js</a><br>ä»¥ä¸‹æ˜¯ä½¿ç”¨æ–¹å¼ï¼ŒåŠæ’­æ”¾æ•ˆæœï¼š</p><p>videoList.vueï¼š</p><div class="code-wrapper"><pre><code class="hljs vue">&lt;template&gt;  &lt;div class=&quot;flex-column-list&quot;&gt;    &lt;button class=&quot;video-btn&quot; v-for=&quot;(video, index) in videos&quot; :key=&quot;index&quot; @click=&quot;selectVideo(video)&quot;&gt;      &#123;&#123; video.name &#125;&#125;    &lt;/button&gt;  &lt;/div&gt;&lt;/template&gt;&lt;script setup&gt;const videos = [  &#123;name: &#x27;Video 1&#x27;, url: &#x27;/video1/video.m3u8&#x27;&#125;,  &#123;name: &#x27;Video 2&#x27;, url: &#x27;/video2/video.m3u8&#x27;&#125;,  &#123;name: &#x27;Video 3&#x27;, url: &#x27;/video3/video.m3u8&#x27;&#125;,  &#123;name: &#x27;Video 4&#x27;, url: &#x27;/video4/video.m3u8&#x27;&#125;,  &#123;name: &#x27;Video 5&#x27;, url: &#x27;/video5/video.m3u8&#x27;&#125;,];const emit = defineEmits([&#x27;update:videoUrl&#x27;]);const selectVideo = (video) =&gt; &#123;  emit(&#x27;update:videoUrl&#x27;, video.url);&#125;;&lt;/script&gt;&lt;style scoped&gt;.flex-column-list &#123;  display: flex;  flex-direction: column;  flex-wrap: nowrap;&#125;.video-btn &#123;  margin: 5px;&#125;&lt;/style&gt;</code></pre></div><p>videoPlayer.vueï¼š</p><div class="code-wrapper"><pre><code class="hljs vue">&lt;template&gt;  &lt;video ref=&quot;videoElement&quot; controls style=&quot;width: 100%; max-width: 640px;&quot;&gt;&lt;/video&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; ref, watchEffect &#125; from &#x27;vue&#x27;;import Hls from &#x27;hls.js&#x27;;// Props to receive the selected video URLconst props = defineProps(&#123;  videoUrl: String,&#125;);const videoElement = ref(null);watchEffect(() =&gt; &#123;  if (!props.videoUrl) return;  if (Hls.isSupported()) &#123;    console.log(&#x27;HLS supported&#x27;);    const hls = new Hls();    hls.loadSource(props.videoUrl);    hls.attachMedia(videoElement.value);    hls.on(Hls.Events.MANIFEST_PARSED, function() &#123;      // videoElement.value.play();    &#125;);  &#125; else if (videoElement.value.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) &#123;    console.log(&#x27;ä¸æ”¯æŒHLS&#x27;);    videoElement.value.src = props.videoUrl;    videoElement.value.addEventListener(&#x27;loadedmetadata&#x27;, () =&gt; &#123;      // videoElement.value.play();    &#125;);  &#125;&#125;);&lt;/script&gt;</code></pre></div><p>ç‚¹å‡»å¯¹åº”çš„videoæŒ‰é’®ï¼Œä¼šåŠ è½½å¯¹åº”çš„è§†é¢‘æŒ‡å‘çš„åœ°å€ï¼Œç‚¹å‡»è§†é¢‘çš„æ’­æ”¾æŒ‰é’®å³å¯æ­£å¸¸æ’­æ”¾åˆ‡ç‰‡çš„è§†é¢‘ï¼Œæ•ˆæœå¦‚å›¾:<br><img src="/img/blog/m3u8/4.png" alt="img.png"></p>]]></content>
    
    
    <categories>
      
      <category>Webå¼€å‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Vue</tag>
      
      <tag>FFmpeg</tag>
      
      <tag>M3U8</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>è™šæ‹Ÿæœºé¦–æ¬¡å®‰è£…centosç³»ç»Ÿå¸¸è§é—®é¢˜</title>
    <link href="/2022/05/10/%E8%99%9A%E6%8B%9F%E6%9C%BA%E9%A6%96%E6%AC%A1%E5%AE%89%E8%A3%85centos%E7%B3%BB%E7%BB%9F%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/"/>
    <url>/2022/05/10/%E8%99%9A%E6%8B%9F%E6%9C%BA%E9%A6%96%E6%AC%A1%E5%AE%89%E8%A3%85centos%E7%B3%BB%E7%BB%9F%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<p>è™šæ‹Ÿæœºé¦–æ¬¡å®‰è£…æ‰“å¼€centos ç³»ç»Ÿåçš„ä¸€äº›å¸¸è§é—®é¢˜</p><h3 id="1-æ— æ³•æŸ¥çœ‹ip"><a href="#1-æ— æ³•æŸ¥çœ‹ip" class="headerlink" title="1.æ— æ³•æŸ¥çœ‹ip"></a>1.æ— æ³•æŸ¥çœ‹ip</h3><p>ï¼ˆåŸå› ï¼šç½‘ç»œé…ç½®æ²¡æ‰“å¼€ï¼‰</p><div class="code-wrapper"><pre><code class="hljs awk">vi <span class="hljs-regexp">/etc/</span>sysconfig<span class="hljs-regexp">/network-scripts/i</span>fcfg-ens33ONBOOT=no  æ”¹ä¸º ONBOOT=yes</code></pre></div><p>ç„¶åè¿è¡Œservice network restart  é‡å¯ç½‘ç»œ</p><p>è¿™ä¸ªæ—¶å€™ä½¿ç”¨ ping <a href="http://www.baidu.com/">www.baidu.com</a> æµ‹è¯•ç½‘ç»œæ˜¯å¦å¯ç”¨</p><p>ç„¶åè¾“å…¥å‘½ä»¤ ip addr show å³å¯æŸ¥çœ‹ï¼š<br><img src="/img/blog/linux/ip.png"></p><p>è¿™ä¸ªè§£å†³åŠæ³•è¿˜æœ‰ä¸€ç§æ˜¯åœ¨è™šæ‹Ÿæœºé‡Œåˆšå¼€å§‹å®‰è£…centosç³»ç»Ÿæ—¶é€‰æ‹©æ‰“å¼€ç½‘ç»œå¼€å…³ï¼š<br><img src="/img/blog/linux/centos1.png"><br><img src="/img/blog/linux/centos2.png"><br><img src="/img/blog/linux/centos3.png"></p><h3 id="2-yum-å‘½ä»¤æŠ¥é”™"><a href="#2-yum-å‘½ä»¤æŠ¥é”™" class="headerlink" title="2.yum å‘½ä»¤æŠ¥é”™"></a>2.yum å‘½ä»¤æŠ¥é”™</h3><p><img src="/img/blog/linux/yum_error.jpg"></p><div class="code-wrapper"><pre><code class="hljs awk">é¦–å…ˆè¿›å…¥åˆ°<span class="hljs-regexp">/etc/yum</span>.repos.dcd <span class="hljs-regexp">/etc/yum</span>.repos.dç„¶åè¿è¡Œä»¥ä¸‹å‘½ä»¤mv <span class="hljs-regexp">/etc/yum</span>.repos.d<span class="hljs-regexp">/CentOS-Base.repo /</span>etc<span class="hljs-regexp">/yum.repos.d/</span>CentOS-Base.repo.backupå†æ›´æ¢repoæºcurl -o <span class="hljs-regexp">/etc/yum</span>.repos.d<span class="hljs-regexp">/CentOS-Base.repo http:/</span><span class="hljs-regexp">/mirrors.aliyun.com/</span>repo/Centos-<span class="hljs-number">7</span>.repoå†è¿è¡Œyum clean allè¿™æ—¶å€™å°±å¯ä»¥ä½¿ç”¨yum install xxx äº†</code></pre></div>]]></content>
    
    
    
    <tags>
      
      <tag>Linux</tag>
      
      <tag>Centos</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Centosç³»ç»ŸåŸºç¡€ç¯å¢ƒæ­å»ºï¼šéƒ¨ç½²nodeé¡¹ç›®å’Œå‰ç«¯é¡¹ç›®</title>
    <link href="/2022/05/10/Centos%E7%B3%BB%E7%BB%9F%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%EF%BC%9A%E9%83%A8%E7%BD%B2node%E9%A1%B9%E7%9B%AE%E5%92%8C%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE/"/>
    <url>/2022/05/10/Centos%E7%B3%BB%E7%BB%9F%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%EF%BC%9A%E9%83%A8%E7%BD%B2node%E9%A1%B9%E7%9B%AE%E5%92%8C%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE/</url>
    
    <content type="html"><![CDATA[<h3 id="Nginx-å®‰è£…"><a href="#Nginx-å®‰è£…" class="headerlink" title="Nginx å®‰è£…"></a>Nginx å®‰è£…</h3><p>å…ˆå®‰è£…ä¾èµ–ï¼š</p><div class="code-wrapper"><pre><code class="hljs awk"><span class="hljs-regexp">//</span>å®‰è£…gccyum install -y gcc-c++<span class="hljs-regexp">//</span>å®‰è£…PCRE pcre-develyum install -y pcre pcre-devel<span class="hljs-regexp">//</span>å®‰è£…zlibyum install -y zlib zlib-devel <span class="hljs-regexp">//</span>å®‰è£…Open SSLyum install -y openssl openssl-devel</code></pre></div><p>ç„¶ååˆ›å»ºnginxç›®å½•</p><div class="code-wrapper"><pre><code class="hljs awk"><span class="hljs-regexp">//</span>è¿›å…¥usr/localç›®å½•cd <span class="hljs-regexp">/usr/</span>local <span class="hljs-regexp">//</span>åˆ›å»ºnginxç›®å½•mkdir nginxcd nginx</code></pre></div><p>ä¸‹è½½å®‰è£…æ­¥éª¤</p><div class="code-wrapper"><pre><code class="hljs awk"><span class="hljs-regexp">//</span>ä¸‹è½½taråŒ…wget http:<span class="hljs-regexp">//</span>nginx.org<span class="hljs-regexp">/download/</span>nginx-<span class="hljs-number">1.20</span>.<span class="hljs-number">2</span>.tar.gz <span class="hljs-regexp">//</span>è§£å‹tartar -xvf nginx-<span class="hljs-number">1.20</span>.<span class="hljs-number">2</span>.tar.gzcd <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/nginx/</span>nginx-<span class="hljs-number">1.20</span>.<span class="hljs-number">2</span> <span class="hljs-regexp">//</span>æ‰§è¡Œå‘½ä»¤./configure <span class="hljs-regexp">//</span>æ‰§è¡Œmakeå‘½ä»¤(è¦æ˜¯æ‰§è¡Œä¸æˆåŠŸè¯·æ£€æŸ¥æœ€å¼€å§‹å®‰è£…çš„å››ä¸ªä¾èµ–æœ‰æ²¡æœ‰å®‰è£…æˆåŠŸ)make <span class="hljs-regexp">//</span>æ‰§è¡Œmake installå‘½ä»¤make install</code></pre></div><p>å¯åŠ¨nginx</p><div class="code-wrapper"><pre><code class="hljs awk"><span class="hljs-regexp">//</span>è¿›å…¥<span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/nginx/</span>sbinç›®å½•ï¼Œè¾“å…¥./nginxå³å¯å¯åŠ¨nginx./nginxç„¶åè¾“å…¥curl http:<span class="hljs-regexp">//</span><span class="hljs-number">127.0</span>.<span class="hljs-number">0.1</span>:<span class="hljs-number">80</span>å¯ä»¥çœ‹åˆ°ä¸€ä¸ªnginxé»˜è®¤å±•ç¤ºçš„htmlé¡µé¢ï¼ˆæˆ–è€…é€šè¿‡å…¬ç½‘ipç›´æ¥è®¿é—®äº‘æœåŠ¡å™¨çš„<span class="hljs-number">80</span>ç«¯å£ï¼šhttp:<span class="hljs-regexp">//</span>xxx.xx.xx.xx:<span class="hljs-number">80</span>ï¼‰</code></pre></div><p><img src="/img/blog/nginx/nginx_success.png"></p><p>å¸¸ç”¨å‘½ä»¤</p><div class="code-wrapper"><pre><code class="hljs awk"><span class="hljs-regexp">//</span>å…³é—­nginx.<span class="hljs-regexp">/nginx -s quit  æˆ–è€… ./</span>nginx -s stop<span class="hljs-regexp">//</span>æ”¹åŠ¨é…ç½®æ–‡ä»¶åå…ˆæ£€æŸ¥é…ç½®æ–‡ä»¶æ˜¯å¦æœ‰è¯¯<span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/nginx/</span>sbin<span class="hljs-regexp">/nginx -t -c /u</span>sr<span class="hljs-regexp">/local/</span>nginx<span class="hljs-regexp">/conf/</span>nginx.conf <span class="hljs-regexp">//</span>å†é‡å¯nginx<span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/nginx/</span>sbin/nginx -s reload <span class="hljs-regexp">//</span>æŸ¥çœ‹nginxè¿›ç¨‹ps -ef|grep nginx</code></pre></div><h3 id="Node-å®‰è£…"><a href="#Node-å®‰è£…" class="headerlink" title="Node å®‰è£…"></a>Node å®‰è£…</h3><div class="code-wrapper"><pre><code class="hljs crmsh">ä¸‹è½½<span class="hljs-keyword">node</span><span class="hljs-title">åŒ…</span><span class="hljs-title">wget</span> https://nodejs.org/dist/v14.<span class="hljs-number">15.3</span>/<span class="hljs-keyword">node</span><span class="hljs-title">-v14</span>.<span class="hljs-number">15.3</span>-linux-x64.tar.xzè§£å‹<span class="hljs-keyword">node</span><span class="hljs-title">åŒ…</span><span class="hljs-title">xz</span> -d <span class="hljs-keyword">node</span><span class="hljs-title">*.xz</span>tar xvf <span class="hljs-keyword">node</span><span class="hljs-title">*.tar</span>mkdir /usr/local/<span class="hljs-keyword">node</span><span class="hljs-title">mv</span> ./<span class="hljs-keyword">node</span><span class="hljs-title">*/* /usr</span>/local/<span class="hljs-keyword">node</span><span class="hljs-title"></span></code></pre></div><p>å®‰è£…åè®¾ç½®å…¨å±€å‘½ä»¤</p><div class="code-wrapper"><pre><code class="hljs awk">ln -s <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/node/</span>bin<span class="hljs-regexp">/node /u</span>sr<span class="hljs-regexp">/local/</span>bin/nodeln -s <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/node/</span>bin<span class="hljs-regexp">/npm /u</span>sr<span class="hljs-regexp">/local/</span>bin/npm</code></pre></div><h3 id="Pm2-å®‰è£…"><a href="#Pm2-å®‰è£…" class="headerlink" title="Pm2 å®‰è£…"></a>Pm2 å®‰è£…</h3><div class="code-wrapper"><pre><code class="hljs awk">å®‰è£…pm2 npm install pm2 -gè®¾ç½®å…¨å±€å‘½ä»¤ln -s <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/node/</span>bin<span class="hljs-regexp">/pm2 /u</span>sr<span class="hljs-regexp">/local/</span>bin/pm2</code></pre></div><h3 id="å®‰è£…å®Œæˆ"><a href="#å®‰è£…å®Œæˆ" class="headerlink" title="å®‰è£…å®Œæˆ"></a>å®‰è£…å®Œæˆ</h3><p>æŸ¥çœ‹æ¯ä¸ªç‰ˆæœ¬å·ï¼Œå¯ä»¥æ­£å¸¸è¾“å‡º<br><img src="/img/blog/nginx/install_success.png"></p><p>å‚è€ƒåšå®¢ï¼š<a href="https://www.cnblogs.com/cainiaoyige1/p/15785911.html">https://www.cnblogs.com/cainiaoyige1/p/15785911.html</a></p>]]></content>
    
    
    <categories>
      
      <category>Webå¼€å‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
      <tag>Centos</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰ç«¯å­¦ä¹ ç½‘ç«™æ•´ç†(æŒç»­æ›´æ–°...)</title>
    <link href="/2021/11/24/%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E7%BD%91%E7%AB%99%E5%8F%8A%E5%B8%B8%E7%94%A8%E7%BD%91%E7%AB%99%E6%95%B4%E7%90%86/"/>
    <url>/2021/11/24/%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E7%BD%91%E7%AB%99%E5%8F%8A%E5%B8%B8%E7%94%A8%E7%BD%91%E7%AB%99%E6%95%B4%E7%90%86/</url>
    
    <content type="html"><![CDATA[<h3 id="åœ¨çº¿ä¹¦ç±æˆ–åšå®¢ï¼š"><a href="#åœ¨çº¿ä¹¦ç±æˆ–åšå®¢ï¼š" class="headerlink" title="åœ¨çº¿ä¹¦ç±æˆ–åšå®¢ï¼š"></a>åœ¨çº¿ä¹¦ç±æˆ–åšå®¢ï¼š</h3><p>Githubä¹¦ç±æ±‡æ€»ï¼š<a href="https://github.com/itdevbooks/pdf">https://github.com/itdevbooks/pdf</a></p><p>â€‹ä¹¦æ ˆï¼š<a href="https://www.bookstack.cn/">https://www.bookstack.cn/</a> </p><p>â€‹æ·±å…¥æµ…å‡ºWebpack ï¼š <a href="http://webpack.wuhaolin.cn/">http://webpack.wuhaolin.cn/</a></p><p>â€‹å‰ç«¯ç¬”è®°ï¼š </p><p>â€‹    <a href="https://www.kancloud.cn/surahe/front-end-notebook/781957">https://www.kancloud.cn/surahe/front-end-notebook/781957</a></p><p>â€‹    <a href="https://webbj97.github.io/summary/">https://webbj97.github.io/summary/</a></p><p>â€‹å‰ç«¯ä¹¦ç±æ±‡æ€»ï¼š <a href="https://f2edocs.com/books/#">https://f2edocs.com/books/#</a></p><p>â€‹Vueç»„ä»¶é€šä¿¡å…¨æ­ç§˜ï¼š<a href="https://juejin.cn/post/6844903702411608072#heading-14">https://juejin.cn/post/6844903702411608072#heading-14</a></p><p>â€‹å‰ç«¯é¢è¯•é¢˜ï¼š<a href="https://hzfe.github.io/awesome-interview/book1/browser-cross-origin">https://hzfe.github.io/awesome-interview/book1/browser-cross-origin</a></p><p>â€‹Nodeç¤¾åŒºï¼š<a href="https://cnodejs.org/getstart">https://cnodejs.org/getstart</a></p><p>â€‹ä¸ƒå¤©å­¦ä¼šNodejsï¼š<a href="http://nqdeng.github.io/7-days-nodejs/">http://nqdeng.github.io/7-days-nodejs/</a></p><p>â€‹Nodeå…¥é—¨ï¼š<a href="https://cnodejs.org/getstart">https://cnodejs.org/getstart</a></p><p>â€‹Githubä¸Šçš„é«˜åˆ†é¡¹ç›®æ±‡æ€»ï¼š<a href="https://github.com/kon9chunkit/GitHub-Chinese-Top-Charts">https://github.com/kon9chunkit/GitHub-Chinese-Top-Charts</a></p><p>â€‹vueåœ¨çº¿å­¦ä¹ ï¼š<a href="https://www.kancloud.cn/cyyspring/vuejs/936385">https://www.kancloud.cn/cyyspring/vuejs/936385</a></p><p>â€‹Vueæºç åˆ†æï¼š<br>    <a href="http://caibaojian.com.cn/vue-design/art/">http://caibaojian.com.cn/vue-design/art/</a><br>    <a href="https://ustbhuangyi.github.io/vue-analysis/v2/prepare/">https://ustbhuangyi.github.io/vue-analysis/v2/prepare/</a><br>    <a href="http://caibaojian.com.cn/vue-analysis/">http://caibaojian.com.cn/vue-analysis/</a></p><p>â€‹ES6åœ¨çº¿æ–‡æ¡£ï¼š<a href="http://caibaojian.com.cn/es6/">http://caibaojian.com.cn/es6/</a></p><p>â€‹webå¼€å‘çŸ¥è¯†æ±‡æ€»åŠé¢è¯•ï¼š<a href="http://caibaojian.com.cn/interview-map/">http://caibaojian.com.cn/interview-map/</a></p><p>â€‹</p>]]></content>
    
    
    <categories>
      
      <category>éšç¬”</category>
      
    </categories>
    
    
    <tags>
      
      <tag>éšç¬”</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Object.definePropertyçš„åŸºæœ¬ä½¿ç”¨</title>
    <link href="/2021/11/19/Object-defineProperty%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/"/>
    <url>/2021/11/19/Object-defineProperty%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<h3 id="å¦‚ä½•å®ç°ä¸€ä¸ªå¯¹è±¡å±æ€§ç›‘å¬ï¼Ÿ"><a href="#å¦‚ä½•å®ç°ä¸€ä¸ªå¯¹è±¡å±æ€§ç›‘å¬ï¼Ÿ" class="headerlink" title="å¦‚ä½•å®ç°ä¸€ä¸ªå¯¹è±¡å±æ€§ç›‘å¬ï¼Ÿ"></a>å¦‚ä½•å®ç°ä¸€ä¸ªå¯¹è±¡å±æ€§ç›‘å¬ï¼Ÿ</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> data = &#123;    <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>,    <span class="hljs-attr">b</span>: &#123;        <span class="hljs-attr">b1</span>: <span class="hljs-number">2</span>    &#125;,&#125;</code></pre></div><p>ä¸€ä¸ªç®€å•çš„å¯¹è±¡ï¼Œå¦‚ä½•åœ¨æ”¹å˜å®ƒçš„æŸä¸ªå±æ€§å€¼æ˜¯ç›‘å¬å¾—åˆ°å½“å‰å±æ€§,ä¾‹å¦‚ï¼š</p><p>å¯¹æŸä¸ªå…ƒç´ è¿›è¡Œæ“ä½œæ—¶æ‰“å°set xxx = xxx</p><div class="code-wrapper"><pre><code class="hljs javascript">data.a = <span class="hljs-string">&#x27;a&#x27;</span>  <span class="hljs-comment">//set a = a</span>data.b.b1 = <span class="hljs-string">&#x27;b&#x27;</span> <span class="hljs-comment">// set b1 = b</span></code></pre></div><h3 id="Object-defineProperty"><a href="#Object-defineProperty" class="headerlink" title="Object.defineProperty"></a>Object.defineProperty</h3><p>Object.defineProperty() æ–¹æ³•ä¼šç›´æ¥åœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šå®šä¹‰ä¸€ä¸ªæ–°å±æ€§ï¼Œæˆ–è€…ä¿®æ”¹ä¸€ä¸ªå¯¹è±¡çš„ç°æœ‰å±æ€§ï¼Œå¹¶è¿”å›æ­¤å¯¹è±¡ã€‚</p><div class="code-wrapper"><pre><code class="hljs reasonml">è¯­æ³•: <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Object</span>.</span></span>define<span class="hljs-constructor">Property(<span class="hljs-params">obj</span>, <span class="hljs-params">prop</span>, <span class="hljs-params">descriptor</span>)</span>å‚æ•°:objè¦å®šä¹‰å±æ€§çš„å¯¹è±¡ã€‚propè¦å®šä¹‰æˆ–ä¿®æ”¹çš„å±æ€§çš„åç§°æˆ– Symbol ã€‚descriptorè¦å®šä¹‰æˆ–ä¿®æ”¹çš„å±æ€§æè¿°ç¬¦ã€‚è¿”å›å€¼è¢«ä¼ é€’ç»™å‡½æ•°çš„å¯¹è±¡ã€‚</code></pre></div><h3 id="ä»£ç ç¤ºä¾‹"><a href="#ä»£ç ç¤ºä¾‹" class="headerlink" title="ä»£ç ç¤ºä¾‹"></a>ä»£ç ç¤ºä¾‹</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> data = &#123;    <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>&#125;<span class="hljs-built_in">Object</span>.defineProperty(data, <span class="hljs-string">&#x27;a&#x27;</span>, &#123;    <span class="hljs-attr">get</span>: <span class="hljs-function">() =&gt;</span> &#123;        <span class="hljs-keyword">return</span> value    &#125;,    <span class="hljs-attr">set</span>: <span class="hljs-function">(<span class="hljs-params">v</span>) =&gt;</span> &#123;        value = v        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`set a = <span class="hljs-subst">$&#123;v&#125;</span>`</span>);    &#125;&#125;)data.a = <span class="hljs-string">&#x27;a&#x27;</span></code></pre></div><p>æ­¤æ—¶è¿è¡Œåæ˜¾ç¤º</p><p><img src="/img/blog/js/o2.png"></p><h3 id="å¦‚ä½•ç›‘å¬å¤šå±‚å¯¹è±¡ï¼Ÿ"><a href="#å¦‚ä½•ç›‘å¬å¤šå±‚å¯¹è±¡ï¼Ÿ" class="headerlink" title="å¦‚ä½•ç›‘å¬å¤šå±‚å¯¹è±¡ï¼Ÿ"></a>å¦‚ä½•ç›‘å¬å¤šå±‚å¯¹è±¡ï¼Ÿ</h3><p>åˆå§‹åŒ–ä¸€ä¸ªå¤æ‚å¯¹è±¡ï¼š</p><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> data = &#123;    <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>,    <span class="hljs-attr">b</span>: &#123;        <span class="hljs-attr">b1</span>: <span class="hljs-number">2</span>,        <span class="hljs-attr">b2</span>: &#123;            <span class="hljs-attr">b31</span>: <span class="hljs-number">4</span>,            <span class="hljs-attr">b32</span>: <span class="hljs-number">5</span>        &#125;    &#125;,    <span class="hljs-attr">c</span>: <span class="hljs-number">3</span>&#125;</code></pre></div><p>å†™ä¸€ä¸ªæ–¹æ³•è¿›è¡Œéå†ï¼š</p><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">watcher</span>(<span class="hljs-params">obj</span>) </span>&#123;    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> obj !== <span class="hljs-string">&#x27;object&#x27;</span>) <span class="hljs-keyword">return</span>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> key <span class="hljs-keyword">in</span> obj) &#123;        observer(obj, key)    &#125;&#125;</code></pre></div><p>å°†ç›‘å¬å†™åˆ°ä¸€ä¸ªobserveræ–¹æ³•é‡Œï¼Œå¹¶åˆ¤æ–­è¯¥ä¸‹é¢çš„æ–¹æ³•æ˜¯å¦æ˜¯å¯¹è±¡ï¼Œæ˜¯çš„è¯é€’å½’è°ƒç”¨ç›‘å¬æ–¹æ³•ï¼Œå¯ä»¥ç›‘å¬æŸå¯¹è±¡ä¸‹çš„å±æ€§</p><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> observer = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">obj, prop</span>) </span>&#123;    <span class="hljs-keyword">if</span> (obj &amp;&amp; <span class="hljs-keyword">typeof</span> (obj[prop]) === <span class="hljs-string">&#x27;object&#x27;</span>) &#123;        watcher(obj[prop])    &#125;    <span class="hljs-keyword">var</span> value = obj[prop]    <span class="hljs-built_in">Object</span>.defineProperty(obj, prop, &#123;        <span class="hljs-attr">get</span>: <span class="hljs-function">() =&gt;</span> &#123;            <span class="hljs-keyword">return</span> value        &#125;,        <span class="hljs-attr">set</span>: <span class="hljs-function">(<span class="hljs-params">v</span>) =&gt;</span> &#123;            value = v            <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`set <span class="hljs-subst">$&#123;prop&#125;</span> = <span class="hljs-subst">$&#123;v&#125;</span>`</span>);        &#125;    &#125;)&#125;</code></pre></div><p>è¿è¡Œç»“æœå¦‚å›¾æ‰€ç¤ºï¼š</p><p><img src="/img/blog/js/o1.png"></p><h3 id="å®Œæ•´ä»£ç "><a href="#å®Œæ•´ä»£ç " class="headerlink" title="å®Œæ•´ä»£ç "></a>å®Œæ•´ä»£ç </h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> observer = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">obj, prop</span>) </span>&#123;    <span class="hljs-keyword">if</span> (obj &amp;&amp; <span class="hljs-keyword">typeof</span> (obj[prop]) === <span class="hljs-string">&#x27;object&#x27;</span>) &#123;        watcher(obj[prop])    &#125;    <span class="hljs-keyword">var</span> value = obj[prop]    <span class="hljs-built_in">Object</span>.defineProperty(obj, prop, &#123;        <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">true</span>,        <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span>,        <span class="hljs-attr">get</span>: <span class="hljs-function">() =&gt;</span> &#123;            <span class="hljs-keyword">return</span> value        &#125;,        <span class="hljs-attr">set</span>: <span class="hljs-function">(<span class="hljs-params">v</span>) =&gt;</span> &#123;            <span class="hljs-keyword">if</span> (v !== value) &#123;                value = v                watcher(v)                <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`set <span class="hljs-subst">$&#123;prop&#125;</span> = <span class="hljs-subst">$&#123;v&#125;</span>`</span>);            &#125;        &#125;    &#125;)&#125;<span class="hljs-keyword">var</span> data = &#123;    <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>,    <span class="hljs-attr">b</span>: &#123;        <span class="hljs-attr">b1</span>: <span class="hljs-number">2</span>,        <span class="hljs-attr">b2</span>: &#123;            <span class="hljs-attr">b31</span>: <span class="hljs-number">4</span>,            <span class="hljs-attr">b32</span>: <span class="hljs-number">5</span>        &#125;    &#125;,    <span class="hljs-attr">c</span>: <span class="hljs-number">3</span>&#125;<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">watcher</span>(<span class="hljs-params">obj</span>) </span>&#123;    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> obj !== <span class="hljs-string">&#x27;object&#x27;</span>) <span class="hljs-keyword">return</span>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> key <span class="hljs-keyword">in</span> obj) &#123;        observer(obj, key)    &#125;&#125;watcher(data)data.a = <span class="hljs-string">&#x27;a&#x27;</span>  <span class="hljs-comment">//set c = a</span>data.b.b1 = <span class="hljs-string">&#x27;b&#x27;</span><span class="hljs-comment">// set b1 = b</span>data.b.b2.b31 = <span class="hljs-string">&#x27;b3&#x27;</span><span class="hljs-comment">// set b3 = b3</span><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;data&#x27;</span>, data);</code></pre></div>]]></content>
    
    
    <categories>
      
      <category>ç¼–ç¨‹è¯­è¨€</category>
      
    </categories>
    
    
    <tags>
      
      <tag>JavaScript</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€è½¬è½½ã€‘ ä½¿ç”¨vue init  webpack åˆ›å»ºé¡¹ç›®ï¼Œæ‰“åŒ…ååœ¨ github.ioä¸Šæ— æ³•è¿è¡Œ</title>
    <link href="/2021/10/13/%E4%BD%BF%E7%94%A8vue-init-webpack-%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE%EF%BC%8C%E6%89%93%E5%8C%85%E5%90%8E%E5%9C%A8-github-io%E4%B8%8A%E6%97%A0%E6%B3%95%E8%BF%90%E8%A1%8C/"/>
    <url>/2021/10/13/%E4%BD%BF%E7%94%A8vue-init-webpack-%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE%EF%BC%8C%E6%89%93%E5%8C%85%E5%90%8E%E5%9C%A8-github-io%E4%B8%8A%E6%97%A0%E6%B3%95%E8%BF%90%E8%A1%8C/</url>
    
    <content type="html"><![CDATA[<p>å‚è€ƒåšå®¢ï¼š<a href="https://www.cnblogs.com/auto-ajax/p/14051141.html">https://www.cnblogs.com/auto-ajax/p/14051141.html</a></p><p>ä¿®æ”¹config.index</p><div class="code-wrapper"><pre><code class="hljs js">assetsPublicPath: <span class="hljs-string">&#x27;/&#x27;</span>,</code></pre></div><p>æ”¹ä¸º</p><div class="code-wrapper"><pre><code class="hljs js">assetsPublicPath: <span class="hljs-string">&#x27;./&#x27;</span>,</code></pre></div><p>ä¿®æ”¹webpack.prod.conf.js</p><p>åœ¨outputä¸‹å¢åŠ </p><div class="code-wrapper"><pre><code class="hljs js">publicPath:<span class="hljs-string">&#x27;./&#x27;</span></code></pre></div><p>ä¿®æ”¹utils.js<br>å¢åŠ ä»¥ä¸‹ä»£ç </p><div class="code-wrapper"><pre><code class="hljs js">publicPath:<span class="hljs-string">&#x27;../../&#x27;</span>,<span class="hljs-keyword">if</span> (options.extract) &#123;  <span class="hljs-keyword">return</span> ExtractTextPlugin.extract(&#123;    <span class="hljs-attr">publicPath</span>:<span class="hljs-string">&#x27;../../&#x27;</span>,    <span class="hljs-attr">use</span>: loaders,    <span class="hljs-attr">fallback</span>: <span class="hljs-string">&#x27;vue-style-loader&#x27;</span>  &#125;)&#125;</code></pre></div>]]></content>
    
    
    <categories>
      
      <category>Webå¼€å‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Vue</tag>
      
      <tag>Webpack</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Vue æ‹–é€‰è¡¨æ ¼: æ¨¡æ‹Ÿæ’ç­åŠŸèƒ½</title>
    <link href="/2021/10/12/vue-%E6%8B%96%E9%80%89%E8%A1%A8%E6%A0%BC-%E6%A8%A1%E6%8B%9F%E6%8E%92%E7%8F%AD%E5%8A%9F%E8%83%BD/"/>
    <url>/2021/10/12/vue-%E6%8B%96%E9%80%89%E8%A1%A8%E6%A0%BC-%E6%A8%A1%E6%8B%9F%E6%8E%92%E7%8F%AD%E5%8A%9F%E8%83%BD/</url>
    
    <content type="html"><![CDATA[<h3 id="æ¼”ç¤º"><a href="#æ¼”ç¤º" class="headerlink" title="æ¼”ç¤º"></a>æ¼”ç¤º</h3><h4 id="åœ¨çº¿è®¿é—®-https-wenkil-github-io-drag-table-demo-è¯·ä½¿ç”¨PCç«¯æ‰“å¼€"><a href="#åœ¨çº¿è®¿é—®-https-wenkil-github-io-drag-table-demo-è¯·ä½¿ç”¨PCç«¯æ‰“å¼€" class="headerlink" title="åœ¨çº¿è®¿é—®:   https://wenkil.github.io/drag_table_demo   (è¯·ä½¿ç”¨PCç«¯æ‰“å¼€)"></a>åœ¨çº¿è®¿é—®:   <a href="https://wenkil.github.io/drag_table_demo">https://wenkil.github.io/drag_table_demo</a>   (è¯·ä½¿ç”¨PCç«¯æ‰“å¼€)</h4><h4 id="é¢„è§ˆ"><a href="#é¢„è§ˆ" class="headerlink" title="é¢„è§ˆ"></a>é¢„è§ˆ</h4><p><img src="/img/blog/drag_table/d1.png"></p><h3 id="æºç "><a href="#æºç " class="headerlink" title="æºç "></a>æºç </h3><div class="code-wrapper"><pre><code class="hljs vue">&lt;template&gt;  &lt;div&gt;    &lt;div style=&quot;margin: 30px 0; text-align: right;&quot;&gt;      &lt;el-button @click=&quot;reset&quot; class=&quot;reset-btn&quot;&gt;é‡ç½®&lt;/el-button&gt;      &lt;!--      &lt;el-button type=&quot;primary&quot; @click=&quot;changeGrid&quot;&gt;ç¡®è®¤ä¿®æ”¹&lt;/el-button&gt;--&gt;    &lt;/div&gt;    &lt;div class=&quot;box&quot; @mousedown=&quot;handleMouseDown&quot;&gt;      &lt;div class=&quot;mask&quot; v-show=&quot;is_show_mask&quot;           :style=&quot;&#x27;width:&#x27;+mask_width+&#x27;left:&#x27;+mask_left+&#x27;height:&#x27;+mask_height+&#x27;top:&#x27;+mask_top&quot;&gt;      &lt;/div&gt;      &lt;table border=&quot;1&quot; cellspacing=&quot;0&quot; class=&quot;table&quot;&gt;        &lt;th v-for=&quot;(item,index) in weekEnum&quot; class=&quot;week-data-th&quot; :key=&quot;index&quot;&gt;          &#123;&#123; item &#125;&#125;        &lt;/th&gt;        &lt;tr v-for=&quot;(item,index) in list&quot;&gt;          &lt;td              v-for=&quot;(temp,idx) in item.child&quot;              @click=&quot;handleClickTimeData(temp,index)&quot;              :key=&quot;idx&quot;              class=&quot;week-data-td&quot;              :style=&quot;`background:$&#123;temp.checked?&#x27;#3af&#x27;:&#x27;&#x27;&#125;`&quot;          &gt;            &lt;p&gt;&#123;&#123; temp.val &#125;&#125;&lt;/p&gt;          &lt;/td&gt;        &lt;/tr&gt;      &lt;/table&gt;    &lt;/div&gt;  &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123;  components: &#123;&#125;,  props: &#123;    tHead: &#123;      type: Array,      default: () =&gt; []    &#125;,    tBody: &#123;      type: Array,      default: () =&gt; []    &#125;  &#125;,  data() &#123;    return &#123;      is_show_mask: false,      start_x: 0,      start_y: 0,      end_x: 0,      end_y: 0,      box_screen_left: 0,      box_screen_top: 0,      weekEnum: [        &quot;æ˜ŸæœŸä¸€&quot;,        &quot;æ˜ŸæœŸäºŒ&quot;,        &quot;æ˜ŸæœŸä¸‰&quot;,        &quot;æ˜ŸæœŸå››&quot;,        &quot;æ˜ŸæœŸäº”&quot;,        &quot;æ˜ŸæœŸå…­&quot;,        &quot;æ˜ŸæœŸæ—¥&quot;      ],      list: [],      tdLength: 30    &#125;;  &#125;,  computed: &#123;    // æ¡†é€‰æ“ä½œ    mask_width() &#123;      return `$&#123;Math.abs(this.end_x - this.start_x)&#125;px;`;    &#125;,    mask_height() &#123;      return `$&#123;Math.abs(this.end_y - this.start_y)&#125;px;`;    &#125;,    mask_left() &#123;      return `$&#123;          Math.min(this.start_x, this.end_x) - this.box_screen_left      &#125;px;`;    &#125;,    mask_top() &#123;      return `$&#123;          Math.min(this.start_y, this.end_y) - this.box_screen_top      &#125;px;`;    &#125;  &#125;,  mounted() &#123;    window.addEventListener(&quot;scroll&quot;, this.windowScroll);//ç›‘å¬é¡µé¢æ»šåŠ¨    this.initTable();    this.initWidth();  &#125;,  beforeDestroy() &#123;    window.removeEventListener(&quot;scroll&quot;, this.windowScroll);  &#125;,  methods: &#123;    initWidth() &#123;      const dom_box = document.querySelector(&quot;.box&quot;);      this.box_screen_left = dom_box.getBoundingClientRect().left;      this.box_screen_top = dom_box.getBoundingClientRect().top;      console.log(&quot;this.box_screen_left&quot;, this.box_screen_left);      console.log(&quot;this.box_screen_top&quot;, this.box_screen_top);    &#125;,    //é¡µé¢æ»šåŠ¨æ—¶åˆå§‹åŒ–ä½ç½®    windowScroll() &#123;      this.resSetXY();      this.initWidth();    &#125;,    initTable() &#123;      let tableList = [...new Array(this.tdLength).keys()];      console.log(&quot;tableList&quot;, tableList);      this.list = tableList.map((item, index) =&gt; &#123;        let temp = Array.from(new Array(7).keys());        console.log(&quot;temp&quot;, temp);        let child = temp.map((v, key) =&gt; &#123;          return &#123;            key: key + index * 7,            val: &quot;&quot;          &#125;;        &#125;);        console.log(&quot;child&quot;, child);        return &#123; child &#125;;      &#125;);      console.log(&quot;this.list&quot;, this.list);    &#125;,    reset() &#123;      let tableList = JSON.parse(JSON.stringify(this.list));      tableList.map((item) =&gt; &#123;        item.child.map((temp) =&gt; &#123;          temp.checked = false;        &#125;);      &#125;);      this.list = tableList;    &#125;,    handleClickTimeData(obj, index) &#123;      let tableList = JSON.parse(JSON.stringify(this.list));      console.log(&quot;tableList&quot;, tableList);      tableList[index].child.map((item) =&gt; &#123;        if (item.key == obj.key) &#123;          item.checked = !item.checked;        &#125;      &#125;);      this.list = tableList;    &#125;,    changeGrid() &#123;      this.handleDomSelect();//é€‰ä¸­åçš„åˆ¤æ–­,æ‰¾åˆ°æ¡†é€‰å†…çš„æ ¼å­      this.resSetXY();//è°ƒç”¨æ­¤æ–¹æ³•è®©æ¡†é€‰æ¶ˆå¤±    &#125;,    handleMouseDown(e) &#123;      console.log(&quot;event&quot;, e);      this.is_show_mask = true;      this.start_x = e.clientX;      this.start_y = e.clientY;      this.end_x = e.clientX;      this.end_y = e.clientY;      window.addEventListener(&quot;mousemove&quot;, this.handleMouseMove);      window.addEventListener(&quot;mouseup&quot;, this.handleMouseUp);    &#125;,    handleMouseMove(event) &#123;      this.end_x = event.clientX;      this.end_y = event.clientY;    &#125;,    handleMouseUp() &#123;      window.removeEventListener(&quot;mousemove&quot;, this.handleMouseMove);      window.removeEventListener(&quot;mouseup&quot;, this.handleMouseUp);      this.changeGrid();    &#125;,    resSetXY() &#123;      this.start_x = 0;      this.start_y = 0;      this.end_x = 0;      this.end_y = 0;    &#125;,    handleDomSelect() &#123;      const dom_mask = window.document.querySelector(&quot;.mask&quot;);      const rect_select = dom_mask.getClientRects()[0];      console.log(&quot;rect_select&quot;, rect_select);      let selectKeys = [];      document.querySelectorAll(&quot;.week-data-td&quot;).forEach((node, index) =&gt; &#123;        const rects = node.getClientRects()[0];        console.log(&quot;rects&quot;, rects);        if (this.collide(rects, rect_select) === true) &#123;          selectKeys.push(index);        &#125;      &#125;);      console.log(&quot;selectKeys&quot;, selectKeys);      if (selectKeys.length &lt; 2) return;      let tableList = JSON.parse(JSON.stringify(this.list));      tableList = tableList.map((item, key) =&gt; &#123;        let child = item.child.map((temp) =&gt; &#123;          if (selectKeys.indexOf(temp.key) &gt; -1) &#123;            temp.checked = !temp.checked;          &#125;          return temp;        &#125;);        return &#123; child &#125;;      &#125;);      this.list = tableList;      console.log(&quot;this.list&quot;, this.list);    &#125;,    collide(rect1, rect2) &#123;      const maxX = Math.max(rect1.x + rect1.width, rect2.x + rect2.width);      const maxY = Math.max(rect1.y + rect1.height, rect2.y + rect2.height);      const minX = Math.min(rect1.x, rect2.x);      const minY = Math.min(rect1.y, rect2.y);      if (maxX - minX &lt;= rect1.width + rect2.width &amp;&amp; maxY - minY &lt;= rect1.height + rect2.height) &#123;        return true;      &#125;      else &#123;        return false;      &#125;    &#125;  &#125;&#125;;&lt;/script&gt;&lt;style lang=&quot;scss&quot; scoped&gt;td &#123;  width: 300px;  text-align: center;&#125;.box &#123;  width: 100%;  height: auto;  margin: 20px auto;  position: relative;  user-select: none;  .table &#123;    width: 100%;  &#125;  .mask &#123;    position: absolute;    background: #409eff;    opacity: 0.4;  &#125;&#125;.week-data-th &#123;  min-width: 100px;  height: 30px;&#125;.week-data-td &#123;  height: 50px;&#125;&lt;/style&gt;</code></pre></div>]]></content>
    
    
    <categories>
      
      <category>Webå¼€å‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Vue</tag>
      
      <tag>Element UI</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å…³äºæ­¤åšå®¢çš„æ­å»º</title>
    <link href="/2021/10/01/%E5%85%B3%E4%BA%8E%E6%AD%A4%E5%8D%9A%E5%AE%A2%E7%9A%84%E6%90%AD%E5%BB%BA/"/>
    <url>/2021/10/01/%E5%85%B3%E4%BA%8E%E6%AD%A4%E5%8D%9A%E5%AE%A2%E7%9A%84%E6%90%AD%E5%BB%BA/</url>
    
    <content type="html"><![CDATA[<h3 id="æ­å»ºèƒŒæ™¯"><a href="#æ­å»ºèƒŒæ™¯" class="headerlink" title="æ­å»ºèƒŒæ™¯"></a>æ­å»ºèƒŒæ™¯</h3><p>ä»¥å¾€è®°å½•ç¬”è®°ä¸»è¦æ˜¯ä½¿ç”¨å°è±¡ç¬”è®°è¿™ä¸ªè½¯ä»¶,ä½†ä½œä¸ºå¼€å‘æ¥è¯´è¿˜æ˜¯å¾—æœ‰ä¸ªè‡ªå·±çš„æŠ€æœ¯åšå®¢ä¹‹ç±»çš„ç½‘ç«™æ–¹ä¾¿åˆ†äº«å’Œäº¤æµ,æ¯•ç«Ÿå­¦ä¹ çš„ä¸œè¥¿ä¹Ÿæ˜¯é€šè¿‡åˆ«äººçš„åˆ†äº«ä¸€ç‚¹ç‚¹ç§¯ç´¯èµ·æ¥çš„ã€‚</p><p>å†™åœ¨è¿™é‡Œè‡ªå·±å¯ä»¥ç”¨åˆ°çš„æ—¶å€™ç¿»ä¸€ä¸‹,ä¹Ÿå¸Œæœ›è‡ªå·±å†™çš„ä¸œè¥¿èƒ½å¸®åŠ©åˆ°ç¢°åˆ°ç›¸åŒé—®é¢˜çš„äººã€‚</p><p>æ‰€æœ‰æ–‡ç« éƒ½æ˜¯è®°å½•ä¸€äº›å¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜æˆ–è€…å­¦ä¹ ä¸­çš„ä¸€äº›çŸ¥è¯†ç‚¹, So : æœ¬ç«™æ‰€æœ‰æ–‡ç« çš†éæŠ€æœ¯ä¸“æ éæŸæŠ€æœ¯å®˜æ–¹æ–‡æ¡£, ä¸”æœ‰äº›åœ°æ–¹å¹¶ä¸ä¼šè¯¦ç»†ä»‹ç», å¦‚æœ‰ç–‘æƒ‘çš„åœ°æ–¹å¯ä»¥<a href="https://github.com/wenkil">è”ç³»æˆ‘</a>, å¦‚æœ‰é”™è¯¯ä¹‹å¤„è¿˜æœ›æŒ‡ç‚¹ä¸€äºŒã€‚</p><p>éƒ¨åˆ†çŸ¥è¯†ç‚¹è½¬è½½è‡ªå…¶ä»–ç½‘ç«™,ä¼šæ³¨æ˜è½¬è½½åœ°å€ä¸”æ ‡é¢˜å‘ŠçŸ¥ã€‚å¦‚æœå†™çš„å†…å®¹èƒ½å¸®åˆ°çœ¼å‰çš„ä½ ï¼Œè¯·ä¸è¦åå•¬çš„å¸®åŠ©ä¸‹ä¸€ä½éœ€è¦å¸®åŠ©çš„äºº (åªè¦äººäººéƒ½çŒ®å‡ºä¸€ç‚¹çˆ±~~~)ã€‚</p><p>å¦å¤–ä¼šå†™ä¸€äº›éšç¬”ã€åæ§½ã€æ„Ÿæ‚Ÿï¼›æ€»ä¹‹ä¸€å¥è¯ï¼šä¸€åˆ‡çœ‹å¿ƒæƒ…ï¼Œè‡ªå·±çš„ç½‘ç«™è‡ªå·±åšä¸»~~~ğŸ˜ğŸ˜ğŸ˜</p><h3 id="åšå®¢ç®€ä»‹"><a href="#åšå®¢ç®€ä»‹" class="headerlink" title="åšå®¢ç®€ä»‹"></a>åšå®¢ç®€ä»‹</h3><h4 id="nbsp-nbsp-nbsp-åšå®¢æ¡†æ¶ï¼šHexo"><a href="#nbsp-nbsp-nbsp-åšå®¢æ¡†æ¶ï¼šHexo" class="headerlink" title="&nbsp;&nbsp;&nbsp;  åšå®¢æ¡†æ¶ï¼šHexo"></a>&nbsp;&nbsp;&nbsp;  åšå®¢æ¡†æ¶ï¼š<a href="https://hexo.io/zh-cn/">Hexo</a></h4><h4 id="nbsp-nbsp-nbsp-åšå®¢ä¸»é¢˜ï¼šFluid-å¥½ç”¨-å·²ç»™Star"><a href="#nbsp-nbsp-nbsp-åšå®¢ä¸»é¢˜ï¼šFluid-å¥½ç”¨-å·²ç»™Star" class="headerlink" title="&nbsp;&nbsp;&nbsp;  åšå®¢ä¸»é¢˜ï¼šFluid(å¥½ç”¨,å·²ç»™Star)"></a>&nbsp;&nbsp;&nbsp;  åšå®¢ä¸»é¢˜ï¼š<a href="https://github.com/fluid-dev/hexo-theme-fluid">Fluid</a>(å¥½ç”¨,å·²ç»™Star)</h4><h4 id="nbsp-nbsp-nbsp-æ‰˜ç®¡å¹³å°ï¼šGithub"><a href="#nbsp-nbsp-nbsp-æ‰˜ç®¡å¹³å°ï¼šGithub" class="headerlink" title="&nbsp;&nbsp;&nbsp;  æ‰˜ç®¡å¹³å°ï¼šGithub"></a>&nbsp;&nbsp;&nbsp;  æ‰˜ç®¡å¹³å°ï¼š<a href="https://github.com/">Github</a></h4><h3 id="æ­å»ºæ­¥éª¤"><a href="#æ­å»ºæ­¥éª¤" class="headerlink" title="æ­å»ºæ­¥éª¤"></a>æ­å»ºæ­¥éª¤</h3><p> ä¸»è¦å‚è€ƒ<a href="https://hexo.io/zh-cn/docs/">Hexoæ–‡æ¡£</a> å’Œ <a href="https://www.baidu.com/">å•¥éƒ½æœ‰çš„ç½‘ç«™</a>ï¼š</p><div class="code-wrapper"><pre><code class="hljs avrasm">npm install -g hexo-<span class="hljs-keyword">cli</span></code></pre></div><div class="code-wrapper"><pre><code class="hljs bash">hexo init my_blog<span class="hljs-built_in">cd</span> my_blognpm install</code></pre></div><p>æ­¤æ—¶å®‰è£…å®Œæˆï¼Œä½†è¦è¿è¡Œé¡¹ç›®éœ€è¦å®‰è£…hexoæœåŠ¡ï¼š</p><div class="code-wrapper"><pre><code class="hljs pgsql">npm install hexo -<span class="hljs-keyword">server</span> <span class="hljs-comment">--save</span></code></pre></div><p>å®‰è£…å®Œæˆä¹‹åå¼€å§‹è¿è¡Œé¡¹ç›®ï¼š</p><div class="code-wrapper"><pre><code class="hljs axapta">hexo <span class="hljs-keyword">server</span> æˆ–è€…hexo s</code></pre></div><p>æ­¤æ—¶è¿è¡Œå®Œæˆï¼Œæ§åˆ¶å°æ‰“å°ä»¥ä¸‹ä¿¡æ¯ï¼š</p><div class="code-wrapper"><pre><code class="hljs livecodeserver">Hexo is running <span class="hljs-keyword">at</span> <span class="hljs-keyword">http</span>://localhost:<span class="hljs-number">4000</span> . Press Ctrl+C <span class="hljs-built_in">to</span> <span class="hljs-built_in">stop</span>.</code></pre></div><p>åœ¨æµè§ˆå™¨è¾“å…¥localhost:4000 ã€‚æ­å–œä½ ï¼ä½ çš„åšå®¢å·²ç»åœ¨ä½ æœ¬åœ°è¿è¡ŒæˆåŠŸäº†ï¼</p><p>æ¥ä¸‹æ¥ï¼Œä½ å°†è¦äº†è§£å’Œå­¦ä¹ çš„åŒ…æ‹¬ä½†ä¸é™äºä»¥ä¸‹å†…å®¹ï¼š</p><ul><li><a href="https://hexo.io/themes/">hexoåšå®¢</a> çš„ä½¿ç”¨æ–¹æ³•</li><li><a href="https://markdown.com.cn/">markdown</a> æ ‡è®°è¯­è¨€çš„å­¦ä¹ </li><li>Github æˆ–è€… ä½ è‡ªå·±çš„äº‘æœåŠ¡å™¨ çš„ç½‘ç«™æ‰˜ç®¡æµç¨‹</li></ul><p>æ•´ä¸ªæ­å»ºè¿‡ç¨‹å¦‚æœå…¨éƒ¨å†™å®Œç¯‡å¹…è¾ƒé•¿ï¼Œä¸”æ¯éƒ¨åˆ†çš„åŠŸèƒ½å®˜ç½‘éƒ½æœ‰è¯¦ç»†æ–‡æ¡£ï¼Œåœ¨è¿™å†™ä¸‹æ¥ä¹Ÿæ²¡æœ‰æ„ä¹‰(æ‰€ä»¥è‡ªç§°éä¸“æ éå®˜æ–¹~~ğŸ˜„ğŸ˜„ğŸ˜„)ã€‚å¦‚æœä½ ä¹Ÿæƒ³è®°å½•è‡ªå·±çš„å­¦ä¹ å†ç¨‹ï¼Œå¯ä»¥å»å­¦ä¹ ä¸€ä¸‹æ­å»ºè¿‡ç¨‹ï¼Œä¸€å®šä¼šæœ‰æ”¶è·çš„ã€‚å¥¥é‡Œç»™!!!</p>]]></content>
    
    
    <categories>
      
      <category>éšç¬”</category>
      
    </categories>
    
    
    <tags>
      
      <tag>éšç¬”</tag>
      
      <tag>Hexo</tag>
      
      <tag>åšå®¢</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å¼€å‘ç¯å¢ƒæ­å»ºå¿…è£…è½¯ä»¶</title>
    <link href="/2021/10/01/%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E5%BF%85%E8%A3%85%E8%BD%AF%E4%BB%B6/"/>
    <url>/2021/10/01/%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E5%BF%85%E8%A3%85%E8%BD%AF%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<h4 id="ä¸ªäººæ–°ç”µè„‘æ­å»ºå¼€å‘ç¯å¢ƒå¸¸ç”¨è½¯ä»¶-ï¼š"><a href="#ä¸ªäººæ–°ç”µè„‘æ­å»ºå¼€å‘ç¯å¢ƒå¸¸ç”¨è½¯ä»¶-ï¼š" class="headerlink" title="ä¸ªäººæ–°ç”µè„‘æ­å»ºå¼€å‘ç¯å¢ƒå¸¸ç”¨è½¯ä»¶ ï¼š"></a>ä¸ªäººæ–°ç”µè„‘æ­å»ºå¼€å‘ç¯å¢ƒå¸¸ç”¨è½¯ä»¶ ï¼š</h4><h3 id="å¼€å‘ç¯å¢ƒï¼š"><a href="#å¼€å‘ç¯å¢ƒï¼š" class="headerlink" title="å¼€å‘ç¯å¢ƒï¼š"></a>å¼€å‘ç¯å¢ƒï¼š</h3><p>nvm || node</p><p>nginx</p><p>mysql</p><p>git || svn</p><h3 id="å¿…è£…è½¯ä»¶æ¨è"><a href="#å¿…è£…è½¯ä»¶æ¨è" class="headerlink" title="å¿…è£…è½¯ä»¶æ¨è"></a>å¿…è£…è½¯ä»¶æ¨è</h3><p>Apifox || Postman</p><p>Cursor ã€ Webstorm ã€ Pycharm</p><p>Beyond Compare 4 (æ–‡ä»¶å¯¹æ¯”å·¥å…·)</p><p>Sourcetree (gitå›¾å½¢åŒ–åº”ç”¨)</p><p>sshå·¥å…·ï¼šxterminal  || Xshell || Electerm</p><p>Snipasteï¼ˆæˆªå›¾å·¥å…·ï¼‰</p><p>EmEditor (æ–‡æœ¬ç¼–è¾‘å·¥å…·)</p><p>SwitchHosts!(hostå·¥å…·)</p><p>7-zip ï¼ˆè§£å‹ç¼©è½¯ä»¶ï¼‰</p><p>EVå½•å±</p><p>VMware Workstation Proï¼ˆè™šæ‹Ÿæœºï¼‰</p><p>Navicat Premiumï¼ˆé“¾æ¥æ•°æ®åº“ï¼‰</p><p>Fencesæ¡Œé¢ç®¡ç†å·¥å…·</p>]]></content>
    
    
    <categories>
      
      <category>Webå¼€å‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å¼€å‘ç¯å¢ƒ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>windowsä¸‹å®‰è£…nginxé…ç½®æ¥å£è½¬å‘</title>
    <link href="/2021/09/15/%E9%85%8D%E7%BD%AE%E6%8E%A5%E5%8F%A3%E8%BD%AC%E5%8F%91/"/>
    <url>/2021/09/15/%E9%85%8D%E7%BD%AE%E6%8E%A5%E5%8F%A3%E8%BD%AC%E5%8F%91/</url>
    
    <content type="html"><![CDATA[<h3 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h3><p>å‰åç«¯è”è°ƒæ¥å£æ—¶ï¼Œéœ€è¦è¿æ¥åç«¯å¤§ä½¬æœ¬åœ°ç¨‹åºè¿›è¡Œè”è°ƒï¼›æœ‰æ—¶éœ€æ±‚å¤šæ—¶ï¼Œå¯èƒ½ä¼šä¸å¤šä¸ªä¸åŒåœ°å€æœ¬åœ°è°ƒè¯•ï¼Œå‰ç«¯æ¯æ¬¡éƒ½å¾—é‡æ–°é…ç½®ä»£ç†é‡æ–°è¿è¡Œé¡¹ç›®ã€‚<br>ä¸ºäº†è§£å†³å¿«é€Ÿè°ƒè¯•é—®é¢˜ï¼Œç›´æ¥åœ¨æœ¬åœ°èµ·ä¸ªnginxä»£ç†æ¥å£è½¬å‘ï¼Œè¿™æ ·æ¯ä¸ªå‰ç«¯é¡¹ç›®åªéœ€è¦ç›‘å¬ä¸€ä¸ªç«¯å£å°±å¯ä»¥äº†ï¼Œapiåœ°å€ä¹Ÿåªéœ€è¦åœ¨nginxé…ç½®ä¸€æ¬¡ï¼Œ ç®€ç›´çˆ½æ­ªæ­ªï¼Œè°ç”¨è°çŸ¥é“~~~</p><h3 id="å‰ç«¯é…ç½®"><a href="#å‰ç«¯é…ç½®" class="headerlink" title="å‰ç«¯é…ç½®"></a>å‰ç«¯é…ç½®</h3><p>ç›‘å¬è‡ªå·±æœ¬åœ°9001ç«¯å£å³å¯</p><div class="code-wrapper"><pre><code class="hljs vue">proxy: &#123;      [process.env.VUE_APP_BASE_API]: &#123;        target: &quot;http://127.0.0.1:9001&quot;,        changeOrigin: true,        pathRewrite: &#123;          [&#x27;^&#x27; + process.env.VUE_APP_BASE_API]: &#x27;&#x27;        &#125;      &#125;,&#125;</code></pre></div><h3 id="nginx-é…ç½®"><a href="#nginx-é…ç½®" class="headerlink" title="nginx é…ç½®"></a>nginx é…ç½®</h3><p>windowsä¸‹ çš„nginx.config é…ç½®  ç›‘å¬9001ç«¯å£åŠè·¯ç”±åŒ¹é…ï¼š</p><div class="code-wrapper"><pre><code class="hljs awk"><span class="hljs-comment">#user  nobody;</span>worker_processes  <span class="hljs-number">4</span>; çº¿ç¨‹æ•°ï¼Œä¸€èˆ¬ä¸ºæ ¸æ•°çš„å€æ•°<span class="hljs-comment">#error_log  logs/error.log;</span><span class="hljs-comment">#error_log  logs/error.log  notice;</span><span class="hljs-comment">#error_log  logs/error.log  info;</span>events &#123;    worker_connections  <span class="hljs-number">1024</span>;  æœ€å¤§è¿æ¥æ•°é»˜è®¤<span class="hljs-number">1024</span>    multi_accept on;           å¦‚æœç¦ç”¨multi_acceptï¼Œå·¥ä½œè¿›ç¨‹å°†ä¸€æ¬¡æ¥å—ä¸€ä¸ªæ–°è¿æ¥ã€‚å¦åˆ™ï¼Œå·¥ä½œè¿›ç¨‹å°†ä¸€æ¬¡æ¥å—æ‰€æœ‰æ–°è¿æ¥ã€‚å¦‚æœä½¿ç”¨kqueueè¿æ¥å¤„ç†æ–¹æ³•ï¼Œè¯¥æŒ‡ä»¤å°†è¢«å¿½ç•¥ï¼Œ                                å› ä¸ºå®ƒæŠ¥å‘Šç­‰å¾…æ¥å—çš„æ–°è¿æ¥çš„æ•°é‡ã€‚&#125;http &#123;    include       mime.types;    default_type  application/octet-stream;    sendfile        on;    <span class="hljs-comment">#tcp_nopush     on;</span>    <span class="hljs-comment">#keepalive_timeout  0;</span>    keepalive_timeout  <span class="hljs-number">65</span>;    gzip on;              å¼€å¯gzip       server &#123;        listen       <span class="hljs-number">127.0</span>.<span class="hljs-number">0.1</span>:<span class="hljs-number">9001</span>; ç›‘å¬<span class="hljs-number">9001</span>ç«¯å£                <span class="hljs-comment">#charset koi8-r;</span>        <span class="hljs-comment">#access_log  logs/host.access.log  main;</span>        ä»¥ä¸‹é…ç½®ä¸ºè·¯ç”±è¯†åˆ«ï¼š^~ çš„æ„æ€æ˜¯åŒ¹é…ç¬¦å·åé¢çš„å­—æ®µå¼€å¤´çš„è·¯ç”±                location ^~ <span class="hljs-regexp">/api/</span>admin/adminInfo &#123;            proxy_pass   https:<span class="hljs-regexp">//</span>xxx.xxx.xx;        &#125;        location ^~ <span class="hljs-regexp">/api/</span>admin &#123;            proxy_pass   https:<span class="hljs-regexp">//</span>xxx.xxx.x;        &#125;        location ^~ <span class="hljs-regexp">/api/</span>xtorder &#123;            proxy_pass   http:<span class="hljs-regexp">//</span>xxx.xxx.x;          &#125;        location ^~ <span class="hljs-regexp">/api/</span>edu &#123;            proxy_pass   http:<span class="hljs-regexp">//</span>xxx.xxx.x;        &#125;        location ^~ <span class="hljs-regexp">/api/</span>contract &#123;            proxy_pass   http:<span class="hljs-regexp">//</span>xxx.xxx.x;        &#125;        <span class="hljs-comment">#error_page  404              /404.html;</span>        error_page   <span class="hljs-number">500</span> <span class="hljs-number">502</span> <span class="hljs-number">503</span> <span class="hljs-number">504</span>  /<span class="hljs-number">50</span>x.html;        location = /<span class="hljs-number">50</span>x.html &#123;            root   html;        &#125;    &#125;&#125;</code></pre></div>]]></content>
    
    
    <categories>
      
      <category>Webå¼€å‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Nginx</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Element Table è‡ªå®šä¹‰è¡¨æ ¼æ¨ªå‘å±•ç¤º</title>
    <link href="/2021/06/16/Element-Table-%E8%87%AA%E5%AE%9A%E4%B9%89%E8%A1%A8%E6%A0%BC%E6%A8%AA%E5%90%91%E5%B1%95%E7%A4%BA/"/>
    <url>/2021/06/16/Element-Table-%E8%87%AA%E5%AE%9A%E4%B9%89%E8%A1%A8%E6%A0%BC%E6%A8%AA%E5%90%91%E5%B1%95%E7%A4%BA/</url>
    
    <content type="html"><![CDATA[<h2 id="æ•ˆæœé¢„è§ˆ"><a href="#æ•ˆæœé¢„è§ˆ" class="headerlink" title="æ•ˆæœé¢„è§ˆ"></a>æ•ˆæœé¢„è§ˆ</h2><h3 id="æ”¯æŒè‡ªå®šä¹‰ï¼šå±•ç¤ºåˆ—æ•°"><a href="#æ”¯æŒè‡ªå®šä¹‰ï¼šå±•ç¤ºåˆ—æ•°" class="headerlink" title="æ”¯æŒè‡ªå®šä¹‰ï¼šå±•ç¤ºåˆ—æ•°"></a>æ”¯æŒè‡ªå®šä¹‰ï¼šå±•ç¤ºåˆ—æ•°</h3><p><img src="/img/blog/element/transverse-table1.png"></p><h3 id="è¶…å‡ºå¤šè¡Œæ—¶ï¼šéšè—å¤šä½™æ ¼å­"><a href="#è¶…å‡ºå¤šè¡Œæ—¶ï¼šéšè—å¤šä½™æ ¼å­" class="headerlink" title="è¶…å‡ºå¤šè¡Œæ—¶ï¼šéšè—å¤šä½™æ ¼å­"></a>è¶…å‡ºå¤šè¡Œæ—¶ï¼šéšè—å¤šä½™æ ¼å­</h3><p><img src="/img/blog/element/transverse-table2.png"></p><h2 id="ä½¿ç”¨æ–¹å¼"><a href="#ä½¿ç”¨æ–¹å¼" class="headerlink" title="ä½¿ç”¨æ–¹å¼"></a>ä½¿ç”¨æ–¹å¼</h2><h3 id="1-npmå®‰è£…æ–¹å¼"><a href="#1-npmå®‰è£…æ–¹å¼" class="headerlink" title="1. npmå®‰è£…æ–¹å¼"></a>1. npmå®‰è£…æ–¹å¼</h3><p>npm åŒ…åœ°å€ï¼š <a href="https://www.npmjs.com/package/wenkil-transverse-table">https://www.npmjs.com/package/wenkil-transverse-table</a></p><div class="code-wrapper"><pre><code class="hljs css">npm <span class="hljs-selector-tag">i</span> wenkil-transverse-<span class="hljs-selector-tag">table</span></code></pre></div><p>é¡¹ç›®ä¸­éœ€è¦ä½¿ç”¨ä»¥ä¸‹æ–¹å¼å¼•å…¥element-uiå’Œæ ·å¼</p><div class="code-wrapper"><pre><code class="hljs xquery"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span></span><span class="xml">  </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;app-container&quot;</span>&gt;</span></span><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">TransverseTable</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;transverseTable&quot;</span>  <span class="hljs-attr">:tableData</span>=<span class="hljs-string">&quot;[</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="xml">            </span></span></span><span class="xquery"><span class="hljs-built_in">&#123;key</span>:<span class="hljs-string">&#x27;test&#x27;</span>,value: <span class="hljs-number">1</span>&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">,</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="xml">            </span></span></span><span class="xquery"><span class="hljs-built_in">&#123;key</span>:<span class="hljs-string">&#x27;test&#x27;</span>,value: <span class="hljs-number">1</span>&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">,</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="xml">            </span></span></span><span class="xquery"><span class="hljs-built_in">&#123;key</span>:<span class="hljs-string">&#x27;test&#x27;</span>,value: <span class="hljs-number">1</span>&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">,</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="xml">            </span></span></span><span class="xquery"><span class="hljs-built_in">&#123;key</span>:<span class="hljs-string">&#x27;test&#x27;</span>,value: <span class="hljs-number">1</span>&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">,</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="xml">            </span></span></span><span class="xquery"><span class="hljs-built_in">&#123;key</span>:<span class="hljs-string">&#x27;test&#x27;</span>,value: <span class="hljs-number">1</span>&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">,</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="xml">            </span></span></span><span class="xquery"><span class="hljs-built_in">&#123;key</span>:<span class="hljs-string">&#x27;test&#x27;</span>,value: <span class="hljs-number">1</span>&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">,</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="xml"></span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="xml"></span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="xml">          ]&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">TransverseTable</span>&gt;</span></span><span class="xml"></span><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>&lt;/template&gt;<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span></span><span class="javascript"><span class="xml">  <span class="hljs-keyword">import</span> Element <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;element-ui&quot;</span>;</span></span><span class="javascript"><span class="xml">  <span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;element-ui/lib/theme-chalk/index.css&#x27;</span>;</span></span><span class="javascript"><span class="xml">  <span class="hljs-keyword">import</span> TransverseTable <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;wenkil-transverse-table&#x27;</span></span></span><span class="javascript"><span class="xml">  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> </span></span><span class="xquery">&#123;</span><span class="xquery">   <span class="hljs-built_in"> name</span>: <span class="hljs-string">&quot;test&quot;</span>,</span><span class="xquery">    components: &#123;TransverseTable&#125;</span><span class="xml">,</span><span class="xml">    data() </span><span class="xquery">&#123;</span><span class="xquery">      <span class="hljs-keyword">return</span> &#123;&#125;</span><span class="xml"></span><span class="xml">    &#125;,</span><span class="xml">    created() </span><span class="xquery">&#123;</span><span class="xquery"></span><span class="xquery">    &#125;</span><span class="xml">,</span><span class="xml">    mounted() </span><span class="xquery">&#123;</span><span class="xquery">      this.<span class="hljs-variable">$refs</span>.transverseTable.setTable()</span><span class="xquery">    &#125;</span><span class="xml">,</span><span class="xml">    methods: </span><span class="xquery">&#123;&#125;</span><span class="xml">,</span><span class="xml">  &#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>&lt;style scoped&gt;&lt;/style&gt;</code></pre></div><h3 id="2-ç»„ä»¶æ–¹å¼"><a href="#2-ç»„ä»¶æ–¹å¼" class="headerlink" title="2. ç»„ä»¶æ–¹å¼"></a>2. ç»„ä»¶æ–¹å¼</h3><p>åœ¨é¡¹ç›®é‡Œè‡ªå®šä¹‰ç»„ä»¶ç›®å½•,å†™å…¥ä»¥ä¸‹ä»£ç </p><div class="code-wrapper"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span></span><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">el-table</span></span></span><span class="hljs-tag"><span class="xml">      <span class="hljs-attr">border</span></span></span><span class="hljs-tag"><span class="xml">      <span class="hljs-attr">:data</span>=<span class="hljs-string">&quot;tableList&quot;</span></span></span><span class="hljs-tag"><span class="xml">      <span class="hljs-attr">:show-header</span>=<span class="hljs-string">&quot;false&quot;</span></span></span><span class="hljs-tag"><span class="xml">      <span class="hljs-attr">:cell-style</span>=<span class="hljs-string">&quot;cellStyle&quot;</span></span></span><span class="hljs-tag"><span class="xml">    &gt;</span></span><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">el-table-column</span></span></span><span class="hljs-tag"><span class="xml">        <span class="hljs-attr">min-width</span>=<span class="hljs-string">&quot;50&quot;</span></span></span><span class="hljs-tag"><span class="xml">        <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;item in headList&quot;</span></span></span><span class="hljs-tag"><span class="xml">        <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;item.prop&quot;</span></span></span><span class="hljs-tag"><span class="xml">        <span class="hljs-attr">:label</span>=<span class="hljs-string">&quot;item.prop&quot;</span></span></span><span class="hljs-tag"><span class="xml">        <span class="hljs-attr">:prop</span>=<span class="hljs-string">&quot;item.prop&quot;</span></span></span><span class="hljs-tag"><span class="xml">        <span class="hljs-attr">align</span>=<span class="hljs-string">&quot;center&quot;</span></span></span><span class="hljs-tag"><span class="xml">      &gt;</span></span><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">slot-scope</span>=<span class="hljs-string">&quot;&#123; row &#125;&quot;</span>&gt;</span></span><span class="xml">          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">row</span>[item.prop] &#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><span class="xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">el-table-column</span>&gt;</span></span><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">el-table</span>&gt;</span></span><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><span class="xml"></span><span class="xml"></span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span></span><span class="javascript"><span class="xml">  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span></span><span class="javascript"><span class="xml">    <span class="hljs-attr">components</span>: &#123;&#125;,</span></span><span class="javascript"><span class="xml">    <span class="hljs-attr">props</span>: &#123;</span></span><span class="javascript"><span class="xml">      <span class="hljs-attr">tableData</span>: &#123; <span class="hljs-comment">//ä¼ è¿›key valueæ ¼å¼çš„æ•°ç»„</span></span></span><span class="javascript"><span class="xml">        <span class="hljs-attr">type</span>: <span class="hljs-built_in">Array</span>,</span></span><span class="javascript"><span class="xml">        <span class="hljs-attr">default</span>: <span class="hljs-function">() =&gt;</span> &#123;</span></span><span class="javascript"><span class="xml">          <span class="hljs-keyword">return</span> []</span></span><span class="javascript"><span class="xml">        &#125;</span></span><span class="javascript"><span class="xml">      &#125;,</span></span><span class="javascript"><span class="xml">      <span class="hljs-attr">columnNum</span>: &#123;</span></span><span class="javascript"><span class="xml">        <span class="hljs-attr">type</span>: <span class="hljs-built_in">Number</span>,</span></span><span class="javascript"><span class="xml">        <span class="hljs-attr">default</span>: <span class="hljs-number">6</span></span></span><span class="javascript"><span class="xml">      &#125;</span></span><span class="javascript"><span class="xml">    &#125;,</span></span><span class="javascript"><span class="xml"></span></span><span class="javascript"><span class="xml"></span></span><span class="javascript"><span class="xml">    <span class="hljs-function"><span class="hljs-title">data</span>(<span class="hljs-params"></span>)</span> &#123;</span></span><span class="javascript"><span class="xml">      <span class="hljs-keyword">return</span> &#123;</span></span><span class="javascript"><span class="xml">        <span class="hljs-attr">tableList</span>: [],</span></span><span class="javascript"><span class="xml">        <span class="hljs-attr">headList</span>: [],</span></span><span class="javascript"><span class="xml">      &#125;</span></span><span class="javascript"><span class="xml">    &#125;,</span></span><span class="javascript"><span class="xml">    <span class="hljs-function"><span class="hljs-title">created</span>(<span class="hljs-params"></span>)</span> &#123;</span></span><span class="javascript"><span class="xml"></span></span><span class="javascript"><span class="xml"></span></span><span class="javascript"><span class="xml">    &#125;,</span></span><span class="javascript"><span class="xml">    <span class="hljs-function"><span class="hljs-title">mounted</span>(<span class="hljs-params"></span>)</span> &#123;</span></span><span class="javascript"><span class="xml"></span></span><span class="javascript"><span class="xml"></span></span><span class="javascript"><span class="xml">    &#125;,</span></span><span class="javascript"><span class="xml">    <span class="hljs-attr">methods</span>: &#123;</span></span><span class="javascript"><span class="xml">      <span class="hljs-function"><span class="hljs-title">setTable</span>(<span class="hljs-params"></span>)</span> &#123;</span></span><span class="javascript"><span class="xml">        <span class="hljs-built_in">this</span>.tableList = []</span></span><span class="javascript"><span class="xml">        <span class="hljs-built_in">this</span>.headList = []</span></span><span class="javascript"><span class="xml">        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">this</span>.columnNum; i++) &#123;</span></span><span class="javascript"><span class="xml">          <span class="hljs-built_in">this</span>.headList.push(</span></span><span class="javascript"><span class="xml">            &#123;<span class="hljs-attr">prop</span>: <span class="hljs-string">&#x27;key&#x27;</span> + (i + <span class="hljs-number">1</span>)&#125;,</span></span><span class="javascript"><span class="xml">            &#123;<span class="hljs-attr">prop</span>: <span class="hljs-string">&#x27;value&#x27;</span> + (i + <span class="hljs-number">1</span>)&#125;</span></span><span class="javascript"><span class="xml">          )</span></span><span class="javascript"><span class="xml">        &#125;</span></span><span class="javascript"><span class="xml"></span></span><span class="javascript"><span class="xml"></span></span><span class="javascript"><span class="xml">        <span class="hljs-keyword">var</span> newArr = [];</span></span><span class="javascript"><span class="xml"></span></span><span class="javascript"><span class="xml"></span></span><span class="javascript"><span class="xml">        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">this</span>.tableData.length; i += <span class="hljs-built_in">this</span>.columnNum) &#123;</span></span><span class="javascript"><span class="xml">          <span class="hljs-keyword">let</span> temp = <span class="hljs-built_in">this</span>.tableData.slice(i, i + <span class="hljs-built_in">this</span>.columnNum)</span></span><span class="javascript"><span class="xml">          <span class="hljs-keyword">if</span> (temp.length &lt; <span class="hljs-built_in">this</span>.columnNum) &#123;</span></span><span class="javascript"><span class="xml">            <span class="hljs-keyword">let</span> d = temp.length</span></span><span class="javascript"><span class="xml">            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">this</span>.columnNum - d; i++) &#123;</span></span><span class="javascript"><span class="xml">              temp.push(&#123;</span></span><span class="javascript"><span class="xml">                <span class="hljs-attr">key</span>:<span class="hljs-literal">undefined</span>,</span></span><span class="javascript"><span class="xml">                <span class="hljs-attr">value</span>:<span class="hljs-literal">undefined</span></span></span><span class="javascript"><span class="xml">              &#125;)</span></span><span class="javascript"><span class="xml">            &#125;</span></span><span class="javascript"><span class="xml">          &#125;</span></span><span class="javascript"><span class="xml">          newArr.push(temp);</span></span><span class="javascript"><span class="xml">        &#125;</span></span><span class="javascript"><span class="xml"></span></span><span class="javascript"><span class="xml"></span></span><span class="javascript"><span class="xml">        <span class="hljs-keyword">let</span> tempArr = []</span></span><span class="javascript"><span class="xml">        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; newArr.length; i++) &#123;</span></span><span class="javascript"><span class="xml">          <span class="hljs-keyword">let</span> index = <span class="hljs-number">1</span></span></span><span class="javascript"><span class="xml">          <span class="hljs-keyword">let</span> temp = &#123;&#125;</span></span><span class="javascript"><span class="xml">          <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> item <span class="hljs-keyword">of</span> newArr[i]) &#123;</span></span><span class="javascript"><span class="xml">            temp[<span class="hljs-string">&#x27;key&#x27;</span> + index] = item.key</span></span><span class="javascript"><span class="xml">            temp[<span class="hljs-string">&#x27;value&#x27;</span> + index] = item.value</span></span><span class="javascript"><span class="xml">            index++</span></span><span class="javascript"><span class="xml">          &#125;</span></span><span class="javascript"><span class="xml">          tempArr.push(temp)</span></span><span class="javascript"><span class="xml">        &#125;</span></span><span class="javascript"><span class="xml"></span></span><span class="javascript"><span class="xml"></span></span><span class="javascript"><span class="xml">        <span class="hljs-built_in">this</span>.tableList = tempArr</span></span><span class="javascript"><span class="xml">      &#125;,</span></span><span class="javascript"><span class="xml"></span></span><span class="javascript"><span class="xml"></span></span><span class="javascript"><span class="xml">      <span class="hljs-function"><span class="hljs-title">cellStyle</span>(<span class="hljs-params">&#123;row, column, rowIndex, columnIndex&#125;</span>)</span> &#123;</span></span><span class="javascript"><span class="xml">        <span class="hljs-keyword">if</span> (row[column.property] != <span class="hljs-number">0</span> &amp;&amp; !row[column.property]) &#123;</span></span><span class="javascript"><span class="xml">          <span class="hljs-keyword">return</span> &#123;</span></span><span class="javascript"><span class="xml">            <span class="hljs-attr">visibility</span>: <span class="hljs-string">&#x27;hidden&#x27;</span></span></span><span class="javascript"><span class="xml">          &#125;</span></span><span class="javascript"><span class="xml">        &#125;</span></span><span class="javascript"><span class="xml">        <span class="hljs-keyword">if</span> (columnIndex % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>) &#123;</span></span><span class="javascript"><span class="xml">          <span class="hljs-keyword">return</span> &#123;</span></span><span class="javascript"><span class="xml">            <span class="hljs-attr">background</span>: <span class="hljs-string">&#x27;#f0f0f0&#x27;</span></span></span><span class="javascript"><span class="xml">          &#125;</span></span><span class="javascript"><span class="xml">        &#125;</span></span><span class="javascript"><span class="xml">      &#125;</span></span><span class="javascript"><span class="xml">    &#125;,</span></span><span class="javascript"><span class="xml">  &#125;</span></span><span class="javascript"><span class="xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><span class="xml"></span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css"></span></span><span class="css"><span class="xml">  /deep/ <span class="hljs-selector-class">.el-table--group</span><span class="hljs-selector-pseudo">::after</span>, <span class="hljs-selector-class">.el-table--border</span><span class="hljs-selector-pseudo">::after</span>, <span class="hljs-selector-class">.el-table</span><span class="hljs-selector-pseudo">::before</span> &#123;</span></span><span class="css"><span class="xml">    <span class="hljs-attribute">width</span>: <span class="hljs-number">0</span>;</span></span><span class="css"><span class="xml">    <span class="hljs-attribute">border</span>: none <span class="hljs-meta">!important</span>;</span></span><span class="css"><span class="xml">    <span class="hljs-attribute">background-color</span>: transparent <span class="hljs-meta">!important</span>;</span></span><span class="css"><span class="xml">  &#125;</span></span><span class="css"><span class="xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span></code></pre></div><p>ä½¿ç”¨æ—¶ï¼š</p><div class="code-wrapper"><pre><code class="hljs dust"><span class="xml">import TransverseTable from &quot;@/components/TransverseTable&quot;;</span><span class="xml"></span><span class="xml">components:</span><span class="hljs-template-variable">&#123;TransverseTable&#125;</span><span class="xml"></span><span class="xml"></span><span class="xml"></span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">transverse-table</span></span></span><span class="hljs-tag"><span class="xml">  <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;transverseTable&quot;</span></span></span><span class="hljs-tag"><span class="xml">  <span class="hljs-attr">:columnNum</span>=<span class="hljs-string">&quot;4&quot;</span></span></span><span class="hljs-tag"><span class="xml">  <span class="hljs-attr">:tableData</span>=<span class="hljs-string">&quot;[</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="xml">  </span></span></span><span class="hljs-template-variable">&#123;key:&#x27;æµ‹è¯•&#x27;,value: 1&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">,</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="xml">  </span></span></span><span class="hljs-template-variable">&#123;key:&#x27;æµ‹è¯•&#x27;,value: 1&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">,</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="xml">  </span></span></span><span class="hljs-template-variable">&#123;key:&#x27;æµ‹è¯•&#x27;,value: 1&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">,</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="xml">  </span></span></span><span class="hljs-template-variable">&#123;key:&#x27;æµ‹è¯•&#x27;,value: 1&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">,</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="xml">  </span></span></span><span class="hljs-template-variable">&#123;key:&#x27;æµ‹è¯•&#x27;,value: 1&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">,</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="xml">  </span></span></span><span class="hljs-template-variable">&#123;key:&#x27;æµ‹è¯•&#x27;,value: 1&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">,</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="xml">  </span></span></span><span class="hljs-template-variable">&#123;key:&#x27;æµ‹è¯•&#x27;,value: 1&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">,</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="xml">  </span></span></span><span class="hljs-template-variable">&#123;key:&#x27;æµ‹è¯•&#x27;,value: 1&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">,]&quot;</span>&gt;</span></span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">transverse-table</span>&gt;</span></span><span class="xml"></span><span class="xml"></span><span class="xml">åœ¨çˆ¶ç»„ä»¶é‡Œ,åŠ¨æ€è·å–æ•°æ®æ—¶éœ€è¦è°ƒç”¨ä¸‹this.$refs.transverseTable.setTable() æ¥æ¸²æŸ“æ•°æ®</span></code></pre></div>]]></content>
    
    
    <categories>
      
      <category>Webå¼€å‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Vue</tag>
      
      <tag>Element UI</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Element UI è‡ªå®šä¹‰ä¸‹æ‹‰æ¡†ç»„ä»¶</title>
    <link href="/2021/06/09/Element-UI-%E8%87%AA%E5%AE%9A%E4%B9%89%E4%B8%8B%E6%8B%89%E6%A1%86%E7%BB%84%E4%BB%B6/"/>
    <url>/2021/06/09/Element-UI-%E8%87%AA%E5%AE%9A%E4%B9%89%E4%B8%8B%E6%8B%89%E6%A1%86%E7%BB%84%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<h3 id="æ•ˆæœå›¾"><a href="#æ•ˆæœå›¾" class="headerlink" title="æ•ˆæœå›¾"></a>æ•ˆæœå›¾</h3><p>æ”¯æŒå…¨é€‰åé€‰ï¼ŒåŠæ¨¡ç³Šæœç´¢</p><p><img src="/img/blog/element/self_select.png"></p><h3 id="ç»„ä»¶æºç "><a href="#ç»„ä»¶æºç " class="headerlink" title="ç»„ä»¶æºç "></a>ç»„ä»¶æºç </h3><div class="code-wrapper"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span></span><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">el-select</span></span></span><span class="hljs-tag"><span class="xml">        <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;subjectSelect&quot;</span></span></span><span class="hljs-tag"><span class="xml">        <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;subjectNameIds&quot;</span></span></span><span class="hljs-tag"><span class="xml">        <span class="hljs-attr">:disabled</span>=<span class="hljs-string">&quot;hideSelect&quot;</span></span></span><span class="hljs-tag"><span class="xml">        <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;width:100%&quot;</span></span></span><span class="hljs-tag"><span class="xml">        <span class="hljs-attr">multiple</span></span></span><span class="hljs-tag"><span class="xml">        <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;selectKeys&quot;</span></span></span><span class="hljs-tag"><span class="xml">        <span class="hljs-attr">value-key</span>=<span class="hljs-string">&quot;id&quot;</span></span></span><span class="hljs-tag"><span class="xml">        @<span class="hljs-attr">click.native</span>=<span class="hljs-string">&quot;subjectSelectClick&quot;</span></span></span><span class="hljs-tag"><span class="xml">        @<span class="hljs-attr">change</span>=<span class="hljs-string">&quot;subjectChange&quot;</span></span></span><span class="hljs-tag"><span class="xml">    &gt;</span></span><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">el-option</span></span></span><span class="hljs-tag"><span class="xml">          <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;item in copy_subjectTypeList&quot;</span></span></span><span class="hljs-tag"><span class="xml">          <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;item.id&quot;</span></span></span><span class="hljs-tag"><span class="xml">          <span class="hljs-attr">:label</span>=<span class="hljs-string">&quot;item.name&quot;</span></span></span><span class="hljs-tag"><span class="xml">          <span class="hljs-attr">:value</span>=<span class="hljs-string">&quot;item.id&quot;</span></span></span><span class="hljs-tag"><span class="xml">      &gt;</span></span><span class="xml">        </span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">item.name</span> &#125;&#125;</span><span class="xml"></span><span class="xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">el-option</span>&gt;</span></span><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">el-select</span>&gt;</span></span><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">el-popover</span></span></span><span class="hljs-tag"><span class="xml">        <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;popover&quot;</span></span></span><span class="hljs-tag"><span class="xml">        <span class="hljs-attr">placement</span>=<span class="hljs-string">&quot;bottom&quot;</span></span></span><span class="hljs-tag"><span class="xml">        <span class="hljs-attr">trigger</span>=<span class="hljs-string">&quot;manual&quot;</span></span></span><span class="hljs-tag"><span class="xml">        <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;popShow&quot;</span></span></span><span class="hljs-tag"><span class="xml">    &gt;</span></span><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;close-btn&quot;</span>&gt;</span></span><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span></span></span><span class="hljs-tag"><span class="xml">            <span class="hljs-attr">size</span>=<span class="hljs-string">&quot;mini&quot;</span></span></span><span class="hljs-tag"><span class="xml">            <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;primary&quot;</span></span></span><span class="hljs-tag"><span class="xml">            @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;subjectSelectClick&quot;</span></span></span><span class="hljs-tag"><span class="xml">        &gt;</span>å…³é—­</span><span class="xml">        &lt;/el-button</span><span class="xml">        &gt;</span><span class="xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><span class="xml"></span><span class="xml"></span><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;poper__head&quot;</span>&gt;</span></span><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;checkBoxTitle&quot;</span>&gt;</span></span><span class="xml">          <span class="hljs-tag">&lt;<span class="hljs-name">el-checkbox</span></span></span><span class="hljs-tag"><span class="xml">              <span class="hljs-attr">:disabled</span>=<span class="hljs-string">&quot;hideCheckBox&quot;</span></span></span><span class="hljs-tag"><span class="xml">              <span class="hljs-attr">:indeterminate</span>=<span class="hljs-string">&quot;isIndeterminate&quot;</span></span></span><span class="hljs-tag"><span class="xml">              <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;checkAll&quot;</span></span></span><span class="hljs-tag"><span class="xml">              @<span class="hljs-attr">change</span>=<span class="hljs-string">&quot;handleCheckAllChange&quot;</span></span></span><span class="hljs-tag"><span class="xml">          &gt;</span>å…¨é€‰</span><span class="xml">          &lt;/el-checkbox</span><span class="xml">          &gt;</span><span class="xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><span class="xml">          <span class="hljs-tag">&lt;<span class="hljs-name">el-input</span></span></span><span class="hljs-tag"><span class="xml">              <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;è¯·è¾“å…¥å…³é”®å­—æ¨¡ç³Šæœç´¢&quot;</span></span></span><span class="hljs-tag"><span class="xml">              <span class="hljs-attr">v-model.trim</span>=<span class="hljs-string">&quot;subject_name&quot;</span></span></span><span class="hljs-tag"><span class="xml">              <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;input-with-select&quot;</span></span></span><span class="hljs-tag"><span class="xml">              <span class="hljs-attr">clearable</span></span></span><span class="hljs-tag"><span class="xml">          &gt;</span></span><span class="xml">            <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span></span></span><span class="hljs-tag"><span class="xml">                <span class="hljs-attr">slot</span>=<span class="hljs-string">&quot;append&quot;</span></span></span><span class="hljs-tag"><span class="xml">                <span class="hljs-attr">icon</span>=<span class="hljs-string">&quot;el-icon-search&quot;</span></span></span><span class="hljs-tag"><span class="xml">                @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;searchSubjectName&quot;</span></span></span><span class="hljs-tag"><span class="xml">            &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span></span><span class="xml">          <span class="hljs-tag">&lt;/<span class="hljs-name">el-input</span>&gt;</span></span><span class="xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><span class="xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span></span><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;popChild&quot;</span>&gt;</span></span><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">el-checkbox-group</span></span></span><span class="hljs-tag"><span class="xml">            <span class="hljs-attr">:disabled</span>=<span class="hljs-string">&quot;hideCheckBox&quot;</span></span></span><span class="hljs-tag"><span class="xml">            <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;checkedSubjects&quot;</span></span></span><span class="hljs-tag"><span class="xml">            @<span class="hljs-attr">change</span>=<span class="hljs-string">&quot;handleCheckedCitiesChange&quot;</span></span></span><span class="hljs-tag"><span class="xml">        &gt;</span></span><span class="xml">          <span class="hljs-tag">&lt;<span class="hljs-name">el-checkbox</span></span></span><span class="hljs-tag"><span class="xml">              <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;item in copy_subjectTypeList&quot;</span></span></span><span class="hljs-tag"><span class="xml">              <span class="hljs-attr">:label</span>=<span class="hljs-string">&quot;item.id&quot;</span></span></span><span class="hljs-tag"><span class="xml">              <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;item.id&quot;</span></span></span><span class="hljs-tag"><span class="xml">          &gt;</span></span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">item.name</span> &#125;&#125;</span><span class="xml"></span><span class="xml">          &lt;/el-checkbox</span><span class="xml">          &gt;</span><span class="xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">el-checkbox-group</span>&gt;</span></span><span class="xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">el-popover</span>&gt;</span></span><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><span class="xml"></span><span class="xml"></span><span class="xml"></span><span class="xml"></span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span></span><span class="javascript"><span class="xml"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span></span><span class="javascript"><span class="xml">  <span class="hljs-attr">props</span>: &#123;</span></span><span class="javascript"><span class="xml">    <span class="hljs-attr">subjectTypeList</span>: &#123; <span class="hljs-comment">//ä¼ å…¥çš„å¯ç­›é€‰æ•°ç»„</span></span></span><span class="javascript"><span class="xml">      <span class="hljs-attr">type</span>: <span class="hljs-built_in">Array</span>,</span></span><span class="javascript"><span class="xml">      <span class="hljs-attr">default</span>: []</span></span><span class="javascript"><span class="xml">    &#125;,</span></span><span class="javascript"><span class="xml">    <span class="hljs-attr">hideSelect</span>: &#123;</span></span><span class="javascript"><span class="xml">      <span class="hljs-attr">type</span>: <span class="hljs-built_in">Boolean</span>,</span></span><span class="javascript"><span class="xml">      <span class="hljs-attr">default</span>: <span class="hljs-literal">false</span></span></span><span class="javascript"><span class="xml">    &#125;,</span></span><span class="javascript"><span class="xml">    <span class="hljs-attr">hideCheckBox</span>: &#123;</span></span><span class="javascript"><span class="xml">      <span class="hljs-attr">type</span>: <span class="hljs-built_in">Boolean</span>,</span></span><span class="javascript"><span class="xml">      <span class="hljs-attr">default</span>: <span class="hljs-literal">false</span></span></span><span class="javascript"><span class="xml">    &#125;,</span></span><span class="javascript"><span class="xml">    <span class="hljs-attr">panelTitle</span>: &#123;</span></span><span class="javascript"><span class="xml">      <span class="hljs-attr">type</span>: <span class="hljs-built_in">String</span>,</span></span><span class="javascript"><span class="xml">      <span class="hljs-attr">default</span>: <span class="hljs-string">&quot;è¯·é€‰æ‹©æ•°æ®&quot;</span></span></span><span class="javascript"><span class="xml">    &#125;</span></span><span class="javascript"><span class="xml">  &#125;,</span></span><span class="javascript"><span class="xml">  <span class="hljs-function"><span class="hljs-title">data</span>(<span class="hljs-params"></span>)</span> &#123;</span></span><span class="javascript"><span class="xml">    <span class="hljs-keyword">return</span> &#123;</span></span><span class="javascript"><span class="xml">      <span class="hljs-attr">alreadySelectList</span>: [],<span class="hljs-comment">//å·²ç»é€‰ä¸­çš„æ•°æ®,ç¼–è¾‘æ—¶å±•ç¤º</span></span></span><span class="javascript"><span class="xml">      <span class="hljs-attr">copy_subjectTypeList</span>: [],<span class="hljs-comment">//å¤åˆ¶çš„å¯ç­›é€‰æ•°ç»„,å­ç»„ä»¶ä¸å¯ç›´æ¥æ›´æ”¹çˆ¶ç»„ä»¶ä¼ æ¥çš„å€¼</span></span></span><span class="javascript"><span class="xml">      <span class="hljs-attr">subjectNameIds</span>: [],<span class="hljs-comment">//å½“å‰é€‰ä¸­çš„ç§‘ç›®</span></span></span><span class="javascript"><span class="xml">      <span class="hljs-attr">primeSubjectTypeList</span>: [],</span></span><span class="javascript"><span class="xml">      <span class="hljs-attr">selectKeys</span>: <span class="hljs-number">1</span>,</span></span><span class="javascript"><span class="xml">      <span class="hljs-attr">checkAll</span>: <span class="hljs-literal">false</span>,</span></span><span class="javascript"><span class="xml">      <span class="hljs-attr">isIndeterminate</span>: <span class="hljs-literal">false</span>,</span></span><span class="javascript"><span class="xml">      <span class="hljs-attr">checkedSubjects</span>: [], <span class="hljs-comment">//å½“å‰å‹¾é€‰çš„å¤é€‰æ¡†</span></span></span><span class="javascript"><span class="xml">      <span class="hljs-attr">subject_name</span>: <span class="hljs-string">&quot;&quot;</span>,</span></span><span class="javascript"><span class="xml">      <span class="hljs-attr">popShow</span>: <span class="hljs-literal">false</span></span></span><span class="javascript"><span class="xml">    &#125;;</span></span><span class="javascript"><span class="xml">  &#125;,</span></span><span class="javascript"><span class="xml"></span></span><span class="javascript"><span class="xml"></span></span><span class="javascript"><span class="xml">  <span class="hljs-attr">watch</span>: &#123;</span></span><span class="javascript"><span class="xml">    <span class="hljs-function"><span class="hljs-title">subjectTypeList</span>(<span class="hljs-params"></span>)</span> &#123;</span></span><span class="javascript"><span class="xml">      <span class="hljs-built_in">this</span>.copy_subjectTypeList = <span class="hljs-built_in">this</span>.subjectTypeList.concat();</span></span><span class="javascript"><span class="xml">      <span class="hljs-built_in">this</span>.primeSubjectTypeList = <span class="hljs-built_in">this</span>.subjectTypeList.concat();</span></span><span class="javascript"><span class="xml">    &#125;</span></span><span class="javascript"><span class="xml">  &#125;,</span></span><span class="javascript"><span class="xml"></span></span><span class="javascript"><span class="xml"></span></span><span class="javascript"><span class="xml">  <span class="hljs-function"><span class="hljs-title">created</span>(<span class="hljs-params"></span>)</span> &#123;</span></span><span class="javascript"><span class="xml">  &#125;,</span></span><span class="javascript"><span class="xml"></span></span><span class="javascript"><span class="xml"></span></span><span class="javascript"><span class="xml">  <span class="hljs-function"><span class="hljs-title">mounted</span>(<span class="hljs-params"></span>)</span> &#123;</span></span><span class="javascript"><span class="xml">    <span class="hljs-built_in">this</span>.initSelectAndPanel();</span></span><span class="javascript"><span class="xml">    <span class="hljs-built_in">this</span>.$refs.popover.$refs.popper.style.width = <span class="hljs-built_in">this</span>.$el.clientWidth + <span class="hljs-string">&quot;px&quot;</span>;</span></span><span class="javascript"><span class="xml">  &#125;,</span></span><span class="javascript"><span class="xml"></span></span><span class="javascript"><span class="xml"></span></span><span class="javascript"><span class="xml">  <span class="hljs-attr">methods</span>: &#123;</span></span><span class="javascript"><span class="xml"></span></span><span class="javascript"><span class="xml"></span></span><span class="javascript"><span class="xml">    <span class="hljs-comment">//å­ç»„ä»¶éœ€è¦æ¯æ¬¡æ“ä½œåå‘çˆ¶çº§ä¼ é€’é€‰ä¸­ç§‘ç›®</span></span></span><span class="javascript"><span class="xml">    <span class="hljs-function"><span class="hljs-title">emitParent</span>(<span class="hljs-params"></span>)</span> &#123;</span></span><span class="javascript"><span class="xml">      <span class="hljs-built_in">this</span>.$emit(<span class="hljs-string">&quot;selectData&quot;</span>, <span class="hljs-built_in">this</span>.subjectNameIds);</span></span><span class="javascript"><span class="xml">    &#125;,</span></span><span class="javascript"><span class="xml"></span></span><span class="javascript"><span class="xml"></span></span><span class="javascript"><span class="xml">    <span class="hljs-comment">//åˆå§‹åŒ–å½“å‰ä¸‹æ‹‰æ¡†å’Œå¤é€‰æ¡†</span></span></span><span class="javascript"><span class="xml">    <span class="hljs-function"><span class="hljs-title">initSelectAndPanel</span>(<span class="hljs-params"></span>)</span> &#123;</span></span><span class="javascript"><span class="xml">      <span class="hljs-built_in">this</span>.subject_name = <span class="hljs-string">&quot;&quot;</span>;</span></span><span class="javascript"><span class="xml">      <span class="hljs-built_in">this</span>.checkAll = <span class="hljs-literal">false</span>;</span></span><span class="javascript"><span class="xml">      <span class="hljs-built_in">this</span>.isIndeterminate = <span class="hljs-literal">false</span>;</span></span><span class="javascript"><span class="xml">      <span class="hljs-built_in">this</span>.popShow = <span class="hljs-literal">false</span>;</span></span><span class="javascript"><span class="xml">      <span class="hljs-built_in">this</span>.checkedSubjects = [];</span></span><span class="javascript"><span class="xml">      <span class="hljs-built_in">this</span>.subjectNameIds = [];</span></span><span class="javascript"><span class="xml">      <span class="hljs-built_in">this</span>.copy_subjectTypeList = [];</span></span><span class="javascript"><span class="xml">      <span class="hljs-built_in">this</span>.primeSubjectTypeList = [];</span></span><span class="javascript"><span class="xml">      <span class="hljs-built_in">this</span>.updateSelectCompoment([]);</span></span><span class="javascript"><span class="xml">    &#125;,</span></span><span class="javascript"><span class="xml"></span></span><span class="javascript"><span class="xml"></span></span><span class="javascript"><span class="xml">    <span class="hljs-comment">//è®¾ç½®å½“å‰å·²ç»é€‰ä¸­çš„æ•°æ®,ä»…ä½œå±•ç¤º</span></span></span><span class="javascript"><span class="xml">    <span class="hljs-comment">// (å½“å‰é€»è¾‘ç¼–è¾‘æ—¶ä¸å¯ä¿®æ”¹,å¦‚éœ€ç¼–è¾‘æ—¶å¯ä¿®æ”¹éœ€è¦å˜åŠ¨å½“å‰é¡µé¢é€»è¾‘å’Œè°ƒç”¨é€»è¾‘)</span></span></span><span class="javascript"><span class="xml">    <span class="hljs-function"><span class="hljs-title">setSelfAlreadySelect</span>(<span class="hljs-params">list</span>)</span> &#123;</span></span><span class="javascript"><span class="xml">      <span class="hljs-built_in">this</span>.subjectNameIds = list;</span></span><span class="javascript"><span class="xml">      <span class="hljs-keyword">let</span> test = <span class="hljs-built_in">this</span>.copy_subjectTypeList.filter(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> &#123;</span></span><span class="javascript"><span class="xml">        <span class="hljs-keyword">return</span> item.id == list[<span class="hljs-number">0</span>];</span></span><span class="javascript"><span class="xml">      &#125;);</span></span><span class="javascript"><span class="xml">      <span class="hljs-built_in">this</span>.$forceUpdate();</span></span><span class="javascript"><span class="xml">    &#125;,</span></span><span class="javascript"><span class="xml"></span></span><span class="javascript"><span class="xml"></span></span><span class="javascript"><span class="xml">    <span class="hljs-function"><span class="hljs-title">subjectChange</span>(<span class="hljs-params">val</span>)</span> &#123;</span></span><span class="javascript"><span class="xml">      <span class="hljs-built_in">this</span>.checkedSubjects = val;</span></span><span class="javascript"><span class="xml">      <span class="hljs-built_in">this</span>.handleCheckedCitiesChange(<span class="hljs-built_in">this</span>.subjectNameIds);</span></span><span class="javascript"><span class="xml">    &#125;,</span></span><span class="javascript"><span class="xml">    <span class="hljs-comment">//ç‚¹å‡»ä¸‹æ‹‰æ¡†æ—¶æ‰“å¼€popæ¡†</span></span></span><span class="javascript"><span class="xml">    <span class="hljs-function"><span class="hljs-title">subjectSelectClick</span>(<span class="hljs-params"></span>)</span> &#123;</span></span><span class="javascript"><span class="xml">      <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">this</span>.hideSelect) &#123;</span></span><span class="javascript"><span class="xml">        <span class="hljs-built_in">this</span>.subject_name = <span class="hljs-string">&quot;&quot;</span>;</span></span><span class="javascript"><span class="xml">        <span class="hljs-comment">//åªæœ‰æ–°å¢æ—¶æ‰å¯æ˜¾ç¤º</span></span></span><span class="javascript"><span class="xml">        <span class="hljs-built_in">this</span>.$refs.subjectSelect.blur();</span></span><span class="javascript"><span class="xml">        <span class="hljs-built_in">this</span>.popShow = !<span class="hljs-built_in">this</span>.popShow;</span></span><span class="javascript"><span class="xml">      &#125;</span></span><span class="javascript"><span class="xml">    &#125;,</span></span><span class="javascript"><span class="xml">    <span class="hljs-comment">//æ¯æ­¤ç‚¹å‡»å¤é€‰æ¡†çš„æ—¶å€™åˆ¤æ–­:å…¨é€‰æŒ‰é’®æ˜¾ç¤ºé€»è¾‘å’Œä¸‹æ‹‰æ¡†é€‰é¡¹åˆå¹¶é€»è¾‘</span></span></span><span class="javascript"><span class="xml">    <span class="hljs-function"><span class="hljs-title">handleCheckedCitiesChange</span>(<span class="hljs-params">value</span>)</span> &#123;</span></span><span class="javascript"><span class="xml">      <span class="hljs-built_in">this</span>.subjectNameIds = value;</span></span><span class="javascript"><span class="xml">      <span class="hljs-comment">//å¦‚æœå½“å‰ä¸‹æ‹‰æ¡†é‡Œçš„åˆ—è¡¨é€‰é¡¹å·²è¢«å…¨éƒ¨é€‰æ‹©: å…¨é€‰ä¸ºtrueï¼Œå¦åˆ™ä¸ºfalse</span></span></span><span class="javascript"><span class="xml">      <span class="hljs-keyword">let</span> ids = <span class="hljs-built_in">this</span>.subjectNameIds.sort();</span></span><span class="javascript"><span class="xml">      <span class="hljs-keyword">let</span> list = <span class="hljs-built_in">this</span>.copy_subjectTypeList.sort(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> &#123;</span></span><span class="javascript"><span class="xml">        <span class="hljs-keyword">return</span> a.id &gt; b.id;</span></span><span class="javascript"><span class="xml">      &#125;);</span></span><span class="javascript"><span class="xml">      <span class="hljs-keyword">if</span> (</span></span><span class="javascript"><span class="xml">          value.length &gt; <span class="hljs-number">0</span> &amp;&amp;</span></span><span class="javascript"><span class="xml">          (value.length &gt; <span class="hljs-built_in">this</span>.copy_subjectTypeList.length ||</span></span><span class="javascript"><span class="xml">              value.length == <span class="hljs-built_in">this</span>.copy_subjectTypeList.length)</span></span><span class="javascript"><span class="xml">      ) &#123;</span></span><span class="javascript"><span class="xml"></span></span><span class="javascript"><span class="xml"></span></span><span class="javascript"><span class="xml">        <span class="hljs-keyword">let</span> temp = <span class="hljs-number">0</span>;</span></span><span class="javascript"><span class="xml">        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; ids.length; i++) &#123;</span></span><span class="javascript"><span class="xml">          <span class="hljs-keyword">let</span> Index = list.findIndex(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> &#123;</span></span><span class="javascript"><span class="xml">            <span class="hljs-keyword">return</span> item.id === ids[i];</span></span><span class="javascript"><span class="xml">          &#125;);</span></span><span class="javascript"><span class="xml">          temp = Index &gt;= <span class="hljs-number">0</span> ? (temp += <span class="hljs-number">1</span>) : temp;</span></span><span class="javascript"><span class="xml">        &#125;</span></span><span class="javascript"><span class="xml">        <span class="hljs-comment">// console.log(&quot;ç›¸åŒçš„æ•°é‡&quot;, temp);</span></span></span><span class="javascript"><span class="xml">        <span class="hljs-keyword">if</span> (temp &gt; <span class="hljs-number">0</span>) &#123;</span></span><span class="javascript"><span class="xml">          <span class="hljs-keyword">if</span> (list.length == temp) &#123;</span></span><span class="javascript"><span class="xml">            <span class="hljs-built_in">this</span>.checkAll = <span class="hljs-literal">true</span>;</span></span><span class="javascript"><span class="xml">            <span class="hljs-built_in">this</span>.isIndeterminate = <span class="hljs-literal">false</span>;</span></span><span class="javascript"><span class="xml">          &#125;</span></span><span class="javascript"><span class="xml">          <span class="hljs-keyword">else</span> &#123;</span></span><span class="javascript"><span class="xml">            <span class="hljs-built_in">this</span>.checkAll = <span class="hljs-literal">false</span>;</span></span><span class="javascript"><span class="xml">            <span class="hljs-built_in">this</span>.isIndeterminate = <span class="hljs-literal">true</span>;</span></span><span class="javascript"><span class="xml">          &#125;</span></span><span class="javascript"><span class="xml">        &#125;</span></span><span class="javascript"><span class="xml">        <span class="hljs-keyword">else</span> &#123;</span></span><span class="javascript"><span class="xml">          <span class="hljs-built_in">this</span>.checkAll = <span class="hljs-literal">false</span>;</span></span><span class="javascript"><span class="xml">        &#125;</span></span><span class="javascript"><span class="xml">      &#125;</span></span><span class="javascript"><span class="xml">      <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (</span></span><span class="javascript"><span class="xml">          value.length &gt; <span class="hljs-number">0</span> &amp;&amp;</span></span><span class="javascript"><span class="xml">          value.length &lt; <span class="hljs-built_in">this</span>.copy_subjectTypeList.length</span></span><span class="javascript"><span class="xml">      ) &#123;</span></span><span class="javascript"><span class="xml">        <span class="hljs-comment">//åˆ¤æ–­å‰©ä½™çš„é€‰é¡¹é‡Œæœ‰å’©æœ‰åˆ—è¡¨é‡Œçš„å…ƒç´ </span></span></span><span class="javascript"><span class="xml">        <span class="hljs-keyword">let</span> temp = <span class="hljs-number">0</span>;</span></span><span class="javascript"><span class="xml">        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; ids.length; i++) &#123;</span></span><span class="javascript"><span class="xml">          <span class="hljs-keyword">let</span> Index = list.findIndex(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> &#123;</span></span><span class="javascript"><span class="xml">            <span class="hljs-keyword">return</span> item.id === ids[i];</span></span><span class="javascript"><span class="xml">          &#125;);</span></span><span class="javascript"><span class="xml">          temp = Index &gt;= <span class="hljs-number">0</span> ? (temp += <span class="hljs-number">1</span>) : temp;</span></span><span class="javascript"><span class="xml">        &#125;</span></span><span class="javascript"><span class="xml">        <span class="hljs-built_in">this</span>.isIndeterminate = temp &gt; <span class="hljs-number">0</span> ? <span class="hljs-literal">true</span> : <span class="hljs-literal">false</span>;</span></span><span class="javascript"><span class="xml">      &#125;</span></span><span class="javascript"><span class="xml">      <span class="hljs-keyword">else</span> &#123;</span></span><span class="javascript"><span class="xml">        <span class="hljs-comment">// console.log(&quot;é€‰é¡¹é‡Œæ²¡æœ‰æ•°æ®&quot;);</span></span></span><span class="javascript"><span class="xml">        <span class="hljs-built_in">this</span>.isIndeterminate = <span class="hljs-literal">false</span>;</span></span><span class="javascript"><span class="xml">        <span class="hljs-built_in">this</span>.checkAll = <span class="hljs-literal">false</span>;</span></span><span class="javascript"><span class="xml">      &#125;</span></span><span class="javascript"><span class="xml">      <span class="hljs-built_in">this</span>.emitParent();</span></span><span class="javascript"><span class="xml">      <span class="hljs-built_in">this</span>.$forceUpdate();</span></span><span class="javascript"><span class="xml">    &#125;,</span></span><span class="javascript"><span class="xml">    <span class="hljs-comment">//æ¨¡ç³Šæœç´¢ç§‘ç›®,æ¯æ¬¡éƒ½ä»primeSubjectTypeListåˆ—è¡¨é‡Œæœ</span></span></span><span class="javascript"><span class="xml">    <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-title">searchSubjectName</span>(<span class="hljs-params"></span>)</span> &#123;</span></span><span class="javascript"><span class="xml">      <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.subject_name != <span class="hljs-string">&quot;&quot;</span>) &#123;</span></span><span class="javascript"><span class="xml">        <span class="hljs-built_in">this</span>.copy_subjectTypeList = <span class="hljs-built_in">this</span>.fuzzySearch(</span></span><span class="javascript"><span class="xml">            <span class="hljs-built_in">this</span>.subject_name,</span></span><span class="javascript"><span class="xml">            <span class="hljs-built_in">this</span>.primeSubjectTypeList</span></span><span class="javascript"><span class="xml">        );</span></span><span class="javascript"><span class="xml">        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.copy_subjectTypeList.length == <span class="hljs-number">0</span>) &#123;</span></span><span class="javascript"><span class="xml">          <span class="hljs-built_in">this</span>.isIndeterminate = <span class="hljs-literal">false</span>;</span></span><span class="javascript"><span class="xml">          <span class="hljs-built_in">this</span>.checkAll = <span class="hljs-literal">false</span>;</span></span><span class="javascript"><span class="xml">        &#125;</span></span><span class="javascript"><span class="xml">        <span class="hljs-keyword">else</span> &#123;</span></span><span class="javascript"><span class="xml">          <span class="hljs-built_in">this</span>.checkSubjectList();</span></span><span class="javascript"><span class="xml">        &#125;</span></span><span class="javascript"><span class="xml">      &#125;</span></span><span class="javascript"><span class="xml">      <span class="hljs-keyword">else</span> &#123;</span></span><span class="javascript"><span class="xml">        <span class="hljs-built_in">this</span>.copy_subjectTypeList = <span class="hljs-built_in">this</span>.primeSubjectTypeList; <span class="hljs-comment">//ç›´æ¥æ˜¾ç¤ºåŸå§‹æ•°æ®,ä¸éœ€è¦å†æ¬¡å‘æœåŠ¡å™¨è¯·æ±‚</span></span></span><span class="javascript"><span class="xml">        <span class="hljs-built_in">this</span>.checkSubjectList();</span></span><span class="javascript"><span class="xml">      &#125;</span></span><span class="javascript"><span class="xml">    &#125;,</span></span><span class="javascript"><span class="xml">    <span class="hljs-comment">//æ¯æ¬¡æœç´¢å‡ºç»“æœè¿›è¡Œæ¯”å¯¹ï¼šæ£€æµ‹ä¸¤ä¸ªæ•°ç»„æ˜¾ç¤ºåé€‰å…¨é€‰çš„æ˜¾ç¤º</span></span></span><span class="javascript"><span class="xml">    <span class="hljs-function"><span class="hljs-title">checkSubjectList</span>(<span class="hljs-params"></span>)</span> &#123;</span></span><span class="javascript"><span class="xml">      <span class="hljs-comment">//éœ€è¦åˆ¤æ–­å½“å‰å·²é€‰æ‹©çš„å’Œä¸‹æ‹‰æ¡†é‡Œçš„æ•°ç»„è¿›è¡Œæ¯”è¾ƒï¼Œç”¨æ¥æ˜¾ç¤ºå…¨é€‰æŒ‰é’®çš„çŠ¶æ€</span></span></span><span class="javascript"><span class="xml">      <span class="hljs-keyword">let</span> ids = <span class="hljs-built_in">this</span>.subjectNameIds.sort();</span></span><span class="javascript"><span class="xml">      <span class="hljs-keyword">let</span> list = <span class="hljs-built_in">this</span>.copy_subjectTypeList.sort();</span></span><span class="javascript"><span class="xml"></span></span><span class="javascript"><span class="xml"></span></span><span class="javascript"><span class="xml">      <span class="hljs-keyword">let</span> temp = <span class="hljs-number">0</span>;</span></span><span class="javascript"><span class="xml">      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; ids.length; i++) &#123;</span></span><span class="javascript"><span class="xml">        <span class="hljs-keyword">let</span> Index = list.findIndex(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> &#123;</span></span><span class="javascript"><span class="xml">          <span class="hljs-keyword">return</span> item.id === ids[i];</span></span><span class="javascript"><span class="xml">        &#125;);</span></span><span class="javascript"><span class="xml">        temp = Index &gt;= <span class="hljs-number">0</span> ? (temp += <span class="hljs-number">1</span>) : temp;</span></span><span class="javascript"><span class="xml">      &#125;</span></span><span class="javascript"><span class="xml">      <span class="hljs-comment">//é»˜è®¤å°†ä¸¤ä¸ªboolè®¾ç½®æˆfalse,æ ¹æ®ç»“æœè®¾ç½®ä¸åŒæ˜¾ç¤º</span></span></span><span class="javascript"><span class="xml">      <span class="hljs-built_in">this</span>.isIndeterminate = <span class="hljs-literal">false</span>;</span></span><span class="javascript"><span class="xml">      <span class="hljs-built_in">this</span>.checkAll = <span class="hljs-literal">false</span>;</span></span><span class="javascript"><span class="xml">      <span class="hljs-keyword">if</span> (ids.length &gt; list.length || ids.length == list.length) &#123;</span></span><span class="javascript"><span class="xml">        <span class="hljs-keyword">if</span> (temp &gt; <span class="hljs-number">0</span> &amp;&amp; list.length == temp) &#123;</span></span><span class="javascript"><span class="xml">          <span class="hljs-comment">// console.log(&quot;å®Œå…¨åŒ…å«åˆ—è¡¨é‡Œæ‰€æœ‰é€‰é¡¹&quot;);</span></span></span><span class="javascript"><span class="xml">          <span class="hljs-built_in">this</span>.checkAll = <span class="hljs-literal">true</span>;</span></span><span class="javascript"><span class="xml">        &#125;</span></span><span class="javascript"><span class="xml">        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (temp &gt; <span class="hljs-number">0</span> &amp;&amp; list.length != temp) &#123;</span></span><span class="javascript"><span class="xml">          <span class="hljs-comment">// console.log(&quot;ä¸å®Œå…¨åŒ…å«åˆ—è¡¨é‡Œçš„é€‰é¡¹&quot;);</span></span></span><span class="javascript"><span class="xml">          <span class="hljs-built_in">this</span>.isIndeterminate = <span class="hljs-literal">true</span>;</span></span><span class="javascript"><span class="xml">        &#125;</span></span><span class="javascript"><span class="xml">      &#125;</span></span><span class="javascript"><span class="xml">      <span class="hljs-keyword">else</span> &#123;</span></span><span class="javascript"><span class="xml">        <span class="hljs-keyword">if</span> (temp &gt; <span class="hljs-number">0</span>) &#123;</span></span><span class="javascript"><span class="xml">          <span class="hljs-built_in">this</span>.isIndeterminate = <span class="hljs-literal">true</span>;</span></span><span class="javascript"><span class="xml">        &#125;</span></span><span class="javascript"><span class="xml">      &#125;</span></span><span class="javascript"><span class="xml">    &#125;,</span></span><span class="javascript"><span class="xml">    <span class="hljs-function"><span class="hljs-title">fuzzySearch</span>(<span class="hljs-params">str, container</span>)</span> &#123;</span></span><span class="javascript"><span class="xml">      <span class="hljs-keyword">var</span> newList = [];</span></span><span class="javascript"><span class="xml">      <span class="hljs-keyword">var</span> startChar = str.charAt(<span class="hljs-number">0</span>);</span></span><span class="javascript"><span class="xml">      <span class="hljs-keyword">var</span> strLen = str.length;</span></span><span class="javascript"><span class="xml">      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; container.length; i++) &#123;</span></span><span class="javascript"><span class="xml">        <span class="hljs-keyword">var</span> obj = container[i];</span></span><span class="javascript"><span class="xml">        <span class="hljs-keyword">var</span> isMatch = <span class="hljs-literal">false</span>;</span></span><span class="javascript"><span class="xml">        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> p <span class="hljs-keyword">in</span> obj) &#123;</span></span><span class="javascript"><span class="xml">          <span class="hljs-keyword">var</span> curItem = <span class="hljs-string">&quot;&quot;</span>;</span></span><span class="javascript"><span class="xml">          <span class="hljs-keyword">if</span> (obj[p] != <span class="hljs-literal">null</span>) &#123;</span></span><span class="javascript"><span class="xml">            curItem = obj[p];</span></span><span class="javascript"><span class="xml">          &#125;</span></span><span class="javascript"><span class="xml">          <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> j = <span class="hljs-number">0</span>; j &lt; curItem.length; j++) &#123;</span></span><span class="javascript"><span class="xml">            <span class="hljs-keyword">if</span> (curItem.charAt(j) == startChar) &#123;</span></span><span class="javascript"><span class="xml">              <span class="hljs-keyword">if</span> (curItem.substring(j).substring(<span class="hljs-number">0</span>, strLen) == str) &#123;</span></span><span class="javascript"><span class="xml">                isMatch = <span class="hljs-literal">true</span>;</span></span><span class="javascript"><span class="xml">                <span class="hljs-keyword">break</span>;</span></span><span class="javascript"><span class="xml">              &#125;</span></span><span class="javascript"><span class="xml">            &#125;</span></span><span class="javascript"><span class="xml">          &#125;</span></span><span class="javascript"><span class="xml">        &#125;</span></span><span class="javascript"><span class="xml">        <span class="hljs-keyword">if</span> (isMatch) &#123;</span></span><span class="javascript"><span class="xml">          newList.push(obj);</span></span><span class="javascript"><span class="xml">        &#125;</span></span><span class="javascript"><span class="xml">      &#125;</span></span><span class="javascript"><span class="xml">      <span class="hljs-keyword">return</span> newList;</span></span><span class="javascript"><span class="xml">    &#125;,</span></span><span class="javascript"><span class="xml">    <span class="hljs-function"><span class="hljs-title">handleCheckAllChange</span>(<span class="hljs-params">val</span>)</span> &#123;</span></span><span class="javascript"><span class="xml">      <span class="hljs-keyword">let</span> ids = <span class="hljs-built_in">this</span>.copy_subjectTypeList.map(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> &#123;</span></span><span class="javascript"><span class="xml">        <span class="hljs-keyword">return</span> item.id;</span></span><span class="javascript"><span class="xml">      &#125;);</span></span><span class="javascript"><span class="xml">      <span class="hljs-comment">//å¦‚æœæ˜¯å…¨é€‰éœ€è¦å°†å·²ä¿å­˜çš„å’Œä¸‹æ‹‰æ¡†é‡Œçš„åˆå¹¶å»é‡</span></span></span><span class="javascript"><span class="xml">      <span class="hljs-comment">//å¦‚æœæ˜¯åé€‰,éœ€è¦å°†å·²é€‰çš„æ•°ç»„è¿›è¡Œåˆ¤æ–­æ˜¯å¦æœ‰ä¸‹æ‹‰æ¡†é‡Œçš„æ•°ç»„ï¼Œæœ‰çš„è¯ç›´æ¥ç§»é™¤</span></span></span><span class="javascript"><span class="xml">      <span class="hljs-comment">// console.log(&quot;å½“å‰æ˜¯å¦æ˜¯å…¨é€‰&quot;, this.checkAll);</span></span></span><span class="javascript"><span class="xml">      <span class="hljs-comment">// console.log(&quot;å½“å‰ä¸‹æ‹‰æ¡†é‡Œçš„æ•°ç»„&quot;, ids);</span></span></span><span class="javascript"><span class="xml"></span></span><span class="javascript"><span class="xml"></span></span><span class="javascript"><span class="xml">      <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.checkAll) &#123;</span></span><span class="javascript"><span class="xml">        <span class="hljs-comment">//å»é‡æ˜¾ç¤ºåˆå¹¶åçš„æ•°ç»„</span></span></span><span class="javascript"><span class="xml">        <span class="hljs-keyword">let</span> newArr = [];</span></span><span class="javascript"><span class="xml">        <span class="hljs-keyword">let</span> arr = <span class="hljs-built_in">this</span>.subjectNameIds.concat(ids).sort();</span></span><span class="javascript"><span class="xml">        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i <span class="hljs-keyword">in</span> arr) &#123;</span></span><span class="javascript"><span class="xml">          <span class="hljs-keyword">if</span> (newArr.indexOf(arr[i]) &lt; <span class="hljs-number">0</span>) &#123;</span></span><span class="javascript"><span class="xml">            newArr.push(arr[i]);</span></span><span class="javascript"><span class="xml">          &#125;</span></span><span class="javascript"><span class="xml">        &#125;</span></span><span class="javascript"><span class="xml">        <span class="hljs-comment">// console.log(&quot;å»é‡æ˜¾ç¤ºåˆå¹¶åçš„æ•°ç»„&quot;, newArr);</span></span></span><span class="javascript"><span class="xml">        <span class="hljs-built_in">this</span>.subjectNameIds = newArr;</span></span><span class="javascript"><span class="xml">        <span class="hljs-built_in">this</span>.checkedSubjects = newArr;</span></span><span class="javascript"><span class="xml">        <span class="hljs-built_in">this</span>.isIndeterminate = <span class="hljs-literal">false</span>;</span></span><span class="javascript"><span class="xml">      &#125;</span></span><span class="javascript"><span class="xml">      <span class="hljs-keyword">else</span> &#123;</span></span><span class="javascript"><span class="xml">        <span class="hljs-keyword">let</span> temp = [];</span></span><span class="javascript"><span class="xml">        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">this</span>.subjectNameIds) &#123;</span></span><span class="javascript"><span class="xml">          <span class="hljs-keyword">if</span> (ids.indexOf(<span class="hljs-built_in">this</span>.subjectNameIds[i]) &lt; <span class="hljs-number">0</span>) &#123;</span></span><span class="javascript"><span class="xml">            temp.push(<span class="hljs-built_in">this</span>.subjectNameIds[i]);</span></span><span class="javascript"><span class="xml">          &#125;</span></span><span class="javascript"><span class="xml">        &#125;</span></span><span class="javascript"><span class="xml">        <span class="hljs-comment">// console.log(&quot;ä¸ç›¸åŒçš„å…ƒç´ &quot;, temp);</span></span></span><span class="javascript"><span class="xml">        <span class="hljs-built_in">this</span>.subjectNameIds = temp;</span></span><span class="javascript"><span class="xml">        <span class="hljs-comment">//å¦‚æœæ˜¯å–æ¶ˆå…¨é€‰ï¼Œæ¸…ç©ºä¸‹æ‹‰æ¡†çš„æ•°æ®ï¼Œå†é‡æ–°æ¸²æŸ“ä¸‹æ‹‰ç»„ä»¶ï¼Œå¦åˆ™ä¸‹æ‹‰æ¡†ä¸æ˜¾ç¤ºé€‰é¡¹æ–‡å­—</span></span></span><span class="javascript"><span class="xml">        <span class="hljs-built_in">this</span>.updateSelectCompoment(temp);</span></span><span class="javascript"><span class="xml">        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.subject_name != <span class="hljs-string">&quot;&quot;</span>) &#123;</span></span><span class="javascript"><span class="xml">          <span class="hljs-built_in">this</span>.copy_subjectTypeList = <span class="hljs-built_in">this</span>.primeSubjectTypeList;</span></span><span class="javascript"><span class="xml">          <span class="hljs-built_in">this</span>.subject_name = <span class="hljs-string">&quot;&quot;</span>;</span></span><span class="javascript"><span class="xml">          <span class="hljs-built_in">this</span>.handleCheckedCitiesChange(<span class="hljs-built_in">this</span>.subjectNameIds);</span></span><span class="javascript"><span class="xml">        &#125;</span></span><span class="javascript"><span class="xml">        <span class="hljs-keyword">if</span> (temp.length == <span class="hljs-number">0</span>) &#123;</span></span><span class="javascript"><span class="xml">          <span class="hljs-built_in">this</span>.isIndeterminate = <span class="hljs-literal">false</span>;</span></span><span class="javascript"><span class="xml">        &#125;</span></span><span class="javascript"><span class="xml">        <span class="hljs-built_in">this</span>.checkedSubjects = temp;</span></span><span class="javascript"><span class="xml">      &#125;</span></span><span class="javascript"><span class="xml">      <span class="hljs-built_in">this</span>.emitParent();</span></span><span class="javascript"><span class="xml">      <span class="hljs-built_in">this</span>.$forceUpdate();</span></span><span class="javascript"><span class="xml">      <span class="hljs-comment">// console.log(&#x27;å½“å‰é€‰ä¸­çš„ç§‘ç›®æäº¤ç»™çˆ¶çº§&#x27;,this.subjectNameIds)</span></span></span><span class="javascript"><span class="xml">    &#125;,</span></span><span class="javascript"><span class="xml"></span></span><span class="javascript"><span class="xml"></span></span><span class="javascript"><span class="xml">    <span class="hljs-function"><span class="hljs-title">updateSelectCompoment</span>(<span class="hljs-params">temp</span>)</span> &#123;</span></span><span class="javascript"><span class="xml">      <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.$refs.subjectSelect) &#123;</span></span><span class="javascript"><span class="xml">        <span class="hljs-built_in">this</span>.$refs.subjectSelect.cachedOptions = temp;</span></span><span class="javascript"><span class="xml">        <span class="hljs-built_in">this</span>.$refs.subjectSelect.selected = temp;</span></span><span class="javascript"><span class="xml">        <span class="hljs-built_in">this</span>.selectKeys += <span class="hljs-number">1</span>;</span></span><span class="javascript"><span class="xml">        <span class="hljs-built_in">this</span>.$forceUpdate();</span></span><span class="javascript"><span class="xml">      &#125;</span></span><span class="javascript"><span class="xml">    &#125;</span></span><span class="javascript"><span class="xml">  &#125;</span></span><span class="javascript"><span class="xml">&#125;;</span></span><span class="javascript"><span class="xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><span class="xml"></span><span class="xml"></span><span class="xml"></span><span class="xml"></span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css"></span></span><span class="css"><span class="xml"><span class="hljs-selector-class">.close-btn</span> &#123;</span></span><span class="css"><span class="xml">  <span class="hljs-attribute">direction</span>: rtl;</span></span><span class="css"><span class="xml">  <span class="hljs-attribute">padding-bottom</span>: <span class="hljs-number">15px</span>;</span></span><span class="css"><span class="xml">&#125;</span></span><span class="css"><span class="xml"></span></span><span class="css"><span class="xml"></span></span><span class="css"><span class="xml"><span class="hljs-selector-class">.poper__head</span> &#123;</span></span><span class="css"><span class="xml">  <span class="hljs-attribute">display</span>: flex;</span></span><span class="css"><span class="xml">  <span class="hljs-attribute">flex-wrap</span>: wrap;</span></span><span class="css"><span class="xml">  <span class="hljs-attribute">align-items</span>: center;</span></span><span class="css"><span class="xml">  <span class="hljs-attribute">justify-content</span>: space-between;</span></span><span class="css"><span class="xml">  <span class="hljs-attribute">flex-direction</span>: row;</span></span><span class="css"><span class="xml">&#125;</span></span><span class="css"><span class="xml"></span></span><span class="css"><span class="xml"></span></span><span class="css"><span class="xml"><span class="hljs-selector-class">.popChild</span> &#123;</span></span><span class="css"><span class="xml">  <span class="hljs-attribute">max-height</span>: <span class="hljs-number">300px</span>;</span></span><span class="css"><span class="xml">  <span class="hljs-attribute">overflow-y</span>: scroll;</span></span><span class="css"><span class="xml">&#125;</span></span><span class="css"><span class="xml"></span></span><span class="css"><span class="xml"></span></span><span class="css"><span class="xml">/deep/ <span class="hljs-selector-class">.el-select__tags</span> &#123;</span></span><span class="css"><span class="xml">  <span class="hljs-attribute">max-height</span>: <span class="hljs-number">400px</span>;</span></span><span class="css"><span class="xml">  <span class="hljs-attribute">overflow-y</span>: auto;</span></span><span class="css"><span class="xml">&#125;</span></span><span class="css"><span class="xml"></span></span><span class="css"><span class="xml"></span></span><span class="css"><span class="xml">/deep/ <span class="hljs-selector-class">.el-checkbox</span> &#123;</span></span><span class="css"><span class="xml">  <span class="hljs-attribute">line-height</span>: <span class="hljs-number">26px</span>;</span></span><span class="css"><span class="xml">&#125;</span></span><span class="css"><span class="xml"></span></span><span class="css"><span class="xml"></span></span><span class="css"><span class="xml"></span></span><span class="css"><span class="xml"></span></span><span class="css"><span class="xml">/deep/ <span class="hljs-selector-class">.el-checkbox-group</span> &#123;</span></span><span class="css"><span class="xml">  <span class="hljs-attribute">display</span>: flex;</span></span><span class="css"><span class="xml">  <span class="hljs-attribute">flex-direction</span>: column;</span></span><span class="css"><span class="xml">&#125;</span></span><span class="css"><span class="xml"></span></span><span class="css"><span class="xml"></span></span><span class="css"><span class="xml"></span></span><span class="css"><span class="xml"></span></span><span class="css"><span class="xml">/deep/ <span class="hljs-selector-class">.el-tag</span><span class="hljs-selector-class">.el-tag--info</span> &#123;</span></span><span class="css"><span class="xml">  <span class="hljs-attribute">max-width</span>: <span class="hljs-number">540px</span>;</span></span><span class="css"><span class="xml">  <span class="hljs-attribute">height</span>: auto;</span></span><span class="css"><span class="xml">&#125;</span></span><span class="css"><span class="xml"></span></span><span class="css"><span class="xml"></span></span><span class="css"><span class="xml"></span></span><span class="css"><span class="xml"></span></span><span class="css"><span class="xml">/deep/ <span class="hljs-selector-class">.el-select__tags-text</span> &#123;</span></span><span class="css"><span class="xml">  <span class="hljs-attribute">max-width</span>: <span class="hljs-number">540px</span>;</span></span><span class="css"><span class="xml">  <span class="hljs-attribute">white-space</span>: normal;</span></span><span class="css"><span class="xml">&#125;</span></span><span class="css"><span class="xml"></span></span><span class="css"><span class="xml"></span></span><span class="css"><span class="xml"></span></span><span class="css"><span class="xml"></span></span><span class="css"><span class="xml">/deep/ <span class="hljs-selector-class">.el-input__inner</span> &#123;</span></span><span class="css"><span class="xml">  <span class="hljs-attribute">height</span>: auto;</span></span><span class="css"><span class="xml">&#125;</span></span><span class="css"><span class="xml"></span></span><span class="css"><span class="xml"></span></span><span class="css"><span class="xml"><span class="hljs-selector-class">.checkBoxTitle</span> &#123;</span></span><span class="css"><span class="xml">  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">20px</span>;</span></span><span class="css"><span class="xml">&#125;</span></span><span class="css"><span class="xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span></code></pre></div><h3 id="ä½¿ç”¨æ–¹å¼"><a href="#ä½¿ç”¨æ–¹å¼" class="headerlink" title="ä½¿ç”¨æ–¹å¼"></a>ä½¿ç”¨æ–¹å¼</h3><p>è°ƒç”¨è¯¥ç»„ä»¶çš„è„šæœ¬ï¼š<br><del>éœ€è¦æ‰‹åŠ¨ä¿®æ”¹ä¸‹æ‹‰æ¡†å±•ç¤ºæ ·å¼ï¼Œå¦åˆ™ä¸‹æ‹‰æ¡†å’Œpopæ¡†å®½åº¦ä¸ä¸€è‡´ã€‚</del><br>å¦‚æœæ˜¯ç¼–è¾‘æ—¶éœ€è¦å±•ç¤ºæ•°æ®,åˆ™è°ƒç”¨this.$refs.xxxx.setSelfAlreadySelect(list) ,ä¼ å…¥è¦å±•ç¤ºçš„æ•°æ®idæ•°ç»„</p><div class="code-wrapper"><pre><code class="hljs xquery"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span></span><span class="xml">    </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;app-container&quot;</span>&gt;</span></span><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">el-form</span> <span class="hljs-attr">inline</span>&gt;</span></span><span class="xml">            </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">el-form-item</span> <span class="hljs-attr">label-width</span>=<span class="hljs-string">&quot;80&quot;</span> <span class="hljs-attr">label</span>=<span class="hljs-string">&quot;æµ‹è¯•&quot;</span>&gt;</span></span><span class="xml">                <span class="hljs-tag">&lt;<span class="hljs-name">SelectComponent</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;width: 380px&quot;</span> <span class="hljs-attr">:subjectTypeList</span>=<span class="hljs-string">&quot;list&quot;</span> @<span class="hljs-attr">selectData</span>=<span class="hljs-string">&quot;selectData&quot;</span>/&gt;</span></span><span class="xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">el-form-item</span>&gt;</span></span><span class="xml"></span><span class="xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">el-form</span>&gt;</span></span><span class="xml"></span><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>&lt;/template&gt;<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span></span><span class="javascript"><span class="xml"><span class="hljs-keyword">import</span> SelectComponent <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./select-pop.vue&#x27;</span></span></span><span class="javascript"><span class="xml"></span></span><span class="javascript"><span class="xml"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> </span></span><span class="xquery">&#123;</span><span class="xquery"> <span class="hljs-built_in"> name</span>: <span class="hljs-string">&#x27;index2&#x27;</span>,</span><span class="xquery">  components: &#123; SelectComponent &#125;</span><span class="xml">,</span><span class="xml">  data()</span><span class="xquery">&#123;</span><span class="xquery">    <span class="hljs-keyword">return</span>&#123;</span><span class="xquery">      list:[]</span><span class="xquery">    &#125;</span><span class="xml"></span><span class="xml">  &#125;,</span><span class="xml"></span><span class="xml">  created() </span><span class="xquery">&#123;&#125;</span><span class="xml">,</span><span class="xml"></span><span class="xml">  mounted() </span><span class="xquery">&#123;</span><span class="xquery">    this.list = [</span><span class="xquery">     <span class="hljs-built_in">&#123;id</span>:<span class="hljs-number">1</span><span class="hljs-built_in">,name</span>:<span class="hljs-string">&#x27;æµ‹è¯•&#x27;</span>&#125;</span><span class="xml">,</span><span class="xml">     </span><span class="xquery"><span class="hljs-built_in">&#123;id</span>:<span class="hljs-number">2</span><span class="hljs-built_in">,name</span>:<span class="hljs-string">&#x27;æµ‹è¯•1&#x27;</span>&#125;</span><span class="xml">,</span><span class="xml">     </span><span class="xquery"><span class="hljs-built_in">&#123;id</span>:<span class="hljs-number">3</span><span class="hljs-built_in">,name</span>:<span class="hljs-string">&#x27;æµ‹è¯•2&#x27;</span>&#125;</span><span class="xml">,</span><span class="xml">     </span><span class="xquery"><span class="hljs-built_in">&#123;id</span>:<span class="hljs-number">4</span><span class="hljs-built_in">,name</span>:<span class="hljs-string">&#x27;æµ‹è¯•3&#x27;</span>&#125;</span><span class="xml">,</span><span class="xml">     </span><span class="xquery"><span class="hljs-built_in">&#123;id</span>:<span class="hljs-number">5</span><span class="hljs-built_in">,name</span>:<span class="hljs-string">&#x27;æµ‹è¯•4&#x27;</span>&#125;</span><span class="xml">,</span><span class="xml">     </span><span class="xquery"><span class="hljs-built_in">&#123;id</span>:<span class="hljs-number">6</span><span class="hljs-built_in">,name</span>:<span class="hljs-string">&#x27;æµ‹è¯•44&#x27;</span>&#125;</span><span class="xml">,</span><span class="xml">     </span><span class="xquery"><span class="hljs-built_in">&#123;id</span>:<span class="hljs-number">7</span><span class="hljs-built_in">,name</span>:<span class="hljs-string">&#x27;æµ‹è¯•45&#x27;</span>&#125;</span><span class="xml">,</span><span class="xml">     </span><span class="xquery"><span class="hljs-built_in">&#123;id</span>:<span class="hljs-number">8</span><span class="hljs-built_in">,name</span>:<span class="hljs-string">&#x27;æµ‹è¯•46&#x27;</span>&#125;</span><span class="xml">,</span><span class="xml">     </span><span class="xquery"><span class="hljs-built_in">&#123;id</span>:<span class="hljs-number">9</span><span class="hljs-built_in">,name</span>:<span class="hljs-string">&#x27;æµ‹è¯•47&#x27;</span>&#125;</span><span class="xml">,</span><span class="xml">     </span><span class="xquery"><span class="hljs-built_in">&#123;id</span>:<span class="hljs-number">10</span><span class="hljs-built_in">,name</span>:<span class="hljs-string">&#x27;æµ‹è¯•48&#x27;</span>&#125;</span><span class="xml">,</span><span class="xml">     </span><span class="xquery"><span class="hljs-built_in">&#123;id</span>:<span class="hljs-number">11</span><span class="hljs-built_in">,name</span>:<span class="hljs-string">&#x27;è¯•æµ‹è¯•æµ‹è¯•æµ‹è¯•æµ‹è¯•æµ‹è¯•49&#x27;</span>&#125;</span><span class="xml">,</span><span class="xml">    ]</span><span class="xml">  &#125;,</span><span class="xml"></span><span class="xml"></span><span class="xml"></span><span class="xml"></span><span class="xml">  methods:</span><span class="xquery">&#123;</span><span class="xquery">    selectData(list)&#123;</span><span class="xquery">      console.log(<span class="hljs-string">&#x27;å­ç»„ä»¶è¿”å›çš„é€‰é¡¹&#x27;</span>,list)</span><span class="xquery">    &#125;</span><span class="xml"></span><span class="xml">  &#125;</span><span class="xml">&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>&lt;style scoped&gt;&lt;/style&gt;</code></pre></div>]]></content>
    
    
    <categories>
      
      <category>Webå¼€å‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Vue</tag>
      
      <tag>Element UI</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Element-ui æ—¶é—´ç»„ä»¶æŒ‡å®šé€‰æ‹©å¼€å§‹æ—¥æœŸå’Œç»“æŸæ—¥æœŸ</title>
    <link href="/2021/05/21/Element-ui-%E6%97%B6%E9%97%B4%E7%BB%84%E4%BB%B6%E6%8C%87%E5%AE%9A%E9%80%89%E6%8B%A9%E5%BC%80%E5%A7%8B%E6%97%A5%E6%9C%9F%E5%92%8C%E7%BB%93%E6%9D%9F%E6%97%A5%E6%9C%9F/"/>
    <url>/2021/05/21/Element-ui-%E6%97%B6%E9%97%B4%E7%BB%84%E4%BB%B6%E6%8C%87%E5%AE%9A%E9%80%89%E6%8B%A9%E5%BC%80%E5%A7%8B%E6%97%A5%E6%9C%9F%E5%92%8C%E7%BB%93%E6%9D%9F%E6%97%A5%E6%9C%9F/</url>
    
    <content type="html"><![CDATA[<h3 id="æ•ˆæœå±•ç¤º"><a href="#æ•ˆæœå±•ç¤º" class="headerlink" title="æ•ˆæœå±•ç¤º"></a>æ•ˆæœå±•ç¤º</h3><h4 id="ç‚¹å‡»å¼€å§‹äº‹ä»¶åå±•ç¤ºå‡ºå‰å30å¤©çš„æ—¶é—´ï¼Œå…¶ä»–æ—¥æœŸä¸å¯é€‰"><a href="#ç‚¹å‡»å¼€å§‹äº‹ä»¶åå±•ç¤ºå‡ºå‰å30å¤©çš„æ—¶é—´ï¼Œå…¶ä»–æ—¥æœŸä¸å¯é€‰" class="headerlink" title="ç‚¹å‡»å¼€å§‹äº‹ä»¶åå±•ç¤ºå‡ºå‰å30å¤©çš„æ—¶é—´ï¼Œå…¶ä»–æ—¥æœŸä¸å¯é€‰"></a>ç‚¹å‡»å¼€å§‹äº‹ä»¶åå±•ç¤ºå‡ºå‰å30å¤©çš„æ—¶é—´ï¼Œå…¶ä»–æ—¥æœŸä¸å¯é€‰</h4><p><img src="/img/blog/element/el-picker.png"></p><h3 id="ä½¿ç”¨æ–¹å¼"><a href="#ä½¿ç”¨æ–¹å¼" class="headerlink" title="ä½¿ç”¨æ–¹å¼"></a>ä½¿ç”¨æ–¹å¼</h3><div class="code-wrapper"><pre><code class="hljs vue">&lt;el-date-picker  v-model=&quot;form.date&quot;  class=&quot;custom__item&quot;  type=&quot;daterange&quot;  range-separator=&quot;è‡³&quot;  start-placeholder=&quot;å¼€å§‹æ—¥æœŸ&quot;  end-placeholder=&quot;ç»“æŸæ—¥æœŸ&quot;  value-format=&quot;yyyy-MM-dd&quot;  @blur=&quot;onMonthBlur&quot;  @change=&quot;changeDate&quot;  clearable  :picker-options=&quot;pickerOptions&quot;/&gt;</code></pre></div><h3 id="é…ç½®é¡¹ä»£ç "><a href="#é…ç½®é¡¹ä»£ç " class="headerlink" title="é…ç½®é¡¹ä»£ç "></a>é…ç½®é¡¹ä»£ç </h3><div class="code-wrapper"><pre><code class="hljs vue">timeOptionRange: null,pickerOptions:&#123;    onPick: time =&gt; &#123;      //å½“ç¬¬ä¸€æ—¶é—´é€‰ä¸­æ‰è®¾ç½®ç¦ç”¨      if (time.minDate &amp;&amp; !time.maxDate) &#123;        this.timeOptionRange = time.minDate;      &#125;      if (time.maxDate) &#123;        this.timeOptionRange = null;      &#125;    &#125;,    disabledDate: time =&gt; &#123;      let timeOptionRange = this.timeOptionRange;      let secondNum = 60 * 60 * 24 * 29 * 1000;      if (timeOptionRange) &#123;        return (time.getTime() != timeOptionRange.getTime() + secondNum &amp;&amp;          time.getTime() != timeOptionRange.getTime() - secondNum);      &#125;    &#125;  &#125;,</code></pre></div><div class="code-wrapper"><pre><code class="hljs vue">//å¤±å»ç„¦ç‚¹å°±æŠŠé€‰ä¸­é¡¹æ¸…ç©º,æ–¹ä¾¿ä¸‹æ¬¡è¿›å…¥æ—¶é—´ç»„ä»¶æ—¶æ˜¾ç¤ºåˆå§‹åŒ–çŠ¶æ€onMonthBlur() &#123;  this.timeOptionRange = null&#125;,</code></pre></div>]]></content>
    
    
    <categories>
      
      <category>Webå¼€å‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Vue</tag>
      
      <tag>Element UI</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ES6åˆ¤æ–­ä¸¤ä¸ªæ•°ç»„æ˜¯å¦å®Œå…¨ç›¸ç­‰</title>
    <link href="/2021/05/21/ES6%E5%88%A4%E6%96%AD%E4%B8%A4%E4%B8%AA%E6%95%B0%E7%BB%84%E6%98%AF%E5%90%A6%E7%9B%B8%E7%AD%89/"/>
    <url>/2021/05/21/ES6%E5%88%A4%E6%96%AD%E4%B8%A4%E4%B8%AA%E6%95%B0%E7%BB%84%E6%98%AF%E5%90%A6%E7%9B%B8%E7%AD%89/</url>
    
    <content type="html"><![CDATA[<div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span>  listA = val;<span class="hljs-comment">//å½“å‰é€‰ä¸­æ•°æ®</span><span class="hljs-keyword">let</span>  listB = <span class="hljs-built_in">this</span>.plainOptions;<span class="hljs-comment">//åŸå§‹æ•°æ®</span><span class="hljs-keyword">if</span>(listA.length === listB.length &amp;&amp; listA.every(<span class="hljs-function"><span class="hljs-params">a</span> =&gt;</span> listB.some(<span class="hljs-function"><span class="hljs-params">b</span> =&gt;</span> a === b)) &amp;&amp; listB.every(<span class="hljs-function"><span class="hljs-params">_b</span> =&gt;</span> listA.some(<span class="hljs-function"><span class="hljs-params">_a</span> =&gt;</span> _a === _b)))&#123;    <span class="hljs-comment">//to do </span>&#125;</code></pre></div>]]></content>
    
    
    <categories>
      
      <category>ç¼–ç¨‹è¯­è¨€</category>
      
    </categories>
    
    
    <tags>
      
      <tag>JavaScript</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Element Selectä¸‹æ‹‰æ¡†ç¬é—´æ¸…ç©ºå¤šé€‰çš„å»¶è¿Ÿé—®é¢˜</title>
    <link href="/2021/03/12/%E4%B8%8B%E6%8B%89%E6%A1%86%E7%9E%AC%E9%97%B4%E6%B8%85%E7%A9%BA%E5%A4%9A%E9%80%89%E7%9A%84%E5%BB%B6%E8%BF%9F%E9%97%AE%E9%A2%98/"/>
    <url>/2021/03/12/%E4%B8%8B%E6%8B%89%E6%A1%86%E7%9E%AC%E9%97%B4%E6%B8%85%E7%A9%BA%E5%A4%9A%E9%80%89%E7%9A%84%E5%BB%B6%E8%BF%9F%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<h3 id="è§£å†³æ–¹å¼"><a href="#è§£å†³æ–¹å¼" class="headerlink" title="è§£å†³æ–¹å¼"></a>è§£å†³æ–¹å¼</h3><p>ä¸‹æ‹‰æ¡†ç»„ä»¶çš„refsé‡Œæœ‰é€‰é¡¹æ•°ç»„å’Œç¼“å­˜æ•°ç»„ï¼Œå°†å…¶æ¸…ç©ºï¼Œå†åˆ©ç”¨æ›´æ–°keyå€¼æ¥é‡ç½®ç»„ä»¶</p><p><img src="/img/blog/vueinit/v3.png"></p>]]></content>
    
    
    <categories>
      
      <category>Webå¼€å‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Vue</tag>
      
      <tag>Element UI</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Element-UI è‡ªå®šä¹‰Treeç»„ä»¶</title>
    <link href="/2021/02/18/Element-UI-%E8%87%AA%E5%AE%9A%E4%B9%89Tree%E7%BB%84%E4%BB%B6/"/>
    <url>/2021/02/18/Element-UI-%E8%87%AA%E5%AE%9A%E4%B9%89Tree%E7%BB%84%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<h3 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h3><p>æ ¹æ®ä¸šåŠ¡ä¿®æ”¹element tree ç»„ä»¶ï¼Œå®ç°å¢åˆ æ”¹èŠ‚ç‚¹æ—¶ä¸æ”¶èµ·èŠ‚ç‚¹ä¸éœ€è¦é‡æ–°æ¸²æŸ“æ•´ä¸ªæ ‘ç»„ä»¶</p><h3 id="æºç "><a href="#æºç " class="headerlink" title="æºç "></a>æºç </h3><div class="code-wrapper"><pre><code class="hljs vue">&lt;template&gt;  &lt;div&gt;    &lt;el-tree      :props=&quot;props&quot;      :load=&quot;loadNode&quot;      :data=&quot;setTree&quot;      @node-click=&quot;clickFn&quot;      lazy      ref=&quot;tree&quot;    &gt;      &lt;span class=&quot;custom-tree-node&quot; slot-scope=&quot;&#123; node, data &#125;&quot;&gt;        &lt;span class=&quot;label&quot;&gt;&#123;&#123; node.label &#125;&#125;&lt;/span&gt;        &lt;span&gt;          &lt;template v-for=&quot;(item, index) in methodName&quot;&gt;          &lt;template v-if=&quot;data.unIcon&quot;&gt;          &lt;i            :class=&quot;&#x27;el-icon-&#x27; + item&quot;            @click.stop=&quot;() =&gt; update(node, data, item)&quot;            style=&quot;margin-right: 10px&quot;            :key=&quot;index&quot;            v-if=&quot;!data.unIcon.includes(item)&quot;          &gt;&lt;/i&gt;          &lt;/template&gt;          &lt;template v-else&gt;          &lt;i            :class=&quot;&#x27;el-icon-&#x27; + item&quot;            @click.stop=&quot;() =&gt; update(node, data, item)&quot;            style=&quot;margin-right: 10px&quot;            :key=&quot;index&quot;          &gt;&lt;/i&gt;          &lt;/template&gt;          &lt;/template&gt;        &lt;/span&gt;      &lt;/span&gt;    &lt;/el-tree&gt;  &lt;/div&gt;&lt;/template&gt;&lt;script&gt;import Element from &quot;element-ui&quot;;export default &#123;  props: &#123;    getTreeData: [Function],    addFn: [Function],    editFn: [Function],    method: [Array, Object]  &#125;,  computed: &#123;    methodName() &#123;      let arr = [];      for (let k in this.method) &#123;        arr.push(k);      &#125;      return arr;    &#125;  &#125;,  data() &#123;    return &#123;      setTree:[],      oneTree: [],      props: &#123;        label: &quot;name&quot;,        isLeaf: &quot;leaf&quot;      &#125;,      currentModel: false    &#125;;  &#125;,  methods: &#123;    clickFn(data,node,dom) &#123;      this.$emit(&quot;getNode&quot;, &#123;node: node, type: &#x27;click&#x27;&#125;)    &#125;,    async loadNode(node, resolve) &#123;      //åˆ¤æ–­ä¸€çº§ äºŒçº§      let data =        node.level === 0          ? &#123;&#125;          : &#123;              type: node.level,              id: node.data.id            &#125;;      let list = await this.getTreeData(data);      if(node.level === 0) &#123;        this.oneTree = list;      &#125;      return resolve(list);    &#125;,    async update(node, data, type) &#123;      this.$emit(&quot;getNode&quot;, &#123;node: node, type: type&#125;)      this.currentModel = true;      let type_title = &quot;&quot;; // å¼¹çª—æ ‡é¢˜      let type_text = &quot;&quot;; // å¼¹çª—å†…å®¹      let defaultData = &#123;&#125;;      switch (type) &#123;        case &quot;add&quot;:          type_title = &quot;æ–°å¢&quot;;          //å¡«å……é»˜è®¤å€¼          defaultData = &#123;            inputPlaceholder: `è¯·è¾“å…¥$&#123;data.title&#125;`          &#125;;          break;        case &quot;edit&quot;:          type_title = &quot;ç¼–è¾‘&quot;;          //å¡«å……é»˜è®¤å€¼          defaultData = &#123;            inputPlaceholder: `è¯·è¾“å…¥$&#123;data.title&#125;`,            inputValue: data.name          &#125;;          break;        case &quot;delete&quot;:          type_title = &quot;åˆ é™¤&quot;;          //å¡«å……é»˜è®¤å€¼          type_text = `ç¡®å®šè¦åˆ é™¤$&#123;data.name&#125;$&#123;data.title&#125;?`;          break;      &#125;      const MessageBoxType = type == &quot;delete&quot; ? &quot;$confirm&quot; : &quot;$prompt&quot;; // åˆ¤æ–­å¼¹çª—ç±»å‹      this[MessageBoxType](        type_text,        `$&#123;type_title&#125;$&#123;data.title&#125;`,        defaultData      ).then(async (&#123; value &#125;) =&gt; &#123;        // console.log(&#x27;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&#x27;, value)        let d = &#123;          type: node == null ? 1 : node.level,          id: data.id,          name: value        &#125;;        // æ–°å¢        if (type == &quot;add&quot;) &#123;          if(node == null) &#123;            delete d.type;          &#125;          let res = await this.method.add(d);          let newChild = &#123; id: res.id, name: value, children: [] &#125;;          if(res.unIcon) &#123; //icon             newChild.unIcon = res.unIcon          &#125;          if(res.leaf) &#123; // æ˜¯å¦æœ‰å­é›†             newChild.leaf = res.leaf          &#125;          if(res.title) &#123; // title             newChild.title = res.title          &#125;          if (!data.children) &#123;            this.$set(data, &quot;children&quot;, []);          &#125;          console.log(&#x27;&gt;&gt;&gt;&gt;&gt;&gt;11111222&#x27;, data)          if(node == null)&#123;            // console.log(&#x27;&gt;&gt;&gt;&gt;&gt;&#x27;, node)            this.setTree = this.oneTree            this.setTree.push(newChild)          &#125; else &#123;            // console.log(&#x27;&gt;&gt;&gt;&gt;&gt;&#x27;, node)            this.$refs[&#x27;tree&#x27;].append(newChild,node);          &#125;          return false;        &#125;        // ç¼–è¾‘        if (type == &quot;edit&quot;) &#123;          await this.method.edit(d);          data.name = value;          return false;        &#125;        // åˆ é™¤        if (type == &quot;delete&quot;) &#123;          delete d.name;          await this.method.delete(d);          const parent = node.parent          this.$refs[&#x27;tree&#x27;].remove(node);        &#125;      &#125;);    &#125;  &#125;&#125;;&lt;/script&gt;&lt;style scoped&gt;/deep/.custom-tree-node &#123;  flex: 1;  display: flex;  align-items: center;  justify-content: space-between;  font-size: 14px;  padding-right: 8px;&#125;/deep/.el-tree-node__content &#123;  display: flex;  align-items: center;  height: 26px;  cursor: pointer;  margin: 8px 0;&#125;/deep/.el-icon-add:before &#123;  content: &quot;\e783&quot;;&#125;/deep/.el-icon-edit:before &#123;  content: &quot;\e764&quot;;&#125;.label&#123;  overflow: hidden;  text-overflow: ellipsis;  white-space: nowrap;  display: inline-block;  max-width: 145px;&#125;&lt;/style&gt;</code></pre></div><h3 id="ä½¿ç”¨æ–¹å¼"><a href="#ä½¿ç”¨æ–¹å¼" class="headerlink" title="ä½¿ç”¨æ–¹å¼"></a>ä½¿ç”¨æ–¹å¼</h3><p>getNodeæ–¹æ³•ä¸ºè‡ªå®šä¹‰ç»„ä»¶è¿”å›çš„ç‚¹å‡»çš„nodeäº‹ä»¶ï¼Œç”¨äºåˆ¤æ–­å½“å‰ç‚¹å‡»çš„æŸä¸ªnodeï¼ŒåŠäº‹ä»¶ç±»å‹ï¼šadd,edit,del, clickï¼›</p><div class="code-wrapper"><pre><code class="hljs vue">&lt;xtAdminTree    @getNode=&quot;handleNodeClick&quot;  //è¿”å›ç‚¹å‡»çš„èŠ‚ç‚¹    :getTreeData=&quot;getTreeData&quot; //è·å–æ•°æ®è¿›è¡Œæ¸²æŸ“    :method=&quot;&#123;            add: addSubjectFn, //æ–°å¢æ–¹æ³•            edit: editSubject, // ç¼–è¾‘æ–¹æ³•            delete: deleteSubject, //åˆ é™¤æ–¹æ³•          &#125;&quot;    ref=&quot;tree&quot;/&gt;</code></pre></div><h4 id="æ¸²æŸ“æ–¹æ³•"><a href="#æ¸²æŸ“æ–¹æ³•" class="headerlink" title="æ¸²æŸ“æ–¹æ³•"></a>æ¸²æŸ“æ–¹æ³•</h4><div class="code-wrapper"><pre><code class="hljs vue">getTreeData(data) &#123;      return new Promise((resolve, reject) =&gt; &#123;        console.log(&quot;è·å–å±‚çº§æ•°æ®&quot;, data);        this.openType = data.type ? data.type : 0;        console.log(&quot;this.openType&quot;, this.openType);        if (data.type &amp;&amp; data.type &gt; 0) &#123;          data.campus_id = data.id;          delete data.id;          delete data.type;        &#125;        console.log(&quot;è·å–åˆ—è¡¨å‚æ•°&quot;, data);        campusList(data).then((res) =&gt; &#123;          if (res.code == 1) &#123;            this.listLoading = false;            let list = res.data;            list = res.data.map((item) =&gt; &#123;              return &#123;                id: item.id,                name: item.name,                leaf: this.openType == 1,                title: this.modelLabelList[this.openType].inputLabel,                unIcon: this.openType == 1 ? [&quot;add&quot;] : [],              &#125;;            &#125;);            resolve(list);          &#125; else &#123;            this.$message.error(&quot;è·å–æ ¡åŒºæ•°æ®å¼‚å¸¸&quot;);            resolve([]);          &#125;        &#125;);      &#125;);    &#125;,</code></pre></div><h4 id="ç‚¹å‡»èŠ‚ç‚¹äº‹ä»¶"><a href="#ç‚¹å‡»èŠ‚ç‚¹äº‹ä»¶" class="headerlink" title="ç‚¹å‡»èŠ‚ç‚¹äº‹ä»¶"></a>ç‚¹å‡»èŠ‚ç‚¹äº‹ä»¶</h4><div class="code-wrapper"><pre><code class="hljs vue">//ç‚¹å‡»æ ‘èŠ‚ç‚¹çš„äº‹ä»¶ , ç‚¹å‡»äº‹ä»¶å¦‚æœä¸æ˜¯click,éœ€è¦åŠ¨æ€ä¼ å…¥æ¨¡æ€æ¡†çš„titleï¼Œç”¨äºå¼¹æ¡†æ˜¾ç¤ºä¸åŒæ–‡å­—ç±»å‹    handleNodeClick(data) &#123;      console.log(&quot;nodeç‚¹å‡»äº‹ä»¶&quot;, data);      // console.log(&quot;checked&quot;, checked);      if (data.type == &quot;click&quot;) &#123;        if (data.node.level == 2) &#123;          this.listQuery.page = 1;          this.isTableTitle = true;          this.tableTitle = data.node.data.name;          this.tableNode = Object.assign(&#123;&#125;, data.node);          this.getTableByID(data.node);        &#125;      &#125; else if (data.type == &quot;add&quot;) &#123;        console.log(&#x27;data.node&#x27;,data.node)        if(data.node != null)&#123;          data.node.data.title = this.modelLabelList[data.node.level].inputLabel        &#125;      &#125; else if (data.type == &quot;edit&quot;) &#123;          data.node.data.title = this.modelLabelList[data.node.level-1].inputLabel      &#125;    &#125;,</code></pre></div><h4 id="methodæ–¹æ³•ä¸ºæ–°å¢ï¼Œç¼–è¾‘ï¼Œåˆ é™¤çš„æ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªpromise"><a href="#methodæ–¹æ³•ä¸ºæ–°å¢ï¼Œç¼–è¾‘ï¼Œåˆ é™¤çš„æ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªpromise" class="headerlink" title="methodæ–¹æ³•ä¸ºæ–°å¢ï¼Œç¼–è¾‘ï¼Œåˆ é™¤çš„æ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªpromise"></a>methodæ–¹æ³•ä¸ºæ–°å¢ï¼Œç¼–è¾‘ï¼Œåˆ é™¤çš„æ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªpromise</h4><div class="code-wrapper"><pre><code class="hljs vue">//æ–°å¢ addSubjectFn(data) &#123;   console.log(&quot;æ–°å¢data&quot;, data);   this.openType = data.type ? data.type : 0;   return new Promise((resolve, reject) =&gt; &#123;     if (!data.name || data.name == &quot;&quot;) &#123;       this.$message.error(&quot;æäº¤åç§°ä¸å¾—ä¸ºç©º,è¯·è¾“å…¥åå†æ¬¡æäº¤&quot;);       reject();     &#125; else &#123;       if (data.type &amp;&amp; data.type == 1) &#123;         data.campus_id = data.id;       &#125;       delete data.type;       delete data.id;       addCampus(data).then((res) =&gt; &#123;         // console.log(&quot;this.openType&quot;, this.openType);         if (res.code == 1) &#123;           if (this.openType == 0) &#123;             res.data.leaf = false;             res.data.title = &quot;æ ¡åŒºåç§°&quot;;           &#125; else if (this.openType == 1) &#123;             res.data.unIcon = [&quot;add&quot;];             res.data.leaf = true;             res.data.title = &quot;åˆ†æ ¡åŒºåç§°&quot;;           &#125;           this.$message.success(&quot;æ–°å¢æ“ä½œæˆåŠŸ&quot;);           resolve(res.data);         &#125; else &#123;           this.$message.error(res.msg);           reject(res.msg);         &#125;       &#125;);     &#125;   &#125;); &#125;, //ç¼–è¾‘ editSubject(data) &#123;   console.log(&quot;ç¼–è¾‘data&quot;, data);   return new Promise((resolve, reject) =&gt; &#123;     if (!data.name || data.name == &quot;&quot;) &#123;       this.$message.error(&quot;æäº¤åç§°ä¸å¾—ä¸ºç©º,è¯·è¾“å…¥åå†æ¬¡æäº¤&quot;);       reject();     &#125; else &#123;       editCampus(data).then((res) =&gt; &#123;         if (res.code == 1) &#123;           this.$message.success(&quot;ç¼–è¾‘æ“ä½œæˆåŠŸ&quot;);           if (data.type == 2) &#123;             this.initTable();           &#125;           resolve();         &#125; else &#123;           this.$message.error(res.msg);           reject(res.msg);         &#125;       &#125;);     &#125;   &#125;); &#125;, //åˆ é™¤ deleteSubject(data) &#123;   return new Promise((resolve, reject) =&gt; &#123;     deleteCampus(data).then((res) =&gt; &#123;       if (res.code == 1) &#123;         this.$message.success(&quot;åˆ é™¤æ ¡åŒºæ“ä½œæˆåŠŸ&quot;);         if (data.type == 2) &#123;           this.initTable();         &#125;         resolve();       &#125; else &#123;         this.$message.error(&quot;åˆ é™¤æ ¡åŒºæ“ä½œå¼‚å¸¸&quot;);         reject(res.msg);       &#125;     &#125;);   &#125;); &#125;,</code></pre></div>]]></content>
    
    
    <categories>
      
      <category>Webå¼€å‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Vue</tag>
      
      <tag>Element UI</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Element-UI çº§è”é€‰æ‹©å™¨åŠ¨æ€å›æ˜¾æ•°æ®</title>
    <link href="/2021/01/21/Element-UI-%E7%BA%A7%E8%81%94%E9%80%89%E6%8B%A9%E5%99%A8%E5%8A%A8%E6%80%81%E5%B1%95%E7%A4%BA%E6%95%B0%E6%8D%AE/"/>
    <url>/2021/01/21/Element-UI-%E7%BA%A7%E8%81%94%E9%80%89%E6%8B%A9%E5%99%A8%E5%8A%A8%E6%80%81%E5%B1%95%E7%A4%BA%E6%95%B0%E6%8D%AE/</url>
    
    <content type="html"><![CDATA[<h3 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h3><h4 id="è§£å†³çº§è”é€‰æ‹©å™¨åŠ¨æ€è·å–æ•°æ®åé€‰ä¸­æ•°æ®æ—¶çš„å›æ˜¾bug"><a href="#è§£å†³çº§è”é€‰æ‹©å™¨åŠ¨æ€è·å–æ•°æ®åé€‰ä¸­æ•°æ®æ—¶çš„å›æ˜¾bug" class="headerlink" title="è§£å†³çº§è”é€‰æ‹©å™¨åŠ¨æ€è·å–æ•°æ®åé€‰ä¸­æ•°æ®æ—¶çš„å›æ˜¾bug"></a>è§£å†³çº§è”é€‰æ‹©å™¨åŠ¨æ€è·å–æ•°æ®åé€‰ä¸­æ•°æ®æ—¶çš„å›æ˜¾bug</h4><h3 id="ç»„ä»¶ä½¿ç”¨"><a href="#ç»„ä»¶ä½¿ç”¨" class="headerlink" title="ç»„ä»¶ä½¿ç”¨"></a>ç»„ä»¶ä½¿ç”¨</h3><div class="code-wrapper"><pre><code class="hljs vue">&lt;el-cascader    style=&quot;width: 300px&quot;    :props=&quot;cascaderPros&quot;    ref=&quot;cascaderModel&quot;    @change=&quot;cascaderChange&quot;    v-if=&quot;isShowCascader&quot;&gt;&lt;/el-cascader&gt;</code></pre></div><h3 id="å®šä¹‰åŠ¨æ€æ–¹æ³•"><a href="#å®šä¹‰åŠ¨æ€æ–¹æ³•" class="headerlink" title="å®šä¹‰åŠ¨æ€æ–¹æ³•"></a>å®šä¹‰åŠ¨æ€æ–¹æ³•</h3><div class="code-wrapper"><pre><code class="hljs vue">lazyLoad(node, resolve) &#123;  // console.log(&quot;node&quot;, node);  setTimeout(() =&gt; &#123;    if (node.level == 0) &#123;      departList(&#123;&#125;).then((res) =&gt; &#123;        let data = [];        if (res.code == 1) &#123;          data = res.data.list.map((value, i) =&gt; &#123;            return &#123;              value: value.id,              label: value.name,            &#125;;          &#125;);          resolve(data);        &#125; else &#123;          self.$message.error(&quot;è·å–ä¸€çº§éƒ¨é—¨æ•°æ®å¼‚å¸¸&quot;);        &#125;      &#125;);    &#125; else if (node.level == 1) &#123;      let params = &#123;        department_id: node.data.value,      &#125;;      deplistSecondList(params).then((res) =&gt; &#123;        // console.log(&quot;äºŒçº§éƒ¨é—¨åˆ—è¡¨&quot;, res);        let child = [];        if (res.code == 1) &#123;          node.data.children = [];          child = res.data.list.map((value, i) =&gt; &#123;            return &#123;              value: value.id,              label: value.name,              leaf: true,            &#125;;          &#125;);          if (child.length == 0) &#123;            self.$message(&quot;è¯¥éƒ¨é—¨ä¸‹æ²¡æœ‰äºŒçº§éƒ¨é—¨&quot;);            self.$refs.cascaderModel.$refs.panel.activePath = [];            self.$refs.cascaderModel.$refs.panel.syncActivePath();          &#125;          resolve(child);        &#125; else &#123;          self.$message.error(&quot;è·å–äºŒçº§éƒ¨é—¨æ•°æ®å¼‚å¸¸&quot;);        &#125;      &#125;);    &#125; else if (node.level == 2) &#123;      resolve([]);    &#125;  &#125;, 500);&#125;,</code></pre></div><h3 id="è§£å†³æ–¹å¼"><a href="#è§£å†³æ–¹å¼" class="headerlink" title="è§£å†³æ–¹å¼"></a>è§£å†³æ–¹å¼</h3><p>å¼¹æ¡†è¿”å›æ—¶éœ€è¦æ‰§è¡Œä¸‹é¢ä¸‰è¡Œï¼Œå¦åˆ™å†æ¬¡æ‰“å¼€è¿˜ä¼šå‡ºç°ä¸Šæ¬¡çš„é€‰æ‹©</p><div class="code-wrapper"><pre><code class="hljs vue">this.$refs.cascaderModel.$refs.panel.checkedValue = []; //ä¹Ÿå¯ä»¥æ˜¯æŒ‡å®šçš„å€¼ï¼Œé»˜è®¤è¿”å›å€¼æ˜¯æ•°ç»„ï¼Œä¹Ÿå¯ä»¥è¿”å›å•ä¸ªå€¼this.$refs.cascaderModel.$refs.panel.activePath = [];this.$refs.cascaderModel.$refs.panel.syncActivePath();</code></pre></div>]]></content>
    
    
    <categories>
      
      <category>Webå¼€å‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Vue</tag>
      
      <tag>Element UI</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>webstorm åˆ›å»ºvueæ¨¡æ¿</title>
    <link href="/2020/11/01/webstorm-%E5%88%9B%E5%BB%BAvue%E6%A8%A1%E6%9D%BF/"/>
    <url>/2020/11/01/webstorm-%E5%88%9B%E5%BB%BAvue%E6%A8%A1%E6%9D%BF/</url>
    
    <content type="html"><![CDATA[<h3 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><p><img src="/img/blog/webstorm/w1.png"></p><h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><div class="code-wrapper"><pre><code class="hljs vue">&lt;template&gt;  &lt;div&gt;&lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123;   name: &quot;$&#123;COMPONENT_NAME&#125;&quot;,   components:&#123;&#125;,   data() &#123;     return &#123;     &#125;   &#125;,   created() &#123;      &#125;,   methods: &#123;      &#125;,&#125;&lt;/script&gt;&lt;style scoped&gt;&lt;/style&gt;</code></pre></div>]]></content>
    
    
    <categories>
      
      <category>Webå¼€å‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Vue</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ä½¿ç”¨vue-init-webpack æ¨¡æ¿ é…åˆroute-viewæ­å»ºèœå•æ </title>
    <link href="/2020/09/23/%E4%BD%BF%E7%94%A8vue-init-webpack-%E6%A8%A1%E6%9D%BF-%E9%85%8D%E5%90%88route-view%E6%90%AD%E5%BB%BA%E8%8F%9C%E5%8D%95%E6%A0%8F/"/>
    <url>/2020/09/23/%E4%BD%BF%E7%94%A8vue-init-webpack-%E6%A8%A1%E6%9D%BF-%E9%85%8D%E5%90%88route-view%E6%90%AD%E5%BB%BA%E8%8F%9C%E5%8D%95%E6%A0%8F/</url>
    
    <content type="html"><![CDATA[<h3 id="é¢„è§ˆ"><a href="#é¢„è§ˆ" class="headerlink" title="é¢„è§ˆ"></a>é¢„è§ˆ</h3><p><img src="/img/blog/vueinit/v1.png"></p><h3 id="æ ¸å¿ƒä»£ç "><a href="#æ ¸å¿ƒä»£ç " class="headerlink" title="æ ¸å¿ƒä»£ç "></a>æ ¸å¿ƒä»£ç </h3><p><img src="/img/blog/vueinit/v2.png"></p><p>routeræ–‡ä»¶å¤¹ä¸‹çš„index.js</p><div class="code-wrapper"><pre><code class="hljs dts">import Vue from <span class="hljs-string">&quot;vue&quot;</span>;import Router from <span class="hljs-string">&quot;vue-router&quot;</span>;<span class="hljs-class">import </span>&#123;MenuComponent&#125; from <span class="hljs-string">&quot;@/Layout&quot;</span>;Vue.use(Router);export default new Router(&#123;<span class="hljs-symbol">    routes:</span> [        &#123;<span class="hljs-symbol">            path:</span> <span class="hljs-string">&quot;/&quot;</span>,<span class="hljs-symbol">            component:</span> MenuComponent,<span class="hljs-symbol">            children:</span> [                &#123;<span class="hljs-symbol">                    path:</span> <span class="hljs-string">&quot;/&quot;</span>,<span class="hljs-symbol">                    name:</span> <span class="hljs-string">&quot;HelloWorld&quot;</span>,<span class="hljs-symbol">                    component:</span> () =&gt; import(<span class="hljs-string">&quot;@/components/HelloWorld&quot;</span>)                &#125;            ]        &#125;,        &#123;<span class="hljs-symbol">            path:</span> <span class="hljs-string">&quot;/mqtt_test&quot;</span>,<span class="hljs-symbol">            component:</span> MenuComponent,<span class="hljs-symbol">            children:</span> [                &#123;<span class="hljs-symbol">                    path:</span> <span class="hljs-string">&quot;/mqtt_test&quot;</span>,<span class="hljs-symbol">                    name:</span> <span class="hljs-string">&quot;MqttTest&quot;</span>,<span class="hljs-symbol">                    component:</span> () =&gt; import(<span class="hljs-string">&quot;@/components/mqtt_test&quot;</span>)                &#125;            ]        &#125;,        &#123;<span class="hljs-symbol">            path:</span> <span class="hljs-string">&quot;/MonthComponent&quot;</span>,<span class="hljs-symbol">            component:</span> MenuComponent,<span class="hljs-symbol">            children:</span> [                &#123;<span class="hljs-symbol">                    path:</span> <span class="hljs-string">&quot;/MonthComponent&quot;</span>,<span class="hljs-symbol">                    name:</span> <span class="hljs-string">&quot;MonthComponent&quot;</span>,<span class="hljs-symbol">                    component:</span> () =&gt; import(<span class="hljs-string">&quot;@/components/month_component&quot;</span>)                &#125;            ]        &#125;        <span class="hljs-comment">// &#123;</span>        <span class="hljs-comment">//     path: &quot;/mqtt_test&quot;,</span>        <span class="hljs-comment">//     name: &quot;MqttTest&quot;,</span>        <span class="hljs-comment">//     component: MqttTest</span>        <span class="hljs-comment">// &#125;,</span>        <span class="hljs-comment">// &#123;</span>        <span class="hljs-comment">//     path: &quot;/MonthComponent&quot;,</span>        <span class="hljs-comment">//     name: &quot;MonthComponent&quot;,</span>        <span class="hljs-comment">//     component: MonthComponent</span>        <span class="hljs-comment">// &#125;</span>    ]&#125;);</code></pre></div><p>MenuComponent.vue </p><div class="code-wrapper"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span></span><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;el-menu-demo&quot;</span>&gt;</span></span><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">el-menu</span></span></span><span class="hljs-tag"><span class="xml">        <span class="hljs-attr">:default-active</span>=<span class="hljs-string">&quot;activeMenu&quot;</span></span></span><span class="hljs-tag"><span class="xml">        @<span class="hljs-attr">select</span>=<span class="hljs-string">&quot;menuSelect&quot;</span></span></span><span class="hljs-tag"><span class="xml">        <span class="hljs-attr">mode</span>=<span class="hljs-string">&quot;horizontal&quot;</span></span></span><span class="hljs-tag"><span class="xml">    &gt;</span></span><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">el-menu-item</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;(item,idx) in routerList&quot;</span> <span class="hljs-attr">v-bind:key</span>=<span class="hljs-string">&quot;idx&quot;</span> <span class="hljs-attr">:index</span>=<span class="hljs-string">&quot;item.path&quot;</span>&gt;</span></span><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;el-icon-menu&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span></span><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">slot</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span></span><span class="xml">         </span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">item.name</span> &#125;&#125;</span><span class="xml"></span><span class="xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">el-menu-item</span>&gt;</span></span><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">el-menu</span>&gt;</span></span><span class="xml"></span><span class="xml"></span><span class="xml">    <span class="hljs-comment">&lt;!--è§†å›¾çª—å£ï¼šå¤šç”¨äºå¸ƒå±€ï¼Œæ¯”å¦‚å…¨å±€èœå•æ æˆ–æµ‹å¯¼èˆªç­‰  --&gt;</span></span><span class="xml">    <span class="hljs-comment">&lt;!--ä¸åŠ router-viewç»„ä»¶,ä¼šåªæ˜¾ç¤ºèœå•è€Œä¸æ˜¾ç¤ºèœå•ä¸‹çš„é¡µé¢ ä»¥ä¸‹æ˜¯å®˜æ–¹ä»‹ç»ï¼š--&gt;</span></span><span class="xml">    <span class="hljs-comment">&lt;!--è¿™é‡Œçš„ &lt;router-view&gt; æ˜¯æœ€é¡¶å±‚çš„å‡ºå£ï¼Œæ¸²æŸ“æœ€é«˜çº§è·¯ç”±åŒ¹é…åˆ°çš„ç»„ä»¶ã€‚--&gt;</span></span><span class="xml">    <span class="hljs-comment">&lt;!--åŒæ ·åœ°ï¼Œä¸€ä¸ªè¢«æ¸²æŸ“ç»„ä»¶åŒæ ·å¯ä»¥åŒ…å«è‡ªå·±çš„åµŒå¥— &lt;router-view&gt;--&gt;</span></span><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">router-view</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">router-view</span>&gt;</span></span><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><span class="xml"></span><span class="xml"></span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span></span><span class="javascript"><span class="xml"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span></span><span class="javascript"><span class="xml">  <span class="hljs-attr">components</span>: &#123;&#125;,</span></span><span class="javascript"><span class="xml">  <span class="hljs-function"><span class="hljs-title">data</span>(<span class="hljs-params"></span>)</span> &#123;</span></span><span class="javascript"><span class="xml">    <span class="hljs-keyword">return</span> &#123;&#125;;</span></span><span class="javascript"><span class="xml">  &#125;,</span></span><span class="javascript"><span class="xml">  <span class="hljs-attr">computed</span>: &#123;</span></span><span class="javascript"><span class="xml">    <span class="hljs-function"><span class="hljs-title">activeMenu</span>(<span class="hljs-params"></span>)</span> &#123;</span></span><span class="javascript"><span class="xml">      <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.$route.path;</span></span><span class="javascript"><span class="xml">    &#125;,</span></span><span class="javascript"><span class="xml">    <span class="hljs-function"><span class="hljs-title">routerList</span>(<span class="hljs-params"></span>)</span> &#123;</span></span><span class="javascript"><span class="xml">      <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.$router.options.routes.map(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> &#123;</span></span><span class="javascript"><span class="xml">        <span class="hljs-keyword">return</span> &#123;</span></span><span class="javascript"><span class="xml">          <span class="hljs-attr">path</span>: item.path,</span></span><span class="javascript"><span class="xml">          <span class="hljs-attr">children</span>: item.children,</span></span><span class="javascript"><span class="xml">          <span class="hljs-attr">name</span>: item.children[<span class="hljs-number">0</span>].name</span></span><span class="javascript"><span class="xml">        &#125;;</span></span><span class="javascript"><span class="xml">      &#125;);</span></span><span class="javascript"><span class="xml">    &#125;</span></span><span class="javascript"><span class="xml">  &#125;,</span></span><span class="javascript"><span class="xml">  <span class="hljs-function"><span class="hljs-title">created</span>(<span class="hljs-params"></span>)</span> &#123;</span></span><span class="javascript"><span class="xml"></span></span><span class="javascript"><span class="xml"></span></span><span class="javascript"><span class="xml">  &#125;,</span></span><span class="javascript"><span class="xml">  <span class="hljs-attr">methods</span>: &#123;</span></span><span class="javascript"><span class="xml">    <span class="hljs-function"><span class="hljs-title">menuSelect</span>(<span class="hljs-params">v</span>)</span> &#123;</span></span><span class="javascript"><span class="xml">      <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.$route.path !== v) &#123;</span></span><span class="javascript"><span class="xml">        <span class="hljs-built_in">this</span>.$router.push(v);</span></span><span class="javascript"><span class="xml">      &#125;</span></span><span class="javascript"><span class="xml">    &#125;</span></span><span class="javascript"><span class="xml">  &#125;</span></span><span class="javascript"><span class="xml">&#125;;</span></span><span class="javascript"><span class="xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><span class="xml"></span><span class="xml"></span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;scss&quot;</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css"></span></span><span class="css"><span class="xml"><span class="hljs-selector-class">.el-menu-demo</span> &#123;</span></span><span class="css"><span class="xml">  user-select: none</span></span><span class="css"><span class="xml">&#125;</span></span><span class="css"><span class="xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span></code></pre></div><p>layoutæ–‡ä»¶å¤¹ä¸‹çš„index.js</p><div class="code-wrapper"><pre><code class="hljs coffeescript"><span class="hljs-keyword">export</span> &#123;<span class="hljs-keyword">default</span> <span class="hljs-keyword">as</span> MenuComponent&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./menu&quot;</span>;</code></pre></div>]]></content>
    
    
    <categories>
      
      <category>Webå¼€å‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Vue</tag>
      
      <tag>Webpack</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>nginxä»£ç†åŸºæœ¬ç”¨æ³•</title>
    <link href="/2020/05/21/nginx%E4%BB%A3%E7%90%86%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95/"/>
    <url>/2020/05/21/nginx%E4%BB%A3%E7%90%86%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<h3 id="å‰ç«¯é…ç½®"><a href="#å‰ç«¯é…ç½®" class="headerlink" title="å‰ç«¯é…ç½®"></a>å‰ç«¯é…ç½®</h3><p>ä¿®æ”¹vueé¡¹ç›®ç”Ÿäº§ç¯å¢ƒæ‰“åŒ…é…ç½®ï¼Œéœ€è¦åœ¨.env.productioné…ç½®ç”Ÿäº§ç¯å¢ƒè®¿é—®åœ°å€ä¸ºnginxä»£ç†ç«¯å£</p><div class="code-wrapper"><pre><code class="hljs vue">VUE_APP_BASE_API = &#x27;http://xxx.xx.xx.xx:8080&#x27;</code></pre></div><div class="code-wrapper"><pre><code class="hljs vue">proxy: &#123;  [process.env.VUE_APP_BASE_API]: &#123;    target: &quot;http://xxx.xx.xx.xx:8080&quot;,    changeOrigin: true,    pathRewrite: &#123;      [&#x27;^&#x27; + process.env.VUE_APP_BASE_API]: &#x27;&#x27;    &#125;  &#125;,&#125;</code></pre></div><h3 id="ngixn-é…ç½®"><a href="#ngixn-é…ç½®" class="headerlink" title="ngixn é…ç½®"></a>ngixn é…ç½®</h3><p>8080ä¸ºnginxç›‘å¬ç«¯å£ï¼Œè®¿é—®çš„æ˜¯distç›®å½•ä¸‹çš„index.htmlå‰ç«¯é¡µé¢ï¼Œéœ€è¦é…ç½®é‡Œå¢åŠ apiç›‘å¬å’Œä»£ç†</p><div class="code-wrapper"><pre><code class="hljs nginx"><span class="hljs-attribute">listen</span>       <span class="hljs-number">8080</span>;<span class="hljs-attribute">server_name</span>  <span class="hljs-number">122.51.128.27</span>;<span class="hljs-comment">#charset koi8-r;</span><span class="hljs-comment">#access_log  logs/host.access.log  main;</span><span class="hljs-attribute">location</span> / &#123;    <span class="hljs-attribute">root</span>   /var/opt/client/dist;    <span class="hljs-attribute">index</span>  index.html index.htm;    <span class="hljs-attribute">try_files</span> $uri $uri/ /index.html;&#125;<span class="hljs-attribute">location</span><span class="hljs-regexp"> ^~</span> /api/&#123;    <span class="hljs-attribute">proxy_pass</span> http://127.0.0.1:8088; <span class="hljs-comment">#ä»£ç†åˆ°å®é™…æ¥å£åœ°å€ï¼Œäº‘æœåŠ¡å™¨æœ¬åœ°ç«¯å£</span>&#125;</code></pre></div>]]></content>
    
    
    
    <tags>
      
      <tag>Nginx</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>js æ•°æ®æ‹·è´çš„å‡ ç§æ–¹å¼</title>
    <link href="/2020/05/10/js-%E6%95%B0%E6%8D%AE%E6%8B%B7%E8%B4%9D%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E5%BC%8F/"/>
    <url>/2020/05/10/js-%E6%95%B0%E6%8D%AE%E6%8B%B7%E8%B4%9D%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E5%BC%8F/</url>
    
    <content type="html"><![CDATA[<h3 id="js-æ•°æ®æ‹·è´çš„å‡ ç§æ–¹å¼"><a href="#js-æ•°æ®æ‹·è´çš„å‡ ç§æ–¹å¼" class="headerlink" title="js æ•°æ®æ‹·è´çš„å‡ ç§æ–¹å¼"></a>js æ•°æ®æ‹·è´çš„å‡ ç§æ–¹å¼</h3><ul><li>JSON.parse(JSON.stringify(obj))</li><li>Object.assign({},obj)</li><li>_.cloneDeep(obj1)</li><li>{â€¦obj }</li></ul><div class="code-wrapper"><pre><code class="hljs stylus">let obj = &#123;  <span class="hljs-selector-tag">a</span>:<span class="hljs-number">1</span>,  <span class="hljs-selector-tag">b</span>:&#123;    m:<span class="hljs-number">2</span>  &#125;,  c:<span class="hljs-selector-attr">[1,1,1]</span>,  d:null,  e:()=&gt;&#123;    return <span class="hljs-number">1</span>  &#125;,  f:undefined&#125;let obj1  = JSON<span class="hljs-selector-class">.parse</span>(JSON<span class="hljs-selector-class">.stringify</span>(obj))let obj2 = Object<span class="hljs-selector-class">.assign</span>(&#123;&#125;,obj)let obj3 = _<span class="hljs-selector-class">.cloneDeep</span>(obj1)<span class="hljs-comment">//lodash.cloneDeep()</span>let obj4 = &#123;..<span class="hljs-selector-class">.obj</span> &#125;obj<span class="hljs-selector-class">.a</span> = <span class="hljs-number">0</span>obj<span class="hljs-selector-class">.b</span>.m= <span class="hljs-number">333</span>obj<span class="hljs-selector-class">.c</span> = <span class="hljs-selector-attr">[0]</span>obj<span class="hljs-selector-class">.d</span> = <span class="hljs-string">&#x27;&#x27;</span>obj<span class="hljs-selector-class">.f</span> = <span class="hljs-number">4</span>console<span class="hljs-selector-class">.log</span>(<span class="hljs-string">&#x27;obj&#x27;</span>,obj)console<span class="hljs-selector-class">.log</span>(<span class="hljs-string">&#x27;JSON.parse&#x27;</span>,obj1)console<span class="hljs-selector-class">.log</span>(<span class="hljs-string">&#x27;Object.assign&#x27;</span>,obj2)console<span class="hljs-selector-class">.log</span>(<span class="hljs-string">&#x27;_.cloneDeep&#x27;</span>,obj3)console<span class="hljs-selector-class">.log</span>(<span class="hljs-string">&#x27;...obj&#x27;</span>,obj4)</code></pre></div><h4 id="æ‰“å°ç»“æœï¼š"><a href="#æ‰“å°ç»“æœï¼š" class="headerlink" title="æ‰“å°ç»“æœï¼š"></a>æ‰“å°ç»“æœï¼š</h4><p><img src="/img/blog/js/copy.png"></p><h3 id="æ€»ç»“ï¼š"><a href="#æ€»ç»“ï¼š" class="headerlink" title="æ€»ç»“ï¼š"></a>æ€»ç»“ï¼š</h3><p>ä¸€èˆ¬æƒ…å†µæ¨èä½¿ç”¨ï¼šObject.assignï¼Œ{â€¦obj } è¿™ä¸¤ç§æ–¹å¼</p><p>å¦‚æœå¯¹è±¡ä»…å†…åŒ…å«åµŒå¥—å¯¹è±¡ å¯ä»¥ä½¿ç”¨JSON.parse(JSON.stringify(obj))ï¼Œ_.cloneDeep(obj1) è¿™ä¸¤ç§æ–¹å¼</p><p>å¦‚æœå¯¹è±¡å†…åŒ…å«å‡½æ•°æˆ–å…¶ä»–å¤æ‚å¯¹è±¡ï¼Œä½¿ç”¨ä»¥ä¸‹æ–¹æ³•ï¼š</p><div class="code-wrapper"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-title">deepClone</span>(<span class="hljs-params">obj</span>)</span> &#123;  <span class="hljs-keyword">var</span> result = <span class="hljs-built_in">Array</span>.isArray(obj) ? [] : &#123;&#125;  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> key <span class="hljs-keyword">in</span> obj) &#123;    <span class="hljs-keyword">if</span> (obj[key] &amp;&amp; <span class="hljs-keyword">typeof</span> obj[key] === <span class="hljs-string">&#x27;object&#x27;</span>) &#123;      result[key] = <span class="hljs-built_in">this</span>.deepClone(obj[key])    &#125; <span class="hljs-keyword">else</span> &#123;      result[key] = obj[key]    &#125;  &#125;  <span class="hljs-keyword">return</span> result&#125;,</code></pre></div>]]></content>
    
    
    <categories>
      
      <category>ç¼–ç¨‹è¯­è¨€</category>
      
    </categories>
    
    
    <tags>
      
      <tag>JavaScript</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>nginxå¸¸ç”¨å‘½ä»¤</title>
    <link href="/2020/04/24/nginx%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"/>
    <url>/2020/04/24/nginx%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
    
    <content type="html"><![CDATA[<h3 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h3><p>å¯åŠ¨nginx: start nginx</p><div class="code-wrapper"><pre><code class="hljs awk">nginx -s reload  ï¼šä¿®æ”¹é…ç½®åé‡æ–°åŠ è½½ç”Ÿæ•ˆnginx -s reopen  ï¼šé‡æ–°æ‰“å¼€æ—¥å¿—æ–‡ä»¶nginx -t -c <span class="hljs-regexp">/path/</span>to/nginx.conf æµ‹è¯•nginxé…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡®</code></pre></div><p>å…³é—­nginxï¼š</p><div class="code-wrapper"><pre><code class="hljs vim">nginx -s <span class="hljs-keyword">stop</span>  :å¿«é€Ÿåœæ­¢nginxnginx -s <span class="hljs-keyword">quit</span>  ï¼šå®Œæ•´æœ‰åºçš„åœæ­¢nginx</code></pre></div><h3 id="linux"><a href="#linux" class="headerlink" title="linux"></a>linux</h3><p>ä¿®æ”¹nginxé…ç½®åéœ€è¦é‡å¯Nginx:<br>/usr/local/nginx/sbin/nginx  nginxé»˜è®¤å®‰è£…åœ°å€<br>/usr/local/nginx/sbin/nginx -c /usr/local/nginx/conf/nginx.conf</p><h3 id="windows"><a href="#windows" class="headerlink" title="windows:"></a>windows:</h3><p>windowsç³»ç»Ÿä¸‹æ³¨æ„ä¸è¦ç›´æ¥åŒå‡»nginx.exe:è¿™æ ·ä¼šå¯¼è‡´ä¿®æ”¹é…ç½®åé‡å¯ã€åœæ­¢nginxæ— æ•ˆï¼Œéœ€è¦æ‰‹åŠ¨å…³é—­ä»»åŠ¡ç®¡ç†å™¨å†…çš„æ‰€æœ‰nginxè¿›ç¨‹<br>éœ€è¦åœ¨nginx.exeç›®å½•ï¼Œæ‰“å¼€å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨å‘½ä»¤ å¯åŠ¨/å…³é—­/é‡å¯nginx</p>]]></content>
    
    
    
    <tags>
      
      <tag>Nginx</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Unity AssetBundleä¸€é”®å‘½åå¹¶æ‰“åŒ…</title>
    <link href="/2018/06/06/Unity-AssetBundle%E4%B8%80%E9%94%AE%E5%91%BD%E5%90%8D%E5%B9%B6%E6%89%93%E5%8C%85/"/>
    <url>/2018/06/06/Unity-AssetBundle%E4%B8%80%E9%94%AE%E5%91%BD%E5%90%8D%E5%B9%B6%E6%89%93%E5%8C%85/</url>
    
    <content type="html"><![CDATA[<h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><p>å°†è„šæœ¬æ”¾åœ¨é¡¹ç›®é‡ŒEditoræ–‡ä»¶å¤¹ä¸‹ï¼Œè®¾ç½®å¥½è¦æ‰“åŒ…çš„é¢„åˆ¶ä½“çš„æ–‡ä»¶å¤¹è·¯å¾„å’Œæ‰“åŒ…å‡ºæ¥çš„èµ„æºåŒ…è·¯å¾„ï¼Œå°±å¯ä»¥ä¸€é”®å®Œæˆé¢„åˆ¶ä½“çš„å‘½åå’Œæ‰“åŒ…</p><div class="code-wrapper"><pre><code class="hljs c#">using UnityEngine;using System.Collections;using UnityEditor;using System.IO;/// &lt;summary&gt;/// å…ˆæŒ‡å®šè¦æ‰“åŒ…çš„æ–‡ä»¶å¤¹ï¼Œç‚¹å‡»åä¼šæŠŠæ•´ä¸ªæ–‡ä»¶å¤¹é‡Œä¸œè¥¿è‡ªåŠ¨å‘½åï¼Œå¹¶æ‰“åŒ…æŒ‡å®šåˆ°å¦ä¸€ä¸ªæ–‡ä»¶å¤¹/// &lt;/summary&gt;public class AssetbundlePerfabs : Editor&#123;    public static string sourcePath = Application.dataPath + &quot;/_Project/Public Resource/Model&quot;;//è¦æ‰“åŒ…çš„èµ„æºç›®å½•    const string AssetBundlesOutputPath = &quot;D:/VMNEW/Trunk/Resources/Model32&quot;;//æ‰“åŒ…å®Œçš„æŒ‡å®šç›®å½•    [MenuItem(&quot;Tools/AssetBundle/Build&quot;)]    public static void BuildAssetBundle()    &#123;        ClearAssetBundlesName();        Pack(sourcePath);        string outputPath = AssetBundlesOutputPath;        if (!Directory.Exists(outputPath))        &#123;            Directory.CreateDirectory(outputPath);        &#125;        BuildPipeline.BuildAssetBundles(outputPath, BuildAssetBundleOptions.None, BuildTarget.StandaloneWindows64);        AssetDatabase.Refresh();           &#125;     static void ClearAssetBundlesName()    &#123;        int length = AssetDatabase.GetAllAssetBundleNames().Length;        Debug.Log(length);        string[] oldAssetBundleNames = new string[length];        for (int i = 0; i &lt; length; i++)        &#123;            oldAssetBundleNames[i] = AssetDatabase.GetAllAssetBundleNames()[i];        &#125;        for (int j = 0; j &lt; oldAssetBundleNames.Length; j++)        &#123;            AssetDatabase.RemoveAssetBundleName(oldAssetBundleNames[j], true);        &#125;        length = AssetDatabase.GetAllAssetBundleNames().Length;    &#125;    static void Pack(string source)    &#123;        DirectoryInfo folder = new DirectoryInfo(source);        FileSystemInfo[] files = folder.GetFileSystemInfos();        int length = files.Length;        for (int i = 0; i &lt; length; i++)        &#123;            if (files[i] is DirectoryInfo)            &#123;                Pack(files[i].FullName);            &#125;            else            &#123;                if (!files[i].Name.EndsWith(&quot;.meta&quot;))                &#123;                    file(files[i].FullName);                    //Debug.Log(files[i].FullName);                &#125;            &#125;        &#125;    &#125;    static void file(string source)    &#123;        string _source = Replace(source);//æ›¿æ¢&quot;\\&quot;ä¸º&quot;/&quot;        string _assetPath = &quot;Assets&quot; + _source.Substring(Application.dataPath.Length);        string _assetPath2 = _source.Substring(Application.dataPath.Length + 1);              AssetImporter assetImporter = AssetImporter.GetAtPath(_assetPath);        string assetName = _assetPath2.Substring(_assetPath2.IndexOf(&quot;/&quot;) + 1);        string a = assetName.Substring(assetName.IndexOf(&quot;/&quot;) + 1);        string b = a.Substring(a.IndexOf(&quot;/&quot;) + 1);        b = b.Replace(Path.GetExtension(b), &quot;.assetbundle&quot;);        assetImporter.assetBundleName = b;        Debug.Log(b);    &#125;    static string Replace(string s)    &#123;        return s.Replace(&quot;\\&quot;, &quot;/&quot;);    &#125;    //public class Platform    //&#123;    //    public static string GetPlatformFolder(BuildTarget target)    //    &#123;    //        switch (target)    //        &#123;    //            case BuildTarget.Android:    //                return &quot;Android&quot;;    //            case BuildTarget.iOS:    //                return &quot;IOS&quot;;    //            case BuildTarget.StandaloneWindows64:    //                return &quot;Windows&quot;;    //            default:    //                return null;    //        &#125;    //    &#125;    //&#125;&#125;</code></pre></div>]]></content>
    
    
    <categories>
      
      <category>æ¸¸æˆå¼€å‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>C#</tag>
      
      <tag>Unity</tag>
      
      <tag>AssetBundle</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Xlua æ‰“è¡¥ä¸æµç¨‹å®éªŒè®°å½•</title>
    <link href="/2018/05/23/Xlua-%E6%89%93%E8%A1%A5%E4%B8%81%E5%88%9D%E5%AD%A6%E7%AC%94%E8%AE%B0/"/>
    <url>/2018/05/23/Xlua-%E6%89%93%E8%A1%A5%E4%B8%81%E5%88%9D%E5%AD%A6%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<h3 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><p>é¦–å…ˆå°†xLua-masteré‡Œçš„Assetsæ–‡ä»¶å¤¹ä¸‹çš„å››ä¸ªæ–‡ä»¶å¤¹å¯¼å…¥åˆ°unityé¡¹ç›®é‡Œï¼Œç„¶ååœ¨PlayerSettingé‡Œé¢æ·»åŠ HOTFIX_ENABLEå®ã€‚<br>xluaè¿˜éœ€è¦ä¾èµ–unityçš„cecilçš„dllç¨‹åºé›†ï¼Œè¿™ä¸ªéœ€è¦åˆ°unityçš„å®‰è£…ç›®å½•ä¸‹å»å¤åˆ¶ã€‚<br>å…·ä½“æ˜¯åœ¨å®‰è£…æ–‡ä»¶å¤¹ä¸‹çš„Editor\Data\Managedä¸‹ï¼Œåˆ†åˆ«æ˜¯ï¼šUnity.Cecil.dllï¼ŒUnity.Cecil.Mdb.dllå’ŒUnity.Cecil.Pdb.dllè¿™ä¸‰ä¸ªï¼ŒæŠŠä»–ä»¬å¤åˆ¶åˆ°XLua\Src\Editoræ–‡ä»¶å¤¹ä¸‹ã€‚<br>æœ€åå†å°†xLua-masterä¸‹çš„Toolsæ–‡ä»¶å¤¹æ•´ä¸ªå¤åˆ¶åˆ°é¡¹ç›®æ ¹ç›®å½•ä¸‹é¢ï¼Œå’ŒAssetsä¿æŒåŒçº§ï¼Œåˆ°è¿™é‡Œæ•´ä¸ªxluaç¯å¢ƒå°±é…ç½®å¥½äº†ã€‚</p><h3 id="æ­¥éª¤1"><a href="#æ­¥éª¤1" class="headerlink" title="æ­¥éª¤1"></a>æ­¥éª¤1</h3><p>æ–°å»ºä¸€ä¸ªåœºæ™¯ï¼Œéšä¾¿å»ºä¸€ä¸ªç‰©ä½“å½“åšç©å®¶ï¼Œç„¶åæ–°å»ºè„šæœ¬å‘½åä¸ºBoxPlayerï¼Œå†™å…¥ä»¥ä¸‹ä»£ç </p><div class="code-wrapper"><pre><code class="hljs c#">using System.Collections;using System.Collections.Generic;using UnityEngine;using XLua;[Hotfix]public class BoxPlayer : MonoBehaviour &#123;    public float moveSpeed;       void Start () &#123;           &#125;              // Update is called once per frame       void Update () &#123;        PlayerMoveTest();    &#125;    [LuaCallCSharp]    private void PlayerMoveTest()    &#123;        transform.Translate(transform.forward * moveSpeed * Time.deltaTime,Space.World);    &#125;&#125;</code></pre></div><h4 id="é€»è¾‘è®²è§£"><a href="#é€»è¾‘è®²è§£" class="headerlink" title="é€»è¾‘è®²è§£"></a>é€»è¾‘è®²è§£</h4><p>é¦–å…ˆæ˜¯using XLua,ç„¶åå°†è¿™ä¸ªç±»æ‰“ä¸ŠHotfixæ ‡ç­¾ï¼Œä»£è¡¨è¿™ä¸ªç±»æ˜¯è¦æ‰“è¡¥ä¸çš„ã€‚<br>ç„¶ååœ¨éœ€è¦æ‰“è¡¥ä¸çš„æ–¹æ³•ä¸Šæ‰“ä¸€ä¸ªæ ‡ç­¾[LuaCallCSharp]ã€‚<br>è¿è¡Œåœºæ™¯ï¼Œè¿™ä¸ªç‰©ä½“ä¼šå‘å‰æ–¹è¿åŠ¨, (åœºæ™¯ä¸­publicçš„moveSpeedçš„é€Ÿåº¦æ˜¯5)<br>ç„¶ååœ¨åœºæ™¯é‡Œæ–°å»ºä¸€ä¸ªStreamingAssetsçš„æ–‡ä»¶å¤¹, åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ªæ–‡æœ¬æ–‡æ¡£ï¼šHotfix.lua.txt ä¸€å®šè¦ä»¥.lua.txtç»“å°¾ã€‚</p><p>luaé‡Œé¢è°ƒç”¨c#æ–¹æ³•éœ€è¦CSå¼€å¤´æ¥å¼•ç”¨unityé‡Œé¢çš„ç±»å’Œæ–¹æ³•ï¼Œå¦‚æœä¸æ˜¯é™æ€æ–¹æ³•ï¼Œæ¯”å¦‚transform.TransLate(â€¦.);<br>åœ¨luaé‡Œä¸èƒ½è¿™æ ·ç›´æ¥ç‚¹å‡ºæ¥ï¼Œéœ€è¦å†’å·æ¥å¼•ç”¨ï¼Œself.transform:Translateï¼ˆâ€¦..ï¼‰ï¼Œ<br>æ¯”å¦‚transform.GetComponent<GameObject>()â€¦.åœ¨luaé‡Œä¹Ÿæ˜¯è¦æ¢æˆå†’å·ï¼Œå¹¶ä¸”ä¸èƒ½ä½¿ç”¨&lt;&gt;çš„æ–¹å¼æ¥è·å–ç»„ä»¶ã€‚éœ€è¦é€šè¿‡transform : GameObjectï¼ˆâ€œGameObjectâ€ï¼‰çš„æ–¹å¼æ¥è·å–ã€‚<br>å¦‚æœæ˜¯é™æ€æ–¹æ³•ï¼Œæ¯”å¦‚è¯´Time.deltaTime,å¯ä»¥ç›´æ¥ä½¿ç”¨CS.UnityEngineçš„å‘½åç©ºé—´æ¥ç‚¹å‡ºæ¥ã€‚<br>å¦å¤–xlua.hotfixï¼ˆa,â€™bâ€™,cï¼‰è¿™ç§å†™æ³•ï¼Œé‡Œé¢çš„å†…å®¹åˆ†åˆ«ä»£è¡¨ï¼šaï¼Œè¦æ›´æ”¹çš„C#è„šæœ¬çš„è„šæœ¬åï¼›b,è¦æ›´æ”¹çš„è¿™ä¸ªé‡Œé¢çš„æ–¹æ³•åï¼Œéœ€è¦å•å¼•å·æ‹¬èµ·æ¥ï¼›c,è¦æ›¿æ¢çš„luaæ–¹æ³•</p><div class="code-wrapper"><pre><code class="hljs c#">print(&#x27;æ‰§è¡Œæ›´æ”¹&#x27;)xlua.hotfix(CS.BoxPlayer,&#x27;PlayerMoveTest&#x27;,function(self)       self.transform:Translate(self.transform.right *CS.UnityEngine.Time.deltaTime *15)       self.transform:GetComponent(&quot;MeshRenderer&quot;).material.color =CS.UnityEngine. Color.blackend)</code></pre></div><p>ç„¶åæ–°å»ºä¸€ä¸ªè„šæœ¬Hotfixè„šæœ¬æŒ‚åœ¨ç›¸æœºä¸Šï¼Œå†™å…¥ä»¥ä¸‹ä»£ç ï¼š</p><div class="code-wrapper"><pre><code class="hljs c#">using System.Collections;using System.Collections.Generic;using System.IO;using UnityEngine;using XLua;public class HotFixScript : MonoBehaviour &#123;    LuaEnv LuaEnv = new LuaEnv();       void Start () &#123;        LuaEnv.AddLoader(MyLoder);        LuaEnv.DoString(&quot;require&#x27;Hotfix&#x27;&quot;);       &#125;              public  byte[]MyLoder(ref string file)    &#123;        string path = Application.streamingAssetsPath + &quot;/&quot; + file + &quot;.lua.txt&quot;;        return System.Text.Encoding.UTF8.GetBytes(File.ReadAllText(path));    &#125;    private void OnDisable()    &#123;        LuaEnv.DoString(&quot;require&#x27;callback&#x27;&quot;);    &#125;    private void OnDestroy()    &#123;        LuaEnv.Dispose();    &#125;    void Update () &#123;                     &#125;&#125;</code></pre></div><h3 id="é€»è¾‘è®²è§£-1"><a href="#é€»è¾‘è®²è§£-1" class="headerlink" title="é€»è¾‘è®²è§£"></a>é€»è¾‘è®²è§£</h3><p>é¦–å…ˆæ˜¯LuaEnv,è¿™ä¸ªæ˜¯Xluaçš„ä¸€ä¸ªå…¥å£ï¼Œé€šè¿‡å®ä¾‹åŒ–å®ƒæ¥æ‰§è¡Œæ“ä½œï¼Œç„¶åæ‰§è¡Œè‡ªå·±çš„luaæ–‡æœ¬æ—¶éœ€è¦è‡ªå®šä¹‰Loderï¼Œæ¥è®©LuaEnvæ ¹æ®è‡ªå®šä¹‰çš„Loderé‡Œé¢çš„è·¯å¾„æ¥å¯»æ‰¾è‡ªå·±åˆ›å»ºçš„luaæ–‡æœ¬ï¼Œå¦åˆ™æ‰¾ä¸åˆ°ã€‚ç„¶ååœ¨é”€æ¯è¿™ä¸ªç»„ä»¶æ—¶ï¼Œå…³é—­luaenvçš„å®ä¾‹åŒ–ã€‚<br>åœ¨Starté‡Œé¢LuaEnv.DoString(â€œrequireâ€™Hotfixâ€™â€);å°±æ˜¯æ‰§è¡Œçš„åˆšåˆšåˆ›å»ºçš„Hotfix.lua.txté‡Œé¢çš„ä»£ç ã€‚<br>è¿™ä¸ªæ—¶å€™ç‚¹å‡»è¿è¡Œåœºæ™¯ï¼Œä¼šå‘ç°ç‰©ä½“çš„é¢œè‰²å˜æˆäº†é»‘è‰²ï¼Œç„¶åè¿åŠ¨ä¹Ÿä¸æ˜¯å‘å‰è¿åŠ¨è€Œæ˜¯å‘å³ï¼Œé€Ÿåº¦ä¹Ÿä»5å˜æˆäº†15ã€‚</p><p>å¦å¤–ï¼Œåœ¨luaæ›´æ”¹äº†unityé‡Œé¢çš„æ–¹æ³•ï¼Œéœ€è¦åœ¨ç»“æŸè¿è¡Œæ—¶ï¼Œå–æ¶ˆå¯¹æ­¤æ–¹æ³•çš„æ›´æ”¹ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼Œæ›´æ”¹æ–¹å¼å°±æ˜¯ï¼Œåœ¨OnDisableé‡Œé¢æ‰§è¡Œå¦ä¸€ä¸ªluaæ–‡æ¡£ï¼Œé‡Œé¢å†™ä¸€å¥è¯å°±å¯ä»¥ï¼šxlua.hotfix(CS.BoxPlayer,â€™PlayerMoveTestâ€™,nil) </p><h4 id="ä»¥ä¸Šå°±å®Œæˆäº†ä¸€ä¸ªXluaæ›´æ”¹C-æ‰§è¡Œæ–¹æ³•çš„æ¼”ç¤ºç¤ºä¾‹ã€‚"><a href="#ä»¥ä¸Šå°±å®Œæˆäº†ä¸€ä¸ªXluaæ›´æ”¹C-æ‰§è¡Œæ–¹æ³•çš„æ¼”ç¤ºç¤ºä¾‹ã€‚" class="headerlink" title="ä»¥ä¸Šå°±å®Œæˆäº†ä¸€ä¸ªXluaæ›´æ”¹C#æ‰§è¡Œæ–¹æ³•çš„æ¼”ç¤ºç¤ºä¾‹ã€‚"></a>ä»¥ä¸Šå°±å®Œæˆäº†ä¸€ä¸ªXluaæ›´æ”¹C#æ‰§è¡Œæ–¹æ³•çš„æ¼”ç¤ºç¤ºä¾‹ã€‚</h4><h3 id="ç»§ç»­å­¦ä¹ "><a href="#ç»§ç»­å­¦ä¹ " class="headerlink" title="ç»§ç»­å­¦ä¹ "></a>ç»§ç»­å­¦ä¹ </h3><p>å¦‚æœåªéœ€è¦æ›´æ”¹é€Ÿåº¦ï¼Œä¸æ›´æ”¹å…¶ä»–æ–¹æ³•ï¼Œæ¯”å¦‚é€Ÿåº¦çš„å˜é‡moveSpeedæ˜¯ç§æœ‰çš„å¹¶ä¸”åœ¨c#è„šæœ¬é‡Œèµ‹å€¼ä¸º5 äº†ï¼Œåœ¨luaé‡Œé¢å¯ä»¥è¿™æ ·å†™ï¼š</p><div class="code-wrapper"><pre><code class="hljs lua">xlua.private_accessible(CS.BoxPlayer)xlua.hotfix(CS.BoxPlayer,<span class="hljs-string">&#x27;Start&#x27;</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(self)</span></span>       <span class="hljs-built_in">self</span>.moveSpeed = <span class="hljs-number">15</span>;<span class="hljs-keyword">end</span>)</code></pre></div><p>xlua.private_accessible(CS.BoxPlayer)å°±æ˜¯è·å–æŒ‡å®šç±»é‡Œçš„ç§æœ‰å˜é‡çš„æ–¹å¼ï¼Œä½†æ˜¯æ‰§è¡ŒLuaEnv.DoString(â€œrequireâ€™Hotfixâ€™â€);çš„æ–¹æ³•å¿…é¡»æ”¾åˆ°æ¸¸æˆä¸€å¼€å§‹çš„Awakeé‡Œæ‰§è¡Œï¼Œå› ä¸ºä¿®æ”¹çš„æ˜¯Startï¼Œæ‰€ä»¥æœ‰è¿™ä¸ªå…ˆåé¡ºåºéœ€è¦æ³¨æ„ã€‚<br>ä½†æ˜¯å¦‚æœStarté‡Œé¢ä¸æ­¢è¿™ä¸€ä¸ªå˜é‡ï¼Œä½†æ˜¯åªéœ€è¦æ›´æ”¹æŸä¸ªå˜é‡æ—¶ï¼Œå…¶ä»–ä¸å˜æ—¶ï¼Œå²‚ä¸æ˜¯è¦å†™å¾ˆå¤šä»£ç ï¼Œxluaè€ƒè™‘åˆ°è¿™ä¸€ç‚¹ï¼Œä¹Ÿåšäº†ä¸€ä¸ªæ–¹å¼ï¼Œå°±æ˜¯å¼•ç”¨ä¸€ä¸ªluaåº“ï¼šuitl.lua.txtã€‚<br>å…·ä½“ä½ç½®æ˜¯åœ¨XLua\Resources\xluaæ–‡ä»¶å¤¹ä¸‹ï¼ŒæŠŠå®ƒå¤åˆ¶åˆ°å’Œè‡ªå·±å†™çš„luaæ–‡æœ¬ä¸€ä¸ªç›®å½•ä¸‹å°±å¯ä»¥äº†ã€‚</p><div class="code-wrapper"><pre><code class="hljs lua"><span class="hljs-keyword">local</span> util=<span class="hljs-built_in">require</span> <span class="hljs-string">&#x27;util&#x27;</span>xlua.private_accessible(CS.BoxPlayer)util.hotfix_ex(CS.BoxPlayer,<span class="hljs-string">&#x27;Start&#x27;</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(self)</span></span>       <span class="hljs-built_in">self</span>.Start(<span class="hljs-built_in">self</span>)       <span class="hljs-built_in">self</span>.moveSpeed=<span class="hljs-number">15</span><span class="hljs-keyword">end</span>)</code></pre></div><p>è¿™æ ·æ˜¯å’Œä¸Šé¢ä¸€æ ·çš„æ•ˆæœï¼Œé‡ç‚¹å°±æ˜¯local util=require â€˜utilâ€™æœ‰äº†å®ƒæ‰å¯ä»¥æ›´æ”¹C#æ–¹æ³•é‡Œçš„éƒ¨åˆ†é€»è¾‘å’Œå˜é‡ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æ¸¸æˆå¼€å‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Unity</tag>
      
      <tag>Xlua</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Xluaå­¦ä¹ è®°å½•</title>
    <link href="/2018/05/04/Xlua%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/"/>
    <url>/2018/05/04/Xlua%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/</url>
    
    <content type="html"><![CDATA[<h3 id="ä¸‹è½½Xlua"><a href="#ä¸‹è½½Xlua" class="headerlink" title="ä¸‹è½½Xlua"></a>ä¸‹è½½Xlua</h3><p>åœ¨githubä¸Šä¸‹è½½xluaä¹‹åï¼Œå°† xlua-master/Assetsä¸‹çš„å†…å®¹æ‹·è´åˆ°æˆ‘ä»¬çš„å·¥ç¨‹é‡Œï¼Œå¦‚å›¾æ‰€ç¤ºï¼š<br><img src="/img/blog/xlua/a1.png"></p><h3 id="æ‰§è¡Œå­—ç¬¦ä¸²ï¼š"><a href="#æ‰§è¡Œå­—ç¬¦ä¸²ï¼š" class="headerlink" title="æ‰§è¡Œå­—ç¬¦ä¸²ï¼š"></a>æ‰§è¡Œå­—ç¬¦ä¸²ï¼š</h3><p>æ‰§è¡Œæ—¶ç›´æ¥ä½¿ç”¨luaEnv.DoStringæ–¹æ³•æ¥æ‰§è¡Œluaçš„æ“ä½œ</p><div class="code-wrapper"><pre><code class="hljs c#">using System.Collections;using System.Collections.Generic;using UnityEngine;using XLua;public class XluaTest : MonoBehaviour &#123;    LuaEnv luaEnv;    void Start () &#123;        luaEnv = new LuaEnv();        luaEnv.DoString(&quot;print(&#x27;è¿è¡Œxlua&#x27;)&quot;);        luaEnv.Dispose();       &#125;  &#125;</code></pre></div><p>è¿è¡Œåæ˜¾ç¤ºä»¥ä¸‹å†…å®¹:<br><img src="/img/blog/xlua/a2.png"></p><h3 id="æ‰§è¡ŒåŠ è½½Luaæ–‡ä»¶"><a href="#æ‰§è¡ŒåŠ è½½Luaæ–‡ä»¶" class="headerlink" title="æ‰§è¡ŒåŠ è½½Luaæ–‡ä»¶"></a>æ‰§è¡ŒåŠ è½½Luaæ–‡ä»¶</h3><p>åœ¨Resourcesæ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ªæ–‡æœ¬æ–‡æ¡£å‘½åä¸ºluaTestï¼Œåç¼€åä»¥.lua.txtç»“æŸã€‚æ‰“å¼€æ–‡æ¡£ç¼–å†™ç®€å•luaä»£ç ï¼š<br><img src="/img/blog/xlua/a7.png"></p><p> å›åˆ°ä»£ç ä¸­,ç›´æ¥ä½¿ç”¨ä¸‹é¢çš„æ–¹å¼åŠ è½½Resourcesæ–‡ä»¶ä¸‹çš„luaæ–‡æ¡£ï¼ŒluaEnv.Dostringæ–¹æ³•ä¼šç›´æ¥è¿›è¡Œç¼–è¯‘:</p><div class="code-wrapper"><pre><code class="hljs c#">TextAsset t = Resources.Load&lt;TextAsset&gt;(&quot;luaTest.lua&quot;)luaEnc.DoString(t.text)</code></pre></div><p>è¿è¡Œåå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><img src="/img/blog/xlua/a4.png"></p><p>æˆ–è€…ä¸ä½¿ç”¨ä¸Šé¢çš„è¿™ä¸ªæ–¹å¼å¯ä»¥ç›´æ¥ä½¿ç”¨luaé‡Œçš„æ–¹æ³•æ¥åŠ è½½luaæ–‡ä»¶ï¼š</p><div class="code-wrapper"><pre><code class="hljs vbscript">luaEnv.<span class="hljs-keyword">Do</span><span class="hljs-built_in">String</span>(<span class="hljs-string">&quot;require &#x27;luaTest&#x27;&quot;</span>);</code></pre></div><h3 id="è‡ªå®šä¹‰loder"><a href="#è‡ªå®šä¹‰loder" class="headerlink" title="è‡ªå®šä¹‰loder"></a>è‡ªå®šä¹‰loder</h3><p><img src="/img/blog/xlua/a8.png"></p><p>å®˜æ–¹æ–‡æ¡£ä»‹ç»loderçš„ç”¨æ³•ï¼Œä¸‹é¢æ¼”ç¤ºä¸€ä¸‹è‡ªå®šä¹‰loderï¼Œæ–¹ä¾¿ä¹‹å¤„åœ¨äºå¯ä»¥è‡ªå®šä¹‰æ‰§è¡Œluaæ—¶æƒ³è¦çš„ä¸€äº›æ“ä½œï¼š<br>æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹StreamingAssetsï¼Œå†æ–°å»ºä¸€ä¸ªluaæ–‡ä»¶lua007.lua.txtç¼–è¾‘å†…å®¹ä¸ºprint(â€œI am 007â€)<br>åœ¨è„šæœ¬ä¸­æ›´æ”¹ä»¥ä¸‹ä»£ç ï¼š</p><div class="code-wrapper"><pre><code class="hljs c#">using System.Collections;using System.Collections.Generic;using System.IO;using UnityEngine;using XLua;public class CreatLoder : MonoBehaviour &#123;    void Start ()     &#123;        LuaEnv luaEnv = new LuaEnv();        luaEnv.AddLoader(Myloder);        luaEnv.DoString(&quot;require&#x27;test007&#x27;&quot;);        luaEnv.Dispose();    &#125;           public byte[]Myloder(ref string feilPath)    &#123;        string absPayh = Application.streamingAssetsPath + &quot;/&quot; + feilPath+&quot;.lua.txt&quot;;        return System.Text.Encoding.UTF8.GetBytes(File.ReadAllText(absPayh));    &#125;&#125;</code></pre></div><p>è¿è¡Œåï¼š</p><p><img src="/img/blog/xlua/a5.png"></p><h3 id="é€šè¿‡C-è®¿é—®luaä¸­çš„å…¨å±€å˜é‡"><a href="#é€šè¿‡C-è®¿é—®luaä¸­çš„å…¨å±€å˜é‡" class="headerlink" title="é€šè¿‡C#è®¿é—®luaä¸­çš„å…¨å±€å˜é‡"></a>é€šè¿‡C#è®¿é—®luaä¸­çš„å…¨å±€å˜é‡</h3><p>åœ¨æ–°åœºæ™¯ä¸­æ–°å»ºä¸€ä¸ªResourcesæ–‡ä»¶å¤¹ï¼Œæ–°å»ºä¸€ä¸ªluaæ–‡ä»¶ï¼Œç¼–è¾‘ä¸ºï¼š<br> a=100<br> name=â€Andyâ€<br> IsRoot=false<br>æ‰“å¼€è„šæœ¬è¿›è¡Œç¼–è¾‘</p><div class="code-wrapper"><pre><code class="hljs c#">using System.Collections;using System.Collections.Generic;using UnityEngine;using XLua;public class CSharpCalllua : MonoBehaviour &#123;       void Start () &#123;        LuaEnv luaEnv = new LuaEnv();        luaEnv.DoString(&quot;require&#x27;CSharpCalllua&#x27;&quot;);//å…ˆæ‰“å¼€luaæ–‡ä»¶ï¼Œå†è·å–luaä¸­çš„å…¨å±€å˜é‡        int a = luaEnv.Global.Get&lt;int&gt;(&quot;a&quot;);s        string name = luaEnv.Global.Get&lt;string&gt;(&quot;name&quot;);        bool isroot = luaEnv.Global.Get&lt;bool&gt;(&quot;IsRoot&quot;);        Debug.Log(a);        Debug.Log(name);        Debug.Log(isroot);    &#125;              void Update () &#123;                     &#125;&#125;</code></pre></div><p>ç‚¹å‡»è¿è¡Œåæ˜¾ç¤ºï¼š<br><img src="/img/blog/xlua/a6.png"></p>]]></content>
    
    
    <categories>
      
      <category>æ¸¸æˆå¼€å‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Unity</tag>
      
      <tag>Xlua</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Unityä¸­è§£æxmlæ–‡æ¡£çš„ç®€å•ç”¨æ³•</title>
    <link href="/2018/05/02/Unity%E4%B8%AD%E8%A7%A3%E6%9E%90xml%E6%96%87%E6%A1%A3%E7%9A%84%E7%AE%80%E5%8D%95%E7%94%A8%E6%B3%95/"/>
    <url>/2018/05/02/Unity%E4%B8%AD%E8%A7%A3%E6%9E%90xml%E6%96%87%E6%A1%A3%E7%9A%84%E7%AE%80%E5%8D%95%E7%94%A8%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<h3 id="åˆ›å»ºXmlæ–‡ä»¶"><a href="#åˆ›å»ºXmlæ–‡ä»¶" class="headerlink" title="åˆ›å»ºXmlæ–‡ä»¶"></a>åˆ›å»ºXmlæ–‡ä»¶</h3><p>é¦–å…ˆï¼Œåœ¨unityé¡¹ç›®ä¸­çš„æ ¹ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªxmlæ–‡æ¡£ï¼Œä¾‹å¦‚èµ·åå«item.xmlã€‚å†åˆ›å»ºä¸€ä¸ªè„šæœ¬ï¼Œèµ·åä¸ºXmlTestã€‚å¦‚å›¾æ‰€ç¤ºï¼š</p><p><img src="/img/blog/xml/x1.png"></p><p>åœ¨item.xmlæ–‡æ¡£ä¸­å†™å…¥ä»¥ä¸‹å†…å®¹ï¼š</p><div class="code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">item</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">item1</span>&gt;</span>      <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>      <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>china<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>      <span class="hljs-tag">&lt;<span class="hljs-name">year</span>&gt;</span>2016<span class="hljs-tag">&lt;/<span class="hljs-name">year</span>&gt;</span>   <span class="hljs-tag">&lt;/<span class="hljs-name">item1</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">item2</span>&gt;</span>     <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>     <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>usa<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>     <span class="hljs-tag">&lt;<span class="hljs-name">year</span>&gt;</span>2017<span class="hljs-tag">&lt;/<span class="hljs-name">year</span>&gt;</span>   <span class="hljs-tag">&lt;/<span class="hljs-name">item2</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">item</span>&gt;</span></code></pre></div><h3 id="å†™å…¥ä»£ç "><a href="#å†™å…¥ä»£ç " class="headerlink" title="å†™å…¥ä»£ç "></a>å†™å…¥ä»£ç </h3><p>åœ¨è„šæœ¬é‡Œæ·»åŠ ä»¥ä¸‹ä»£ç ï¼š</p><div class="code-wrapper"><pre><code class="hljs c#">using System.Collections;using System.Collections.Generic;using UnityEngine;using System.Xml;using System.IO;public class XmlTest : MonoBehaviour &#123;              void Start () &#123;        string path = Application.dataPath + &quot;/item.xml&quot;;        XmlDocument document=new XmlDocument();//XmlDocumentæ˜¯ä¸“é—¨ç”¨æ¥è§£æxmlæ–‡æ¡£çš„        document.Load(path);//å°†æŒ‡å®šè·¯å¾„çš„xmlæ–‡ä»¶ç»™documentæ¥è§£æ        XmlNode node = document.FirstChild;//FirstChildç”¨æ¥è·å–xmlä¸­çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯æ ¹èŠ‚ç‚¹        Debug.Log(node.Name);        XmlNodeList xmlNodeList = node.ChildNodes;//è·å–æ ¹èŠ‚ç‚¹ä¸‹çš„æ‰€æœ‰å­èŠ‚ç‚¹        foreach (XmlNode item in xmlNodeList) //éå†è¿™äº›å­èŠ‚ç‚¹çš„é›†åˆï¼Œè¿›è¡Œåˆ¤æ–­        &#123;            if (item.Name == &quot;item1&quot;)            &#123;                foreach (XmlNode n in item.ChildNodes)                &#123;                    if (n.Name == &quot;id&quot;)                    &#123;                        Debug.Log(n.InnerText);//InnerTextå¯ä»¥è·å–èŠ‚ç‚¹ä¸­çš„æ–‡æœ¬                    &#125;                    if(n.Name== &quot;name&quot;)                    &#123;                        Debug.Log(n.InnerText);                    &#125;                    if(n.Name== &quot;year&quot;)                    &#123;                        Debug.Log(n.InnerText);                    &#125;                &#125;            &#125;            else if(item.Name == &quot;item2&quot;)            &#123;                foreach (XmlNode n in item.ChildNodes)                &#123;                    if (n.Name == &quot;id&quot;)                    &#123;                        Debug.Log(n.InnerText);                    &#125;                    if (n.Name == &quot;name&quot;)                    &#123;                        Debug.Log(n.InnerText);                    &#125;                    if (n.Name == &quot;year&quot;)                    &#123;                        Debug.Log(n.InnerText);                    &#125;                &#125;            &#125;        &#125;       &#125;                     void Update () &#123;                     &#125;&#125;</code></pre></div><h3 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><p>å°†è„šæœ¬æŒ‚åœ¨ç›¸æœºä¸‹ï¼Œè¿è¡Œåä¼šæ‰“å°ä»¥ä¸‹å†…å®¹ï¼š<br>ï¼ˆç¬¬ä¸€ä¸ªæ‰“å°çš„æ˜¯æ ¹èŠ‚ç‚¹itemçš„åå­—ï¼Œåé¢åˆ†åˆ«æ‰“å°çš„æ˜¯itemä¸‹çš„æ¯ä¸ªå­èŠ‚ç‚¹(ä¹Ÿå°±æ˜¯item1å’Œitem2)ä¸‹é¢çš„å­èŠ‚ç‚¹çš„æ–‡æœ¬å†…å®¹ï¼‰</p><p><img src="/img/blog/xml/x2.png"></p>]]></content>
    
    
    <categories>
      
      <category>æ¸¸æˆå¼€å‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>C#</tag>
      
      <tag>Unity</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>NHbiernateæ˜ å°„å·¥å…·è¿æ¥MySQLçš„åŸºæœ¬é…ç½®åŠä½¿ç”¨</title>
    <link href="/2018/04/12/NHbiernate%E6%98%A0%E5%B0%84%E5%B7%A5%E5%85%B7%E8%BF%9E%E6%8E%A5MySQL%E7%9A%84%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE%E5%8F%8A%E4%BD%BF%E7%94%A8/"/>
    <url>/2018/04/12/NHbiernate%E6%98%A0%E5%B0%84%E5%B7%A5%E5%85%B7%E8%BF%9E%E6%8E%A5MySQL%E7%9A%84%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE%E5%8F%8A%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<h2 id="NHbiernateä»‹ç»"><a href="#NHbiernateä»‹ç»" class="headerlink" title="NHbiernateä»‹ç»"></a>NHbiernateä»‹ç»</h2><p>NHibernateæ˜¯ä¸€ä¸ªé¢å‘.NETç¯å¢ƒçš„å¯¹è±¡/å…³ç³»æ•°æ®åº“æ˜ å°„å·¥å…·ã€‚å¯¹è±¡/å…³ç³»æ•°æ®åº“æ˜ å°„ï¼ˆobject/relational mappingï¼ŒORMï¼‰è¿™ä¸ªæœ¯è¯­è¡¨ç¤ºä¸€ç§æŠ€æœ¯ï¼Œç”¨æ¥æŠŠå¯¹è±¡æ¨¡å‹è¡¨ç¤ºçš„å¯¹è±¡æ˜ å°„åˆ°åŸºäºSQLçš„å…³ç³»æ¨¡å‹æ•°æ®ç»“æ„ä¸­å»ã€‚</p><h2 id="åŸºæœ¬é…ç½®"><a href="#åŸºæœ¬é…ç½®" class="headerlink" title="åŸºæœ¬é…ç½®"></a>åŸºæœ¬é…ç½®</h2><p>NHbiernateåŸºæœ¬é…ç½®</p><ol><li>æ–°å»ºä¸€ä¸ªé¡¹ç›®å–åä¸ºNHibernateTestï¼Œé¡¹ç›®ä¸­æ·»åŠ MySQL.Dataå’ŒNHbiernateçš„å¼•ç”¨ã€‚</li></ol><ol start="2"><li>åœ¨é¡¹ç›®ä¸‹åˆ›å»ºä¸€ä¸ªXMLæ–‡ä»¶ï¼Œå¿…é¡»å«hibernate.cfg.xml ï¼Œå› ä¸ºNHbiernateä¼šåœ¨æ ¹ç›®å½•ä¸‹æ‰¾è¿™ä¸ªåå­—çš„xmlæ–‡ä»¶ï¼Œå¦‚æœä¸å«è¿™ä¸ªåå­—ä¼šæŠ¥é”™ã€‚å¹¶æŠŠè¯¥æ–‡ä»¶çš„å±æ€§è®¾ç½® ä¸ºå§‹ç»ˆå¤åˆ¶ã€‚<br>åœ¨å®˜ç½‘ä¸Šæ‰¾åˆ°ä»¥ä¸‹ä»£ç ï¼Œæ‰“å¼€è¿™ä¸ªxmlæ–‡ä»¶è¿›è¡Œç¼–è¾‘ï¼š<br>å®˜ç½‘æ˜¯è¿çš„SQL Server, è¿™é‡Œè¿å¾—æ˜¯MySQL, æ‰€ä»¥æ›´æ”¹ä¸€ä¸‹, è¿™é‡Œä¸»è¦è®¾ç½®äº†ç¬¬äºŒè¡Œçš„MySQL5Dialectï¼Œå’Œç¬¬ä¸‰è¡Œçš„MySQLDataDriverï¼Œç¬¬å››è¡Œçš„Server=localhost;Database=sikidb;User ID=root;Password=zzzzz;  æ³¨æ„ä¸€å®šæŠŠè¦è®¿é—®çš„æ•°æ®åº“åå’Œç”¨æˆ·åå¯†ç å†™æ­£ç¡®ã€‚</li></ol><div class="code-wrapper"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">hibernate-configuration</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;urn:nhibernate-configuration-2.2&quot;</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">session-factory</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;connection.provider&quot;</span>&gt;</span>NHibernate.Connection.DriverConnectionProvider<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;dialect&quot;</span>&gt;</span>NHibernate.Dialect.MySQL5Dialect<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;connection.driver_class&quot;</span>&gt;</span>NHibernate.Driver.MySqlDataDriver<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;connection.connection_string&quot;</span>&gt;</span>Server=localhost;Database=sikidb;User ID=root;Password=zzzzz;<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;show_sql&quot;</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>  <span class="hljs-tag">&lt;/<span class="hljs-name">session-factory</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">hibernate-configuration</span>&gt;</span></code></pre></div><ol start="3"><li>å†æ–°å»ºä¸€ä¸ªModelæ–‡ä»¶å¤¹ï¼Œåœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹æ–°å»ºä¸€ä¸ªUserç±»,æŠŠæ•°æ®åº“ä¸­å¯¹åº”çš„è¡¨ä¸­çš„æ¯è¡Œçš„æ•°æ®ååˆ›å»ºæˆæ¯ä¸ªå˜é‡ï¼Œå¦‚ä¸‹:<br>userè¡¨é‡Œæœ‰å››åˆ—æ•°æ®å°±å†™å››ä¸ªå¯¹åº”çš„å˜é‡ï¼Œä¸€å®šè¦æ˜¯virtual ç±»å‹çš„ï¼Œè¿™æ˜¯NHbiernateè¦æ±‚å†™æ³•ã€‚</li></ol><p><img src="/img/blog/nhbinate/n1.png"></p><p><img src="/img/blog/nhbinate/n2.png"></p><ol start="4"><li>åœ¨é¡¹ç›®ä¸‹åœ¨åˆ›å»ºä¸€ä¸ªMappingsæ–‡ä»¶å¤¹ï¼Œåœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ªUser.hbm.xmlå‘½åçš„xmlæ–‡ä»¶ï¼Œå¹¶æŠŠå®ƒçš„å±æ€§é‡Œçš„ç”Ÿæˆæ“ä½œæ”¹ä¸ºåµŒå…¥çš„èµ„æºã€‚æ‰“å¼€ç¼–è¾‘ä¸€ä¸‹ä»£ç :</li></ol><div class="code-wrapper"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">hibernate-mapping</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;urn:nhibernate-mapping-2.2&quot;</span></span><span class="hljs-tag">                   <span class="hljs-attr">assembly</span>=<span class="hljs-string">&quot;NHibernateTest&quot;</span></span><span class="hljs-tag">                   <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;NHibernateTest.Model&quot;</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">class</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;User&quot;</span> <span class="hljs-attr">table</span> =<span class="hljs-string">&quot;users&quot;</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;Id&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;id&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;Int32&quot;</span>&gt;</span>      <span class="hljs-tag">&lt;<span class="hljs-name">generator</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;native&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">generator</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;Username&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;String&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;Password&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;String&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;Registerdate&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;registerdate&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;Date&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>  <span class="hljs-tag">&lt;/<span class="hljs-name">class</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">hibernate-mapping</span>&gt;</span></code></pre></div><p>è¿™é‡Œä¸»è¦æ˜¯é…ç½®NHbiernateçš„æ˜ å°„ï¼Œæ•°æ®åº“é‡Œçš„è¡¨çš„æ¯è¡Œæ•°æ®åå’Œç±»å‹éƒ½è¦æ­£ç¡®å¡«å†™ï¼Œä¸»é”®è¦å¤šè®¾ç½®ä¸€è¡Œè‡ªåŠ¨å¢é•¿    <generator class="native"></generator>ï¼Œä»¥ä¸‹æ˜¯æ•°æ®åº“æ¯è¡Œæ•°æ®åå’Œç±»å‹:</p><p><img src="/img/blog/nhbinate/n3.png"></p><p>åˆ°è¿™é‡Œå°±åŸºæœ¬é…ç½®å®Œæˆäº†ï¼Œä¸‹å›¾æ˜¯å„ä¸ªæ–‡ä»¶ç›®å½•:</p><p><img src="/img/blog/nhbinate/n4.png"></p><h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><p>åœ¨ä¸»å‡½æ•°é‡Œå†™ä¸‹ä»¥ä¸‹ä»£ç ï¼Œæµ‹è¯•ä¸€ä¸‹NHbiernateè¿æ¥MySqlå¢åŠ æ•°æ®çš„åŠŸèƒ½</p><div class="code-wrapper"><pre><code class="hljs c#">using System;using System.Collections.Generic;using System.Linq;using System.Text;using System.Threading.Tasks;using NHibernate;using NHibernate.Cfg;using NHibernateTest.Model;//å¼•å…¥è‡ªå·±åˆ›å»ºçš„ç›®å½•ä¸‹çš„ç±»namespace NHibernateTest&#123;    class Program    &#123;        static void Main(string[] args)        &#123;            var config = new Configuration();            config.Configure();//å¼€å§‹è§£ææ–‡ä»¶hibernate.cfg.xml            config.AddAssembly(&quot;NHibernateTest&quot;);            ISessionFactory sessionFactory = null;            ISession session = null;            try            &#123;                sessionFactory = config.BuildSessionFactory();                session = sessionFactory.OpenSession();//æ‰“å¼€ä¸€ä¸ªè·Ÿæ•°æ®åº“çš„ä¼šè¯                User user = new User() &#123; Username = &quot;vvvv&quot;, Password = &quot;121212&quot; &#125;;                session.Save(user);//NHibernateé‡Œé¢çš„å¢åŠ æ•°æ®çš„æ–¹å¼,Sessionå®ä¾‹ç”±ISessionFactoryæ„å»º                //Sessionæ˜¯HibernateæŒä¹…åŒ–æ“ä½œçš„åŸºç¡€ï¼Œæä¾›äº†ä¼—å¤šæŒä¹…åŒ–æ–¹æ³•ï¼Œå¦‚saveã€updateã€deleteç­‰ã€‚é€šè¿‡è¿™äº›æ–¹æ³•ï¼Œé€æ˜åœ°å®Œæˆå¯¹è±¡çš„å¢åŠ ã€åˆ é™¤ã€ä¿®æ”¹ã€æŸ¥æ‰¾ç­‰æ“ä½œã€‚            &#125;            catch (Exception e)            &#123;                Console.WriteLine(e);            &#125;            finally            &#123;                if (session != null)                &#123;                    session.Close();                &#125;                if (sessionFactory != null)                &#123;                    sessionFactory.Close();                &#125;            &#125;            Console.ReadKey();        &#125;    &#125;&#125;</code></pre></div><h4 id="è¿è¡Œå‰åå¯¹æ¯”"><a href="#è¿è¡Œå‰åå¯¹æ¯”" class="headerlink" title="è¿è¡Œå‰åå¯¹æ¯”"></a>è¿è¡Œå‰åå¯¹æ¯”</h4><p>è¿™å¼ å›¾æ˜¯ä»¥ä¸Šä»£ç æ²¡æœ‰è¿è¡Œå‰æ•°æ®åº“ä¸­çš„userè¡¨é‡Œçš„æ•°æ®ï¼š</p><p><img src="/img/blog/nhbinate/n5.png"></p><p>è¿™ä¸ªæ˜¯è¿è¡Œåï¼Œæ•°æ®åº“çš„æ•°æ®ï¼Œå¯ä»¥çœ‹åˆ°åœ¨æœ€åå¢åŠ äº†ä¸€æ¡Username = â€œvvvvâ€, Password = â€œ121212â€ï¼Œçš„æ•°æ®ï¼š</p><p><img src="/img/blog/nhbinate/n6.png"></p><h4 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h4><p>åˆ é™¤çš„ä¸èƒ½ç›´æ¥ä½¿ç”¨session.Delete(user) ï¼Œç™¾åº¦äº†ä¸€ä¸‹è¿™æ®µè¯: delete()æ–¹æ³•ç”¨äºä»æ•°æ®åº“ä¸­åˆ é™¤ä¸Javaå¯¹è±¡å¯¹åº”çš„è®°å½•ã€‚å¦‚æœä¼ å…¥çš„å‚æ•°æ˜¯æŒä¹…åŒ–å¯¹è±¡ï¼ŒSessionå°±è®¡åˆ’æ‰§è¡Œä¸€ä¸ªdeleteè¯­å¥ã€‚å¦‚æœä¼ å…¥çš„å‚æ•°æ˜¯æ¸¸ç¦»å¯¹è±¡ï¼Œå…ˆä½¿æ¸¸ç¦»å¯¹è±¡è¢«Sessionå…³è”ï¼Œä½¿å®ƒå˜ä¸ºæŒä¹…åŒ–å¯¹è±¡ï¼Œç„¶åè®¡åˆ’æ‰§è¡Œä¸€ä¸ªdeleteè¯­å¥ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒSessionåªæœ‰åœ¨æ¸…ç†ç¼“å­˜çš„æ—¶å€™çš„æ‰æ‰§è¡Œdeleteè¯­å¥ã€‚æ­¤å¤–ï¼Œåªæœ‰å½“è°ƒç”¨Sessionçš„close()æ–¹æ³•æ—¶ï¼Œæ‰ä¼šä»Sessionçš„ç¼“å­˜ä¸­åˆ é™¤è¯¥å¯¹è±¡ã€‚éœ€è¦å…ˆæ¸…ç†ç¼“å­˜ï¼Œæ‰å¯ä»¥æ‰§è¡Œåˆ é™¤ï¼š</p><div class="code-wrapper"><pre><code class="hljs c#">try&#123;    sessionFactory = config.BuildSessionFactory();    session = sessionFactory.OpenSession();//æ‰“å¼€ä¸€ä¸ªè·Ÿæ•°æ®åº“çš„ä¼šè¯    ITransaction transaction = session.BeginTransaction();//å¼€å¯äº‹åŠ¡ã€‚åˆ é™¤çš„è¯éœ€è¦å†™ä¸Šè¿™ä¸€å¥è¯ï¼Œåœ¨æäº¤äº‹åŠ¡æ—¶æ‰å¯ä»¥åˆ æ‰ï¼Œä¸å†™çš„è¯ï¼Œæ§åˆ¶å°ä¸æŠ¥ä»»ä½•é”™è¯¯ï¼Œä½†æ˜¯ä¹Ÿæ²¡æœ‰åˆ æ‰æ•°æ®    User user = new User() &#123;Id=18&#125;;    session.Delete(user);    transaction.Commit();// æäº¤äº‹åŠ¡,æ¸…ç†ç¼“å­˜ï¼Œæ‰§è¡Œdeleteè¯­å¥ &#125;catch (Exception e)&#123;    Console.WriteLine(e);&#125;finally&#123;    if (session != null)    &#123;        session.Close();    &#125;    if (sessionFactory != null)    &#123;        sessionFactory.Close();    &#125;&#125;</code></pre></div><p>sikiè§†é¢‘ä¸­çš„åˆ©ç”¨NHbiernateäº‹åŠ¡æœºåˆ¶æ¥å¢åŠ å’Œåˆ é™¤ï¼š<br>å…³äºå…³é—­è¿™äº›éœ€è¦æ³¨æ„ï¼Œå…ˆå¼€å¯çš„åå…³é—­ï¼Œåå¼€å¯çš„å…ˆå…³é—­</p><div class="code-wrapper"><pre><code class="hljs c#">using System;using System.Collections.Generic;using System.Linq;using System.Text;using System.Threading.Tasks;using NHibernate;using NHibernate.Cfg;using NHibernateTest.Model;//å¼•å…¥è‡ªå·±åˆ›å»ºçš„ç›®å½•ä¸‹çš„ç±»namespace NHibernateTest&#123;    class Program    &#123;        static void Main(string[] args)        &#123;            var config = new Configuration();            config.Configure();//å¼€å§‹è§£ææ–‡ä»¶hibernate.cfg.xml            config.AddAssembly(&quot;NHibernateTest&quot;);            ISessionFactory sessionFactory = null;            ISession session = null;            ITransaction transaction = null;            try            &#123;                sessionFactory = config.BuildSessionFactory();                session = sessionFactory.OpenSession();//æ‰“å¼€ä¸€ä¸ªè·Ÿæ•°æ®åº“çš„ä¼šè¯                transaction = session.BeginTransaction();//æ³¨å†Œäº‹åŠ¡                User user = new User() &#123; Username = &quot;qwrrtu&quot;, Password = &quot;131313&quot; &#125;;                User user1 = new User() &#123; Id = 26 &#125;; //åˆ é™¤æ“ä½œï¼Œåªç»™ä¸»é”®å€¼å°±å¯ä»¥äº†                session.Save(user);                session.Delete(user1);                transaction.Commit();//å¼€å¯äº‹åŠ¡            &#125;            catch (Exception e)            &#123;                Console.WriteLine(e);            &#125;            finally //å…³äºå…³é—­è¿™äº›éœ€è¦æ³¨æ„ï¼Œå…ˆå¼€å¯çš„åå…³é—­ï¼Œåå¼€å¯çš„å…ˆå…³é—­            &#123;                if (transaction != null)                &#123;                    transaction.Dispose();                &#125;                if (session != null)                &#123;                    session.Close();                &#125;                if (sessionFactory != null)                &#123;                    sessionFactory.Close();                &#125;            &#125;            Console.ReadKey();        &#125;    &#125;&#125;</code></pre></div><hr><h2 id="å°è£…"><a href="#å°è£…" class="headerlink" title="å°è£…"></a>å°è£…</h2><p>ä»¥ä¸Šå°±æ˜¯åŸºæœ¬å†™æ³•ï¼Œä½†æ˜¯ç”±äºæ‰§è¡Œå¢åˆ æ”¹æŸ¥æ—¶é¢‘ç¹çš„ä½¿ç”¨ISessionFactoryæ¥åˆ›å»ºä¼šè¯ï¼Œæ‰€ä»¥å°è£…ä¸€ä¸ªç±»æ¥åˆ›å»ºä¼šè¯ï¼Œéœ€è¦æ‰§è¡Œè¿™äº›æ“ä½œçš„æ—¶å€™ç›´æ¥å¼•ç”¨è¿™ä¸ªç®¡ç†ç±»é‡Œé¢çš„æ–¹æ³•å°±å¯ä»¥äº†: </p><h3 id="1"><a href="#1" class="headerlink" title="1."></a>1.</h3><p>é¦–å…ˆæ·»åŠ ä¸€ä¸ªç±»,å‘½åä¸ºNHibernateHelper ,æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š(åœ¨è¿™é‡Œè¿›è¡Œåˆ›å»ºä¼šè¯ï¼Œä¸ç”¨æ¯æ¬¡ä½¿ç”¨æ—¶éƒ½æ–°å¼€ä¸€ä¸ªä¼šè¯)</p><div class="code-wrapper"><pre><code class="hljs c#">using System;using System.Collections.Generic;using System.Linq;using System.Text;using System.Threading.Tasks;using NHibernate;using NHibernate.Cfg;using NHibernate.Criterion;namespace NHibernateTest&#123;    public class NHibernateHelper    &#123;        private static ISessionFactory _sessionFactory;        public static ISessionFactory SessionFactory        &#123;            get            &#123;                if (_sessionFactory == null)                &#123;                    var config = new Configuration();                    config.Configure();//å¼€å§‹è§£ææ–‡ä»¶hibernate.cfg.xml                    config.AddAssembly(&quot;NHibernateTest&quot;);                    _sessionFactory = config.BuildSessionFactory();                &#125;                return _sessionFactory;            &#125;        &#125;        public static ISession OpenSession()        &#123;            return SessionFactory.OpenSession();        &#125;    &#125;&#125;</code></pre></div><h3 id="2"><a href="#2" class="headerlink" title="2."></a>2.</h3><p>åœ¨ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªå«Managerçš„æ–‡ä»¶å¤¹ï¼Œæ·»åŠ ä¸€ä¸ªæ¥å£ï¼Œå‘½åä¸ºIUsermanager ï¼Œå†™å…¥ä»¥ä¸‹ä»£ç ï¼š<br>(è¿™é‡Œå®šä¹‰äº†ä¸€äº›å¢åˆ æ”¹æŸ¥çš„æ–¹æ³•ï¼Œå’Œé€šè¿‡IDæŸ¥è¯¢ç”¨æˆ·æ•°æ®çš„å¤æ‚æŸ¥è¯¢æ–¹æ³•ï¼Œå’ŒéªŒè¯ç”¨æˆ·åå¯†ç æ˜¯å¦å­˜åœ¨çš„æ–¹æ³•)</p><div class="code-wrapper"><pre><code class="hljs c#">using System;using System.Collections.Generic;using System.Linq;using System.Text;using System.Threading.Tasks;using NHibernateTest.Model;namespace NHibernateTest.Manager&#123;    public interface IUserManager    &#123;        /// &lt;summary&gt;        /// æ·»åŠ æ•°æ®        /// &lt;/summary&gt;        /// &lt;param name=&quot;user&quot;&gt;Userè¡¨ä¸­çš„æ•°æ®&lt;/param&gt;        void Add(User user);        /// &lt;summary&gt;        /// æ›´æ–°æ•°æ®        /// &lt;/summary&gt;        /// &lt;param name=&quot;user&quot;&gt;Userè¡¨ä¸­çš„æ•°æ®&lt;/param&gt;        void Updata(User user);        /// &lt;summary&gt;        /// åˆ é™¤æŸæ¡æŒ‡å®šæ•°æ®        /// &lt;/summary&gt;        /// &lt;param name=&quot;user&quot;&gt;Userè¡¨ä¸­çš„æ•°æ®&lt;/param&gt;        void Delete(User user);        /// &lt;summary&gt;        /// é€šè¿‡ç”¨æˆ·IDæŸ¥è¯¢æ•°æ®        /// &lt;/summary&gt;        /// &lt;param name=&quot;id&quot;&gt;&lt;/param&gt;        /// &lt;returns&gt;&lt;/returns&gt;        User GetUserById(int id);        /// &lt;summary&gt;        /// é€šè¿‡ç”¨æˆ·åæŸ¥è¯¢æ•°æ®        /// &lt;/summary&gt;        /// &lt;param name=&quot;username&quot;&gt;&lt;/param&gt;        /// &lt;returns&gt;&lt;/returns&gt;        User GetUserByUsername(string username);        /// &lt;summary&gt;        /// æŸ¥è¯¢è¡¨ä¸­æ‰€æœ‰æ•°æ®        /// &lt;/summary&gt;        /// &lt;returns&gt;&lt;/returns&gt;        ICollection&lt;User&gt; GetAllUsers();        /// &lt;summary&gt;        /// éªŒè¯ç”¨æˆ·åå¯†ç æ˜¯å¦å­˜åœ¨        /// &lt;/summary&gt;        /// &lt;param name=&quot;username&quot;&gt;ç”¨æˆ·å&lt;/param&gt;        /// &lt;param name=&quot;password&quot;&gt;å¯†ç &lt;/param&gt;        /// &lt;returns&gt;&lt;/returns&gt;        bool VerifyUser(string username, string password);    &#125;&#125;</code></pre></div><h3 id="3"><a href="#3" class="headerlink" title="3."></a>3.</h3><p>åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹ï¼Œå†æ·»åŠ ä¸€ä¸ªå«Usermanagerçš„ç±»ï¼Œç»§æ‰¿è‡ªIUsermanagerè¿™ä¸ªæ¥å£ï¼Œå†™å…¥ä»¥ä¸‹ä»£ç </p><div class="code-wrapper"><pre><code class="hljs c#">using System;using System.Collections.Generic;using System.Linq;using System.Text;using System.Threading.Tasks;using NHibernateTest.Model;using NHibernate;using NHibernate.Criterion;namespace NHibernateTest.Manager&#123;    public class UserManager : IUserManager    &#123;        public void Add(User user)        &#123;            //ç¬¬ä¸€ç§å†™æ³•ï¼š            //ISession session = NHibernateHelper.OpenSession();            //session.Save(user);            //session.Close();            //ç¬¬äºŒç§å†™æ³•ï¼š            //Usingè¯­å¥æ„æ€æ˜¯åœ¨å¤§æ‹¬å·é‡Œçš„ä»£ç æ‰§è¡Œå®Œä»¥åé‡Šæ”¾å°æ‹¬å·é‡Œé¢çš„èµ„æº            //ä½¿ç”¨usingï¼Œå®šä¹‰èŒƒå›´ï¼Œåœ¨è¯¥èŒƒå›´ç»“æŸæ—¶å›æ”¶èµ„æºã€‚åŠŸèƒ½ç­‰åŒäºtry&#123; &#125;Finally&#123; &#125;ã€‚            using (ISession session = NHibernateHelper.OpenSession()) //ä¸‹é¢çš„ä»£ç æ‰§è¡Œå®Œä¼šåœ¨è¿™è·¯å…³é—­session            &#123;                using(ITransaction transaction = session.BeginTransaction())                &#123;                    session.Save(user);                          transaction.Commit();//å¼€å¯äº‹åŠ¡,æ‰§è¡Œå®Œä»¥åæ‰ä¼šåœ¨usingé‡Œå…³é—­                &#125;                           &#125;        &#125;        public void Delete(User user)        &#123;            using (ISession session = NHibernateHelper.OpenSession())            &#123;                using (ITransaction transaction = session.BeginTransaction())                &#123;                    session.Delete(user);                          transaction.Commit();                &#125;            &#125;        &#125;        public void Updata(User user)        &#123;            using (ISession session = NHibernateHelper.OpenSession())            &#123;                using (ITransaction transaction = session.BeginTransaction())                &#123;                    session.Update(user);                          transaction.Commit();                &#125;            &#125;        &#125;        public User GetUserById(int id)        &#123;            using (ISession session = NHibernateHelper.OpenSession())            &#123;                using (ITransaction transaction = session.BeginTransaction())                &#123;                    User user = session.Get&lt;User&gt;(id);                          transaction.Commit();                    return user;//è·å–åˆ°useré‡Œçš„idåè¿”å›                &#125;            &#125;        &#125;               public ICollection&lt;User&gt; GetAllUsers()        &#123;            using (ISession session = NHibernateHelper.OpenSession())            &#123;                IList&lt;User&gt; users = session.CreateCriteria(typeof(User)).List&lt;User&gt;();//è¿”å›Useré‡Œçš„å¤šä¸ªå€¼ï¼Œå°±ä¸èƒ½ç”¨UniqueResultäº†                return users;            &#125;        &#125;        public User GetUserByUsername(string username)        &#123;            using(ISession session = NHibernateHelper.OpenSession())            &#123;                //ç¬¬ä¸€ç§å†™æ³•ï¼š                //CreateCriteriaæ–¹æ³•æ˜¯æŒ‡å®šè¦æŸ¥è¯¢å“ªä¸ªè¡¨æ ¼ï¼Œæ¥æ”¶ç±»å‹å‚æ•°,æŠŠuserè¿™ä¸ªç±»å‹ä¼ ç»™ä»–å°±å¯ä»¥äº†                //ICriteria criteria = session.CreateCriteria(typeof(User));                //criteria.Add(Restrictions.Eq(&quot;Username&quot;, username));//Restrictions.Eq ç­‰äºçš„æ„æ€                //User user = criteria.UniqueResult&lt;User&gt;();//UniqueResult è¿™é‡Œåªè¿”å›ä¸€ä¸ªå€¼                //ç¬¬ä¸€ç§çš„ç®€å†™æ–¹å¼:                User user = session.CreateCriteria(typeof(User)).Add(Restrictions.Eq(&quot;Username&quot;, username)).UniqueResult&lt;User&gt;();                return user;            &#125;        &#125;        public bool VerifyUser(string username, string password)        &#123;            using (ISession session = NHibernateHelper.OpenSession())            &#123;                //å’Œé€šè¿‡ç”¨æˆ·åæŸ¥è¯¢æ•°æ®ç±»ä¼¼ï¼Œè¿™é‡Œå¤šåŠ ä¸€ä¸ªå¯†ç æ¡ä»¶å°±å¯ä»¥äº†                User user = session.CreateCriteria(typeof(User)) .Add(Restrictions.Eq(&quot;Username&quot;, username)) .Add(Restrictions.Eq(&quot;Password&quot;, password)) .UniqueResult&lt;User&gt;();                if (user == null)                &#123;                    return false;                &#125;                return true;            &#125;        &#125;    &#125;&#125;</code></pre></div><h3 id="4"><a href="#4" class="headerlink" title="4."></a>4.</h3><p>æœ€ååœ¨ä¸»å‡½æ•°é‡Œè¿›è¡Œæµ‹è¯•è¿™äº›å°è£…çš„æ–¹æ³•</p><div class="code-wrapper"><pre><code class="hljs c#">using System;using System.Collections.Generic;using System.Linq;using System.Text;using System.Threading.Tasks;using NHibernate;using NHibernate.Cfg;using NHibernateTest.Model;using NHibernateTest.Manager;namespace NHibernateTest&#123;    class Program    &#123;        static void Main(string[] args)        &#123;            //æ·»åŠ æ•°æ®            //UserManager userManager = new UserManager();            //User user = new User &#123; Username = &quot;mmmm&quot;, Password = &quot;00000&quot; &#125;;            //userManager.Add(user);            //æ›´æ–°æ•°æ®            //UserManager userManager = new UserManager();            //User user = new User &#123; Id=29 , Username=&quot;å“ˆå“ˆ&quot;,Password=&quot;0000123&quot; &#125;;            //userManager.Updata(user);            //åˆ é™¤æ•°æ®            //UserManager userManager = new UserManager();            //User user = new User &#123; Id = 29&#125;;            //userManager.Delete(user);            //æ ¹æ®ç”¨æˆ·IDæŸ¥è¯¢æ•°æ®            //UserManager userManager = new UserManager();            //User user = userManager.GetUserById(11);            //Console.WriteLine(user.Username+&quot; &quot;+user.Password);            //æ ¹æ®ç”¨æˆ·åæŸ¥è¯¢æ•°æ®            //UserManager userManager = new UserManager();            //User user = userManager.GetUserByUsername(&quot;wer23&quot;);            //Console.WriteLine(user.Id + &quot; &quot; + user.Password);            //æŸ¥è¯¢è¡¨é‡Œçš„æ‰€æœ‰æ•°æ®            //UserManager userManager = new UserManager();            //ICollection&lt;User&gt; users = userManager.GetAllUsers();            //foreach (var item in users)            //&#123;            //    Console.WriteLine(item.Id+&quot; &quot;+item.Username+&quot; &quot;+item.Password);            //&#125;            //éªŒè¯ç”¨æˆ·åå¯†ç æ˜¯å¦å­˜åœ¨            UserManager userManager = new UserManager();            Console.WriteLine(userManager.VerifyUser(&quot;wer&quot;,&quot;123&quot;));//å¦‚æœå­˜åœ¨è¿”å›true,ä¸å­˜åœ¨è¿”å›fasle            Console.ReadKey();        &#125;    &#125;&#125;</code></pre></div><hr><h2 id="æ‹“å±•"><a href="#æ‹“å±•" class="headerlink" title="æ‹“å±•"></a>æ‹“å±•</h2><p>å…³äºRestrictionsçš„å„ç§ç”¨æ³•ï¼š</p><p><img src="/img/blog/nhbinate/n7.png"></p>]]></content>
    
    
    <categories>
      
      <category>ç¼–ç¨‹è¯­è¨€</category>
      
    </categories>
    
    
    <tags>
      
      <tag>C#</tag>
      
      <tag>MySql</tag>
      
      <tag>NHbiernate</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>C#è¿æ¥æ•°æ®åº“åˆå­¦ç¬”è®°</title>
    <link href="/2018/04/12/C-%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%9D%E5%AD%A6%E7%AC%94%E8%AE%B0/"/>
    <url>/2018/04/12/C-%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%9D%E5%AD%A6%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<p>æ‰“å¼€è§£å†³æ–¹æ¡ˆï¼Œé¦–å…ˆæ·»åŠ MySQLæ–‡ä»¶ç›®å½•ä¸‹çš„Mysql.dataçš„å¼•ç”¨ï¼Œå†™å…¥ä»¥ä¸‹ä»£ç ï¼š<br>æ­¤è„šæœ¬æœ€åä¼šæ‰“å°å‡ºè¦æŸ¥è¯¢çš„è¡¨é‡Œçš„æ‰€æœ‰æ•°æ®ï¼Œè¦ä¿è¯æ•°æ®åº“åï¼Œå’Œç”¨æˆ·åå¯†ç éƒ½æ­£ç¡®æ‰å¯ä»¥ï¼Œä¸ç„¶ä¼šæŠ¥é”™</p><h3 id="æŸ¥è¯¢"><a href="#æŸ¥è¯¢" class="headerlink" title="æŸ¥è¯¢"></a>æŸ¥è¯¢</h3><div class="code-wrapper"><pre><code class="hljs c#">using System;using System.Collections.Generic;using System.Linq;using System.Text;using System.Threading.Tasks;using MySql.Data.MySqlClient;namespace test&#123;    class Program    &#123;        static void Main(string[] args)        &#123;            //æœåŠ¡å™¨åœ°å€ï¼Œç«¯å£å·ï¼Œæ•°æ®åº“åï¼Œç”¨æˆ·åï¼Œå¯†ç             string connect = &quot;server=127.0.0.1;port=3306;database=sikidb;user=root;password=zzzzz;&quot;;            MySqlConnection con = new MySqlConnection(connect); //å¼€å§‹è·Ÿæ•°æ®åº“å»ºç«‹è¿æ¥                      try            &#123;                con.Open();//é¦–å…ˆæ‰“å¼€é“¾æ¥                string sqlCmd = &quot;select * from users&quot;;//æŸ¥è¯¢æ•´ä¸ªè¡¨ï¼ˆSQLå‘½ä»¤è¯­å¥,ä¸èƒ½å†™é”™ï¼Œå¦åˆ™æ‰§è¡Œä¸äº†ï¼‰                //select id,username,registerdate from users æŸ¥è¯¢è¿™ä¸ªè¡¨é‡ŒæŒ‡å®šçš„åˆ—                              MySqlCommand cmd = new MySqlCommand(sqlCmd, con); //1ï¼šæ‰§è¡Œå‘½ä»¤çš„è¯­å¥ï¼Œ2ï¼šæ‰“å¼€çš„é€šé“è¿æ¥                //cmd.ExecuteNonQuery();//æ‰§è¡Œæ’å…¥ã€åˆ é™¤æ“ä½œ                //cmd.ExecuteScalar();//è¯»å–æ•°æ®ï¼Œå’Œcmd.ExecuteReader()çš„åŒºåˆ«æ˜¯ï¼Œè¿™ä¸ªè¿”å›å•ä¸ªçš„å€¼                //cmd.ExecuteReader();//è¯»å–æ•°æ®ï¼Œè¿”å›MySqlDataReaderç±»å‹                MySqlDataReader dataReader = cmd.ExecuteReader();                //dataReader.Read();//è¯»å–è¡¨é‡Œçš„ä¸‹ä¸€è¡Œæ•°æ®ï¼Œè¯»å–åˆ°è¿”å›trueï¼Œæ²¡æœ‰ä¸‹ä¸€è¡Œæ•°æ®è¿”å›false                int a = 0;                while (dataReader.Read())                &#123;                    a++;                    Console.WriteLine(dataReader[0].ToString()+&quot; &quot; + dataReader[1].ToString()+ &quot; &quot; + dataReader[2].ToString());                    if (dataReader[1].ToString() == &quot;wer&quot;) //æµ‹è¯•ï¼Œæ‰¾åˆ°è¿™ä¸ªå«werçš„äººåœ¨ç¬¬å‡ è¡Œæ•°æ®                    &#123;                        Console.WriteLine($&quot;æ‰¾åˆ°è¿™ä¸ªäººäº†,åœ¨ç¬¬&#123;a&#125;è¡Œæ•°æ®&quot;);                    &#125;                &#125;            &#125;            catch (Exception e)            &#123;                Console.WriteLine(e.ToString());            &#125;            finally            &#123;                con.Close();            &#125;                       Console.ReadKey();        &#125;    &#125;&#125;</code></pre></div><h3 id="æ’å…¥æ•°æ®"><a href="#æ’å…¥æ•°æ®" class="headerlink" title="æ’å…¥æ•°æ®"></a>æ’å…¥æ•°æ®</h3><div class="code-wrapper"><pre><code class="hljs c#">static void InsertShuJu()    &#123;        //æœåŠ¡å™¨åœ°å€ï¼Œç«¯å£å·ï¼Œæ•°æ®åº“åï¼Œç”¨æˆ·åï¼Œå¯†ç         string connect = &quot;server=127.0.0.1;port=3306;database=sikidb;user=root;password=zzzzz;&quot;;        MySqlConnection con = new MySqlConnection(connect); //å¼€å§‹è·Ÿæ•°æ®åº“å»ºç«‹è¿æ¥        try        &#123;            con.Open();//é¦–å…ˆæ‰“å¼€é“¾æ¥            string name = &quot;aaa&quot;;            string sqlCmd = &quot;insert into users(username,password,registerdate) values(&#x27;&quot;+name+&quot;&#x27;,&#x27;000&#x27;,&#x27;&quot;+DateTime.Now+&quot;&#x27;)&quot;;//æ’å…¥è‡ªå®šä¹‰ç”¨æˆ·åï¼Œå¯†ç ï¼Œå’Œå½“å‰æ—¶é—´            MySqlCommand cmd = new MySqlCommand(sqlCmd, con); //1ï¼šæ‰§è¡Œå‘½ä»¤çš„è¯­å¥ï¼Œ2ï¼šæ‰“å¼€çš„é€šé“è¿æ¥            //cmd.ExecuteNonQuery();//æ‰§è¡Œæ’å…¥ã€åˆ é™¤æ“ä½œ                     int result = cmd.ExecuteNonQuery();//è¿”å›å€¼æ˜¯æ•°æ®åº“ä¸­å—å½±å“çš„æ•°æ®è¡Œæ•°ï¼Œç°åœ¨æ˜¯æ’å…¥ä¸€è¡Œï¼Œæ‰€ä»¥è¿”å›å€¼ä¼šæ˜¯1        &#125;        catch (Exception e)        &#123;            Console.WriteLine(e.ToString());        &#125;        finally        &#123;            con.Close();        &#125;    &#125;</code></pre></div><h3 id="æ›´æ–°æ•°æ®"><a href="#æ›´æ–°æ•°æ®" class="headerlink" title="æ›´æ–°æ•°æ®"></a>æ›´æ–°æ•°æ®</h3><p>æŠŠå‘½ä»¤æ”¹æ‰å°±å¯ä»¥äº†ï¼ŒundateæŒ‡ä»¤å¯ä»¥æ›´æ–°æ•°æ®ï¼Œä¸‹é¢çš„å‘½ä»¤æ„æ€æ˜¯æŠŠidä¸º11çš„ç”¨æˆ·åå¯†ç æ›¿æ¢ä¸ºkkkkï¼Œ666</p><div class="code-wrapper"><pre><code class="hljs c#">string sqlCmd = &quot;update users set username=&#x27;kkkk&#x27;,password=&#x27;666&#x27; where id=&#x27;11&#x27;&quot;;</code></pre></div><h3 id="åˆ é™¤æ•°æ®"><a href="#åˆ é™¤æ•°æ®" class="headerlink" title="åˆ é™¤æ•°æ®"></a>åˆ é™¤æ•°æ®</h3><p>æŠŠå‘½ä»¤æ”¹æ‰å°±å¯ä»¥äº†,æ­¤å‘½ä»¤æ„æ€æ˜¯åˆ é™¤id=10çš„é‚£æ¡æ•°æ®</p><div class="code-wrapper"><pre><code class="hljs c#">string sqlCmd = &quot;delete from users where id=&#x27;10&#x27;&quot;;</code></pre></div><h3 id="æ‹“å±•"><a href="#æ‹“å±•" class="headerlink" title="æ‹“å±•"></a>æ‹“å±•</h3><p>å¦ä¸€ç§è¯»å–æ•°æ®çš„æ–¹å¼ï¼š<br>æŒ‡å®šè¯»å–çš„åˆ—çš„åå­—å°±å¯ä»¥äº†</p> <div class="code-wrapper"><pre><code class="hljs c#">Console.WriteLine(dataReader.GetInt32(&quot;id&quot;) + &quot; &quot; + dataReader.GetString(&quot;username&quot;) + &quot; &quot; + dataReader.GetString(&quot;password&quot;));</code></pre></div><h3 id="å®éªŒ-éªŒè¯ç”¨æˆ·åå¯†ç æ˜¯å¦å­˜åœ¨"><a href="#å®éªŒ-éªŒè¯ç”¨æˆ·åå¯†ç æ˜¯å¦å­˜åœ¨" class="headerlink" title="å®éªŒ éªŒè¯ç”¨æˆ·åå¯†ç æ˜¯å¦å­˜åœ¨"></a>å®éªŒ éªŒè¯ç”¨æˆ·åå¯†ç æ˜¯å¦å­˜åœ¨</h3> <div class="code-wrapper"><pre><code class="hljs c#">//éªŒè¯ç”¨æˆ·åå¯†ç æ˜¯å¦å­˜åœ¨static bool Verification(string username,string password)&#123;    //æœåŠ¡å™¨åœ°å€ï¼Œç«¯å£å·ï¼Œæ•°æ®åº“åï¼Œç”¨æˆ·åï¼Œå¯†ç     string connect = &quot;server=127.0.0.1;port=3306;database=sikidb;user=root;password=zzzzz;&quot;;    MySqlConnection con = new MySqlConnection(connect); //å¼€å§‹è·Ÿæ•°æ®åº“å»ºç«‹è¿æ¥    try    &#123;        con.Open();//é¦–å…ˆæ‰“å¼€é“¾æ¥        string sqlCmd = &quot;select * from users where username = @data1 and password = @data2&quot;;        MySqlCommand cmd = new MySqlCommand(sqlCmd, con);        cmd.Parameters.AddWithValue(&quot;data1&quot;, username);        cmd.Parameters.AddWithValue(&quot;data2&quot;, password);               MySqlDataReader dataReader = cmd.ExecuteReader();        if (dataReader.Read())        &#123;            return true;                  &#125;          &#125;    catch (Exception e)    &#123;        Console.WriteLine(e.ToString());    &#125;    finally    &#123;        con.Close();    &#125;    return false;&#125;</code></pre></div><p>ç„¶åå†ä¸»å‡½æ•°é‡Œåšæµ‹è¯•</p><div class="code-wrapper"><pre><code class="hljs C#">static void Main(string[] args)&#123;    //Reader();    //InsertShuJu();    //Update();    //deleteShuJu();    bool user = Verification(&quot;wer&quot;, &quot;000&quot;); //æ£€æµ‹è¿™ä¸ªè´¦å·å¯†ç     if (user)    &#123;        Console.WriteLine(&quot;ç”¨æˆ·å­˜åœ¨ï¼Œå…è®¸ç™»å½•&quot;);    &#125;    else    &#123;        Console.WriteLine(&quot;ç”¨æˆ·ä¸å­˜åœ¨ï¼Œè¯·é‡æ–°è¾“å…¥è´¦å·å¯†ç &quot;);    &#125;    Console.ReadKey();&#125;</code></pre></div><h3 id="å®Œæ•´ä»£ç "><a href="#å®Œæ•´ä»£ç " class="headerlink" title="å®Œæ•´ä»£ç "></a>å®Œæ•´ä»£ç </h3><p>ä»¥ä¸‹æ˜¯æ•´ä¸ª ä»£ç è¿æ¥MySQLæ•°æ®åº“çš„å¢åˆ æ”¹æŸ¥ï¼Œæ£€æµ‹ç”¨æˆ·è´¦å·å¯†ç æ˜¯å¦å­˜åœ¨çš„è„šæœ¬</p><div class="code-wrapper"><pre><code class="hljs c#">using System;using System.Collections.Generic;using System.Linq;using System.Text;using System.Threading.Tasks;using MySql.Data.MySqlClient;namespace test&#123;    class Program    &#123;        static void Main(string[] args)        &#123;            //Reader();            //InsertShuJu();            //Update();            //deleteShuJu();            bool user = Verification(&quot;wer&quot;, &quot;000&quot;);            if (user)            &#123;                Console.WriteLine(&quot;ç”¨æˆ·å­˜åœ¨ï¼Œå…è®¸ç™»å½•&quot;);            &#125;            else            &#123;                Console.WriteLine(&quot;ç”¨æˆ·ä¸å­˜åœ¨ï¼Œè¯·é‡æ–°è¾“å…¥è´¦å·å¯†ç &quot;);            &#125;            Console.ReadKey();        &#125;        //éªŒè¯ç”¨æˆ·åå¯†ç æ˜¯å¦å­˜åœ¨        static bool Verification(string username,string password)        &#123;            //æœåŠ¡å™¨åœ°å€ï¼Œç«¯å£å·ï¼Œæ•°æ®åº“åï¼Œç”¨æˆ·åï¼Œå¯†ç             string connect = &quot;server=127.0.0.1;port=3306;database=sikidb;user=root;password=zzzzz;&quot;;            MySqlConnection con = new MySqlConnection(connect); //å¼€å§‹è·Ÿæ•°æ®åº“å»ºç«‹è¿æ¥            try            &#123;                con.Open();//é¦–å…ˆæ‰“å¼€é“¾æ¥                string sqlCmd = &quot;select * from users where username = @data1 and password = @data2&quot;;                MySqlCommand cmd = new MySqlCommand(sqlCmd, con);                cmd.Parameters.AddWithValue(&quot;data1&quot;, username);                cmd.Parameters.AddWithValue(&quot;data2&quot;, password);                               MySqlDataReader dataReader = cmd.ExecuteReader();                if (dataReader.Read())                &#123;                    return true;                                  &#125;                          &#125;            catch (Exception e)            &#123;                Console.WriteLine(e.ToString());            &#125;            finally            &#123;                con.Close();            &#125;            return false;        &#125;        static void Reader() //æŸ¥è¯¢æ•°æ®        &#123;            //æœåŠ¡å™¨åœ°å€ï¼Œç«¯å£å·ï¼Œæ•°æ®åº“åï¼Œç”¨æˆ·åï¼Œå¯†ç             string connect = &quot;server=127.0.0.1;port=3306;database=sikidb;user=root;password=zzzzz;&quot;;            MySqlConnection con = new MySqlConnection(connect); //å¼€å§‹è·Ÿæ•°æ®åº“å»ºç«‹è¿æ¥            try            &#123;                con.Open();//é¦–å…ˆæ‰“å¼€é“¾æ¥                string sqlCmd = &quot;select * from users&quot;;//æŸ¥è¯¢æ•´ä¸ªè¡¨ï¼ˆSQLå‘½ä»¤è¯­å¥,ä¸èƒ½å†™é”™ï¼Œå¦åˆ™æ‰§è¡Œä¸äº†ï¼‰                //select id,username,registerdate from users æŸ¥è¯¢è¿™ä¸ªè¡¨é‡ŒæŒ‡å®šçš„åˆ—                             MySqlCommand cmd = new MySqlCommand(sqlCmd, con); //1ï¼šæ‰§è¡Œå‘½ä»¤çš„è¯­å¥ï¼Œ2ï¼šæ‰“å¼€çš„é€šé“è¿æ¥                //cmd.ExecuteNonQuery();//æ‰§è¡Œæ’å…¥ã€åˆ é™¤æ“ä½œ                //cmd.ExecuteScalar();//è¯»å–æ•°æ®ï¼Œå’Œcmd.ExecuteReader()çš„åŒºåˆ«æ˜¯ï¼Œè¿™ä¸ªè¿”å›å•ä¸ªçš„å€¼                //cmd.ExecuteReader();//è¯»å–æ•°æ®ï¼Œè¿”å›MySqlDataReaderç±»å‹                MySqlDataReader dataReader = cmd.ExecuteReader();                //dataReader.Read();//è¯»å–è¡¨é‡Œçš„ä¸‹ä¸€è¡Œæ•°æ®ï¼Œè¯»å–åˆ°è¿”å›trueï¼Œæ²¡æœ‰ä¸‹ä¸€è¡Œæ•°æ®è¿”å›false                int a = 0;                while (dataReader.Read())                &#123;                    a++;                    Console.WriteLine(dataReader.GetInt32(&quot;id&quot;) + &quot; &quot; + dataReader.GetString(&quot;username&quot;) + &quot; &quot; + dataReader.GetString(&quot;password&quot;));                    if (dataReader[1].ToString() == &quot;wer&quot;) //æµ‹è¯•ï¼Œæ‰¾åˆ°è¿™ä¸ªå«werçš„äººåœ¨ç¬¬å‡ è¡Œæ•°æ®                    &#123;                        Console.WriteLine($&quot;æ‰¾åˆ°è¿™ä¸ªäººäº†,åœ¨ç¬¬&#123;a&#125;è¡Œæ•°æ®&quot;);                    &#125;                &#125;            &#125;            catch (Exception e)            &#123;                Console.WriteLine(e.ToString());            &#125;            finally            &#123;                con.Close();            &#125;        &#125;        static void InsertShuJu() //å¢åŠ æ•°æ®        &#123;            //æœåŠ¡å™¨åœ°å€ï¼Œç«¯å£å·ï¼Œæ•°æ®åº“åï¼Œç”¨æˆ·åï¼Œå¯†ç             string connect = &quot;server=127.0.0.1;port=3306;database=sikidb;user=root;password=zzzzz;&quot;;            MySqlConnection con = new MySqlConnection(connect); //å¼€å§‹è·Ÿæ•°æ®åº“å»ºç«‹è¿æ¥            try            &#123;                con.Open();//é¦–å…ˆæ‰“å¼€é“¾æ¥                string name = &quot;aaa&quot;;                //æ’å…¥è‡ªå®šä¹‰ç”¨æˆ·åï¼Œå¯†ç ï¼Œå’Œå½“å‰æ—¶é—´                string sqlCmd = &quot;insert into users(username,password,registerdate) values(&#x27;&quot;+name+&quot;&#x27;,&#x27;000&#x27;,&#x27;&quot;+DateTime.Now+&quot;&#x27;)&quot;;                MySqlCommand cmd = new MySqlCommand(sqlCmd, con); //1ï¼šæ‰§è¡Œå‘½ä»¤çš„è¯­å¥ï¼Œ2ï¼šæ‰“å¼€çš„é€šé“è¿æ¥                //cmd.ExecuteNonQuery();//æ‰§è¡Œæ’å…¥ã€åˆ é™¤æ“ä½œ                             int result = cmd.ExecuteNonQuery();//è¿”å›å€¼æ˜¯æ•°æ®åº“ä¸­å—å½±å“çš„æ•°æ®è¡Œæ•°ï¼Œç°åœ¨æ˜¯æ’å…¥ä¸€è¡Œï¼Œæ‰€ä»¥è¿”å›å€¼ä¼šæ˜¯1            &#125;            catch (Exception e)            &#123;                Console.WriteLine(e.ToString());            &#125;            finally            &#123;                con.Close();            &#125;        &#125;        static void Update() //æ›´æ–°æŸä¸€æ¡æŒ‡å®šæ•°æ®        &#123;            //æœåŠ¡å™¨åœ°å€ï¼Œç«¯å£å·ï¼Œæ•°æ®åº“åï¼Œç”¨æˆ·åï¼Œå¯†ç             string connect = &quot;server=127.0.0.1;port=3306;database=sikidb;user=root;password=zzzzz;&quot;;            MySqlConnection con = new MySqlConnection(connect); //å¼€å§‹è·Ÿæ•°æ®åº“å»ºç«‹è¿æ¥            try            &#123;                con.Open();//é¦–å…ˆæ‰“å¼€é“¾æ¥                              string sqlCmd = &quot;update users set username=&#x27;kkkk&#x27;,password=&#x27;666&#x27; where id=&#x27;11&#x27;&quot;;                MySqlCommand cmd = new MySqlCommand(sqlCmd, con); //1ï¼šæ‰§è¡Œå‘½ä»¤çš„è¯­å¥ï¼Œ2ï¼šæ‰“å¼€çš„é€šé“è¿æ¥                //cmd.ExecuteNonQuery();//æ‰§è¡Œæ’å…¥ã€åˆ é™¤æ“ä½œ                int result = cmd.ExecuteNonQuery();//è¿”å›å€¼æ˜¯æ•°æ®åº“ä¸­å—å½±å“çš„æ•°æ®è¡Œæ•°ï¼Œç°åœ¨æ˜¯æ’å…¥ä¸€è¡Œï¼Œæ‰€ä»¥è¿”å›å€¼ä¼šæ˜¯1            &#125;            catch (Exception e)            &#123;                Console.WriteLine(e.ToString());            &#125;            finally            &#123;                con.Close();            &#125;        &#125;        static void deleteShuJu() //åˆ é™¤æŸä¸€æ¡æŒ‡å®šæ•°æ®        &#123;            //æœåŠ¡å™¨åœ°å€ï¼Œç«¯å£å·ï¼Œæ•°æ®åº“åï¼Œç”¨æˆ·åï¼Œå¯†ç             string connect = &quot;server=127.0.0.1;port=3306;database=sikidb;user=root;password=zzzzz;&quot;;            MySqlConnection con = new MySqlConnection(connect); //å¼€å§‹è·Ÿæ•°æ®åº“å»ºç«‹è¿æ¥            try            &#123;                con.Open();//é¦–å…ˆæ‰“å¼€é“¾æ¥                string sqlCmd = &quot;delete from users where id=&#x27;10&#x27;&quot;;                MySqlCommand cmd = new MySqlCommand(sqlCmd, con); //1ï¼šæ‰§è¡Œå‘½ä»¤çš„è¯­å¥ï¼Œ2ï¼šæ‰“å¼€çš„é€šé“è¿æ¥                //cmd.ExecuteNonQuery();//æ‰§è¡Œæ’å…¥ã€åˆ é™¤æ“ä½œ                int result = cmd.ExecuteNonQuery();//è¿”å›å€¼æ˜¯æ•°æ®åº“ä¸­å—å½±å“çš„æ•°æ®è¡Œæ•°ï¼Œç°åœ¨æ˜¯æ’å…¥ä¸€è¡Œï¼Œæ‰€ä»¥è¿”å›å€¼ä¼šæ˜¯1            &#125;            catch (Exception e)            &#123;                Console.WriteLine(e.ToString());            &#125;            finally            &#123;                con.Close();            &#125;        &#125;    &#125;&#125;</code></pre></div>]]></content>
    
    
    <categories>
      
      <category>ç¼–ç¨‹è¯­è¨€</category>
      
    </categories>
    
    
    <tags>
      
      <tag>C#</tag>
      
      <tag>MySql</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Unityå±•ç¤ºé¼ æ ‡æ»šåŠ¨æ•ˆæœ</title>
    <link href="/2018/04/10/Unity%E5%B1%95%E7%A4%BA%E9%BC%A0%E6%A0%87%E6%BB%9A%E5%8A%A8%E6%95%88%E6%9E%9C/"/>
    <url>/2018/04/10/Unity%E5%B1%95%E7%A4%BA%E9%BC%A0%E6%A0%87%E6%BB%9A%E5%8A%A8%E6%95%88%E6%9E%9C/</url>
    
    <content type="html"><![CDATA[<h5 id="é¼ æ ‡æ“ä½œç‰©ä½“æ—‹è½¬åš3Då±•ç¤ºï¼Œä»¥åŠæ»šè½®æ»‘åŠ¨è¿œè¿‘è·ç¦»è§‚å¯ŸåŠŸèƒ½"><a href="#é¼ æ ‡æ“ä½œç‰©ä½“æ—‹è½¬åš3Då±•ç¤ºï¼Œä»¥åŠæ»šè½®æ»‘åŠ¨è¿œè¿‘è·ç¦»è§‚å¯ŸåŠŸèƒ½" class="headerlink" title="é¼ æ ‡æ“ä½œç‰©ä½“æ—‹è½¬åš3Då±•ç¤ºï¼Œä»¥åŠæ»šè½®æ»‘åŠ¨è¿œè¿‘è·ç¦»è§‚å¯ŸåŠŸèƒ½"></a>é¼ æ ‡æ“ä½œç‰©ä½“æ—‹è½¬åš3Då±•ç¤ºï¼Œä»¥åŠæ»šè½®æ»‘åŠ¨è¿œè¿‘è·ç¦»è§‚å¯ŸåŠŸèƒ½</h5><p>ä»¥ä¸‹è„šæœ¬æŒ‚åœ¨ç‰©ä½“ä¸Šï¼ŒæŠŠåœºæ™¯ä¸­ç›¸æœºç»™åˆ°å˜é‡ä¸­</p><div class="code-wrapper"><pre><code class="hljs c#">using UnityEngine;using System.Collections;using System.Collections.Generic;public class test : MonoBehaviour&#123;    public Camera cam;    public float speed;    void Update()    &#123;        transform.Rotate(Vector3.up, Space.World);//ç‰©ä½“è‡ªèº«ä¸€ç›´æ—‹è½¬        Vector3 fwd = cam.transform.forward;        fwd.Normalize();         //åˆ©ç”¨å‰ä¹˜å¾—åˆ°çš„å‘é‡æ¥æ—‹è½¬        if (Input.GetMouseButton(0))        &#123;            Vector3 vaxis = Vector3.Cross(fwd, Vector3.right);            transform.Rotate(vaxis, -Input.GetAxis(&quot;Mouse X&quot;)* speed, Space.World);            Vector3 haxis = Vector3.Cross(fwd, Vector3.up);            transform.Rotate(haxis, -Input.GetAxis(&quot;Mouse Y&quot;)* speed, Space.World);        &#125;                if (Input.GetAxis(&quot;Mouse ScrollWheel&quot;) &lt; 0)        &#123;            Debug.Log(&quot;å‘åæ»‘åŠ¨&quot;);            if (cam.fieldOfView &lt;= 80) //é™åˆ¶æ»‘åŠ¨èŒƒå›´                cam.fieldOfView += 2;        &#125;               if (Input.GetAxis(&quot;Mouse ScrollWheel&quot;) &gt; 0)        &#123;            Debug.Log(&quot;å‘å‰æ»‘åŠ¨&quot;);            if (cam.fieldOfView &gt; 25) //é™åˆ¶æ»‘åŠ¨èŒƒå›´                cam.fieldOfView -= 2;        &#125;    &#125; &#125;</code></pre></div>]]></content>
    
    
    <categories>
      
      <category>æ¸¸æˆå¼€å‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Unity</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>DOTweenæ’ä»¶å­¦ä¹ </title>
    <link href="/2018/04/08/DOTween%E6%8F%92%E4%BB%B6%E5%AD%A6%E4%B9%A0/"/>
    <url>/2018/04/08/DOTween%E6%8F%92%E4%BB%B6%E5%AD%A6%E4%B9%A0/</url>
    
    <content type="html"><![CDATA[<h3 id="è„šæœ¬1"><a href="#è„šæœ¬1" class="headerlink" title="è„šæœ¬1"></a>è„šæœ¬1</h3><p>æŒ‚åœ¨åœºæ™¯ç‰©ä½“ä¸Š,ä½¿ç‰©ä½“ç§»åŠ¨çš„æ–¹æ³•</p><div class="code-wrapper"><pre><code class="hljs c#">using System.Collections;using System.Collections.Generic;using UnityEngine;using DG.Tweening;//using DoTweençš„å‘½åç©ºé—´public class test_one : MonoBehaviour &#123;    public Vector3 tweenV3 = new Vector3(0, 0, 0);          void Start ()    &#123;        tweenV3= transform.position;        //DOTweené‡Œçš„Toæ–¹æ³•ï¼š        //å¯¹å˜é‡è¿›è¡Œç§»åŠ¨ï¼Œå›ºå®šå†™æ³•ï¼Œå‰ä¸¤ä¸ªå‚æ•°æ˜¯å›ºå®šçš„,æŒ‡å‘å˜é‡ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯è¦ç§»åˆ°çš„ä½ç½®ï¼Œç¬¬å››ä¸ªæ˜¯ç§»åŠ¨æ‰€ç”¨çš„æ—¶é—´        DOTween.To(() =&gt; tweenV3, x =&gt; tweenV3 = x, new Vector3(0, 0, 0), 5);       &#125;                     void Update () &#123;               transform.position = tweenV3;//ç»™ç‰©ä½“ä½ç½®èµ‹å€¼ï¼Œè¿›è¡Œç§»åŠ¨    &#125;&#125;</code></pre></div><h3 id="è„šæœ¬2"><a href="#è„šæœ¬2" class="headerlink" title="è„šæœ¬2"></a>è„šæœ¬2</h3><p>æŒ‚åœ¨UIä¸Šï¼Œä½¿UIç§»åŠ¨çš„æ–¹æ³•</p><div class="code-wrapper"><pre><code class="hljs c#">public RectTransform rectTransform;private void Start()&#123;   rectTransform.DOLocalMove(new Vector3(0, 0, 0), 1);//ä½¿ç”¨æ­¤æ–¹æ³•å¯ä»¥ä½¿UIå›¾ç‰‡åœ¨ä¸€ç§’å†…ä»å¤–é¢ç§»åŠ¨åˆ°ç”»å¸ƒä¸­å¿ƒç‚¹(DOLocalMoveæ˜¯è‡ªèº«åæ ‡ï¼ŒDOMoveæ˜¯ä¸–ç•Œåæ ‡)&#125;</code></pre></div><h3 id="è„šæœ¬3"><a href="#è„šæœ¬3" class="headerlink" title="è„šæœ¬3"></a>è„šæœ¬3</h3><p>ç‚¹å‡»buttonï¼Œä½¿å›¾ç‰‡åœ¨å±å¹•å¤–é¢ç§»åŠ¨åˆ°å±å¹•ä¸­é—´, å†ç‚¹å‡»çš„è¯å†ä»å±å¹•å†…ç§»å‡ºå» (æ­¤è„šæœ¬æŒ‚åœ¨è¦ç§»åŠ¨çš„å›¾ç‰‡ä¸Š,å¹¶ç»™buttonæ·»åŠ äº‹ä»¶)ã€‚</p><div class="code-wrapper"><pre><code class="hljs c#">using System.Collections;using System.Collections.Generic;using UnityEngine;using DG.Tweening;//using DoTweençš„å‘½åç©ºé—´public class test_one : MonoBehaviour &#123;     public RectTransform rectTransform;//å›¾ç‰‡    bool IsInScreen = false;//åˆ¤æ–­å›¾ç‰‡æ˜¯å¦åœ¨å±å¹•å†…    void Start()    &#123;        //ä½¿ç”¨æ­¤æ–¹æ³•å¯ä»¥ä½¿UIå›¾ç‰‡åœ¨ä¸€ç§’å†…ä»å¤–é¢ç§»åŠ¨åˆ°ç”»å¸ƒä¸­å¿ƒç‚¹(DOLocalMoveæ˜¯è‡ªèº«åæ ‡ï¼ŒDOMoveæ˜¯ä¸–ç•Œåæ ‡)        //Tweenerå¯¹è±¡ä¿å­˜æ¯ä¸ªåˆ›å»ºå‡ºæ¥çš„åŠ¨ç”»ä¿¡æ¯ï¼Œæ¯æ¬¡è°ƒç”¨doæ–¹æ³•éƒ½ä¼šåˆ›å»ºä¸€ä¸ªtweenerå¯¹è±¡ï¼Œæ‰€ä»¥ä¸ºäº†ä¸æ¶ˆè€—å†…å­˜ï¼Œåœ¨starté‡Œåˆ›å»ºä¸€æ¬¡ï¼Œåé¢å°±ä¸ç”¨åˆ›å»ºäº†        Tweener tweener = rectTransform.DOLocalMove(new Vector3(0, 0, 0), 0.3f);        tweener.SetAutoKill(false);//åŠ¨ç”»æ¯æ¬¡æ’­æ”¾å®Œä¼šè‡ªåŠ¨é”€æ¯ï¼Œæ‰€ä»¥åœ¨starté‡Œåˆ›å»ºçš„è¯ä¸éœ€è¦é”€æ¯ï¼Œå°±æŠŠå®ƒè®¾ç½®ä¸ºfalse        tweener.Pause();//åœ¨æ²¡æœ‰è°ƒç”¨å‰å…ˆè®©å®ƒæš‚åœ    &#125;       public void Onclick()    &#123;        if (IsInScreen == false)        &#123;            rectTransform.DOPlayForward();//åŠ¨ç”»å‰æ”¾ã€‚ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œå¼€å§‹æ’­æ”¾åŠ¨ç”»ï¼Œæ³¨æ„è¿™é‡Œä¸èƒ½ä½¿ç”¨DOPlayï¼Œå› ä¸ºDOPlayåªè°ƒç”¨ä¸€æ¬¡            IsInScreen = true;        &#125;        else        &#123;            rectTransform.DOPlayBackwards();//åŠ¨ç”»å€’æ”¾,å¦‚æœåœ¨å±å¹•é‡Œå°±è®©å®ƒå‡ºå»            IsInScreen = false;        &#125;    &#125;&#125;</code></pre></div><h3 id="å…¶ä»–ç›¸å…³ç”¨æ³•"><a href="#å…¶ä»–ç›¸å…³ç”¨æ³•" class="headerlink" title="å…¶ä»–ç›¸å…³ç”¨æ³•"></a>å…¶ä»–ç›¸å…³ç”¨æ³•</h3><ol><li></li></ol><div class="code-wrapper"><pre><code class="hljs c#">//é»˜è®¤æ˜¯ä»è‡ªèº«ä½ç½®ç§»åŠ¨åˆ°ç›®æ ‡Xä½ç½®ï¼Œåé¢åŠ ä¸ŠFrom()åå°±æˆäº†ä»ç›®æ ‡ä½ç½®ç§»åŠ¨åˆ°è‡ªèº«ä½ç½®transform.DOLocalMoveX5, 1).From();</code></pre></div><ol start="2"><li></li></ol><div class="code-wrapper"><pre><code class="hljs c#">void Start () &#123;    Tweener tw= transform.DOLocalMoveX(5, 1);ä»è‡ªèº«ä½ç½®ç§»åŠ¨åˆ°ç›®æ ‡Xä½ç½®    tw.SetEase(Ease.OutBounce);è®¾ç½®ç§»åŠ¨æ›²çº¿æ–¹å¼ï¼ŒEaseæ˜¯DOTweenè‡ªå¸¦çš„æšä¸¾ï¼Œé‡Œé¢æœ‰å„ç§å„æ ·çš„æ›²çº¿ï¼Œå¯ä»¥è‡ªè¡ŒæŒ‘é€‰åˆé€‚çš„æ¥ä½¿ç”¨    tw.OnComplete(OnTween);DOTweenè‡ªå¸¦åŠ¨ç”»äº‹ä»¶å‡½æ•°ï¼Œä¼šåœ¨åŠ¨ç”»æ’­æ”¾å®Œä»¥åè°ƒç”¨ï¼ˆå®˜æ–¹æ–‡æ¡£è¿˜æœ‰å…¶ä»–å‡ ç§ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼‰&#125;void OnTween()&#123;    Debug.Log(&quot;åŠ¨ç”»æ’­æ”¾å®Œæˆäº†&quot;);&#125;</code></pre></div><p>3.<br>æ–‡å­—çš„åŠ¨ç”»æ•ˆæœï¼Œä½¿ç”¨ä»¥ä¸‹æ–¹æ³•ä¼šæœ‰é€å­—æ˜¾ç¤ºçš„æ•ˆæœ(å¯ä»¥åšä¸€äº›å¯¹è¯çš„æ˜¾ç¤ºï¼Œæˆ–è€…å…³å¡åçš„æ˜¾ç¤º)</p><div class="code-wrapper"><pre><code class="hljs c#">Text text;      void Start () &#123;  text.DOText(&quot;xxxxxxxxxxx&quot;, 2);//ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦æ˜¾ç¤ºçš„å­—ç¬¦ä¸²ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ‰€ç”¨æ—¶é—´&#125;</code></pre></div><p>4.</p><p>å±å¹•éœ‡åŠ¨æ•ˆæœ</p><div class="code-wrapper"><pre><code class="hljs c#">transform.DOShakePosition(1);//DOTweenè‡ªå¸¦çš„ä½¿ç›¸æœºè‡ªèº«éšæœºæŠ–åŠ¨çš„æ–¹æ³•ï¼Œåªå†™1çš„è¯å°±æ˜¯æŠ–åŠ¨1ç§’ï¼Œåé¢å¯ä»¥åŠ new Vector3()å‚æ•°ï¼Œåˆ†åˆ«æ§åˆ¶ç›¸æœºçš„X,Y,Zè½´çš„æŠ–åŠ¨è·ç¦»,ä¾‹å¦‚ï¼š transform.DOShakePosition(1,new Vector3(1,1,0));</code></pre></div><ol start="5"><li></li></ol><p>é¢œè‰²æ¸å˜æ•ˆæœ(ä¸»è¦ç”¨åœ¨UIä¸Šï¼Œç‰©ä½“ä¸è¡Œ):</p><div class="code-wrapper"><pre><code class="hljs c#">image.DOColor(Color.blue, 2);//ç¬¬ä¸€ä¸ªæ˜¯é¢œè‰²ï¼Œç¬¬äºŒä¸ªæ˜¯è¿‡åº¦çš„æ—¶é—´ï¼ŒTextæ–‡å­—ä¹Ÿæ˜¯ä¸€æ ·çš„æ–¹å¼é€æ˜åº¦æ¸å˜æ•ˆæœï¼šimage.DOFade(1, 3);//ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯é€æ˜åº¦å€¼ï¼ˆæµ‹è¯•æ—¶å¯ä»¥åœ¨åœºæ™¯ä¸­æŠŠå›¾ç‰‡é€æ˜åº¦è®¾ç½®ä¸º0ï¼‰ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ‰€ç”¨æ—¶é—´</code></pre></div>]]></content>
    
    
    <categories>
      
      <category>æ¸¸æˆå¼€å‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Unity</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Unity AssetBundleåŠ è½½èµ„æºåŒ…çš„å››ç§æ–¹å¼</title>
    <link href="/2018/04/04/AssetBundle%E8%B5%84%E6%BA%90%E5%8C%85%E7%9A%84%E5%9B%9B%E7%A7%8D%E6%96%B9%E5%BC%8F/"/>
    <url>/2018/04/04/AssetBundle%E8%B5%84%E6%BA%90%E5%8C%85%E7%9A%84%E5%9B%9B%E7%A7%8D%E6%96%B9%E5%BC%8F/</url>
    
    <content type="html"><![CDATA[<h3 id="æ–¹å¼1-AssetBundle-LoadFromMemoryAsync-ä»å†…å­˜å¼‚æ­¥åŠ è½½"><a href="#æ–¹å¼1-AssetBundle-LoadFromMemoryAsync-ä»å†…å­˜å¼‚æ­¥åŠ è½½" class="headerlink" title="æ–¹å¼1 AssetBundle.LoadFromMemoryAsync ä»å†…å­˜å¼‚æ­¥åŠ è½½"></a>æ–¹å¼1 AssetBundle.LoadFromMemoryAsync ä»å†…å­˜å¼‚æ­¥åŠ è½½</h3><p>å…ˆé€šè¿‡Fileè½¬åŒ–æˆbyteæ•°ç»„ï¼Œå†ä»å­—èŠ‚æ•°ç»„é‡Œè¯»å–è½¬åŒ–æˆAssetbundle</p><div class="code-wrapper"><pre><code class="hljs c#">IEnumerator aaa() &#123;      string ziyuan = &quot;/Perfabs/xxx.assetbundle&quot;;//é¡¹ç›®è·¯å¾„ä¸‹çš„æŸä¸ªåŒ…      AssetBundleCreateRequest request =  AssetBundle.LoadFromMemoryAsync(File.ReadAllBytes(ziyuan));//åˆ›å»ºä¸€ä¸ªè¯·æ±‚,å¼‚æ­¥çš„æ–¹å¼       yield return request;//ç­‰å¾…loadå®Œæˆ      AssetBundle ab = request.assetBundle;//åŠ è½½å®Œåå–åˆ°requesté‡Œé¢çš„assetBundleå¯¹è±¡       //åŠ è½½æ–¹å¼ç›¸åŒ      GameObject obj = ab.LoadAsset&lt;GameObject&gt;(&quot;xxx&quot;); &#125;</code></pre></div><h3 id="æ–¹å¼2-AssetBundle-LoadFromFile-ä»æ–‡ä»¶åŠ è½½"><a href="#æ–¹å¼2-AssetBundle-LoadFromFile-ä»æ–‡ä»¶åŠ è½½" class="headerlink" title="æ–¹å¼2  AssetBundle.LoadFromFile  ä»æ–‡ä»¶åŠ è½½"></a>æ–¹å¼2  AssetBundle.LoadFromFile  ä»æ–‡ä»¶åŠ è½½</h3><div class="code-wrapper"><pre><code class="hljs c#">void bbb()&#123;    string path = &quot;C:/Users/zhengwenke/Documents/unity/new/and/xxx.assetbundle&quot;;//å®Œæ•´è·¯å¾„     AssetBundle ab = AssetBundle.LoadFromFile(path);     GameObject obj = ab.LoadAsset&lt;GameObject&gt;(&quot;xxx&quot;);&#125;</code></pre></div><h3 id="æ–¹å¼3-æœåŠ¡å™¨åŠ è½½æˆ–è€…æœ¬åœ°åŠ è½½"><a href="#æ–¹å¼3-æœåŠ¡å™¨åŠ è½½æˆ–è€…æœ¬åœ°åŠ è½½" class="headerlink" title="æ–¹å¼3 æœåŠ¡å™¨åŠ è½½æˆ–è€…æœ¬åœ°åŠ è½½"></a>æ–¹å¼3 æœåŠ¡å™¨åŠ è½½æˆ–è€…æœ¬åœ°åŠ è½½</h3><p> è¿™ç§æ–¹å¼å°†è¦è¢«UnityWebRequestä»£æ›¿ï¼Œunity2017ä¹‹åå°½é‡ä½¿ç”¨ç¬¬äºŒç§å’Œç¬¬å››ç§</p><div class="code-wrapper"><pre><code class="hljs c#"> IEnumerator ccc()&#123;                    //è¿™æ˜¯ä»æœ¬åœ°è·¯å¾„åŠ è½½ï¼Œå¦‚æœä»æœåŠ¡å™¨åŠ è½½ç›´æ¥æŠŠhttpçš„åœ°å€æ¢ä¸€ä¸‹å°±å¯ä»¥äº†                string path = @&quot;file://D:\VMNEW\Trunk\Resources\Model32\77426_box.assetbundle&quot;; //è·¯å¾„æ–œæ ä¸èƒ½å†™é”™ï¼Œä¸ç„¶ä¼šæŠ¥æœªçŸ¥é”™è¯¯                while (Caching.ready == false)                &#123;                   yield return null;                &#125;                WWW www = WWW.LoadFromCacheOrDownload(path, 1);                yield return www;                //wwwæœ‰é”™è¯¯ä¸ä¼šç»ˆæ­¢è¿è¡Œï¼Œæ‰€ä»¥è¦åˆ¤æ–­æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯                if (string.IsNullOrEmpty(www.error)==false)                &#123;                    Debug.Log(www.error);                    yield break;                &#125;                AssetBundle ab = www.assetBundle;                //åŠ è½½æ–¹å¼ç›¸åŒ                GameObject obj = ab.LoadAsset&lt;GameObject&gt;(&quot;xxx&quot;);&#125;</code></pre></div><h3 id="æ–¹å¼4-æœåŠ¡å™¨åŠ è½½æˆ–è€…æœ¬åœ°åŠ è½½"><a href="#æ–¹å¼4-æœåŠ¡å™¨åŠ è½½æˆ–è€…æœ¬åœ°åŠ è½½" class="headerlink" title="æ–¹å¼4 æœåŠ¡å™¨åŠ è½½æˆ–è€…æœ¬åœ°åŠ è½½"></a>æ–¹å¼4 æœåŠ¡å™¨åŠ è½½æˆ–è€…æœ¬åœ°åŠ è½½</h3><div class="code-wrapper"><pre><code class="hljs c#">IEnumerator ddd()            &#123;                //è¿™æ˜¯ä»æœ¬åœ°è·¯å¾„åŠ è½½ï¼Œå¦‚æœä»æœåŠ¡å™¨åŠ è½½ç›´æ¥æŠŠhttpçš„åœ°å€æ¢ä¸€ä¸‹å°±å¯ä»¥äº†                string uri = @&quot;file:///C:/Users/zhengwenke/Documents/unity/new/and/xxx.assetbundle&quot;;                UnityWebRequest request = UnityWebRequest.GetAssetBundle(uri);                yield return request.SendWebRequest();                     //ç¬¬ä¸€ç§æ–¹å¼                 AssetBundle ab = DownloadHandlerAssetBundle.GetContent(request);                     //ç¬¬äºŒç§æ–¹å¼                 //AssetBundle ab = (request.downloadHandler as DownloadHandlerAssetBundle).assetBundle;                                      //åŠ è½½æ–¹å¼ç›¸åŒ                GameObject obj = ab.LoadAsset&lt;GameObject&gt;(&quot;xxx&quot;);            &#125;</code></pre></div><p>WWWçš„åŠ è½½æ–¹å¼ï¼Œåœ¨è¿è¡Œçš„æ—¶å€™ä¼šè‡ªåŠ¨ç”Ÿæˆè¯¥åŒ…é‡Œçš„ç¼“å­˜åœ¨Cç›˜é‡Œï¼Œå¦‚æœä¸‹æ¬¡å†è§£å‹è¿™ä¸ªåŒ…ï¼Œå®ƒä¼šå…ˆå»è¿™ä¸ªç¼“å­˜é‡Œæ‰¾ï¼Œæ²¡æœ‰çš„è¯æ‰ä¼šåŠ è½½ï¼Œæ‰€ä»¥ä¸æƒ³è®©å®ƒæœ‰ç¼“å­˜çš„è¯ï¼Œå°±ç”¨æœ¬åœ°è·¯å¾„åŠ è½½çš„æ–¹å¼ï¼Œä¸‹å›¾æ˜¯ç›®å½•ä½ç½®<br><img src="/img/blog/assetbunle/a1.png"></p>]]></content>
    
    
    <categories>
      
      <category>æ¸¸æˆå¼€å‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>C#</tag>
      
      <tag>Unity</tag>
      
      <tag>AssetBundle</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Unity AssetBundleåˆä½“éªŒ</title>
    <link href="/2018/03/22/Unity-AssetBundle/"/>
    <url>/2018/03/22/Unity-AssetBundle/</url>
    
    <content type="html"><![CDATA[<h3 id="åŠ è½½èµ„æºè„šæœ¬"><a href="#åŠ è½½èµ„æºè„šæœ¬" class="headerlink" title="åŠ è½½èµ„æºè„šæœ¬"></a>åŠ è½½èµ„æºè„šæœ¬</h3><div class="code-wrapper"><pre><code class="hljs c#">using System.Collections;using System.Collections.Generic;using UnityEngine;public class JIAZAI : MonoBehaviour&#123;    void Start()    &#123;       //ä»æœ¬åœ°åŠ è½½åŒ…é‡Œçš„object        AssetBundle ab = AssetBundle.LoadFromFile(&quot;AssetBundles/ca.assets&quot;);        Object[] objs = ab.LoadAllAssets();        //åŠ è½½æè´¨        AssetBundle m = AssetBundle.LoadFromFile(&quot;AssetBundles/cy.assets&quot;);        var material = m.LoadAllAssets();        foreach (Object item in objs)        &#123;            Instantiate(item);        &#125;    &#125;&#125;</code></pre></div><h3 id="æ‰“åŒ…èµ„æºè„šæœ¬ï¼ˆæŒ‚åœ¨ç›¸æœºæˆ–ä»»ä½•ç‰©ä½“ä¸Šï¼‰"><a href="#æ‰“åŒ…èµ„æºè„šæœ¬ï¼ˆæŒ‚åœ¨ç›¸æœºæˆ–ä»»ä½•ç‰©ä½“ä¸Šï¼‰" class="headerlink" title="æ‰“åŒ…èµ„æºè„šæœ¬ï¼ˆæŒ‚åœ¨ç›¸æœºæˆ–ä»»ä½•ç‰©ä½“ä¸Šï¼‰"></a>æ‰“åŒ…èµ„æºè„šæœ¬ï¼ˆæŒ‚åœ¨ç›¸æœºæˆ–ä»»ä½•ç‰©ä½“ä¸Šï¼‰</h3><div class="code-wrapper"><pre><code class="hljs c#">using System.Collections;using System.Collections.Generic;using System.IO;using UnityEditor;using UnityEngine;public class NewBehaviourScript : Editor &#123;    public class CreateAssetBundles    &#123;        [MenuItem(&quot;Assets/Build AssetBundles&quot;)]        static void BuildAllAssetBundles()        &#123;            //å®šä¹‰æ–‡ä»¶å¤¹åå­—            string dir = &quot;AssetBundles&quot;;            //æ–‡ä»¶å¤¹ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»º            if (!Directory.Exists(dir))            &#123;                Directory.CreateDirectory(dir);            &#125;            BuildPipeline.BuildAssetBundles(dir, BuildAssetBundleOptions.None, BuildTarget.StandaloneWindows64);        &#125;    &#125;&#125;</code></pre></div>]]></content>
    
    
    <categories>
      
      <category>æ¸¸æˆå¼€å‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>C#</tag>
      
      <tag>Unity</tag>
      
      <tag>AssetBundle</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Unityåæ ‡ç³»</title>
    <link href="/2018/03/07/Unity%E5%9D%90%E6%A0%87%E7%B3%BB/"/>
    <url>/2018/03/07/Unity%E5%9D%90%E6%A0%87%E7%B3%BB/</url>
    
    <content type="html"><![CDATA[<h3 id="å…³äºUnityçš„ä¸€äº›åæ ‡ç³»çš„çŸ¥è¯†ï¼š"><a href="#å…³äºUnityçš„ä¸€äº›åæ ‡ç³»çš„çŸ¥è¯†ï¼š" class="headerlink" title="å…³äºUnityçš„ä¸€äº›åæ ‡ç³»çš„çŸ¥è¯†ï¼š"></a>å…³äºUnityçš„ä¸€äº›åæ ‡ç³»çš„çŸ¥è¯†ï¼š</h3><h4 id="Unityæ˜¯å·¦æ‰‹åæ ‡ç³»"><a href="#Unityæ˜¯å·¦æ‰‹åæ ‡ç³»" class="headerlink" title="Unityæ˜¯å·¦æ‰‹åæ ‡ç³»"></a>Unityæ˜¯å·¦æ‰‹åæ ‡ç³»</h4><p>ä¸–ç•Œåæ ‡ç³»ï¼šæˆ‘ä»¬åœ¨åœºæ™¯ä¸­æ·»åŠ ç‰©ä½“ï¼ˆå¦‚ï¼šCubeï¼‰ï¼Œä»–ä»¬éƒ½æ˜¯ä»¥ä¸–ç•Œåæ ‡æ˜¾ç¤ºåœ¨åœºæ™¯ä¸­çš„ã€‚transform.positionå¯ä»¥è·å¾—è¯¥ä½ç½®åæ ‡ã€‚</p><p>å±å¹•åæ ‡ç³»ï¼šä»¥åƒç´ æ¥å®šä¹‰çš„ï¼Œä»¥å±å¹•çš„å·¦ä¸‹è§’ä¸ºï¼ˆ0ï¼Œ0ï¼‰ç‚¹ï¼Œå³ä¸Šè§’ä¸ºï¼ˆScreen.widthï¼ŒScreen.heightï¼‰ï¼ŒZçš„ä½ç½®æ˜¯ä»¥ç›¸æœºçš„ä¸–ç•Œå•ä½æ¥è¡¡é‡çš„ã€‚æ³¨ï¼šé¼ æ ‡ä½ç½®åæ ‡å±äºå±å¹•åæ ‡ï¼ŒInput.mousePositionå¯ä»¥è·å¾—è¯¥ä½ç½®åæ ‡ï¼Œæ‰‹æŒ‡è§¦æ‘¸å±å¹•ä¹Ÿä¸ºå±å¹•åæ ‡ï¼ŒInput.GetTouch(0).positionå¯ä»¥è·å¾—å•ä¸ªæ‰‹æŒ‡è§¦æ‘¸å±å¹•åæ ‡ã€‚</p><p>ç»˜åˆ¶GUIç•Œé¢çš„åæ ‡ç³»ï¼šè¿™ä¸ªåæ ‡ç³»ä¸å±å¹•åæ ‡ç³»ç›¸ä¼¼ï¼Œä¸åŒçš„æ˜¯è¯¥åæ ‡ç³»ä»¥å±å¹•çš„å·¦ä¸Šè§’ä¸ºï¼ˆ0ï¼Œ0ï¼‰ç‚¹ï¼Œå³ä¸‹è§’ä¸ºï¼ˆScreen.widthï¼ŒScreen.heightï¼‰ã€‚</p><p>è§†å£åæ ‡ç³»ï¼šè§†å£åæ ‡æ˜¯æ ‡å‡†çš„ ç›¸å¯¹äºç›¸æœºçš„ã€‚ç›¸æœºçš„å·¦ä¸‹è§’ä¸ºï¼ˆ0ï¼Œ0ï¼‰ç‚¹ï¼Œå³ä¸Šè§’ä¸ºï¼ˆ1ï¼Œ1ï¼‰ç‚¹ï¼ŒZçš„ä½ç½®æ˜¯ä»¥ç›¸æœºçš„ä¸–ç•Œå•ä½æ¥è¡¡é‡çš„ã€‚</p><p>ä¸–ç•Œåæ ‡â†’å±å¹•åæ ‡ï¼šcamera.WorldToScreenPoint(transform.position);è¿™æ ·å¯ä»¥å°†ä¸–ç•Œåæ ‡è½¬æ¢ä¸ºå±å¹•åæ ‡ã€‚å…¶ä¸­cameraä¸ºåœºæ™¯ä¸­çš„cameraå¯¹è±¡ã€‚</p><p>å±å¹•åæ ‡â†’è§†å£åæ ‡ï¼šcamera.ScreenToViewportPoint(Input.GetTouch(0).position);è¿™æ ·å¯ä»¥å°†å±å¹•åæ ‡è½¬æ¢ä¸ºè§†å£åæ ‡ã€‚å…¶ä¸­cameraä¸ºåœºæ™¯ä¸­çš„cameraå¯¹è±¡ã€‚</p><p>è§†å£åæ ‡â†’å±å¹•åæ ‡ï¼šcamera.ViewportToScreenPoint();</p><p>è§†å£åæ ‡â†’ä¸–ç•Œåæ ‡ï¼šcamera.ViewportToWorldPoint();</p>]]></content>
    
    
    <categories>
      
      <category>æ¸¸æˆå¼€å‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Unity</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>C#æ¥å£å’Œç±»çš„åŒºåˆ«</title>
    <link href="/2018/03/06/C-%E6%8E%A5%E5%8F%A3%E5%92%8C%E7%B1%BB%E7%9A%84%E5%8C%BA%E5%88%AB/"/>
    <url>/2018/03/06/C-%E6%8E%A5%E5%8F%A3%E5%92%8C%E7%B1%BB%E7%9A%84%E5%8C%BA%E5%88%AB/</url>
    
    <content type="html"><![CDATA[<h2 id="æ¥å£-amp-ç±»"><a href="#æ¥å£-amp-ç±»" class="headerlink" title="æ¥å£&amp;ç±»"></a>æ¥å£&amp;ç±»</h2><p>(1) æ¥å£ä¸èƒ½è¢«å®ä¾‹åŒ–<br>(2) æ¥å£åªèƒ½åŒ…å«æ–¹æ³•å£°æ˜<br>(3) æ¥å£çš„æˆå‘˜åŒ…æ‹¬æ–¹æ³•ã€å±æ€§ã€ç´¢å¼•å™¨ã€äº‹ä»¶<br>(4) æ¥å£ä¸­ä¸èƒ½åŒ…å«å¸¸é‡ã€å­—æ®µ(åŸŸ)ã€æ„é€ å‡½æ•°ã€ææ„å‡½æ•°ã€é™æ€æˆå‘˜<br>(5) æ¥å£ä¸­çš„æ‰€æœ‰æˆå‘˜é»˜è®¤ä¸ºpublicï¼Œå› æ­¤æ¥å£ä¸­ä¸èƒ½æœ‰privateä¿®é¥°ç¬¦<br>(6) æ´¾ç”Ÿç±»å¿…é¡»å®ç°æ¥å£çš„æ‰€æœ‰æˆå‘˜<br>(7) ä¸€ä¸ªç±»å¯ä»¥ç›´æ¥å®ç°å¤šä¸ªæ¥å£ï¼Œæ¥å£ä¹‹é—´ç”¨é€—å·éš”å¼€<br>(8) ä¸€ä¸ªæ¥å£å¯ä»¥æœ‰å¤šä¸ªçˆ¶æ¥å£ï¼Œå®ç°è¯¥æ¥å£çš„ç±»å¿…é¡»å®ç°æ‰€æœ‰çˆ¶æ¥å£ä¸­çš„æ‰€æœ‰æˆå‘˜</p><h2 id="æ¥å£å’ŒæŠ½è±¡ç±»çš„åŒºåˆ«ï¼š"><a href="#æ¥å£å’ŒæŠ½è±¡ç±»çš„åŒºåˆ«ï¼š" class="headerlink" title="æ¥å£å’ŒæŠ½è±¡ç±»çš„åŒºåˆ«ï¼š"></a>æ¥å£å’ŒæŠ½è±¡ç±»çš„åŒºåˆ«ï¼š</h2><p>ç›¸åŒç‚¹ï¼š<br>(1) éƒ½å¯ä»¥è¢«ç»§æ‰¿<br>(2) éƒ½ä¸èƒ½è¢«å®ä¾‹åŒ–<br>(3) éƒ½å¯ä»¥åŒ…å«æ–¹æ³•å£°æ˜<br>(4) æ´¾ç”Ÿç±»å¿…é¡»å®ç°æœªå®ç°çš„æ–¹æ³•</p><p>åŒº åˆ«ï¼š<br>(1) æŠ½è±¡åŸºç±»å¯ä»¥å®šä¹‰å­—æ®µã€å±æ€§ã€æ–¹æ³•å®ç°ã€‚æ¥å£åªèƒ½å®šä¹‰å±æ€§ã€ç´¢å¼•å™¨ã€äº‹ä»¶ã€å’Œæ–¹æ³•å£°æ˜ï¼Œä¸èƒ½åŒ…å«å­—æ®µã€‚<br>(2) æŠ½è±¡ç±»æ˜¯ä¸€ä¸ªä¸å®Œæ•´çš„ç±»ï¼Œéœ€è¦è¿›ä¸€æ­¥ç»†åŒ–ï¼Œè€Œæ¥å£æ˜¯ä¸€ä¸ªè¡Œä¸ºè§„èŒƒã€‚å¾®è½¯çš„è‡ªå®šä¹‰æ¥å£æ€»æ˜¯åå¸¦ableå­—æ®µï¼Œè¯æ˜å…¶æ˜¯è¡¨è¿°ä¸€ç±»â€œæˆ‘èƒ½åšã€‚ã€‚ã€‚â€<br>(3) æ¥å£å¯ä»¥è¢«å¤šé‡å®ç°ï¼ŒæŠ½è±¡ç±»åªèƒ½è¢«å•ä¸€ç»§æ‰¿<br>(4) æŠ½è±¡ç±»æ›´å¤šçš„æ˜¯å®šä¹‰åœ¨ä¸€ç³»åˆ—ç´§å¯†ç›¸å…³çš„ç±»é—´ï¼Œè€Œæ¥å£å¤§å¤šæ•°æ˜¯å…³ç³»ç–æ¾ä½†éƒ½å®ç°æŸä¸€åŠŸèƒ½çš„ç±»ä¸­<br>(5) æŠ½è±¡ç±»æ˜¯ä»ä¸€ç³»åˆ—ç›¸å…³å¯¹è±¡ä¸­æŠ½è±¡å‡ºæ¥çš„æ¦‚å¿µï¼Œ å› æ­¤åæ˜ çš„æ˜¯äº‹ç‰©çš„å†…éƒ¨å…±æ€§ï¼›æ¥å£æ˜¯ä¸ºäº†æ»¡è¶³å¤–éƒ¨è°ƒç”¨è€Œå®šä¹‰çš„ä¸€ä¸ªåŠŸèƒ½çº¦å®šï¼Œ å› æ­¤åæ˜ çš„æ˜¯äº‹ç‰©çš„å¤–éƒ¨ç‰¹æ€§<br>(6) æ¥å£åŸºæœ¬ä¸Šä¸å…·å¤‡ç»§æ‰¿çš„ä»»ä½•å…·ä½“ç‰¹ç‚¹,å®ƒä»…ä»…æ‰¿è¯ºäº†èƒ½å¤Ÿè°ƒç”¨çš„æ–¹æ³•<br>(7) æ¥å£å¯ä»¥ç”¨äºæ”¯æŒå›è°ƒ,è€Œç»§æ‰¿å¹¶ä¸å…·å¤‡è¿™ä¸ªç‰¹ç‚¹<br>(8) æŠ½è±¡ç±»å®ç°çš„å…·ä½“æ–¹æ³•é»˜è®¤ä¸ºè™šçš„ï¼Œä½†å®ç°æ¥å£çš„ç±»ä¸­çš„æ¥å£æ–¹æ³•å´é»˜è®¤ä¸ºéè™šçš„ï¼Œå½“ç„¶æ‚¨ä¹Ÿå¯ä»¥å£°æ˜ä¸ºè™šçš„<br>(9) å¦‚æœæŠ½è±¡ç±»å®ç°æ¥å£ï¼Œåˆ™å¯ä»¥æŠŠæ¥å£ä¸­æ–¹æ³•æ˜ å°„åˆ°æŠ½è±¡ç±»ä¸­ä½œä¸ºæŠ½è±¡æ–¹æ³•è€Œä¸å¿…å®ç°ï¼Œè€Œåœ¨æŠ½è±¡ç±»çš„å­ç±»ä¸­å®ç°æ¥å£ä¸­æ–¹æ³•</p><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><div class="code-wrapper"><pre><code class="hljs arduino"><span class="hljs-keyword">using</span> System;<span class="hljs-keyword">using</span> System.Collections.Generic;<span class="hljs-keyword">using</span> System.Linq;<span class="hljs-keyword">using</span> System.Text;<span class="hljs-keyword">namespace</span> InterfaceApplication&#123;    <span class="hljs-keyword">public</span> interface ITransactions    &#123;                <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">showTransaction</span><span class="hljs-params">()</span></span>;        <span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">getAmount</span><span class="hljs-params">()</span></span>;    &#125;    <span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Transaction</span> :</span> ITransactions    &#123;        <span class="hljs-keyword">private</span> string tCode;        <span class="hljs-keyword">private</span> string date;        <span class="hljs-keyword">private</span> <span class="hljs-keyword">double</span> amount;                       <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Transaction</span><span class="hljs-params">(string c, string d, <span class="hljs-keyword">double</span> a)</span></span><span class="hljs-function">        </span>&#123;            tCode = c;            date = d;            amount = a;        &#125;        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">double</span> <span class="hljs-title">getAmount</span><span class="hljs-params">()</span></span><span class="hljs-function">        </span>&#123;            <span class="hljs-keyword">return</span> amount;        &#125;        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">showTransaction</span><span class="hljs-params">()</span></span><span class="hljs-function">        </span>&#123;            <span class="hljs-built_in">Console</span>.<span class="hljs-built_in">WriteLine</span>(<span class="hljs-string">&quot;Transaction: &#123;0&#125;&quot;</span>, tCode);            <span class="hljs-built_in">Console</span>.<span class="hljs-built_in">WriteLine</span>(<span class="hljs-string">&quot;Date: &#123;0&#125;&quot;</span>, date);            <span class="hljs-built_in">Console</span>.<span class="hljs-built_in">WriteLine</span>(<span class="hljs-string">&quot;Amount: &#123;0&#125;&quot;</span>, <span class="hljs-built_in">getAmount</span>());        &#125;    &#125;    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Tester</span></span><span class="hljs-class">    &#123;</span>        <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span><span class="hljs-params">(string[] args)</span></span><span class="hljs-function">        </span>&#123;            Transaction t1 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Transaction</span>(<span class="hljs-string">&quot;001&quot;</span>, <span class="hljs-string">&quot;8/10/2012&quot;</span>, <span class="hljs-number">78900.00</span>);            Transaction t2 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Transaction</span>(<span class="hljs-string">&quot;002&quot;</span>, <span class="hljs-string">&quot;9/10/2012&quot;</span>, <span class="hljs-number">451900.00</span>);            t1.<span class="hljs-built_in">showTransaction</span>();            t2.<span class="hljs-built_in">showTransaction</span>();            <span class="hljs-built_in">Console</span>.<span class="hljs-built_in">ReadKey</span>();        &#125;    &#125;&#125;</code></pre></div>]]></content>
    
    
    <categories>
      
      <category>ç¼–ç¨‹è¯­è¨€</category>
      
    </categories>
    
    
    <tags>
      
      <tag>C#</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>C#åŒ¿åæ–¹æ³•çš„ä½¿ç”¨</title>
    <link href="/2018/03/06/C-%E5%8C%BF%E5%90%8D%E6%96%B9%E6%B3%95%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
    <url>/2018/03/06/C-%E5%8C%BF%E5%90%8D%E6%96%B9%E6%B3%95%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><div class="code-wrapper"><pre><code class="hljs c#">using System;delegate void NumberChanger(int n);namespace DelegateAppl&#123;    class TestDelegate    &#123;        static int num = 10;        public static void AddNum(int p)        &#123;            num += p;            Console.WriteLine(&quot;Named Method: &#123;0&#125;&quot;, num);        &#125;        public static void MultNum(int q)        &#123;            num *= q;            Console.WriteLine(&quot;Named Method: &#123;0&#125;&quot;, num);        &#125;               static void Main(string[] args)        &#123;            // ä½¿ç”¨åŒ¿åæ–¹æ³•åˆ›å»ºå§”æ‰˜å®ä¾‹            NumberChanger nc = delegate (int x)            &#123;                Console.WriteLine(&quot;Anonymous Method: &#123;0&#125;&quot;, x);            &#125;;            // ä½¿ç”¨åŒ¿åæ–¹æ³•è°ƒç”¨å§”æ‰˜            nc(10);            // ä½¿ç”¨å‘½åæ–¹æ³•å®ä¾‹åŒ–å§”æ‰˜            nc = new NumberChanger(AddNum);            // ä½¿ç”¨å‘½åæ–¹æ³•è°ƒç”¨å§”æ‰˜            nc(5);            // ä½¿ç”¨å¦ä¸€ä¸ªå‘½åæ–¹æ³•å®ä¾‹åŒ–å§”æ‰˜            nc = new NumberChanger(MultNum);            // ä½¿ç”¨å‘½åæ–¹æ³•è°ƒç”¨å§”æ‰˜            nc(2);            Console.ReadKey();        &#125;    &#125;&#125;</code></pre></div><p>å½“ä¸Šé¢çš„ä»£ç è¢«ç¼–è¯‘å’Œæ‰§è¡Œæ—¶ï¼Œå®ƒä¼šäº§ç”Ÿä¸‹åˆ—ç»“æœï¼š</p><p>Anonymous Method: 10<br>Named Method: 15<br>Named Method: 30</p>]]></content>
    
    
    <categories>
      
      <category>ç¼–ç¨‹è¯­è¨€</category>
      
    </categories>
    
    
    <tags>
      
      <tag>C#</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>C#ç½‘ç»œèŠå¤©å®¤</title>
    <link href="/2018/02/24/C-%E7%BD%91%E7%BB%9C%E8%81%8A%E5%A4%A9%E5%AE%A4/"/>
    <url>/2018/02/24/C-%E7%BD%91%E7%BB%9C%E8%81%8A%E5%A4%A9%E5%AE%A4/</url>
    
    <content type="html"><![CDATA[<h2 id="ç®€è¿°"><a href="#ç®€è¿°" class="headerlink" title="ç®€è¿°"></a>ç®€è¿°</h2><p>ä½¿ç”¨VSæ§åˆ¶å°åº”ç”¨ï¼Œå¼€å‘C#ç½‘ç»œé€šä¿¡ä»£ç ã€‚æ¨¡æ‹ŸèŠå¤©å®¤ã€‚</p><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><h4 id="é¦–å…ˆåˆ›å»ºä¸€ä¸ªServerControllerçš„è§£å†³æ–¹æ¡ˆï¼Œä½¿ç”¨ä¸€ä¸‹è„šæœ¬ï¼šæœåŠ¡å™¨ç«¯è„šæœ¬ï¼ŒServerTest"><a href="#é¦–å…ˆåˆ›å»ºä¸€ä¸ªServerControllerçš„è§£å†³æ–¹æ¡ˆï¼Œä½¿ç”¨ä¸€ä¸‹è„šæœ¬ï¼šæœåŠ¡å™¨ç«¯è„šæœ¬ï¼ŒServerTest" class="headerlink" title="é¦–å…ˆåˆ›å»ºä¸€ä¸ªServerControllerçš„è§£å†³æ–¹æ¡ˆï¼Œä½¿ç”¨ä¸€ä¸‹è„šæœ¬ï¼šæœåŠ¡å™¨ç«¯è„šæœ¬ï¼ŒServerTest"></a>é¦–å…ˆåˆ›å»ºä¸€ä¸ªServerControllerçš„è§£å†³æ–¹æ¡ˆï¼Œä½¿ç”¨ä¸€ä¸‹è„šæœ¬ï¼šæœåŠ¡å™¨ç«¯è„šæœ¬ï¼ŒServerTest</h4><div class="code-wrapper"><pre><code class="hljs c#">using System;using System.Collections.Generic;using System.Net;using System.Net.Sockets;using System.Text;using System.Threading;namespace ServerControler&#123;    public class ServerTest    &#123;        List&lt;Socket&gt; clientList;//å®¢æˆ·ç«¯é›†åˆ        Socket socket;        string ip = &quot;127.0.0.1&quot;;        int port = 12345;        /// &lt;summary&gt;        /// æ„é€ å‡½æ•°        /// &lt;/summary&gt;        public ServerTest()        &#123;            socket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);            clientList = new List&lt;Socket&gt;();//åœ¨æ„é€ å‡½æ•°ä¸­åˆå§‹åŒ–å®¢æˆ·ç«¯çš„é›†åˆ        &#125;        public void StartServer()        &#123;            IPEndPoint endPoint = new IPEndPoint(IPAddress.Parse(ip), port);//æŠŠIPå’Œç«¯å£ç»„åˆæˆIPEndPointçš„ç»“æ„            socket.Bind(endPoint);//ç»‘å®šIPå’Œç«¯å£            socket.Listen(10);//è®¾ç½®ç›‘å¬            Thread therd = new Thread(Accept);//å¼€å¯æ–°çº¿ç¨‹            therd.IsBackground = true;            therd.Start();            Console.WriteLine(&quot;æœåŠ¡å™¨å¯åŠ¨æˆåŠŸ&quot;);        &#125;        /// &lt;summary&gt;        /// æ¥æ”¶å®¢æˆ·ç«¯çš„æ–¹æ³•ï¼Œä¼šæŒ‚èµ·å½“å‰çº¿ç¨‹        /// &lt;/summary&gt;        void Accept()        &#123;            Socket client = socket.Accept();//è®¾ç½®è¿æ¥            IPEndPoint point = client.RemoteEndPoint as IPEndPoint;            Console.WriteLine(point.Address + &quot;[&quot; + point.Port + &quot;]è¿æ¥æˆåŠŸ&quot;);            clientList.Add(client);//è¿æ¥è¿›æ¥ä¸€ä¸ªå®¢æˆ·ç«¯å°±æ·»åŠ åˆ°é›†åˆé‡Œ,ç„¶ååœ¨ä¸‹é¢éå†å“ªä¸ªå®¢æˆ·ç«¯å‘çš„æ¶ˆæ¯ï¼Œå†æŠŠæ¶ˆæ¯åˆ†åˆ«å‘åˆ°å…¶ä»–å®¢æˆ·ç«¯            //ä¼šæŒ‚èµ·å½“å‰çº¿ç¨‹ï¼Œæ‰€ä»¥æ–°å¼€ä¸€ä¸ªçº¿ç¨‹            Thread thread = new Thread(Receive);            thread.IsBackground = true;            thread.Start(client);            Accept();//å°¾é€’å½’        &#125;        /// &lt;summary&gt;        /// æœåŠ¡å™¨æ¥æ”¶å®¢æˆ·ç«¯çš„æ¶ˆæ¯        /// &lt;/summary&gt;        /// &lt;param name=&quot;obj&quot;&gt;çº¿ç¨‹çš„å‚æ•°ç±»å‹åªèƒ½æ˜¯Objectç±»å‹&lt;/param&gt;        void Receive(object obj)//çº¿ç¨‹çš„å‚æ•°ç±»å‹åªèƒ½æ˜¯Objectç±»å‹        &#123;            Socket client = obj as Socket;//æŠŠObjectå¼ºåˆ¶è½¬æ¢æˆSocket            IPEndPoint point = client.RemoteEndPoint as IPEndPoint;            try            &#123;                byte[] msg = new byte[1024];                int msgLenth = client.Receive(msg);                string clientMsg = point.Address + &quot;[&quot; + point.Port + &quot;] è¯´: &quot; + Encoding.UTF8.GetString(msg, 0, msgLenth);//è·å¾—å“ªä¸ªå®¢æˆ·ç«¯å‘è¿‡æ¥çš„æ¶ˆæ¯ï¼Œè¿›è¡Œè¾“å‡º                Console.WriteLine(clientMsg);                GuangBo(client, clientMsg);//è°ƒç”¨å¹¿æ’­è¿™ä¸ªæ–¹æ³•ï¼Œåˆ†å‘ç»™å…¶ä»–å®¢æˆ·ç«¯ï¼Œæœ‰äººè¯´è¯äº†                //client.Send(Encoding.UTF8.GetBytes(Encoding.UTF8.GetString(msg, 0, msgLenth)+&quot; (è¿™æ˜¯æœåŠ¡å™¨è¿”å›çš„æ¶ˆæ¯)&quot;));//æœåŠ¡å™¨å¾€å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯                Receive(client);//å°¾é€’å½’è¿›è¡Œç­‰å¾…ä¸‹ä¸€ä¸ªæ¶ˆæ¯            &#125;            catch            &#123;                Console.WriteLine(point.Address + &quot;[&quot; + point.Port + &quot;] : &quot; + &quot;æ–­å¼€è¿æ¥&quot;);                clientList.Remove(client);//å¦‚æœæŸä¸ªå®¢æˆ·ç«¯é€€å‡ºé“¾æ¥ï¼Œå°±ä»é›†åˆé‡Œç§»é™¤            &#125;        &#125;        /// &lt;summary&gt;        /// éå†å“ªä¸ªå®¢æˆ·ç«¯å‘çš„æ¶ˆæ¯ï¼Œç„¶åæŠŠæ¶ˆæ¯å‘å…¶ä»–å®¢æˆ·ç«¯å¹¿æ’­å‡ºå»ï¼Œå½¢æˆèŠå¤©å®¤        /// &lt;/summary&gt;        /// &lt;param name=&quot;client&quot;&gt;å‘æ¶ˆæ¯è¿›æ¥çš„å®¢æˆ·ç«¯&lt;/param&gt;        /// &lt;param name=&quot;msg&quot;&gt;æŸä¸ªå®¢æˆ·ç«¯å‘è¿‡æ¥çš„æ¶ˆæ¯&lt;/param&gt;        private void GuangBo(Socket clientOther, string msg)        &#123;            foreach (var client in clientList)            &#123;                if (client == clientOther)                &#123;                    //æ¶ˆæ¯æ˜¯ç”±è¿™ä¸ªå®¢æˆ·ç«¯å‘è¿‡æ¥çš„ï¼Œä¸éœ€è¦æœ‰ä»»ä½•å“åº”                &#125;                else                &#123;                    client.Send(Encoding.UTF8.GetBytes(msg));//æ‰§è¡ŒSendæ–¹æ³•ï¼ŒæŠŠæ¶ˆæ¯åˆ†å‘ç»™å…¶ä»–å®¢æˆ·ç«¯                &#125;            &#125;        &#125;    &#125;&#125;</code></pre></div><h4 id="æœåŠ¡å™¨ç«¯ä¸»å‡½æ•°è„šæœ¬ï¼ŒProgram"><a href="#æœåŠ¡å™¨ç«¯ä¸»å‡½æ•°è„šæœ¬ï¼ŒProgram" class="headerlink" title="æœåŠ¡å™¨ç«¯ä¸»å‡½æ•°è„šæœ¬ï¼ŒProgram"></a>æœåŠ¡å™¨ç«¯ä¸»å‡½æ•°è„šæœ¬ï¼ŒProgram</h4><div class="code-wrapper"><pre><code class="hljs c#">using System;namespace ServerControler&#123;    class Program    &#123;        static void Main(string[] args)        &#123;            ServerTest server = new ServerTest();            server.StartServer();//æ‰§è¡ŒStartServeræ–¹æ³•ï¼Œå¼€å¯æœåŠ¡å™¨            Console.ReadKey();        &#125;    &#125;&#125;</code></pre></div><h4 id="å†åˆ›å»ºä¸€ä¸ªClientControllerçš„è§£å†³æ–¹æ¡ˆï¼Œä½¿ç”¨ä¸€ä¸‹è„šæœ¬ï¼š"><a href="#å†åˆ›å»ºä¸€ä¸ªClientControllerçš„è§£å†³æ–¹æ¡ˆï¼Œä½¿ç”¨ä¸€ä¸‹è„šæœ¬ï¼š" class="headerlink" title="å†åˆ›å»ºä¸€ä¸ªClientControllerçš„è§£å†³æ–¹æ¡ˆï¼Œä½¿ç”¨ä¸€ä¸‹è„šæœ¬ï¼š"></a>å†åˆ›å»ºä¸€ä¸ªClientControllerçš„è§£å†³æ–¹æ¡ˆï¼Œä½¿ç”¨ä¸€ä¸‹è„šæœ¬ï¼š</h4><p>å®¢æˆ·ç«¯è„šæœ¬ï¼ŒClient</p><div class="code-wrapper"><pre><code class="hljs c#">using System;using System.Collections.Generic;usingSystem.Net.Sockets;using System.Text;using System.Threading;namespace ClientController&#123;    public class Client    &#123;        private Socket ClientSocket;        public Client()        &#123;            ClientSocket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);        &#125;        public void Connect(string ip, int port)        &#123;            ClientSocket.Connect(ip, port);            Console.WriteLine(&quot;è¿æ¥ä¸ŠæœåŠ¡å™¨&quot;);            Thread thread = new Thread(Receive);            thread.IsBackground = true;            thread.Start();        &#125;        void Receive()        &#123;            while (true)            &#123;                try                &#123;                    byte[] msg = new byte[1024];                    int msgLenth = ClientSocket.Receive(msg);//ClientSocket.Receiveæ¥æ”¶æ¶ˆæ¯ï¼Œè¿”å›æ¥å—åˆ°å¾—é•¿åº¦                    Console.WriteLine(Encoding.UTF8.GetString(msg, 0, msgLenth));                &#125;                catch                &#123;                    Console.WriteLine(&quot;æœåŠ¡å™¨æ‹’ç»è¿æ¥ï¼Œè¯·é‡æ–°å°è¯•&quot;);                    break;                &#125;            &#125;        &#125;        public void Send()        &#123;            Thread thread = new Thread(ReadAndSend);            //thread.IsBackground = true;//æ­¤å¤„æ•™ç¨‹è§†é¢‘é‡Œæ³¨æ‰äº†ï¼Œè¯´æ˜¯å› ä¸ºåœ¨ä¸»å‡½æ•°é‡Œå†™äº†Console.ReadKey()ï¼Œä¸»çº¿ç¨‹ä¼šæŠŠè¿™ä¸ªçº¿ç¨‹ç»™å…³æ‰ï¼Œæ³¨æ‰ä¹‹åå°±ä¸ä¼šå½±å“è¿™ä¸ªçº¿ç¨‹,ä¸ªäººæµ‹è¯•ä¸‹æ¥ï¼Œä¸å‘å¸ƒè¿˜æ˜¯æ²¡é—®é¢˜çš„ï¼Œä½†æ˜¯å‘å¸ƒè¿™ä¸ªç¨‹åºä¹‹åï¼Œä¼šå‘é€ä¸äº†æ¶ˆæ¯ï¼Œç›´æ¥é€€å‡ºï¼Œæ‰€ä»¥è¿˜æ˜¯æ³¨æ‰            thread.Start();//å¼€å¯çº¿ç¨‹        &#125;        void ReadAndSend()        &#123;            Console.WriteLine(&quot;è¯·è¾“å…¥è¦å‘é€çš„å†…å®¹ï¼Œä¸è¾“å…¥ç›´æ¥æŒ‰ä¸‹Enteråˆ™é€€å‡º&quot;);            string msg = Console.ReadLine();//è·å–è¾“å…¥çš„å†…å®¹            while (msg != &quot;&quot;)            &#123;                ClientSocket.Send(Encoding.UTF8.GetBytes(msg));//å‘æœåŠ¡å™¨å‘é€æ¶ˆæ¯                msg = Console.ReadLine();            &#125;        &#125;    &#125;&#125;</code></pre></div><p>å®¢æˆ·ç«¯ç«¯ä¸»å‡½æ•°è„šæœ¬ï¼ŒProgram</p><div class="code-wrapper"><pre><code class="hljs c#">using System;namespace ClientController&#123;    class Program    &#123;        static void Main(string[] args)        &#123;            Client client = new Client();            client.Connect(&quot;127.0.0.1&quot;, 12345);            client.Send();//æ‰§è¡ŒSendæ–¹æ³•ï¼Œå¯åŠ¨çº¿ç¨‹å‘é€æ¶ˆæ¯            Console.ReadKey();        &#125;    &#125;&#125;</code></pre></div>]]></content>
    
    
    <categories>
      
      <category>ç¼–ç¨‹è¯­è¨€</category>
      
    </categories>
    
    
    <tags>
      
      <tag>C#</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>C#ç»“æ„ä½“å’Œç±»çš„åŒºåˆ«</title>
    <link href="/2017/11/08/C-%E7%BB%93%E6%9E%84%E4%BD%93%E5%92%8C%E7%B1%BB%E7%9A%84%E5%8C%BA%E5%88%AB/"/>
    <url>/2017/11/08/C-%E7%BB%93%E6%9E%84%E4%BD%93%E5%92%8C%E7%B1%BB%E7%9A%84%E5%8C%BA%E5%88%AB/</url>
    
    <content type="html"><![CDATA[<h3 id="ç¬”è®°1"><a href="#ç¬”è®°1" class="headerlink" title="ç¬”è®°1"></a>ç¬”è®°1</h3><p>1ï¼Œç»“æ„æ˜¯å®å€¼ç±»å‹ï¼ˆValue Typesï¼‰ï¼Œè€Œç±»åˆ™æ˜¯å¼•ç”¨ç±»å‹ï¼ˆReference Typesï¼‰ã€‚</p><p>2ï¼Œç»“æ„ä½¿ç”¨æ ˆå­˜å‚¨ï¼ˆStack Allocationï¼‰ï¼Œè€Œç±»ä½¿ç”¨å †å­˜å‚¨ï¼ˆHeap Allocationï¼‰ã€‚</p><p>3ï¼Œæ‰€æœ‰ç»“æ„æˆå‘˜é»˜è®¤éƒ½æ˜¯Publicï¼Œè€Œç±»çš„å˜é‡å’Œå¸¸é‡æ•°åˆ™é»˜è®¤ä½Privateï¼Œä¸è¿‡å…¶ä»–ç±»æˆå‘˜é»˜è®¤éƒ½æ˜¯Publicã€‚</p><p>4ï¼Œç»“æ„æˆå‘˜ä¸èƒ½è¢«å£°æ˜ä½Protectedï¼Œè€Œç±»æˆå‘˜å¯ä»¥ã€‚</p><p>5ï¼Œç»“æ„å˜é‡å£°æ˜ä¸èƒ½æŒ‡å®šåˆå§‹å€¼ã€ä½¿ç”¨Newå…³é”®å­—è´§å¯¹æ•°ç»„è¿›è¡Œåˆå§‹åŒ–ï¼Œä½†æ˜¯ç±»å˜é‡å£°æ˜å¯ä»¥ã€‚</p><p>6ï¼Œç»“æ„ä¸èƒ½å£°æ˜é»˜è®¤çš„æ„é€ å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯ä¸æ‹¥æœ‰å‚æ•°çš„éå…±äº«æ„é€ å‡½æ•°ï¼Œä½†æ˜¯ç±»åˆ™æ— æ­¤é™åˆ¶ã€‚</p><p>7ï¼ŒäºŒè€…éƒ½å¯ä»¥æ‹¥æœ‰å…±äº«æ„é€ å‡½æ•°ï¼Œç»“æ„çš„å…±äº«æ„é€ å‡½æ•°ä¸èƒ½å¸¦æœ‰å‚æ•°ï¼Œä½†æ˜¯ç±»çš„å…±äº«æ„é€ å‡½æ•°åˆ™å¯ä»¥å¸¦æˆ–è€…ä¸å¸¦å‚æ•°ã€‚</p><p>8ï¼Œç»“æ„ä¸å…è®¸å£°æ˜ææ„å‡½æ•°ï¼ˆDestructorï¼‰ï¼Œç±»åˆ™æ— æ­¤é™åˆ¶ã€‚</p><p>9ï¼Œç»“æ„çš„å®ä¾‹ï¼ˆInstanceï¼‰å£°æ˜ï¼Œä¸å…è®¸å¯¹åŒ…å«çš„å˜é‡è¿›è¡Œåˆå§‹åŒ–è®¾å®šï¼Œç±»åˆ™å¯ä»¥åœ¨å£°æ˜ç±»çš„å®ä¾‹æ—¶ï¼ŒåŒæ—¶è¿›è¡Œå˜é‡åˆå§‹åŒ–ã€‚</p><p>10ï¼Œç»“æ„æ˜¯éšå¼ç»§æ‰¿è‡ªValueTypeç±»ï¼Œè€Œä¸”ä¸èƒ½ç»§æ‰¿ä»»ä½•å…¶ä»–ç±»å‹ï¼Œç±»åˆ™å¯ä»¥ç»§ç»­è‡ªValueTypeä»¥å¤–çš„ä»»ä½•ç±»ã€‚</p><p>11ï¼Œç»“æ„æ˜¯æ— æ³•è¢«ç»§æ‰¿çš„ï¼Œç±»åˆ™å¯ä»¥ã€‚</p><p>12ï¼Œç»“æ„æ°¸è¿œä¸ä¼šç»ˆæ­¢ï¼Œå› æ­¤CLRä¸ä¼šåœ¨ä»»ä½•ç»“æ„ä¸Šè°ƒç”¨Finalizeæ–¹æ³•ã€‚ç±»åˆ™æ˜¯ç”±å†…å­˜å›æ”¶è¿›ç¨‹åŠ ä»¥ç»ˆæ­¢ï¼Œå½“å†…å­˜å›æ”¶è¿›ç¨‹æ£€æµ‹åˆ°æ²¡æœ‰ä»»ä½•ä½œç”¨çš„ç±»æ—¶ï¼Œå®ƒå°±ä¼šè°ƒç”¨ç±»çš„Finalizeæ–¹æ³•ã€‚</p><p>13ï¼Œç»“æ„ä¸éœ€è¦æ„é€ å‡½æ•°ï¼Œç±»åˆ™éœ€è¦æ„é€ å‡½æ•°ã€‚</p><p>14ï¼Œç»“æ„åªèƒ½åœ¨ä¸€ç§æƒ…å†µä¸‹ä½¿ç”¨éå…±äº«æ„é€ å‡½æ•°ï¼Œé‚£å°±æ˜¯éå…±äº«æ„é€ å‡½æ•°ä¼šæ¥å—å‚æ•°ã€‚ä½†æ˜¯ç±»åˆ™æ— æ­¤é™åˆ¶ï¼Œå®ƒå¯ä»¥ä½¿ç”¨å¸¦å‚æ•°æˆ–ä¸å¸¦å‚æ•°çš„éå…±äº«æ„é€ å‡½æ•°ã€‚</p><p>14ï¼Œæ¯ä¸€ä¸ªç»“æ„éƒ½å…·æœ‰æ— å‚æ•°çš„éšå«å…¬å…±æ„é€ å‡½æ•°ï¼Œæ­¤æ„é€ å‡½æ•°ä¼šå°†ç»“æ„çš„æ‰€æœ‰æˆå‘˜åˆå§‹åŒ–ä¸ºå…¶é»˜è®¤å€¼ã€‚ä¸éœ€è¦é‡æ–°å®šä¹‰è¿™ä¸ªè¡Œä¸ºã€‚</p><p>åœ¨â€œå®ä¾‹å’Œå˜é‡â€å±‚é¢ä¸Šï¼Œç”±äºç»“æ„æ˜¯æ•°å€¼ç±»å‹çš„ï¼Œå› æ­¤æ¯ä¸€ä¸ªç»“æ„å˜é‡ä¼šæ°¸è¿œçš„ç»‘å®šåˆ°ç»“æ„å®ä¾‹ä¸Šã€‚ç„¶è€Œç±»æ˜¯å¼•ç”¨ç±»å‹çš„ï¼Œè€Œä¸”å¯¹è±¡å˜é‡å¯å¼•ç”¨ä¸åŒçš„ç±»å®ä¾‹ï¼Œåœ¨æ­¤æ–¹é¢çš„åŒºåˆ«ï¼Œä¼šå¯¹ä½¿ç”¨å°†ç»“æ„å’Œç±»é€ æˆå¦‚ä¸‹çš„å½±å“ï¼š</p><p>15ï¼Œç»“æ„å˜é‡ä¼šéšå¼çš„ä½¿ç”¨ç»“æ„çš„æ— å‚æ•°æ„é€ å‡½æ•°æ¥åˆå§‹åŒ–æˆå‘˜ï¼Œè¿™å°±æ„å‘³è¯­å¥ Struct S = new Structï¼ˆï¼‰ã€‚</p><p>16ï¼Œå½“æ‚¨å°†ä¸€ä¸ªç»“æ„å˜é‡èµ‹å€¼ç»™å¦ä¸€ä¸ªï¼Œæˆ–è€…å°†ç»“æ„å®ä¾‹ä¼ é€’åˆ°ç¨‹åºå˜é‡æ—¶ï¼Œæ‰€æœ‰å˜é‡æˆå‘˜çš„å€¼ä¼šå¤åˆ¶åˆ°æ–°çš„ç»“æ„ä¸­ã€‚å½“æ‚¨å°†ä¸€ä¸ªå¯¹è±¡å˜é‡èµ‹å€¼ç»™å¦ä¸€ä¸ªï¼Œæˆ–è€…å°†å¯¹è±¡å˜é‡ä¼ é€’ç»™ç¨‹åºæ—¶ï¼Œåˆ™åªæ˜¯å¤åˆ¶æŒ‡é’ˆã€‚</p><p>17ï¼Œæ‚¨å¯ä»¥å°†Nullå€¼èµ‹å€¼ç»™ç»“æ„å˜é‡ï¼Œä½†æ˜¯è¯¥å®ä¾‹ä¼šä¸€ç›´ä¸è¯¥å˜é‡ä¿æŒå…³è”ã€‚è™½ç„¶å˜é‡æˆå‘˜ä¼šå› æ­¤èµ‹å€¼è€Œé‡æ–°åˆå§‹åŒ–ï¼Œä½†æ˜¯æ‚¨è¿˜æ˜¯å¯ä»¥è°ƒç”¨å˜é‡çš„æ–¹æ³•å¹¶è®¿é—®å…¶æ•°æ®æˆå‘˜ã€‚ç›¸åçš„ï¼Œå¦‚æœæ‚¨å°†å¯¹è±¡å˜é‡è®¾å®šä¸ºNullï¼Œæ‚¨å°±ä¼šä¸­æ–­å®ƒä¸ä»»ä½•ç±»å‹å®ä¾‹çš„å…³è”ï¼Œè€Œä¸”é™¤éæ‚¨å†å°†å¦ä¸€ä¸ªå®ä¾‹èµ‹å€¼ç»™å®ƒï¼Œå¦åˆ™æ— æ³•é€šè¿‡å˜é‡è®¿é—®ä»»ä½•æˆå‘˜ã€‚</p><p>18ï¼Œæ‚¨å¯ä»¥åœ¨ä¸åŒæ—¶é—´å°†ä¸åŒçš„ç±»çš„å®ä¾‹èµ‹å€¼ç»™åŒä¸€ä¸ªå¯¹è±¡å˜é‡ï¼Œè€Œä¸”åœ¨åŒä¸€æ—¶é—´å¯æœ‰å¥½å‡ ä¸ªå¯¹è±¡å˜é‡å¼•ç”¨ç›¸åŒçš„ç±»å®ä¾‹ï¼Œå¦‚æœæ‚¨å¯¹ç±»æˆå‘˜å€¼åšäº†æ”¹å˜ï¼Œåˆ™å…¶ä»–æŒ‡å‘ç›¸åŒå®ä¾‹çš„å¯¹è±¡å˜é‡ä¹Ÿä¼šå‘ç”Ÿæ”¹å˜ã€‚ç„¶è€Œï¼Œç»“æ„æˆå‘˜åˆ™ä¼šå°è£…åœ¨ä»–ä»¬è‡ªå·±çš„å®ä¾‹ä¸­ï¼Œå˜æ›´ç»“æ„æˆå‘˜å€¼å¹¶ä¸ä¼šå¯¹å…¶ä»–ä»»ä½•ç»“æ„å˜é‡çš„æˆå‘˜é€ æˆå½±å“ï¼Œç”šè‡³ä¹Ÿä¸ä¼šå½±å“ç›¸åŒç»“æ„å£°æ˜çš„å…¶ä»–å®ä¾‹ã€‚</p><p>19ï¼Œä¸¤ä¸ªç»“æ„å¿…é¡»ä»¥æˆå‘˜å¯¹æˆå‘˜çš„æ¯”è¾ƒæ–¹å¼æ¥æ‰§è¡Œç›¸ç­‰æ¯”è¾ƒã€‚ä¸¤ä¸ªå¯¹è±¡å˜é‡å¯ä»¥ä½¿ç”¨Equalsæ–¹æ³•æ¥åŠ ä»¥æ¯”è¾ƒã€‚Equalsä¼šåˆ¤æ–­ä¸¤ä¸ªå˜é‡æ˜¯å¦æŒ‡å‘ç›¸åŒçš„å®ä¾‹ã€‚</p><h3 id="ç¬”è®°2"><a href="#ç¬”è®°2" class="headerlink" title="ç¬”è®°2"></a>ç¬”è®°2</h3><p>1ï¼Œç»“æ„ä½“æ˜¯ä¸€ç§å€¼ç±»å‹ï¼Œè€Œç±»æ˜¯å¼•ç”¨ç±»å‹ã€‚å€¼ç±»å‹ç”¨äºå­˜å‚¨æ•°æ®çš„å€¼ï¼Œå¼•ç”¨ç±»å‹ç”¨äºå­˜å‚¨å¯¹å®é™…æ•°æ®çš„å¼•ç”¨ã€‚é‚£ä¹ˆç»“æ„ä½“å°±æ˜¯å½“æˆå€¼æ¥ä½¿ç”¨çš„ï¼Œç±»åˆ™é€šè¿‡å¼•ç”¨æ¥å¯¹å®é™…æ•°æ®æ“ä½œã€‚<br>2ï¼Œç»“æ„ä½“çš„å®šä¹‰æ˜¯ï¼šæœ‰äº›æ•°æ®æ—¢æ˜¯ç›¸äº’å…³è”çš„ï¼Œåˆå…±åŒæè¿°ä¸€ä¸ªå®Œæ•´äº‹ç‰©ï¼Œå¦‚ï¼šä¸€ä¸ªå­¦ç”Ÿçš„æ•´ä½“ä¿¡æ¯ï¼Œå­¦å·ã€å§“åã€æ€§åˆ«ç­‰ã€‚è€Œç±»åˆ™ä½¿ç”¨åœ¨éœ€è¦æ¯”è¾ƒæœ‰å±‚æ¬¡çš„æ•°æ®ä¸Šé¢ã€‚<br>3ï¼Œç±»æ˜¯åæ˜ ç°å®äº‹ç‰©çš„ä¸€ç§æŠ½è±¡ï¼Œè€Œç»“æ„ä½“çš„ä½œç”¨åªæ˜¯ä¸€ç§åŒ…å«äº†å…·ä½“ä¸åŒç±»åˆ«æ•°æ®çš„ä¸€ç§åŒ…è£…ï¼Œç»“æ„ä½“ä¸å…·å¤‡ç±»çš„ç»§æ‰¿å¤šæ€ç‰¹æ€§<br>4ï¼Œæ„é€ å‡½æ•°æ˜¯ä¸ºäº†åˆå§‹åŒ–ç±»çš„å­—æ®µè€Œå­˜åœ¨çš„ï¼Œè€Œç»“æ„ä½“å¹¶ä¸éœ€è¦åˆå§‹åŒ–å°±èƒ½ä½¿ç”¨ï¼Œå› æ­¤ï¼Œç»“æ„ä½“ä¸­å¹¶ä¸å­˜åœ¨é»˜è®¤çš„æ„é€ å‡½æ•°ã€‚</p><p>ç»“æ„ï¼š</p><div class="code-wrapper"><pre><code class="hljs csharp">æ²¡æœ‰é»˜è®¤çš„æ„é€ å‡½æ•°ï¼Œä½†æ˜¯å¯ä»¥æ·»åŠ æ„é€ å‡½æ•°æ²¡æœ‰ææ„å‡½æ•°æ²¡æœ‰ <span class="hljs-keyword">abstract</span> å’Œ <span class="hljs-keyword">sealed</span>(å› ä¸ºä¸èƒ½ç»§æ‰¿)ä¸èƒ½æœ‰<span class="hljs-keyword">protected</span> ä¿®é¥°ç¬¦å¯ä»¥ä¸ä½¿ç”¨<span class="hljs-keyword">new</span> åˆå§‹åŒ–åœ¨ç»“æ„ä¸­åˆå§‹åŒ–å®ä¾‹å­—æ®µæ˜¯é”™è¯¯çš„</code></pre></div><p>ç±»ï¼š </p><div class="code-wrapper"><pre><code class="hljs csharp">æœ‰é»˜è®¤çš„æ„é€ å‡½æ•°æœ‰ææ„å‡½æ•°å¯ä»¥ä½¿ç”¨ <span class="hljs-keyword">abstract</span> å’Œ <span class="hljs-keyword">sealed</span> æœ‰<span class="hljs-keyword">protected</span> ä¿®é¥°ç¬¦å¿…é¡»ä½¿ç”¨<span class="hljs-keyword">new</span> åˆå§‹åŒ–</code></pre></div>]]></content>
    
    
    <categories>
      
      <category>ç¼–ç¨‹è¯­è¨€</category>
      
    </categories>
    
    
    <tags>
      
      <tag>C#</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>UnityæŠ€èƒ½å†·å´åŠŸèƒ½</title>
    <link href="/2017/11/05/Unity%E6%8A%80%E8%83%BD%E5%86%B7%E5%8D%B4%E5%8A%9F%E8%83%BD/"/>
    <url>/2017/11/05/Unity%E6%8A%80%E8%83%BD%E5%86%B7%E5%8D%B4%E5%8A%9F%E8%83%BD/</url>
    
    <content type="html"><![CDATA[<h3 id="ä»£ç ï¼š"><a href="#ä»£ç ï¼š" class="headerlink" title="ä»£ç ï¼š"></a>ä»£ç ï¼š</h3><div class="code-wrapper"><pre><code class="hljs c#">// æŠ€èƒ½çš„å›¾æ ‡  public Image icon;  //é€šè¿‡Textæ˜¾ç¤ºæ—¶é—´  public Text txt;  float aTxt;  bool Dtime = false;  // æŠ€èƒ½çš„å†·å´æ—¶é—´  public float coolDown;  // æŠ€èƒ½åç§°ï¼Œç”¨äºåŒºåˆ†ä½¿ç”¨äº†å“ªä¸ªæŠ€èƒ½çš„  //public string skillName;  // ä¿å­˜å½“å‰æŠ€èƒ½çš„å†·å´æ—¶é—´  private float currentCoolDown;  // æŠ€èƒ½çš„æŒ‰é’®  private Button skillButton;   void Start()  &#123;      // è·å¾—æŠ€èƒ½æŒ‰é’®ï¼Œç„¶åç»‘å®šç‚¹å‡»äº‹ä»¶      this.skillButton = this.GetComponent&lt;Button&gt;();      skillButton.onClick.AddListener(UseSkill);      // ä¸€å¼€å§‹å†·å´æ—¶æ»¡çš„ï¼Œå¯ä»¥ç«‹å³ä½¿ç”¨æŠ€èƒ½      // å¦‚æœä¸æƒ³è®©ç©å®¶ä¸€å¼€å§‹èƒ½ç«‹å³ä½¿ç”¨æŠ€èƒ½ï¼Œè¿™é‡Œè®¾ç½®æˆåˆ«çš„å°äºæŠ€èƒ½å†·å´çš„å€¼      currentCoolDown = coolDown;  &#125;  void Update()  &#123;      if (currentCoolDown &lt; coolDown )      &#123;          //æ›´æ–°å†·å´         currentCoolDown += Time.deltaTime;                  //æ˜¾ç¤ºå†·å´è¿‡ç¨‹          this.icon.fillAmount = currentCoolDown / coolDown;                  Dtime = true;      &#125;      if (Dtime )      &#123;          //æ˜¾ç¤ºæŠ€èƒ½æ—¶é—´          aTxt -= Time.deltaTime;          txt.text = Math.Round(aTxt , 2).ToString();//floatå‹ä¿ç•™æœ€åä¸¤ä½æ•°å­—          if (aTxt &lt;= 0)          &#123;              txt.text = &quot;&quot;;              Dtime = false;          &#125;      &#125;  &#125;  public void UseSkill()  &#123;      if (currentCoolDown &gt;= coolDown)      &#123;                   // é‡ç½®å†·å´æ—¶é—´          currentCoolDown = 0;      &#125;      aTxt = coolDown;  &#125;</code></pre></div>]]></content>
    
    
    <categories>
      
      <category>æ¸¸æˆå¼€å‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>C#</tag>
      
      <tag>Unity</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Unityå±å¹•æ»‘æ†</title>
    <link href="/2017/10/30/Unity%E5%B1%8F%E5%B9%95%E6%BB%91%E6%9D%86/"/>
    <url>/2017/10/30/Unity%E5%B1%8F%E5%B9%95%E6%BB%91%E6%9D%86/</url>
    
    <content type="html"><![CDATA[<h3 id="æ»‘æ†ä»£ç "><a href="#æ»‘æ†ä»£ç " class="headerlink" title="æ»‘æ†ä»£ç "></a>æ»‘æ†ä»£ç </h3><div class="code-wrapper"><pre><code class="hljs c#">using System.Collections;using System.Collections.Generic;using UnityEngine;using UnityEngine.UI;using UnityEngine.EventSystems;public class TuoUI : MonoBehaviour,IDragHandler,IEndDragHandler&#123;              public Vector3 dir;       Vector3 yuandian;       RectTransform recttras;       RectTransform rects;       public float a;       public float b;       public  Animator ani;       // Use this for initialization       void Start ()       &#123;              recttras = transform as RectTransform;              yuandian = transform.position;              rects=transform.parent as RectTransform;       &#125;              // Update is called once per frame       public Vector3 worldpos;       public void OnDrag (PointerEventData eventData)       &#123;              ani.SetFloat (&quot;runs&quot;, 1);              RectTransformUtility.ScreenPointToWorldPointInRectangle (recttras, Input.mousePosition, eventData.pressEventCamera, out worldpos);              transform.position = worldpos;              dir = transform.localPosition-Vector3.zero;              if(Vector2.Distance(Input.mousePosition,yuandian)&gt;rects.rect.width/2)              &#123;                     transform.localPosition = Vector3.zero + dir.normalized * rects.rect.width / 2;              &#125;                            &#125;       public void OnEndDrag (PointerEventData eventData)       &#123;              transform.localPosition = Vector3.zero;               dir = transform.localPosition-Vector3.zero;              ani.SetFloat (&quot;runs&quot;, 0);       &#125;       void Update ()       &#123;              a = dir.x / rects.rect.width / 2;              b = dir.z / rects.rect.height / 2;                     &#125;</code></pre></div><h3 id="è§’è‰²è„šæœ¬ï¼š"><a href="#è§’è‰²è„šæœ¬ï¼š" class="headerlink" title="è§’è‰²è„šæœ¬ï¼š"></a>è§’è‰²è„šæœ¬ï¼š</h3><div class="code-wrapper"><pre><code class="hljs c#">public class NinjaMove : MonoBehaviour &#123;    float h;    float v;    public float movespeed;    //public float rotspeed;       public TuoUI yaogan;       Vector3 a;       void Start ()    &#123;    &#125;              void Update ()    &#123;              a = new  Vector3 (yaogan.dir.normalized.x, 0, yaogan.dir.normalized.y);              if(a.x != 0 || a.z != 0)              &#123;                     transform.rotation = Quaternion.LookRotation (a);                     transform.Translate(Vector3.forward* movespeed * Time.deltaTime);              &#125;       &#125;&#125;</code></pre></div>]]></content>
    
    
    <categories>
      
      <category>æ¸¸æˆå¼€å‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>C#</tag>
      
      <tag>Unity</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Unityä¸­æŠ›ç‰©çº¿å®ç°ç²¾å‡†æ‰“å‡»</title>
    <link href="/2017/10/30/unity%E6%8A%9B%E7%89%A9%E7%BA%BF/"/>
    <url>/2017/10/30/unity%E6%8A%9B%E7%89%A9%E7%BA%BF/</url>
    
    <content type="html"><![CDATA[<h4 id="unityä¸­æŠ›ç‰©çº¿å®ç°ç²¾å‡†æ‰“å‡»"><a href="#unityä¸­æŠ›ç‰©çº¿å®ç°ç²¾å‡†æ‰“å‡»" class="headerlink" title="unityä¸­æŠ›ç‰©çº¿å®ç°ç²¾å‡†æ‰“å‡»"></a>unityä¸­æŠ›ç‰©çº¿å®ç°ç²¾å‡†æ‰“å‡»</h4><div class="code-wrapper"><pre><code class="hljs pgsql"><span class="hljs-keyword">using</span> <span class="hljs-keyword">System</span>.Collections;<span class="hljs-keyword">using</span> <span class="hljs-keyword">System</span>.Collections.Generic;<span class="hljs-keyword">using</span> UnityEngine;<span class="hljs-built_in">public</span> <span class="hljs-keyword">class</span> BulletControl : MonoBehaviour &#123;    <span class="hljs-built_in">public</span> <span class="hljs-keyword">Transform</span> _Target;       <span class="hljs-built_in">public</span> <span class="hljs-type">float</span> _VerticalSpeed;    const <span class="hljs-type">float</span> _Grivaty = <span class="hljs-number">-9.81</span>f;    <span class="hljs-type">float</span> _HorizontalSpeed;       <span class="hljs-type">float</span> _TimeCount;    Vector3 _HorizontalDir;       <span class="hljs-type">void</span> <span class="hljs-keyword">Start</span> () &#123;        <span class="hljs-type">float</span> t1 = -_VerticalSpeed / _Grivaty;        //<span class="hljs-type">float</span> s1 = -_Grivaty * t1 * t1 / <span class="hljs-number">2</span>;        <span class="hljs-type">float</span> s1 = _VerticalSpeed * _VerticalSpeed / (<span class="hljs-number">2</span> * -_Grivaty);        <span class="hljs-type">float</span> top = <span class="hljs-keyword">transform</span>.position.y + s1;        <span class="hljs-type">float</span> s2 = top - _Target.position.y;        _HorizontalDir = _Target.position - <span class="hljs-keyword">transform</span>.position;        _HorizontalDir.y = <span class="hljs-number">0</span>;        <span class="hljs-type">float</span> sh = Vector3.Magnitude(_HorizontalDir);        <span class="hljs-type">float</span> t2 = Mathf.Sqrt(<span class="hljs-number">2</span> * s2 / -_Grivaty);        _HorizontalSpeed = sh / (t1 + t2);       &#125;              <span class="hljs-type">void</span> <span class="hljs-keyword">Update</span> () &#123;        _TimeCount += <span class="hljs-type">Time</span>.deltaTime;        <span class="hljs-keyword">transform</span>.Translate(_HorizontalDir.normalized * _HorizontalSpeed * <span class="hljs-type">Time</span>.deltaTime);        <span class="hljs-keyword">transform</span>.Translate(Vector3.up * (_VerticalSpeed + _Grivaty * _TimeCount) * <span class="hljs-type">Time</span>.deltaTime);        <span class="hljs-keyword">Debug</span>.DrawLine(<span class="hljs-keyword">transform</span>.position, <span class="hljs-keyword">transform</span>.position+Vector3.up, Color.red, <span class="hljs-number">1000</span>);       &#125;&#125;</code></pre></div>]]></content>
    
    
    <categories>
      
      <category>æ¸¸æˆå¼€å‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>C#</tag>
      
      <tag>Unity</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Unityé¢è¯•é¢˜æ•´ç†</title>
    <link href="/2017/10/28/Unity%E9%9D%A2%E8%AF%95%E9%A2%98%E6%95%B4%E7%90%86/"/>
    <url>/2017/10/28/Unity%E9%9D%A2%E8%AF%95%E9%A2%98%E6%95%B4%E7%90%86/</url>
    
    <content type="html"><![CDATA[<p>ä¸€ï¼šä»€ä¹ˆæ˜¯ååŒç¨‹åºï¼Ÿ</p><p>åœ¨ä¸»çº¿ç¨‹è¿è¡Œçš„åŒæ—¶å¼€å¯å¦ä¸€æ®µé€»è¾‘å¤„ç†ï¼Œæ¥ååŠ©å½“å‰ç¨‹åºçš„æ‰§è¡Œï¼Œåç¨‹å¾ˆåƒå¤šçº¿ç¨‹ï¼Œä½†æ˜¯ä¸æ˜¯å¤šçº¿ç¨‹ï¼ŒUnityçš„åç¨‹å®åœ¨æ¯å¸§ç»“æŸä¹‹åå»æ£€æµ‹yieldçš„æ¡ä»¶æ˜¯å¦æ»¡è¶³ã€‚</p><p>äºŒï¼šUnity3dä¸­çš„ç¢°æ’å™¨å’Œè§¦å‘å™¨çš„åŒºåˆ«ï¼Ÿ</p><p>ç¢°æ’å™¨æ˜¯è§¦å‘å™¨çš„è½½ä½“ï¼Œè€Œè§¦å‘å™¨åªæ˜¯ç¢°æ’å™¨èº«ä¸Šçš„ä¸€ä¸ªå±æ€§ã€‚å½“Is Trigger=falseæ—¶ï¼Œç¢°æ’å™¨æ ¹æ®ç‰©ç†å¼•æ“å¼•å‘ç¢°æ’ï¼Œäº§ç”Ÿç¢°æ’çš„æ•ˆæœï¼Œå¯ä»¥è°ƒç”¨OnCollisionEnter/Stay/Exitå‡½æ•°ï¼›å½“Is Trigger=trueæ—¶ï¼Œç¢°æ’å™¨è¢«ç‰©ç†å¼•æ“æ‰€å¿½ç•¥ï¼Œæ²¡æœ‰ç¢°æ’æ•ˆæœï¼Œå¯ä»¥è°ƒç”¨OnTriggerEnter/Stay/Exitå‡½æ•°ã€‚å¦‚æœæ—¢è¦æ£€æµ‹åˆ°ç‰©ä½“çš„æ¥è§¦åˆä¸æƒ³è®©ç¢°æ’æ£€æµ‹å½±å“ç‰©ä½“ç§»åŠ¨æˆ–è¦æ£€æµ‹ä¸€ä¸ªç‰©ä»¶æ˜¯å¦ç»è¿‡ç©ºé—´ä¸­çš„æŸä¸ªåŒºåŸŸè¿™æ—¶å°±å¯ä»¥ç”¨åˆ°è§¦å‘å™¨</p><p>ä¸‰ï¼šç‰©ä½“å‘ç”Ÿç¢°æ’çš„å¿…è¦æ¡ä»¶ï¼Ÿ</p><p>ä¸¤ä¸ªç‰©ä½“éƒ½å¿…é¡»å¸¦æœ‰ç¢°æ’å™¨ï¼ˆColliderï¼‰ï¼Œå…¶ä¸­ä¸€ä¸ªç‰©ä½“è¿˜å¿…é¡»å¸¦æœ‰Rigidbodyåˆšä½“ï¼Œè€Œä¸”å¿…é¡»æ˜¯è¿åŠ¨çš„ç‰©ä½“å¸¦æœ‰Rigidbodyè„šæœ¬æ‰èƒ½æ£€æµ‹åˆ°ç¢°æ’ã€‚</p><p>å››ï¼šè¯·ç®€è¿°ArrayListå’ŒListçš„ä¸»è¦åŒºåˆ«ï¼Ÿ</p><p>ArrayListå­˜åœ¨ä¸å®‰å…¨ç±»å‹ï¼ˆArrayListä¼šæŠŠæ‰€æœ‰æ’å…¥å…¶ä¸­çš„æ•°æ®éƒ½å½“åšObjectæ¥å¤„ç†ï¼‰ï¼Œè£…ç®±æ‹†ç®±çš„æ“ä½œï¼ˆè´¹æ—¶ï¼‰ï¼ŒListæ˜¯æ³›å‹ç±»ï¼ŒåŠŸèƒ½è·ŸArrayListç›¸ä¼¼ï¼Œä½†ä¸å­˜åœ¨ArrayListæ‰€è¯´çš„é—®é¢˜ã€‚</p><p>äº”ï¼šå¦‚ä½•å®‰å…¨çš„åœ¨ä¸åŒå·¥ç¨‹é—´å®‰å…¨åœ°è¿ç§»assetæ•°æ®ï¼Ÿä¸‰ç§æ–¹æ³•</p><p>1.å°†Assetsç›®å½•å’ŒLibraryç›®å½•ä¸€èµ·è¿ç§»</p><p>2.å¯¼å‡ºåŒ…ï¼Œexport Package</p><p>3.ç”¨unityè‡ªå¸¦çš„assets ServeråŠŸèƒ½</p><p>å…­ï¼šOnEnableã€Awakeã€Startè¿è¡Œæ—¶çš„å‘ç”Ÿé¡ºåºï¼Ÿå“ªäº›å¯èƒ½åœ¨åŒä¸€ä¸ªå¯¹è±¡å‘¨æœŸä¸­åå¤çš„å‘ç”Ÿ</p><p>Awake â€“&gt;OnEnable-&gt;Startï¼ŒOnEnableåœ¨åŒä¸€å‘¨æœŸä¸­å¯ä»¥åå¤åœ°å‘ç”Ÿã€‚</p><p>ä¸ƒï¼šMeshRenderä¸­materialå’Œsharedmaterialçš„åŒºåˆ«ï¼Ÿ</p><p>ä¿®æ”¹sharedMaterialå°†æ”¹å˜æ‰€æœ‰ç‰©ä½“ä½¿ç”¨è¿™ä¸ªæè´¨çš„å¤–è§‚ï¼Œå¹¶ä¸”ä¹Ÿæ”¹å˜å‚¨å­˜åœ¨å·¥ç¨‹é‡Œçš„æè´¨è®¾ç½®ã€‚ä¸æ¨èä¿®æ”¹ç”±sharedMaterialè¿”å›çš„æè´¨ã€‚å¦‚æœä½ æƒ³ä¿®æ”¹æ¸²æŸ“å™¨çš„æè´¨ï¼Œä½¿ç”¨materialæ›¿ä»£ã€‚</p><p>å…«ï¼šUnityæä¾›äº†å‡ ç§å…‰æºï¼Œåˆ†åˆ«æ˜¯ä»€ä¹ˆ</p><p>å››ç§ã€‚</p><p>å¹³è¡Œå…‰ï¼šDirectional Light</p><p>ç‚¹å…‰æºï¼šPoint Light</p><p>èšå…‰ç¯ï¼šSpot Light</p><p>åŒºåŸŸå…‰æºï¼šArea Light</p><p>ä¹ï¼šç®€è¿°ä¸€ä¸‹å¯¹è±¡æ± ï¼Œä½ è§‰å¾—åœ¨FPSé‡Œå“ªäº›ä¸œè¥¿é€‚åˆä½¿ç”¨å¯¹è±¡æ± </p><p>å¯¹è±¡æ± å°±å­˜æ”¾éœ€è¦è¢«åå¤è°ƒç”¨èµ„æºçš„ä¸€ä¸ªç©ºé—´ï¼Œå½“ä¸€ä¸ªå¯¹è±¡å›å¤§é‡ç”Ÿæˆçš„æ—¶å€™å¦‚æœæ¯æ¬¡éƒ½é”€æ¯åˆ›å»ºä¼šå¾ˆè´¹æ—¶é—´ï¼Œé€šè¿‡å¯¹è±¡æ± æŠŠæš‚æ—¶ä¸ç”¨çš„å¯¹è±¡æ”¾åˆ°ä¸€ä¸ªæ± ä¸­ï¼ˆä¹Ÿå°±æ˜¯ä¸€ä¸ªé›†åˆï¼‰ï¼Œå½“ä¸‹æ¬¡è¦é‡æ–°ç”Ÿæˆè¿™ä¸ªå¯¹è±¡çš„æ—¶å€™å…ˆå»æ± ä¸­æŸ¥æ‰¾ä¸€ä¸‹æ˜¯å¦æœ‰å¯ç”¨çš„å¯¹è±¡ï¼Œå¦‚æœæœ‰çš„è¯å°±ç›´æ¥æ‹¿å‡ºæ¥ä½¿ç”¨ï¼Œä¸éœ€è¦å†åˆ›å»ºï¼Œå¦‚æœæ± ä¸­æ²¡æœ‰å¯ç”¨çš„å¯¹è±¡ï¼Œæ‰éœ€è¦é‡æ–°åˆ›å»ºï¼Œåˆ©ç”¨ç©ºé—´æ¢æ—¶é—´æ¥è¾¾åˆ°æ¸¸æˆçš„é«˜é€Ÿè¿è¡Œæ•ˆæœï¼Œåœ¨FPSæ¸¸æˆä¸­è¦å¸¸è¢«å¤§é‡å¤åˆ¶çš„å¯¹è±¡åŒ…æ‹¬å­å¼¹ï¼Œæ•Œäººï¼Œç²’å­ç­‰</p><p>åï¼šCharacterControllerå’ŒRigidbodyçš„åŒºåˆ«</p><p>Rigidbodyå…·æœ‰å®Œå…¨çœŸå®ç‰©ç†çš„ç‰¹æ€§ï¼ŒUnityä¸­ç‰©ç†ç³»ç»Ÿæœ€åŸºæœ¬çš„ä¸€ä¸ªç»„ä»¶ï¼ŒåŒ…å«äº†å¸¸ç”¨çš„ç‰©ç†ç‰¹æ€§ï¼Œè€ŒCharacterControllerå¯ä»¥è¯´æ˜¯å—é™çš„çš„Rigidbodyï¼Œå…·æœ‰ä¸€å®šçš„ç‰©ç†æ•ˆæœä½†ä¸æ˜¯å®Œå…¨çœŸå®çš„ï¼Œæ˜¯Unityä¸ºäº†ä½¿å¼€å‘è€…èƒ½æ–¹ä¾¿çš„å¼€å‘ç¬¬ä¸€äººç§°è§†è§’çš„æ¸¸æˆè€Œå°è£…çš„ä¸€ä¸ªç»„ä»¶</p><p>åä¸€ï¼šç®€è¿°prefabçš„ç”¨å¤„</p><p>åœ¨æ¸¸æˆè¿è¡Œæ—¶å®ä¾‹åŒ–ï¼Œprefabç›¸å½“äºä¸€ä¸ªæ¨¡æ¿ï¼Œå¯¹ä½ å·²ç»æœ‰çš„ç´ æã€è„šæœ¬ã€å‚æ•°åšä¸€ä¸ªé»˜è®¤çš„é…ç½®ï¼Œä»¥ä¾¿äºä»¥åçš„ä¿®æ”¹ï¼ŒåŒæ—¶prefabæ‰“åŒ…çš„å†…å®¹ç®€åŒ–äº†å¯¼å‡ºçš„æ“ä½œï¼Œä¾¿äºå›¢é˜Ÿçš„äº¤æµã€‚</p><p>åäºŒï¼šè¯·ç®€è¿°sealedå…³é”®å­—ç”¨åœ¨ç±»å£°æ˜æ—¶ä¸å‡½æ•°å£°æ˜æ—¶çš„ä½œç”¨</p><p>sealedä¿®é¥°çš„ç±»ä¸ºå¯†å°ç±»ï¼Œç±»å£°æ˜æ—¶å¯é˜²æ­¢å…¶ä»–ç±»ç»§æ‰¿æ­¤ç±»ï¼Œåœ¨æ–¹æ³•ä¸­å£°æ˜åˆ™å¯é˜²æ­¢æ´¾ç”Ÿç±»é‡å†™æ­¤æ–¹æ³•ã€‚</p><p>åä¸‰ï¼šè¯·ç®€è¿°privateï¼Œpublicï¼Œprotectedï¼Œinternalçš„åŒºåˆ«</p><p>publicï¼šå¯¹ä»»ä½•ç±»å’Œæˆå‘˜éƒ½å…¬å¼€ï¼Œæ— é™åˆ¶è®¿é—®</p><p>privateï¼šä»…å¯¹è¯¥ç±»å…¬å¼€</p><p>protectedï¼šå¯¹è¯¥ç±»å’Œå…¶æ´¾ç”Ÿç±»å…¬å¼€</p><p>internalï¼šåªèƒ½åœ¨åŒ…å«è¯¥ç±»çš„ç¨‹åºé›†ä¸­è®¿é—®è¯¥ç±»</p><p>åå››ï¼šä½¿ç”¨Unity3då®ç°2dæ¸¸æˆï¼Œæœ‰å‡ ç§æ–¹å¼ï¼Ÿ</p><p>ä½¿ç”¨æœ¬èº«çš„GUIï¼Œåœ¨Unity4.6ä»¥åå‡ºç°çš„UGUI<br>2.æŠŠæ‘„åƒæœºçš„Projection(æŠ•å½±)å€¼è°ƒä¸ºOrthographic(æ­£äº¤æŠ•å½±)ï¼Œä¸è€ƒè™‘zè½´ï¼›</p><p>3.ä½¿ç”¨2dæ’ä»¶ï¼Œå¦‚ï¼š2DToolKitï¼Œå’ŒNGUI</p><p>åäº”ï¼šåœ¨ç‰©ä½“å‘ç”Ÿç¢°æ’çš„æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œæœ‰å‡ ä¸ªé˜¶æ®µï¼Œåˆ†åˆ«åˆ—å‡ºå¯¹åº”çš„å‡½æ•°</p><p>ä¸‰ä¸ªé˜¶æ®µï¼Œ1.OnCollisionEnter 2.OnCollisionStay 3.OnCollisionExit</p><p>åå…­ï¼šUnity3dçš„ç‰©ç†å¼•æ“ä¸­ï¼Œæœ‰å‡ ç§æ–½åŠ åŠ›çš„æ–¹å¼ï¼Œåˆ†åˆ«æè¿°å‡ºæ¥</p><p>rigidbody.AddForce/AddForceAtPositionï¼Œéƒ½åœ¨rigidbodyç³»åˆ—å‡½æ•°ä¸­ã€‚å¤§å®¶å¯ä»¥è‡ªå·±å»æŸ¥çœ‹ä¸€ä¸‹rigidbodyçš„API</p><p>åä¸ƒï¼šä»€ä¹ˆå«åšé“¾æ¡å…³èŠ‚ï¼Ÿ</p><p>Hinge Jointï¼Œå¯ä»¥æ¨¡æ‹Ÿä¸¤ä¸ªç‰©ä½“é—´ç”¨ä¸€æ ¹é“¾æ¡è¿æ¥åœ¨ä¸€èµ·çš„æƒ…å†µï¼Œèƒ½ä¿æŒä¸¤ä¸ªç‰©ä½“åœ¨ä¸€ä¸ªå›ºå®šè·ç¦»å†…éƒ¨ç›¸äº’ç§»åŠ¨è€Œä¸äº§ç”Ÿä½œç”¨åŠ›ï¼Œä½†æ˜¯è¾¾åˆ°å›ºå®šè·ç¦»åå°±ä¼šäº§ç”Ÿæ‹‰åŠ›ã€‚</p><p>åå…«ï¼šç‰©ä½“è‡ªèº«æ—‹è½¬ä½¿ç”¨çš„å‡½æ•°ï¼Ÿ</p><p>Transform.Rotate()</p><p>åä¹ï¼šUnity3dæä¾›äº†ä¸€ä¸ªç”¨äºä¿å­˜å’Œè¯»å–æ•°æ®çš„ç±»(PlayerPrefs)ï¼Œè¯·åˆ—å‡ºä¿å­˜å’Œè¯»å–æ•´å½¢æ•°æ®çš„å‡½æ•°</p><p>PlayerPrefs.SetInt() PlayerPrefs.GetInt()</p><p>äºŒåï¼šUnity3dè„šæœ¬ä»å”¤é†’åˆ°é”€æ¯æœ‰ç€ä¸€å¥—æ¯”è¾ƒå®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸï¼Œè¯·åˆ—å‡ºç³»ç»Ÿè‡ªå¸¦çš„å‡ ä¸ªé‡è¦çš„æ–¹æ³•ã€‚</p><p>Awakeâ€”â€”&gt;OnEnableâ€“&gt;Startâ€”â€”&gt;Updateâ€”â€”&gt;FixedUpdateâ€”â€”&gt;LateUpdateâ€”â€”&gt;OnGUIâ€”â€”&gt;OnDisableâ€”â€”&gt;OnDestroy</p><p>äºŒåä¸€ï¼šç‰©ç†æ›´æ–°ä¸€èˆ¬æ”¾åœ¨å“ªä¸ªç³»ç»Ÿå‡½æ•°é‡Œï¼Ÿ</p><p>FixedUpdateï¼Œå›ºå®šæ—¶é—´é—´éš”æ‰§è¡Œ å¯ä»¥åœ¨edit-&gt;project setting-&gt;timeè®¾ç½® update æ˜¯åœ¨æ¸²æŸ“å¸§æ‰§è¡Œï¼Œå’ŒUpdateä¸åŒçš„æ˜¯FixedUpdateæ˜¯æ¸²æŸ“å¸§æ‰§è¡Œï¼Œå¦‚æœä½ çš„æ¸²æŸ“æ•ˆç‡ä½ä¸‹çš„æ—¶å€™FixedUpdateè°ƒç”¨æ¬¡æ•°å°±ä¼šè·Ÿç€ä¸‹é™ã€‚FixedUpdateæ¯”è¾ƒé€‚ç”¨äºç‰©ç†å¼•æ“çš„è®¡ç®—ï¼Œå› ä¸ºæ˜¯è·Ÿæ¯å¸§æ¸²æŸ“æœ‰å…³ã€‚Updateå°±æ¯”è¾ƒé€‚åˆåšæ§åˆ¶ã€‚</p><p>äºŒåäºŒï¼šåœ¨åœºæ™¯ä¸­æ”¾ç½®å¤šä¸ªCameraå¹¶åŒæ—¶å¤„äºæ´»åŠ¨çŠ¶æ€ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</p><p>æ¸¸æˆç•Œé¢å¯ä»¥çœ‹åˆ°å¾ˆå¤šæ‘„åƒæœºçš„æ··åˆã€‚</p><p>äºŒåä¸‰ï¼šå¦‚ä½•é”€æ¯ä¸€ä¸ªUnityEngine.ObjectåŠå…¶å­ç±»ï¼Ÿ</p><p>ä½¿ç”¨Destroy()æ–¹æ³•;</p><p>äºŒåå››ï¼šè¯·æè¿°ä¸ºä»€ä¹ˆUnity3dä¸­ä¼šå‘ç”Ÿåœ¨ç»„ä»¶ä¸Šå‡ºç°æ•°æ®ä¸¢å¤±çš„æƒ…å†µ</p><p>ä¸€èˆ¬æ˜¯ç»„ä»¶ä¸Šç»‘å®šçš„ç‰©ä½“å¯¹è±¡è¢«åˆ é™¤äº†</p><p>äºŒåäº”ï¼šLODæ˜¯ä»€ä¹ˆï¼Œä¼˜ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ</p><p>LOD(Level of detail)å¤šå±‚æ¬¡ç»†èŠ‚ï¼Œæ˜¯æœ€å¸¸ç”¨çš„æ¸¸æˆä¼˜åŒ–æŠ€æœ¯ã€‚å®ƒæŒ‰ç…§æ¨¡å‹çš„ä½ç½®å’Œé‡è¦ç¨‹åº¦å†³å®šç‰©ä½“æ¸²æŸ“çš„èµ„æºåˆ†é…ï¼Œé™ä½éé‡è¦ç‰©ä½“çš„é¢æ•°å’Œç»†èŠ‚åº¦ï¼Œä»è€Œè·å¾—é«˜æ•ˆç‡çš„æ¸²æŸ“è¿ç®—ã€‚ç¼ºç‚¹æ˜¯å¢åŠ äº†å†…å­˜ã€‚</p><p>äºŒåå…­ï¼šMipMapæ˜¯ä»€ä¹ˆï¼Œä½œç”¨ï¼Ÿ</p><p>MipMappingï¼šåœ¨ä¸‰ç»´è®¡ç®—æœºå›¾å½¢çš„è´´å›¾æ¸²æŸ“ä¸­æœ‰å¸¸ç”¨çš„æŠ€æœ¯ï¼Œä¸ºåŠ å¿«æ¸²æŸ“è¿›åº¦å’Œå‡å°‘å›¾åƒé”¯é½¿ï¼Œè´´å›¾è¢«å¤„ç†æˆç”±ä¸€ç³»åˆ—è¢«é¢„å…ˆè®¡ç®—å’Œä¼˜åŒ–è¿‡çš„å›¾ç‰‡ç»„æˆçš„æ–‡ä»¶ï¼Œè¿™æ ·çš„è´´å›¾è¢«ç§°ä¸ºMipMapã€‚</p><p>äºŒåä¸ƒï¼šè¯·æè¿°Interfaceä¸æŠ½è±¡ç±»ä¹‹é—´çš„ä¸åŒ</p><p>æŠ½è±¡ç±»è¡¨ç¤ºè¯¥ç±»ä¸­å¯èƒ½å·²ç»æœ‰ä¸€äº›æ–¹æ³•çš„å…·ä½“å®šä¹‰ï¼Œä½†æ¥å£å°±æ˜¯å…¬å…¬åªèƒ½å®šä¹‰å„ä¸ªæ–¹æ³•çš„ç•Œé¢ ï¼Œä¸èƒ½å…·ä½“çš„å®ç°ä»£ç åœ¨æˆå‘˜æ–¹æ³•ä¸­ã€‚ç±»æ˜¯å­ç±»ç”¨æ¥ç»§æ‰¿çš„ï¼Œå½“çˆ¶ç±»å·²ç»æœ‰å®é™…åŠŸèƒ½çš„æ–¹æ³•æ—¶è¯¥æ–¹æ³•åœ¨å­ç±»ä¸­å¯ä»¥ä¸å¿…å®ç°ï¼Œç›´æ¥å¼•ç”¨çˆ¶ç±»çš„æ–¹æ³•ï¼Œå­ç±»ä¹Ÿå¯ä»¥é‡å†™è¯¥çˆ¶ç±»çš„æ–¹æ³•ã€‚å®ç°æ¥å£çš„æ—¶å€™å¿…é¡»è¦å®ç°æ¥å£ä¸­æ‰€æœ‰çš„æ–¹æ³•ï¼Œä¸èƒ½é—æ¼ä»»ä½•ä¸€ä¸ªã€‚</p><p>äºŒåå…«ï¼š.Netä¸Monoçš„å…³ç³»ï¼Ÿ</p><p>monoæ˜¯.netçš„ä¸€ä¸ªå¼€æºè·¨å¹³å°å·¥å…·ï¼Œå°±ç±»ä¼¼javaè™šæ‹Ÿæœºï¼Œjavaæœ¬èº«ä¸æ˜¯è·¨å¹³å°è¯­è¨€ï¼Œä½†è¿è¡Œåœ¨è™šæ‹Ÿæœºä¸Šå°±èƒ½å¤Ÿå®ç°äº†è·¨å¹³å°ã€‚.netåªèƒ½åœ¨windowsä¸‹è¿è¡Œï¼Œmonoå¯ä»¥å®ç°è·¨å¹³å°è·‘ï¼Œå¯ä»¥è¿è¡Œäºlinuxï¼ŒUnixï¼ŒMac OSç­‰ã€‚</p><p>äºŒåä¹ï¼šç®€è¿°Unity3Dæ”¯æŒçš„ä½œä¸ºè„šæœ¬çš„è¯­è¨€çš„åç§°</p><p>Unityçš„è„šæœ¬è¯­è¨€åŸºäºMonoçš„.Netå¹³å°ä¸Šè¿è¡Œï¼Œå¯ä»¥ä½¿ç”¨.NETåº“ï¼Œè¿™ä¹Ÿä¸ºXMLã€æ•°æ®åº“ã€æ­£åˆ™è¡¨è¾¾å¼ç­‰é—®é¢˜æä¾›äº†å¾ˆå¥½çš„è§£å†³æ–¹æ¡ˆã€‚Unityé‡Œçš„è„šæœ¬éƒ½ä¼šç»è¿‡ç¼–è¯‘ï¼Œä»–ä»¬çš„è¿è¡Œé€Ÿåº¦ä¹Ÿå¾ˆå¿«ã€‚è¿™ä¸‰ç§è¯­è¨€å®é™…ä¸Šçš„åŠŸèƒ½å’Œè¿è¡Œé€Ÿåº¦æ˜¯ä¸€æ ·çš„ï¼ŒåŒºåˆ«ä¸»è¦ä½“ç°åœ¨è¯­è¨€ç‰¹æ€§ä¸Šã€‚JavaScriptã€ C#ã€Boo</p><p>ä¸‰åï¼šU3Dä¸­ç”¨äºè®°å½•èŠ‚ç‚¹ç©ºé—´å‡ ä½•ä¿¡æ¯çš„ç»„ä»¶åç§°ï¼ŒåŠå…¶çˆ¶ç±»åç§°</p><p>Transform çˆ¶ç±»æ˜¯ Component</p><p>ä¸‰åä¸€ï¼šå‘é‡çš„ç‚¹ä¹˜ã€å‰ä¹˜ä»¥åŠå½’ä¸€åŒ–çš„æ„ä¹‰ï¼Ÿ</p><p>1.ç‚¹ä¹˜æè¿°äº†ä¸¤ä¸ªå‘é‡çš„ç›¸ä¼¼ç¨‹åº¦ï¼Œç»“æœè¶Šå¤§ä¸¤å‘é‡è¶Šç›¸ä¼¼ï¼Œè¿˜å¯è¡¨ç¤ºæŠ•å½±</p><p>2.å‰ä¹˜å¾—åˆ°çš„å‘é‡å‚ç›´äºåŸæ¥çš„ä¸¤ä¸ªå‘é‡</p><p>3.æ ‡å‡†åŒ–å‘é‡ï¼šç”¨åœ¨åªå…³ç³»æ–¹å‘ï¼Œä¸å…³å¿ƒå¤§å°çš„æ—¶å€™</p><p>ä¸‰åäºŒï¼šä¸ºä½•å¤§å®¶éƒ½åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šå¯»æ±‚U3DåŸç”ŸGUIçš„æ›¿ä»£æ–¹æ¡ˆ</p><p>ä¸ç¾è§‚ï¼ŒOnGUIå¾ˆè€—è´¹æ—¶é—´ï¼Œæ•ˆç‡ä¸é«˜ï¼Œä½¿ç”¨ä¸æ–¹ä¾¿</p><p>ä¸‰åä¸‰ï¼šè¯·ç®€è¿°å¦‚ä½•åœ¨ä¸åŒåˆ†è¾¨ç‡ä¸‹ä¿æŒUIçš„ä¸€è‡´æ€§</p><p>NGUIå¾ˆå¥½çš„è§£å†³äº†è¿™ä¸€ç‚¹ï¼Œå±å¹•åˆ†è¾¨ç‡çš„è‡ªé€‚åº”æ€§ï¼ŒåŸç†å°±æ˜¯è®¡ç®—å‡ºå±å¹•çš„å®½é«˜æ¯”è·ŸåŸæ¥çš„é¢„è®¾çš„å±å¹•åˆ†è¾¨ç‡æ±‚å‡ºä¸€ä¸ªå¯¹æ¯”å€¼ï¼Œç„¶åä¿®æ”¹æ‘„åƒæœºçš„sizeã€‚UGUIé€šè¿‡é”šç‚¹å’Œä¸­å¿ƒç‚¹å’Œåˆ†è¾¨ç‡ä¹Ÿè§£å†³è¿™ä¸ªé—®é¢˜</p><p>ä¸‰åå››ï¼šä»€ä¹ˆæ˜¯LightMapï¼Ÿ</p><p>LightMap:å°±æ˜¯æŒ‡åœ¨ä¸‰ç»´è½¯ä»¶é‡Œå®ç°æ‰“å¥½å…‰ï¼Œç„¶åæ¸²æŸ“æŠŠåœºæ™¯å„è¡¨é¢çš„å…‰ç…§è¾“å‡ºåˆ°è´´å›¾ä¸Šï¼Œæœ€ååˆé€šè¿‡å¼•æ“è´´åˆ°åœºæ™¯ä¸Šï¼Œè¿™æ ·å°±ä½¿ç‰©ä½“æœ‰äº†å…‰ç…§çš„æ„Ÿè§‰ã€‚</p><p>ä¸‰åäº”ï¼šUnityå’Œcocos2dçš„åŒºåˆ«</p><p>Unity3Dæ”¯æŒC#ã€javascriptç­‰ï¼Œcocos2d-x æ”¯æŒc++ã€Html5ã€Luaç­‰ã€‚</p><p>cocos2d å¼€æº å¹¶ä¸”å…è´¹</p><p>Unity3Dæ”¯æŒiOSã€Androidã€Flashã€Windowsã€Macã€Wiiç­‰å¹³å°çš„æ¸¸æˆå¼€å‘ï¼Œcocos2d-xæ”¯æŒiOSã€Androidã€WPç­‰ã€‚</p><p>ä¸‰åå…­ï¼šC#å’ŒC++çš„åŒºåˆ«ï¼Ÿ</p><p>ç®€å•çš„è¯´ï¼šC# ä¸C++ æ¯”è¾ƒçš„è¯ï¼Œæœ€é‡è¦çš„ç‰¹æ€§å°±æ˜¯C# æ˜¯ä¸€ç§å®Œå…¨é¢å‘å¯¹è±¡çš„è¯­è¨€ï¼Œè€ŒC++ ä¸æ˜¯ï¼Œå¦å¤–C# æ˜¯åŸºäºIL ä¸­é—´è¯­è¨€å’Œ.NET Framework CLR çš„ï¼Œåœ¨å¯ç§»æ¤æ€§ï¼Œå¯ç»´æŠ¤æ€§å’Œå¼ºå£®æ€§éƒ½æ¯”C++ æœ‰å¾ˆå¤§çš„æ”¹è¿›ã€‚C# çš„è®¾è®¡ç›®æ ‡æ˜¯ç”¨æ¥å¼€å‘å¿«é€Ÿç¨³å®šå¯æ‰©å±•çš„åº”ç”¨ç¨‹åºï¼Œå½“ç„¶ä¹Ÿå¯ä»¥é€šè¿‡Interop å’ŒPinvoke å®Œæˆä¸€äº›åº•å±‚æ“ä½œã€‚æ›´è¯¦ç»†çš„åŒºåˆ«å¤§å®¶å¯ä»¥å‚è€ƒè¿™é‡Œ</p><p>ä¸‰åä¸ƒï¼šç»“æ„ä½“å’Œç±»æœ‰ä½•åŒºåˆ«ï¼Ÿ</p><p>ç»“æ„ä½“æ˜¯ä¸€ç§å€¼ç±»å‹ï¼Œè€Œç±»æ˜¯å¼•ç”¨ç±»å‹ã€‚ï¼ˆå€¼ç±»å‹ã€å¼•ç”¨ç±»å‹æ˜¯æ ¹æ®æ•°æ®å­˜å‚¨çš„è§’åº¦æ¥åˆ†çš„ï¼‰å°±æ˜¯å€¼ç±»å‹ç”¨äºå­˜å‚¨æ•°æ®çš„å€¼ï¼Œå¼•ç”¨ç±»å‹ç”¨äºå­˜å‚¨å¯¹å®é™…æ•°æ®çš„å¼•ç”¨ã€‚é‚£ä¹ˆç»“æ„ä½“å°±æ˜¯å½“æˆå€¼æ¥ä½¿ç”¨çš„ï¼Œç±»åˆ™é€šè¿‡å¼•ç”¨æ¥å¯¹å®é™…æ•°æ®æ“ä½œ</p><p>ä¸‰åå…«ï¼šrefå‚æ•°å’Œoutå‚æ•°æ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p><p>refå’Œoutå‚æ•°çš„æ•ˆæœä¸€æ ·ï¼Œéƒ½æ˜¯é€šè¿‡å…³é”®å­—æ‰¾åˆ°å®šä¹‰åœ¨ä¸»å‡½æ•°é‡Œé¢çš„å˜é‡çš„å†…å­˜åœ°å€ï¼Œå¹¶é€šè¿‡æ–¹æ³•ä½“å†…çš„è¯­æ³•æ”¹å˜å®ƒçš„å¤§å°ã€‚ä¸åŒç‚¹å°±æ˜¯è¾“å‡ºå‚æ•°å¿…é¡»å¯¹å‚æ•°è¿›è¡Œåˆå§‹åŒ–ã€‚refå¿…é¡»åˆå§‹åŒ–ï¼Œout å‚æ•°å¿…é¡»åœ¨å‡½æ•°é‡Œèµ‹å€¼ã€‚refå‚æ•°æ˜¯å¼•ç”¨ï¼Œoutå‚æ•°ä¸ºè¾“å‡ºå‚æ•°ã€‚</p><p>ä¸‰åä¹ï¼šC#çš„å§”æ‰˜æ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä½•ç”¨å¤„ï¼Ÿ</p><p>å§”æ‰˜ç±»ä¼¼äºä¸€ç§å®‰å…¨çš„æŒ‡é’ˆå¼•ç”¨ï¼Œåœ¨ä½¿ç”¨å®ƒæ—¶æ˜¯å½“åšç±»æ¥çœ‹å¾…è€Œä¸æ˜¯ä¸€ä¸ªæ–¹æ³•ï¼Œç›¸å½“äºå¯¹ä¸€ç»„æ–¹æ³•çš„åˆ—è¡¨çš„å¼•ç”¨ã€‚ç”¨å¤„ï¼šä½¿ç”¨å§”æ‰˜ä½¿ç¨‹åºå‘˜å¯ä»¥å°†æ–¹æ³•å¼•ç”¨å°è£…åœ¨å§”æ‰˜å¯¹è±¡å†…ã€‚ç„¶åå¯ä»¥å°†è¯¥å§”æ‰˜å¯¹è±¡ä¼ é€’ç»™å¯è°ƒç”¨æ‰€å¼•ç”¨æ–¹æ³•çš„ä»£ç ï¼Œè€Œä¸å¿…åœ¨ç¼–è¯‘æ—¶çŸ¥é“å°†è°ƒç”¨å“ªä¸ªæ–¹æ³•ã€‚ä¸Cæˆ–C++ä¸­çš„å‡½æ•°æŒ‡é’ˆä¸åŒï¼Œå§”æ‰˜æ˜¯é¢å‘å¯¹è±¡ï¼Œè€Œä¸”æ˜¯ç±»å‹å®‰å…¨çš„ã€‚</p><p>å››åï¼šC#ä¸­çš„æ’åºæ–¹å¼æœ‰å“ªäº›ï¼Ÿ</p><p>é€‰æ‹©æ’åºï¼Œå†’æ³¡æ’åºï¼Œå¿«é€Ÿæ’åºï¼Œæ’å…¥æ’åºï¼Œå¸Œå°”æ’åºï¼Œå½’å¹¶æ’åº</p><p>å››åä¸€ï¼šå°„çº¿æ£€æµ‹ç¢°æ’ç‰©çš„åŸç†æ˜¯ï¼Ÿ</p><p>å°„çº¿æ˜¯3Dä¸–ç•Œä¸­ä¸€ä¸ªç‚¹å‘ä¸€ä¸ªæ–¹å‘å‘å°„çš„ä¸€æ¡æ— ç»ˆç‚¹çš„çº¿ï¼Œåœ¨å‘å°„è½¨è¿¹ä¸­ä¸å…¶ä»–ç‰©ä½“å‘ç”Ÿç¢°æ’æ—¶ï¼Œå®ƒå°†åœæ­¢å‘å°„ ã€‚</p><p>å››åäºŒï¼šUnityä¸­ï¼Œç…§ç›¸æœºçš„Clipping Planesçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿè°ƒæ•´Nearã€Fareä¸¤ä¸ªå€¼æ—¶ï¼Œåº”è¯¥æ³¨æ„ä»€ä¹ˆï¼Ÿ</p><p>å‰ªè£å¹³é¢ ã€‚ä»ç›¸æœºåˆ°å¼€å§‹æ¸²æŸ“å’Œåœæ­¢æ¸²æŸ“ä¹‹é—´çš„è·ç¦»ã€‚</p><p>å››åä¸‰ï¼šå¦‚ä½•è®©å·²ç»å­˜åœ¨çš„GameObjectåœ¨LoadLevelåä¸è¢«å¸è½½æ‰ï¼Ÿ</p><p>void Awake() { DontDestroyOnLoad(transform.gameObject); }<br>å››åå››ï¼šè¯·ç®€è¿°GCï¼ˆåƒåœ¾å›æ”¶ï¼‰äº§ç”Ÿçš„åŸå› ï¼Œå¹¶æè¿°å¦‚ä½•é¿å…ï¼Ÿ</p><p>GCå›æ”¶å †ä¸Šçš„å†…å­˜</p><p>é¿å…ï¼š1.å‡å°‘newäº§ç”Ÿå¯¹è±¡çš„æ¬¡æ•°</p><p>2.ä½¿ç”¨å…¬ç”¨çš„å¯¹è±¡ï¼ˆé™æ€æˆå‘˜ï¼‰</p><p>3.å°†Stringæ¢ä¸ºStringBuilder</p><p>å››åäº”ï¼šåå°„çš„å®ç°åŸç†ï¼Ÿ</p><p>å®¡æŸ¥å…ƒæ•°æ®å¹¶æ”¶é›†å…³äºå®ƒçš„ç±»å‹ä¿¡æ¯çš„èƒ½åŠ›ã€‚å®ç°åŸç†ï¼šåœ¨è¿è¡Œæ—¶æ ¹æ®ç¨‹åºé›†åŠå…¶ä¸­çš„ç±»å‹å¾—åˆ°å…ƒæ•°æ®ã€‚ä¸‹é¢æ˜¯å®ç°æ­¥éª¤ï¼š</p><p>å¯¼å…¥using System.Reflection;</p><p>Assembly.Load(â€œç¨‹åºé›†â€)åŠ è½½ç¨‹åºé›†,è¿”å›ç±»å‹æ˜¯ä¸€ä¸ªAssembly</p><p>å¾—åˆ°ç¨‹åºé›†ä¸­æ‰€æœ‰ç±»çš„åç§°</p><p>foreach (Type type in assembly.GetTypes()) { string t = type.Name; }<br>4. Type type = assembly.GetType(â€œç¨‹åºé›†.ç±»åâ€);è·å–å½“å‰ç±»çš„ç±»å‹</p><p>Activator.CreateInstance(type); åˆ›å»ºæ­¤ç±»å‹å®ä¾‹</p><p>MethodInfo mInfo = type.GetMethod(â€œæ–¹æ³•åâ€);è·å–å½“å‰æ–¹æ³•</p><p>m.Info.Invoke(null,æ–¹æ³•å‚æ•°);</p><p>å››åå…­ï¼šç®€è¿°å››å…ƒæ•°çš„ä½œç”¨ï¼Œå››å…ƒæ•°å¯¹æ¬§æ‹‰è§’çš„ä¼˜ç‚¹ï¼Ÿ</p><p>å››å…ƒæ•°ç”¨äºè¡¨ç¤ºæ—‹è½¬</p><p>ç›¸å¯¹æ¬§æ‹‰è§’çš„ä¼˜ç‚¹ï¼š</p><p>1.èƒ½è¿›è¡Œå¢é‡æ—‹è½¬</p><p>2.é¿å…ä¸‡å‘é”</p><p>3.ç»™å®šæ–¹ä½çš„è¡¨è¾¾æ–¹å¼æœ‰ä¸¤ç§ï¼Œäº’ä¸ºè´Ÿï¼ˆæ¬§æ‹‰è§’æœ‰æ— æ•°ç§è¡¨è¾¾æ–¹å¼ï¼‰</p><p>å››åä¸ƒï¼šç§»åŠ¨ç›¸æœºåŠ¨ä½œåœ¨å“ªä¸ªå‡½æ•°é‡Œï¼Œä¸ºä»€ä¹ˆåœ¨è¿™ä¸ªå‡½æ•°é‡Œï¼Ÿ</p><p>LateUpdateï¼Œæ˜¯åœ¨æ‰€æœ‰çš„updateç»“æŸåæ‰è°ƒç”¨ï¼Œæ¯”è¾ƒé€‚åˆç”¨äºå‘½ä»¤è„šæœ¬çš„æ‰§è¡Œã€‚å®˜ç½‘ä¸Šä¾‹å­æ˜¯æ‘„åƒæœºçš„è·Ÿéšï¼Œéƒ½æ˜¯æ‰€æœ‰çš„updateæ“ä½œå®Œæ‰è¿›è¡Œæ‘„åƒæœºçš„è·Ÿè¿›ï¼Œä¸ç„¶å°±æœ‰å¯èƒ½å‡ºç°æ‘„åƒæœºå·²ç»æ¨è¿›äº†ï¼Œä½†æ˜¯è§†è§’é‡Œè¿˜æœªæœ‰è§’è‰²çš„ç©ºå¸§å‡ºç°ã€‚</p><p>å››åå…«ï¼šGPUçš„å·¥ä½œåŸç†</p><p>ç®€è€Œè¨€ä¹‹ï¼ŒGPUçš„å›¾å½¢ï¼ˆå¤„ç†ï¼‰æµæ°´çº¿å®Œæˆå¦‚ä¸‹çš„å·¥ä½œï¼šï¼ˆå¹¶ä¸ä¸€å®šæ˜¯æŒ‰ç…§å¦‚ä¸‹é¡ºåºï¼‰ é¡¶ç‚¹å¤„ç†ï¼šè¿™é˜¶æ®µGPUè¯»å–æè¿°3Då›¾å½¢å¤–è§‚çš„é¡¶ç‚¹æ•°æ®å¹¶æ ¹æ®é¡¶ç‚¹æ•°æ®ç¡®å®š3Då›¾å½¢çš„å½¢çŠ¶åŠä½ç½®å…³ç³»ï¼Œå»ºç«‹èµ·3Då›¾å½¢çš„éª¨æ¶ã€‚åœ¨æ”¯æŒDX8å’ŒDX9è§„æ ¼çš„GPUä¸­ï¼Œè¿™äº›å·¥ä½œç”±ç¡¬ä»¶å®ç°çš„Vertex Shaderï¼ˆå®šç‚¹ç€è‰²å™¨ï¼‰å®Œæˆã€‚ å…‰æ …åŒ–è®¡ç®—ï¼šæ˜¾ç¤ºå™¨å®é™…æ˜¾ç¤ºçš„å›¾åƒæ˜¯ç”±åƒç´ ç»„æˆçš„ï¼Œæˆ‘ä»¬éœ€è¦å°†ä¸Šé¢ç”Ÿæˆçš„å›¾å½¢ä¸Šçš„ç‚¹å’Œçº¿é€šè¿‡ä¸€å®šçš„ç®—æ³•è½¬æ¢åˆ°ç›¸åº”çš„åƒç´ ç‚¹ã€‚æŠŠä¸€ä¸ªçŸ¢é‡å›¾å½¢è½¬æ¢ä¸ºä¸€ç³»åˆ—åƒç´ ç‚¹çš„è¿‡ç¨‹å°±ç§°ä¸ºå…‰æ …åŒ–ã€‚ä¾‹å¦‚ï¼Œä¸€æ¡æ•°å­¦è¡¨ç¤ºçš„æ–œçº¿æ®µï¼Œæœ€ç»ˆè¢«è½¬åŒ–æˆé˜¶æ¢¯çŠ¶çš„è¿ç»­åƒç´ ç‚¹ã€‚ çº¹ç†å¸–å›¾ï¼šé¡¶ç‚¹å•å…ƒç”Ÿæˆçš„å¤šè¾¹å½¢åªæ„æˆäº†3Dç‰©ä½“çš„è½®å»“ï¼Œè€Œçº¹ç†æ˜ å°„ï¼ˆtexture mappingï¼‰å·¥ä½œå®Œæˆå¯¹å¤šå˜å½¢è¡¨é¢çš„å¸–å›¾ï¼Œé€šä¿—çš„è¯´ï¼Œå°±æ˜¯å°†å¤šè¾¹å½¢çš„è¡¨é¢è´´ä¸Šç›¸åº”çš„å›¾ç‰‡ï¼Œä»è€Œç”Ÿæˆâ€œçœŸå®â€çš„å›¾å½¢ã€‚TMUï¼ˆTexture mapping unitï¼‰å³æ˜¯ç”¨æ¥å®Œæˆæ­¤é¡¹å·¥ä½œã€‚ åƒç´ å¤„ç†ï¼šè¿™é˜¶æ®µï¼ˆåœ¨å¯¹æ¯ä¸ªåƒç´ è¿›è¡Œå…‰æ …åŒ–å¤„ç†æœŸé—´ï¼‰GPUå®Œæˆå¯¹åƒç´ çš„è®¡ç®—å’Œå¤„ç†ï¼Œä»è€Œç¡®å®šæ¯ä¸ªåƒç´ çš„æœ€ç»ˆå±æ€§ã€‚åœ¨æ”¯æŒDX8å’ŒDX9è§„æ ¼çš„GPUä¸­ï¼Œè¿™äº›å·¥ä½œç”±ç¡¬ä»¶å®ç°çš„Pixel Shaderï¼ˆåƒç´ ç€è‰²å™¨ï¼‰å®Œæˆã€‚ æœ€ç»ˆè¾“å‡ºï¼šç”±ROPï¼ˆå…‰æ …åŒ–å¼•æ“ï¼‰æœ€ç»ˆå®Œæˆåƒç´ çš„è¾“å‡ºï¼Œ1å¸§æ¸²æŸ“å®Œæ¯•åï¼Œè¢«é€åˆ°æ˜¾å­˜å¸§ç¼“å†²åŒºã€‚</p><p>æ€»ç»“ï¼šGPUçš„å·¥ä½œé€šä¿—çš„æ¥è¯´å°±æ˜¯å®Œæˆ3Då›¾å½¢çš„ç”Ÿæˆï¼Œå°†å›¾å½¢æ˜ å°„åˆ°ç›¸åº”çš„åƒç´ ç‚¹ä¸Šï¼Œå¯¹æ¯ä¸ªåƒç´ è¿›è¡Œè®¡ç®—ç¡®å®šæœ€ç»ˆé¢œè‰²å¹¶å®Œæˆè¾“å‡ºã€‚</p><p>å››åä¹ï¼šä»€ä¹ˆæ˜¯æ¸²æŸ“ç®¡é“ï¼Ÿ</p><p>æ˜¯æŒ‡åœ¨æ˜¾ç¤ºå™¨ä¸Šä¸ºäº†æ˜¾ç¤ºå‡ºå›¾åƒè€Œç»è¿‡çš„ä¸€ç³»åˆ—å¿…è¦æ“ä½œã€‚ æ¸²æŸ“ç®¡é“ä¸­çš„å¾ˆå¤šæ­¥éª¤ï¼Œéƒ½è¦å°†å‡ ä½•ç‰©ä½“ä»ä¸€ä¸ªåæ ‡ç³»ä¸­å˜æ¢åˆ°å¦ä¸€ä¸ªåæ ‡ç³»ä¸­å»ã€‚ä¸»è¦æ­¥éª¤æœ‰ï¼š</p><p>æœ¬åœ°åæ ‡-&gt;è§†å›¾åæ ‡-&gt;èƒŒé¢è£å‰ª-&gt;å…‰ç…§-&gt;è£å‰ª-&gt;æŠ•å½±-&gt;è§†å›¾å˜æ¢-&gt;å…‰æ …åŒ–</p><p>äº”åï¼šå¦‚ä½•ä¼˜åŒ–å†…å­˜ï¼Ÿ</p><p>æœ‰å¾ˆå¤šç§æ–¹å¼ï¼Œä¾‹å¦‚</p><p>1.å‹ç¼©è‡ªå¸¦ç±»åº“ï¼›</p><p>2.å°†æš‚æ—¶ä¸ç”¨çš„ä»¥åè¿˜éœ€è¦ä½¿ç”¨çš„ç‰©ä½“éšè—èµ·æ¥è€Œä¸æ˜¯ç›´æ¥Destroyæ‰ï¼›</p><p>3.é‡Šæ”¾AssetBundleå ç”¨çš„èµ„æºï¼›</p><p>4.é™ä½æ¨¡å‹çš„ç‰‡é¢æ•°ï¼Œé™ä½æ¨¡å‹çš„éª¨éª¼æ•°é‡ï¼Œé™ä½è´´å›¾çš„å¤§å°ï¼›</p><p>5.ä½¿ç”¨å…‰ç…§è´´å›¾ï¼Œä½¿ç”¨å¤šå±‚æ¬¡ç»†èŠ‚(LOD)ï¼Œä½¿ç”¨ç€è‰²å™¨(Shader)ï¼Œä½¿ç”¨é¢„è®¾(Prefab)ã€‚</p><p>6.ä»£ç ä¸­å°‘äº§ç”Ÿä¸´æ—¶å˜é‡</p><p>äº”åä¸€ï¼šåŠ¨æ€åŠ è½½èµ„æºçš„æ–¹å¼ï¼Ÿä»–ä»¬ä¹‹é—´çš„åŒºåˆ«</p><p>1.Resources.Load();</p><p>2.AssetBundle</p><p>åŒºåˆ«å‚è€ƒ</p><p>äº”åäºŒï¼šè¯·æè¿°æ¸¸æˆåŠ¨ç”»æœ‰å“ªå‡ ç§ï¼Œä»¥åŠå…¶åŸç†ï¼Ÿ</p><p>ä¸»è¦æœ‰å…³èŠ‚åŠ¨ç”»ã€éª¨éª¼åŠ¨ç”»ã€å•ä¸€ç½‘æ ¼æ¨¡å‹åŠ¨ç”»(å…³é”®å¸§åŠ¨ç”»)ã€‚</p><p>å…³èŠ‚åŠ¨ç”»ï¼šæŠŠè§’è‰²åˆ†æˆè‹¥å¹²ç‹¬ç«‹éƒ¨åˆ†ï¼Œä¸€ä¸ªéƒ¨åˆ†å¯¹åº”ä¸€ä¸ªç½‘æ ¼æ¨¡å‹ï¼Œéƒ¨åˆ†çš„åŠ¨ç”»è¿æ¥æˆä¸€ä¸ªæ•´ä½“çš„åŠ¨ç”»ï¼Œè§’è‰²æ¯”è¾ƒçµæ´»ï¼ŒQuake2ä¸­ä½¿ç”¨è¿™ç§åŠ¨ç”»ï¼›</p><p>éª¨éª¼åŠ¨ç”»ï¼Œå¹¿æ³›åº”ç”¨çš„åŠ¨ç”»æ–¹å¼ï¼Œé›†æˆäº†ä»¥ä¸Šä¸¤ä¸ªæ–¹å¼çš„ä¼˜ç‚¹ï¼Œéª¨éª¼æŒ‰è§’è‰²ç‰¹ç‚¹ç»„æˆä¸€å®šçš„å±‚æ¬¡ç»“æ„ï¼Œæœ‰å…³èŠ‚ç›¸è¿ï¼Œå¯åšç›¸å¯¹è¿åŠ¨ï¼Œçš®è‚¤ä½œä¸ºå•ä¸€ç½‘æ ¼è’™åœ¨éª¨éª¼ä¹‹å¤–ï¼Œå†³å®šè§’è‰²çš„å¤–è§‚ï¼›</p><p>å•ä¸€ç½‘æ ¼æ¨¡å‹åŠ¨ç”»ç”±ä¸€ä¸ªå®Œæ•´çš„ç½‘æ ¼æ¨¡å‹æ„æˆï¼Œåœ¨åŠ¨ç”»åºåˆ—çš„å…³é”®å¸§é‡Œè®°å½•å„ä¸ªé¡¶ç‚¹çš„åŸä½ç½®åŠå…¶æ”¹å˜é‡ï¼Œç„¶åæ’å€¼è¿ç®—å®ç°åŠ¨ç”»æ•ˆæœï¼Œè§’è‰²åŠ¨ç”»è¾ƒçœŸå®ã€‚</p><p>äº”åä¸‰ï¼šalpha blendå·¥ä½œåŸç†</p><p>Alpha Blend å®ç°é€æ˜æ•ˆæœï¼Œä¸è¿‡åªèƒ½é’ˆå¯¹æŸå—åŒºåŸŸè¿›è¡Œalphaæ“ä½œï¼Œé€æ˜åº¦å¯è®¾ã€‚</p><p>äº”åå››ï¼šå†™å‡ºå…‰ç…§è®¡ç®—ä¸­çš„diffuseçš„è®¡ç®—å…¬å¼</p><p>diffuse = Kd x colorLight x max(N*L,0)ï¼›Kd æ¼«åå°„ç³»æ•°ã€colorLight å…‰çš„é¢œè‰²ã€N å•ä½æ³•çº¿å‘é‡ã€L ç”±ç‚¹æŒ‡å‘å…‰æºçš„å•ä½å‘é‡ã€å…¶ä¸­Nä¸Lç‚¹ä¹˜ï¼Œå¦‚æœç»“æœå°äºç­‰äº0ï¼Œåˆ™æ¼«åå°„ä¸º0ã€‚</p><p>äº”åäº”ï¼šä¸¤ç§é˜´å½±åˆ¤æ–­çš„æ–¹æ³•ã€å·¥ä½œåŸç†ã€‚</p><p>æœ¬å½±å’ŒåŠå½±ï¼šå‚è€ƒæœ¬å½±å’ŒåŠå½±</p><p>æœ¬å½±ï¼šæ™¯ç‰©è¡¨é¢ä¸Šé‚£äº›æ²¡æœ‰è¢«å…‰æºç›´æ¥ç…§å°„çš„åŒºåŸŸï¼ˆå…¨é»‘çš„è½®å»“åˆ†æ˜çš„åŒºåŸŸï¼‰ã€‚</p><p>åŠå½±ï¼šæ™¯ç‰©è¡¨é¢ä¸Šé‚£äº›è¢«æŸäº›ç‰¹å®šå…‰æºç›´æ¥ç…§å°„ä½†å¹¶éè¢«æ‰€æœ‰ç‰¹å®šå…‰æºç›´æ¥ç…§å°„çš„åŒºåŸŸï¼ˆåŠæ˜åŠæš—åŒºåŸŸï¼‰</p><p>å·¥ä½œåŸç†ï¼šä»å…‰æºå¤„å‘ç‰©ä½“çš„æ‰€æœ‰å¯è§é¢æŠ•å°„å…‰çº¿ï¼Œå°†è¿™äº›é¢æŠ•å½±åˆ°åœºæ™¯ä¸­å¾—åˆ°æŠ•å½±é¢ï¼Œå†å°†è¿™äº›æŠ•å½±é¢ä¸åœºæ™¯ä¸­çš„å…¶ä»–å¹³é¢æ±‚äº¤å¾—å‡ºé˜´å½±å¤šè¾¹å½¢ï¼Œä¿å­˜è¿™äº›é˜´å½±å¤šè¾¹å½¢ä¿¡æ¯ï¼Œç„¶åå†æŒ‰è§†ç‚¹ä½ç½®å¯¹åœºæ™¯è¿›è¡Œç›¸åº”å¤„ç†å¾—åˆ°æ‰€è¦æ±‚çš„è§†å›¾ï¼ˆåˆ©ç”¨ç©ºé—´æ¢æ—¶é—´ï¼Œæ¯æ¬¡åªéœ€ä¾æ®è§†ç‚¹ä½ç½®è¿›è¡Œä¸€æ¬¡é˜´å½±è®¡ç®—å³å¯ï¼Œçœå»äº†ä¸€æ¬¡æ¶ˆéšè¿‡ç¨‹ï¼‰</p><p>äº”åå…­ï¼šVertex Shaderæ˜¯ä»€ä¹ˆï¼Œæ€ä¹ˆè®¡ç®—ï¼Ÿ</p><p>é¡¶ç‚¹ç€è‰²å™¨æ˜¯ä¸€æ®µæ‰§è¡Œåœ¨GPUä¸Šçš„ç¨‹åºï¼Œç”¨æ¥å–ä»£fixed pipelineä¸­çš„transformationå’Œlightingï¼ŒVertex Shaderä¸»è¦æ“ä½œé¡¶ç‚¹ã€‚</p><p>Vertex Shaderå¯¹è¾“å…¥é¡¶ç‚¹å®Œæˆäº†ä»local spaceåˆ°homogeneous spaceï¼ˆé½æ¬¡ç©ºé—´ï¼‰çš„å˜æ¢è¿‡ç¨‹ï¼Œhomogeneous spaceå³projection spaceçš„ä¸‹ä¸€ä¸ªspaceã€‚åœ¨è¿™å…¶é—´å…±æœ‰world transformation, view transformationå’Œprojection transformationåŠlightingå‡ ä¸ªè¿‡ç¨‹ã€‚</p><p>äº”åä¸ƒï¼šä¸‹åˆ—ä»£ç åœ¨è¿è¡Œä¸­ä¼šäº§ç”Ÿå‡ ä¸ªä¸´æ—¶å¯¹è±¡ï¼Ÿ</p><p>string a = new string(â€œabcâ€); a = (a.ToUpper() + â€œ123â€).Substring(0, 2);<br>åœ¨C#ä¸­ç¬¬ä¸€è¡Œæ˜¯ä¼šæŠ¥é”™çš„ï¼ˆJavaä¸­å€’æ˜¯å¯è¡Œï¼‰ã€‚</p><p>åº”è¯¥è¿™æ ·åˆå§‹åŒ–ï¼š</p><p>string b = new string(new char[]{â€˜aâ€™,â€™bâ€™,â€™câ€™});<br>ç­”æ¡ˆä¸ºï¼š5ä¸ªä¸´æ—¶å¯¹è±¡</p><p>äº”åå…«ï¼šä¸‹åˆ—ä»£ç åœ¨è¿è¡Œä¸­ä¼šå‘ç”Ÿä»€ä¹ˆé—®é¢˜ï¼Ÿå¦‚ä½•é¿å…ï¼Ÿ</p><p>List ls = new List(new int[] { 1, 2, 3, 4, 5 }); foreach (int item in ls) { Console.WriteLine(item * item); ls.Remove(item); }<br>äº§ç”Ÿè¿è¡Œæ—¶é”™è¯¯ï¼Œåœ¨ ls.Remove(item)è¿™è¡Œï¼Œå› ä¸ºforeachæ˜¯åªè¯»çš„ã€‚ä¸èƒ½ä¸€è¾¹éå†ä¸€è¾¹ä¿®æ”¹ã€‚</p><p>äº”åä¹ï¼šUnity3Dæ˜¯å¦æ”¯æŒå†™æˆå¤šçº¿ç¨‹ç¨‹åºï¼Ÿå¦‚æœæ”¯æŒçš„è¯éœ€è¦æ³¨æ„ä»€ä¹ˆï¼Ÿ</p><p>ä»…èƒ½ä»ä¸»çº¿ç¨‹ä¸­è®¿é—®Unity3Dçš„ç»„ä»¶ï¼Œå¯¹è±¡å’ŒUnity3Dç³»ç»Ÿè°ƒç”¨</p><p>æ”¯æŒï¼šå¦‚æœåŒæ—¶ä½ è¦å¤„ç†å¾ˆå¤šäº‹æƒ…æˆ–è€…ä¸Unityçš„å¯¹è±¡äº’åŠ¨å°å¯ä»¥ç”¨thread,å¦åˆ™ä½¿ç”¨coroutineã€‚</p><p>æ³¨æ„ï¼šC#ä¸­æœ‰lockè¿™ä¸ªå…³é”®å­—,ä»¥ç¡®ä¿åªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥åœ¨ç‰¹å®šæ—¶é—´å†…è®¿é—®ç‰¹å®šçš„å¯¹è±¡</p><p>å…­åï¼šUnity3Dçš„åç¨‹å’ŒC#çº¿ç¨‹ä¹‹é—´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</p><p>å¤šçº¿ç¨‹ç¨‹åºåŒæ—¶è¿è¡Œå¤šä¸ªçº¿ç¨‹ ï¼Œè€Œåœ¨ä»»ä¸€æŒ‡å®šæ—¶åˆ»åªæœ‰ä¸€ä¸ªåç¨‹åœ¨è¿è¡Œï¼Œå¹¶ä¸”è¿™ä¸ªæ­£åœ¨è¿è¡Œçš„ååŒç¨‹åºåªåœ¨å¿…è¦æ—¶æ‰è¢«æŒ‚èµ·ã€‚é™¤ä¸»çº¿ç¨‹ä¹‹å¤–çš„çº¿ç¨‹æ— æ³•è®¿é—®Unity3Dçš„å¯¹è±¡ã€ç»„ä»¶ã€æ–¹æ³•ã€‚</p><p>Unity3dæ²¡æœ‰å¤šçº¿ç¨‹çš„æ¦‚å¿µï¼Œä¸è¿‡unityä¹Ÿç»™æˆ‘ä»¬æä¾›äº†StartCoroutineï¼ˆååŒç¨‹åºï¼‰å’ŒLoadLevelAsyncï¼ˆå¼‚æ­¥åŠ è½½å…³å¡ï¼‰åå°åŠ è½½åœºæ™¯çš„æ–¹æ³•ã€‚ StartCoroutineä¸ºä»€ä¹ˆå«ååŒç¨‹åºå‘¢ï¼Œæ‰€è°“ååŒï¼Œå°±æ˜¯å½“ä½ åœ¨StartCoroutineçš„å‡½æ•°ä½“é‡Œå¤„ç†ä¸€æ®µä»£ç æ—¶ï¼Œåˆ©ç”¨yieldè¯­å¥ç­‰å¾…æ‰§è¡Œç»“æœï¼Œè¿™æœŸé—´ä¸å½±å“ä¸»ç¨‹åºçš„ç»§ç»­æ‰§è¡Œï¼Œå¯ä»¥ååŒå·¥ä½œã€‚</p><p>å…­åä¸€ï¼šçŸ©é˜µç›¸ä¹˜çš„æ„ä¹‰åŠæ³¨æ„ç‚¹</p><p>ç”¨äºè¡¨ç¤ºçº¿æ€§å˜æ¢ï¼šæ—‹è½¬ã€ç¼©æ”¾ã€æŠ•å½±ã€å¹³ç§»ã€ä»¿å°„</p><p>æ³¨æ„çŸ©é˜µçš„è •å˜ï¼šè¯¯å·®çš„ç§¯ç´¯</p><p>å…­åäºŒï¼šä¸ºä»€ä¹ˆdynamic fontåœ¨unicodeç¯å¢ƒä¸‹ä¼˜äºstatic font</p><p>Unicodeæ˜¯å›½é™…ç»„ç»‡åˆ¶å®šçš„å¯ä»¥å®¹çº³ä¸–ç•Œä¸Šæ‰€æœ‰æ–‡å­—å’Œç¬¦å·çš„å­—ç¬¦ç¼–ç æ–¹æ¡ˆã€‚</p><p>ä½¿ç”¨åŠ¨æ€å­—ä½“æ—¶ï¼ŒUnityå°†ä¸ä¼šé¢„å…ˆç”Ÿæˆä¸€ä¸ªä¸æ‰€æœ‰å­—ä½“çš„å­—ç¬¦çº¹ç†ã€‚å½“éœ€è¦æ”¯æŒäºšæ´²è¯­è¨€æˆ–è€…è¾ƒå¤§çš„å­—ä½“çš„æ—¶å€™ï¼Œè‹¥ä½¿ç”¨æ­£å¸¸çº¹ç†ï¼Œåˆ™å­—ä½“çš„çº¹ç†å°†éå¸¸å¤§ã€‚</p><p>å…­åä¸‰ï¼šå½“ä¸€ä¸ªç»†å°çš„é«˜é€Ÿç‰©ä½“æ’å‘å¦ä¸€ä¸ªè¾ƒå¤§çš„ç‰©ä½“æ—¶ï¼Œä¼šå‡ºç°ä»€ä¹ˆæƒ…å†µï¼Ÿå¦‚ä½•é¿å…ï¼Ÿ</p><p>ç©¿é€ï¼ˆç¢°æ’æ£€æµ‹å¤±è´¥ï¼‰</p><p>å…­åå››ï¼šè¯·ç®€è¿°OnBecameVisibleåŠOnBecameInvisibleçš„å‘ç”Ÿæ—¶æœºï¼Œä»¥åŠè¿™ä¸€å¯¹å›è°ƒå‡½æ•°çš„æ„ä¹‰ï¼Ÿ</p><p>å½“ç‰©ä½“æ˜¯å¦å¯è§åˆ‡æ¢ä¹‹æ—¶ã€‚å¯ä»¥ç”¨äºåªéœ€è¦åœ¨ç‰©ä½“å¯è§æ—¶æ‰è¿›è¡Œçš„è®¡ç®—ã€‚</p><p>å…­åäº”ï¼šä»€ä¹ˆå«åŠ¨æ€åˆæ‰¹ï¼Ÿè·Ÿé™æ€åˆæ‰¹æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p><p>å¦‚æœåŠ¨æ€ç‰©ä½“å…±ç”¨ç€ç›¸åŒçš„æè´¨ï¼Œé‚£ä¹ˆUnityä¼šè‡ªåŠ¨å¯¹è¿™äº›ç‰©ä½“è¿›è¡Œæ‰¹å¤„ç†ã€‚åŠ¨æ€æ‰¹å¤„ç†æ“ä½œæ˜¯è‡ªåŠ¨å®Œæˆçš„ï¼Œå¹¶ä¸éœ€è¦ä½ è¿›è¡Œé¢å¤–çš„æ“ä½œã€‚</p><p>åŒºåˆ«ï¼šåŠ¨æ€æ‰¹å¤„ç†ä¸€åˆ‡éƒ½æ˜¯è‡ªåŠ¨çš„ï¼Œä¸éœ€è¦åšä»»ä½•æ“ä½œï¼Œè€Œä¸”ç‰©ä½“æ˜¯å¯ä»¥ç§»åŠ¨çš„ï¼Œä½†æ˜¯é™åˆ¶å¾ˆå¤šã€‚é™æ€æ‰¹å¤„ç†ï¼šè‡ªç”±åº¦å¾ˆé«˜ï¼Œé™åˆ¶å¾ˆå°‘ï¼Œç¼ºç‚¹å¯èƒ½ä¼šå ç”¨æ›´å¤šçš„å†…å­˜ï¼Œè€Œä¸”ç»è¿‡é™æ€æ‰¹å¤„ç†åçš„æ‰€æœ‰ç‰©ä½“éƒ½ä¸å¯ä»¥å†ç§»åŠ¨äº†ã€‚</p><p>å‚è€ƒ</p><p>å…­åå…­ï¼šç®€è¿°StringBuilderå’ŒStringçš„åŒºåˆ«ï¼Ÿ</p><p>Stringæ˜¯å­—ç¬¦ä¸²å¸¸é‡ã€‚</p><p>StringBufferæ˜¯å­—ç¬¦ä¸²å˜é‡ ï¼Œçº¿ç¨‹å®‰å…¨ã€‚</p><p>StringBuilderæ˜¯å­—ç¬¦ä¸²å˜é‡ï¼Œçº¿ç¨‹ä¸å®‰å…¨ã€‚</p><p>Stringç±»å‹æ˜¯ä¸ªä¸å¯å˜çš„å¯¹è±¡ï¼Œå½“æ¯æ¬¡å¯¹Stringè¿›è¡Œæ”¹å˜æ—¶éƒ½éœ€è¦ç”Ÿæˆä¸€ä¸ªæ–°çš„Stringå¯¹è±¡ï¼Œç„¶åå°†æŒ‡é’ˆæŒ‡å‘ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œå¦‚æœåœ¨ä¸€ä¸ªå¾ªç¯é‡Œé¢ï¼Œä¸æ–­çš„æ”¹å˜ä¸€ä¸ªå¯¹è±¡ï¼Œå°±è¦ä¸æ–­çš„ç”Ÿæˆæ–°çš„å¯¹è±¡ï¼Œæ‰€ä»¥æ•ˆç‡å¾ˆä½ï¼Œå»ºè®®åœ¨ä¸æ–­æ›´æ”¹Stringå¯¹è±¡çš„åœ°æ–¹ä¸è¦ä½¿ç”¨Stringç±»å‹ã€‚</p><p>StringBuilderå¯¹è±¡åœ¨åšå­—ç¬¦ä¸²è¿æ¥æ“ä½œæ—¶æ˜¯åœ¨åŸæ¥çš„å­—ç¬¦ä¸²ä¸Šè¿›è¡Œä¿®æ”¹ï¼Œæ”¹å–„äº†æ€§èƒ½ã€‚è¿™ä¸€ç‚¹æˆ‘ä»¬å¹³æ—¶ä½¿ç”¨ä¸­ä¹Ÿè®¸éƒ½çŸ¥é“ï¼Œè¿æ¥æ“ä½œé¢‘ç¹çš„æ—¶å€™ï¼Œä½¿ç”¨StringBuilderå¯¹è±¡ã€‚</p><p>å…­åä¸ƒï¼šUnity3D Shaderåˆ†å“ªå‡ ç§ï¼Œæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p><p>è¡¨é¢ç€è‰²å™¨çš„æŠ½è±¡å±‚æ¬¡æ¯”è¾ƒé«˜ï¼Œå®ƒå¯ä»¥è½»æ¾åœ°ä»¥ç®€æ´æ–¹å¼å®ç°å¤æ‚ç€è‰²ã€‚è¡¨é¢ç€è‰²å™¨å¯åŒæ—¶åœ¨å‰å‘æ¸²æŸ“åŠå»¶è¿Ÿæ¸²æŸ“æ¨¡å¼ä¸‹æ­£å¸¸å·¥ä½œã€‚</p><p>é¡¶ç‚¹ç‰‡æ®µç€è‰²å™¨å¯ä»¥éå¸¸çµæ´»åœ°å®ç°éœ€è¦çš„æ•ˆæœï¼Œä½†æ˜¯éœ€è¦ç¼–å†™æ›´å¤šçš„ä»£ç ï¼Œå¹¶ä¸”å¾ˆéš¾ä¸Unityçš„æ¸²æŸ“ç®¡çº¿å®Œç¾é›†æˆã€‚</p><p>å›ºå®šåŠŸèƒ½ç®¡çº¿ç€è‰²å™¨å¯ä»¥ä½œä¸ºå‰ä¸¤ç§ç€è‰²å™¨çš„å¤‡ç”¨é€‰æ‹©ï¼Œå½“ç¡¬ä»¶æ— æ³•è¿è¡Œé‚£äº›é…·ç‚«Shaderçš„æ—¶ï¼Œè¿˜å¯ä»¥é€šè¿‡å›ºå®šåŠŸèƒ½ç®¡çº¿ç€è‰²å™¨æ¥ç»˜åˆ¶å‡ºä¸€äº›åŸºæœ¬çš„å†…å®¹ã€‚</p><p>å…­åå…«ï¼šå·²çŸ¥strcpyå‡½æ•°çš„åŸå‹æ˜¯ï¼šchar * strcpy(char * strDest,const char * strSrc); 1.ä¸è°ƒç”¨åº“å‡½æ•°ï¼Œå®ç°strcpyå‡½æ•°ã€‚2.è§£é‡Šä¸ºä»€ä¹ˆè¦è¿”å›char *</p><p>char * strcpy(char * strDest,const char * strSrc)<br>{<br>if ((strDest==NULL)||(strSrc==NULL))<br>throw â€œInvalid argument(s)â€;<br>char * strDestCopy=strDest;<br>while ((*strDest++=*strSrc++)!=â€™\0â€™);<br>return strDestCopy;<br>}<br>å…­åä¹ï¼šC#ä¸­å››ç§è®¿é—®ä¿®é¥°ç¬¦æ˜¯å“ªäº›ï¼Ÿå„æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p><p>1.å±æ€§ä¿®é¥°ç¬¦ 2.å­˜å–ä¿®é¥°ç¬¦ 3.ç±»ä¿®é¥°ç¬¦ 4.æˆå‘˜ä¿®é¥°ç¬¦ã€‚</p><p>å±æ€§ä¿®é¥°ç¬¦ï¼š</p><p>Serializableï¼šæŒ‰å€¼å°†å¯¹è±¡å°é€åˆ°è¿œç¨‹æœåŠ¡å™¨ã€‚</p><p>STATreadï¼šæ˜¯å•çº¿ç¨‹å¥—é—´çš„æ„æ€ï¼Œæ˜¯ä¸€ç§çº¿ç¨‹æ¨¡å‹ã€‚</p><p>MATAThreadï¼šæ˜¯å¤šçº¿ç¨‹å¥—é—´çš„æ„æ€ï¼Œä¹Ÿæ˜¯ä¸€ç§çº¿ç¨‹æ¨¡å‹ã€‚</p><p>å­˜å–ä¿®é¥°ç¬¦ï¼š</p><p>publicï¼šå­˜å–ä¸å—é™åˆ¶ã€‚</p><p>privateï¼šåªæœ‰åŒ…å«è¯¥æˆå‘˜çš„ç±»å¯ä»¥å­˜å–ã€‚</p><p>internalï¼šåªæœ‰å½“å‰å·¥ç¨‹å¯ä»¥å­˜å–ã€‚</p><p>protectedï¼šåªæœ‰åŒ…å«è¯¥æˆå‘˜çš„ç±»ä»¥åŠæ´¾ç”Ÿç±»å¯ä»¥å­˜å–ã€‚</p><p>ç±»ä¿®é¥°ç¬¦ï¼š</p><p>abstractï¼šæŠ½è±¡ç±»ã€‚æŒ‡ç¤ºä¸€ä¸ªç±»åªèƒ½ä½œä¸ºå…¶å®ƒç±»çš„åŸºç±»ã€‚</p><p>sealedï¼šå¯†å°ç±»ã€‚æŒ‡ç¤ºä¸€ä¸ªç±»ä¸èƒ½è¢«ç»§æ‰¿ã€‚ç†æ‰€å½“ç„¶ï¼Œå¯†å°ç±»ä¸èƒ½åŒæ—¶åˆæ˜¯æŠ½è±¡ç±»ï¼Œå› ä¸ºæŠ½è±¡æ€»æ˜¯å¸Œæœ›è¢«ç»§æ‰¿çš„ã€‚</p><p>æˆå‘˜ä¿®é¥°ç¬¦ï¼š</p><p>abstractï¼šæŒ‡ç¤ºè¯¥æ–¹æ³•æˆ–å±æ€§æ²¡æœ‰å®ç°ã€‚</p><p>sealedï¼šå¯†å°æ–¹æ³•ã€‚å¯ä»¥é˜²æ­¢åœ¨æ´¾ç”Ÿç±»ä¸­å¯¹è¯¥æ–¹æ³•çš„overrideï¼ˆé‡è½½ï¼‰ã€‚ä¸æ˜¯ç±»çš„æ¯ä¸ªæˆå‘˜æ–¹æ³•éƒ½å¯ä»¥ä½œä¸ºå¯†å°æ–¹æ³•å¯†å°æ–¹æ³•ï¼Œå¿…é¡»å¯¹åŸºç±»çš„è™šæ–¹æ³•è¿›è¡Œé‡è½½ï¼Œæä¾›å…·ä½“çš„å®ç°æ–¹æ³•ã€‚æ‰€ä»¥ï¼Œåœ¨æ–¹æ³•çš„å£°æ˜ä¸­ï¼Œsealedä¿®é¥°ç¬¦æ€»æ˜¯å’Œoverrideä¿®é¥°ç¬¦åŒæ—¶ä½¿ç”¨ã€‚</p><p>delegateï¼šå§”æ‰˜ã€‚ç”¨æ¥å®šä¹‰ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆã€‚C#ä¸­çš„äº‹ä»¶é©±åŠ¨æ˜¯åŸºäºdelegate + eventçš„ã€‚</p><p>constï¼šæŒ‡å®šè¯¥æˆå‘˜çš„å€¼åªè¯»ä¸å…è®¸ä¿®æ”¹ã€‚</p><p>eventï¼šå£°æ˜ä¸€ä¸ªäº‹ä»¶ã€‚</p><p>externï¼šæŒ‡ç¤ºæ–¹æ³•åœ¨å¤–éƒ¨å®ç°ã€‚</p><p>overrideï¼šé‡å†™ã€‚å¯¹ç”±åŸºç±»ç»§æ‰¿æˆå‘˜çš„æ–°å®ç°ã€‚</p><p>readonlyï¼šæŒ‡ç¤ºä¸€ä¸ªåŸŸåªèƒ½åœ¨å£°æ˜æ—¶ä»¥åŠç›¸åŒç±»çš„å†…éƒ¨è¢«èµ‹å€¼ã€‚</p><p>staticï¼šæŒ‡ç¤ºä¸€ä¸ªæˆå‘˜å±äºç±»å‹æœ¬èº«ï¼Œè€Œä¸æ˜¯å±äºç‰¹å®šçš„å¯¹è±¡ã€‚å³åœ¨å®šä¹‰åå¯ä¸ç»å®ä¾‹åŒ–ï¼Œå°±å¯ä½¿ç”¨ã€‚</p><p>virtualï¼šæŒ‡ç¤ºä¸€ä¸ªæ–¹æ³•æˆ–å­˜å–å™¨çš„å®ç°å¯ä»¥åœ¨ç»§æ‰¿ç±»ä¸­è¢«è¦†ç›–ã€‚</p><p>newï¼šåœ¨æ´¾ç”Ÿç±»ä¸­éšè—æŒ‡å®šçš„åŸºç±»æˆå‘˜ï¼Œä»è€Œå®ç°é‡å†™çš„åŠŸèƒ½ã€‚ è‹¥è¦éšè—ç»§æ‰¿ç±»çš„æˆå‘˜ï¼Œè¯·ä½¿ç”¨ç›¸åŒåç§°åœ¨æ´¾ç”Ÿç±»ä¸­å£°æ˜è¯¥æˆå‘˜ï¼Œå¹¶ç”¨ new ä¿®é¥°ç¬¦ä¿®é¥°å®ƒã€‚</p><p>ä¸ƒåï¼šHeapä¸Stackæœ‰ä½•åŒºåˆ«ï¼Ÿ</p><p>1.heapæ˜¯å †ï¼Œstackæ˜¯æ ˆã€‚</p><p>2.stackçš„ç©ºé—´ç”±æ“ä½œç³»ç»Ÿè‡ªåŠ¨åˆ†é…å’Œé‡Šæ”¾ï¼Œheapçš„ç©ºé—´æ˜¯æ‰‹åŠ¨ç”³è¯·å’Œé‡Šæ”¾çš„ï¼Œheapå¸¸ç”¨newå…³é”®å­—æ¥åˆ†é…ã€‚</p><p>3.stackç©ºé—´æœ‰é™ï¼Œheapçš„ç©ºé—´æ˜¯å¾ˆå¤§çš„è‡ªç”±åŒºã€‚</p><p>ä¸ƒåä¸€ï¼šå€¼ç±»å‹å’Œå¼•ç”¨ç±»å‹æœ‰ä½•åŒºåˆ«ï¼Ÿ</p><p>1.å€¼ç±»å‹çš„æ•°æ®å­˜å‚¨åœ¨å†…å­˜çš„æ ˆä¸­ï¼›å¼•ç”¨ç±»å‹çš„æ•°æ®å­˜å‚¨åœ¨å†…å­˜çš„å †ä¸­ï¼Œè€Œå†…å­˜å•å…ƒä¸­åªå­˜æ”¾å †ä¸­å¯¹è±¡çš„åœ°å€ã€‚</p><p>2.å€¼ç±»å‹å­˜å–é€Ÿåº¦å¿«ï¼Œå¼•ç”¨ç±»å‹å­˜å–é€Ÿåº¦æ…¢ã€‚</p><p>3.å€¼ç±»å‹è¡¨ç¤ºå®é™…æ•°æ®ï¼Œå¼•ç”¨ç±»å‹è¡¨ç¤ºæŒ‡å‘å­˜å‚¨åœ¨å†…å­˜å †ä¸­çš„æ•°æ®çš„æŒ‡é’ˆæˆ–å¼•ç”¨</p><p>4.å€¼ç±»å‹ç»§æ‰¿è‡ªSystem.ValueTypeï¼Œå¼•ç”¨ç±»å‹ç»§æ‰¿è‡ªSystem.Object</p><p>5.æ ˆçš„å†…å­˜åˆ†é…æ˜¯è‡ªåŠ¨é‡Šæ”¾ï¼›è€Œå †åœ¨.NETä¸­ä¼šæœ‰GCæ¥é‡Šæ”¾</p><p>6.å€¼ç±»å‹çš„å˜é‡ç›´æ¥å­˜æ”¾å®é™…çš„æ•°æ®ï¼Œè€Œå¼•ç”¨ç±»å‹çš„å˜é‡å­˜æ”¾çš„åˆ™æ˜¯æ•°æ®çš„åœ°å€ï¼Œå³å¯¹è±¡çš„å¼•ç”¨ã€‚</p><p>ä¸ƒåäºŒï¼šè¯·å†™å‡ºæ±‚æ–æ³¢é‚£å¥‘æ•°åˆ—ä»»æ„ä¸€ä½çš„å€¼å¾—ç®—æ³•</p><p>é€’å½’å®ç°ï¼š</p><p>int Fib1(int index)<br>{<br>if(index&lt;1)<br>{<br>return -1;<br>}<br>if(index==1|| index==2)<br>{<br>return 1;<br>}<br>return Fib1(index-1)+Fib1(index-2);<br>}<br>è¿­ä»£å®ç°ï¼š</p><p>int Fib5(int index)<br>{<br>if(index&lt;1)<br>{<br>return -1;<br>}<br>int a1 - 1, a2 = 1, a3 = 1;<br>for(int i = 0; i &lt; index - 2; i++)<br>{<br>a3=a1+a2;<br>a1=a2;<br>a2=a3;<br>}<br>return a3;<br>}<br>å‚çœ‹æ›´å¤šå®ç°æ–¹æ³•</p><p>ä¸ƒåä¸‰ï¼šååŒç¨‹åºçš„æ‰§è¡Œä»£ç æ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä½•ç”¨å¤„ï¼Œæœ‰ä½•ç¼ºç‚¹ï¼Ÿ</p><p>function Start() {<br>// ååŒç¨‹åºWaitAndPrintåœ¨Startå‡½æ•°å†…æ‰§è¡Œ,å¯ä»¥è§†åŒäºå®ƒä¸Startå‡½æ•°åŒæ­¥æ‰§è¡Œ.<br>StartCoroutine(WaitAndPrint(2.0));<br>print (â€œBefore WaitAndPrint Finishes â€ + Time.time );<br>}<br>function WaitAndPrint (waitTime : float) {<br>// æš‚åœæ‰§è¡ŒwaitTimeç§’<br>yield WaitForSeconds (waitTime);<br>print (â€œWaitAndPrint â€œ+ Time.time );<br>}</p><p>ä½œç”¨ï¼šä¸€ä¸ªååŒç¨‹åºåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­,å¯ä»¥åœ¨ä»»æ„ä½ç½®ä½¿ç”¨yieldè¯­å¥ã€‚yieldçš„è¿”å›å€¼æ§åˆ¶ä½•æ—¶æ¢å¤ååŒç¨‹åºå‘ä¸‹æ‰§è¡Œã€‚ååŒç¨‹åºåœ¨å¯¹è±¡è‡ªæœ‰å¸§æ‰§è¡Œè¿‡ç¨‹ä¸­å ªç§°ä¼˜ç§€ã€‚ååŒç¨‹åºåœ¨æ€§èƒ½ä¸Šæ²¡æœ‰æ›´å¤šçš„å¼€é”€ã€‚</p><p>ç¼ºç‚¹ï¼šååŒç¨‹åºå¹¶éçœŸçº¿ç¨‹ï¼Œå¯èƒ½ä¼šå‘ç”Ÿå µå¡ã€‚</p><p>ä¸ƒåå››ï¼šä»€ä¹ˆæ˜¯é‡Œæ°ä»£æ¢å…ƒåˆ™ï¼Ÿ</p><p>é‡Œæ°æ›¿æ¢åŸåˆ™(Liskov Substitution Principle LSP)é¢å‘å¯¹è±¡è®¾è®¡çš„åŸºæœ¬åŸåˆ™ä¹‹ä¸€ã€‚é€šä¿—ç‚¹ï¼šå°±æ˜¯å­ç±»å¯¹è±¡å¯ä»¥èµ‹å€¼ç»™åŸºç±»å¯¹è±¡ï¼ŒåŸºç±»å¯¹è±¡ä¸èƒ½èµ‹å€¼ç»™å­ç±»å¯¹è±¡</p><p>å‚è€ƒ</p><p>ä¸ƒåäº”ï¼šMockå’ŒStubæœ‰ä½•åŒºåˆ«ï¼Ÿ</p><p>Mockä¸Stubçš„åŒºåˆ«ï¼šMock:å…³æ³¨è¡Œä¸ºéªŒè¯ã€‚ç»†ç²’åº¦çš„æµ‹è¯•ï¼Œå³ä»£ç çš„é€»è¾‘ï¼Œå¤šæ•°æƒ…å†µä¸‹ç”¨äºå•å…ƒæµ‹è¯•ã€‚Stubï¼šå…³æ³¨çŠ¶æ€éªŒè¯ã€‚ç²—ç²’åº¦çš„æµ‹è¯•ï¼Œåœ¨æŸä¸ªä¾èµ–ç³»ç»Ÿä¸å­˜åœ¨æˆ–è€…è¿˜æ²¡å®ç°æˆ–è€…éš¾ä»¥æµ‹è¯•çš„æƒ…å†µä¸‹ä½¿ç”¨ï¼Œä¾‹å¦‚è®¿é—®æ–‡ä»¶ç³»ç»Ÿï¼Œæ•°æ®åº“è¿æ¥ï¼Œè¿œç¨‹åè®®ç­‰ã€‚</p><p>ä¸ƒåå…­ï¼šæ¦‚è¿°åºåˆ—åŒ–ï¼š</p><p>åºåˆ—åŒ–ç®€å•ç†è§£æˆæŠŠå¯¹è±¡è½¬æ¢ä¸ºå®¹æ˜“ä¼ è¾“çš„æ ¼å¼çš„è¿‡ç¨‹ã€‚æ¯”å¦‚ï¼Œå¯ä»¥åºåˆ—åŒ–ä¸€ä¸ªå¯¹è±¡ï¼Œç„¶åä½¿ç”¨HTTPé€šè¿‡Internetåœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ä¹‹é—´ä¼ è¾“è¯¥å¯¹è±¡</p><p>ä¸ƒåä¸ƒï¼šå †å’Œæ ˆçš„åŒºåˆ«ï¼Ÿ</p><p>æ ˆé€šå¸¸ä¿å­˜ç€æˆ‘ä»¬ä»£ç æ‰§è¡Œçš„æ­¥éª¤ï¼Œå¦‚åœ¨ä»£ç æ®µ1ä¸­ AddFive()æ–¹æ³•ï¼Œint pValueå˜é‡ï¼Œint resultå˜é‡ç­‰ç­‰ã€‚è€Œå †ä¸Šå­˜æ”¾çš„åˆ™å¤šæ˜¯å¯¹è±¡ï¼Œæ•°æ®ç­‰ã€‚æˆ‘ä»¬å¯ä»¥æŠŠæ ˆæƒ³è±¡æˆä¸€ä¸ªæ¥ç€ä¸€ä¸ªå æ”¾åœ¨ä¸€èµ·çš„ç›’å­ã€‚å½“æˆ‘ä»¬ä½¿ç”¨çš„æ—¶å€™ï¼Œæ¯æ¬¡ä»æœ€é¡¶éƒ¨å–èµ°ä¸€ä¸ªç›’å­ã€‚æ ˆä¹Ÿæ˜¯å¦‚æ­¤ï¼Œå½“ä¸€ä¸ªæ–¹æ³•ï¼ˆæˆ–ç±»å‹ï¼‰è¢«è°ƒç”¨å®Œæˆçš„æ—¶å€™ï¼Œå°±ä»æ ˆé¡¶å–èµ°ï¼Œæ¥ç€ä¸‹ä¸€ä¸ªã€‚å †åˆ™ä¸ç„¶ï¼Œåƒæ˜¯ä¸€ä¸ªä»“åº“ï¼Œå‚¨å­˜ç€æˆ‘ä»¬ä½¿ç”¨çš„å„ç§å¯¹è±¡ç­‰ä¿¡æ¯ï¼Œè·Ÿæ ˆä¸åŒçš„æ˜¯ä»–ä»¬è¢«è°ƒç”¨å®Œæ¯•ä¸ä¼šç«‹å³è¢«æ¸…ç†æ‰ã€‚</p><p>ä¸ƒåå…«ï¼šæ¦‚è¿°c#ä¸­ä»£ç†å’Œäº‹ä»¶ï¼Ÿ</p><p>ä»£ç†å°±æ˜¯ç”¨æ¥å®šä¹‰æŒ‡å‘æ–¹æ³•çš„å¼•ç”¨ã€‚</p><p>Cï¼ƒäº‹ä»¶æœ¬è´¨å°±æ˜¯å¯¹æ¶ˆæ¯çš„å°è£…ï¼Œç”¨ä½œå¯¹è±¡ä¹‹é—´çš„é€šä¿¡ï¼›å‘é€æ–¹å«äº‹ä»¶å‘é€å™¨ï¼Œæ¥æ”¶æ–¹å«äº‹ä»¶æ¥æ”¶å™¨</p><p>ä¸ƒåä¹ï¼šå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨äº¤äº’æ–¹å¼æœ‰å‡ ç§ï¼Ÿ</p><p>socketé€šå¸¸ä¹Ÿç§°ä½œâ€å¥—æ¥å­—â€,å®ç°æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä¹‹é—´çš„ç‰©ç†è¿æ¥ï¼Œå¹¶è¿›è¡Œæ•°æ®ä¼ è¾“ï¼Œä¸»è¦æœ‰UDPå’ŒTCPä¸¤ä¸ªåè®®ã€‚Socketå¤„äºç½‘ç»œåè®®çš„ä¼ è¾“å±‚ã€‚</p><p>httpåè®®ä¼ è¾“çš„ä¸»è¦æœ‰httpåè®® å’ŒåŸºäºhttpåè®®çš„Soapåè®®ï¼ˆweb serviceï¼‰,å¸¸è§çš„æ–¹å¼æ˜¯ http çš„post å’Œget è¯·æ±‚ï¼Œweb æœåŠ¡ã€‚</p><p>å…«åï¼šUnityå’ŒAndroidä¸iOSå¦‚ä½•äº¤äº’ï¼Ÿ</p><p>Unityå¯ä»¥åˆ°å¤„Androidå’ŒiOSçš„å·¥ç¨‹ï¼Œç„¶åé€šè¿‡å®‰å“æˆ–è€…iOSçš„ç±»å»ç»™Unityå‘æ¶ˆæ¯ï¼Œè°ƒç”¨Unityä¸­çš„æ–¹æ³•</p><p>å…«åä¸€ï¼šå¦‚ä½•åœ¨Unity3Dä¸­æŸ¥çœ‹åœºæ™¯çš„é¢è¯•ï¼Œé¡¶ç‚¹æ•°å’ŒDraw Callæ•°ï¼Ÿå¦‚ä½•é™ä½Draw Callæ•°ï¼Ÿ</p><p>åœ¨Gameè§†å›¾å³ä¸Šè§’ç‚¹å‡»Statsã€‚é™ä½Draw Call çš„æŠ€æœ¯æ˜¯Draw Call Batching</p><p>è¿™ä¸ªåœ¨5.0ä»¥ååœ¨window-ã€‹Profilerä¸‹é¢ï¼Œå¿«æ·é”®æ˜¯cmd + 7ï¼ˆctl + 7</p><p>å…«åäºŒï¼šè¯·é—®alpha teståœ¨ä½•æ—¶ä½¿ç”¨ï¼Ÿèƒ½è¾¾åˆ°ä»€ä¹ˆæ•ˆæœï¼Ÿ</p><p>Alpha Test ,ä¸­æ–‡å°±æ˜¯é€æ˜åº¦æµ‹è¯•ã€‚ç®€è€Œè¨€ä¹‹å°±æ˜¯V&amp;F shaderä¸­æœ€åfragmentå‡½æ•°è¾“å‡ºçš„è¯¥ç‚¹é¢œè‰²å€¼ï¼ˆå³ä¸Šä¸€è®²fragçš„è¾“å‡ºhalf4ï¼‰çš„alphaå€¼ä¸å›ºå®šå€¼è¿›è¡Œæ¯”è¾ƒã€‚AlphaTestè¯­å¥é€šå¸¸äºPass{}ä¸­çš„èµ·å§‹ä½ç½®ã€‚Alpha Testäº§ç”Ÿçš„æ•ˆæœä¹Ÿå¾ˆæç«¯ï¼Œè¦ä¹ˆå®Œå…¨é€æ˜ï¼Œå³çœ‹ä¸åˆ°ï¼Œè¦ä¹ˆå®Œå…¨ä¸é€æ˜ã€‚</p><p>å…«åä¸‰ï¼šUNITY3dåœ¨ç§»åŠ¨è®¾å¤‡ä¸Šçš„ä¸€äº›ä¼˜åŒ–èµ„æºçš„æ–¹æ³•</p><p>1.ä½¿ç”¨assetbundleï¼Œå®ç°èµ„æºåˆ†ç¦»å’Œå…±äº«ï¼Œå°†å†…å­˜æ§åˆ¶åˆ°200mä¹‹å†…ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥å®ç°èµ„æºçš„åœ¨çº¿æ›´æ–°</p><p>2.é¡¶ç‚¹æ•°å¯¹æ¸²æŸ“æ— è®ºæ˜¯cpuè¿˜æ˜¯gpuéƒ½æ˜¯å‹åŠ›æœ€å¤§çš„è´¡çŒ®è€…ï¼Œé™ä½é¡¶ç‚¹æ•°åˆ°8ä¸‡ä»¥ä¸‹ï¼Œfpsç¨³å®šåˆ°äº†30å¸§å·¦å³</p><p>3.åªä½¿ç”¨ä¸€ç›åŠ¨æ€å…‰ï¼Œä¸æ˜¯ç”¨é˜´å½±ï¼Œä¸ä½¿ç”¨å…‰ç…§æ¢å¤´</p><p>ç²’å­ç³»ç»Ÿæ˜¯cpuä¸Šçš„å¤§å¤´</p><p>4.å‰ªè£ç²’å­ç³»ç»Ÿ</p><p>5.åˆå¹¶åŒæ—¶å‡ºç°çš„ç²’å­ç³»ç»Ÿ</p><p>6.è‡ªå·±å®ç°è½»é‡çº§çš„ç²’å­ç³»ç»Ÿ</p><p>animatorä¹Ÿæ˜¯ä¸€ä¸ªæ•ˆç‡å¥‡å·®çš„åœ°æ–¹</p><p>7.æŠŠä¸éœ€è¦è·Ÿéª¨éª¼åŠ¨ç”»å’ŒåŠ¨ä½œè¿‡æ¸¡çš„åœ°æ–¹å…¨éƒ¨ä½¿ç”¨animationï¼Œæ§åˆ¶éª¨éª¼æ•°é‡åœ¨30æ ¹ä»¥ä¸‹</p><p>8.animatorå‡ºè§†é‡ä¸æ›´æ–°</p><p>9.åˆ é™¤æ— æ„ä¹‰çš„animator</p><p>10.animatorçš„åˆå§‹åŒ–å¾ˆè€—æ—¶ï¼ˆç²’å­ä¸Šèƒ½ä¸èƒ½å°½é‡ä¸ç”¨animatorï¼‰</p><p>11.é™¤ä¸»è§’å¤–éƒ½ä¸è¦è·Ÿéª¨éª¼è¿åŠ¨apply root motion</p><p>12.ç»å¯¹ç¦æ­¢æ‰é‚£äº›ä¸å¸¦åˆšä½“å¸¦åŒ…å›´ç›’çš„ç‰©ä½“ï¼ˆstatic collider ï¼‰è¿åŠ¨</p><p>NUGIçš„ä»£ç æ•ˆç‡å¾ˆå·®ï¼ŒåŸºæœ¬ä¸Šruntimeçš„æ—¶å€™å¯¹cpuçš„è´¡çŒ®å’Œrenderä¸ç›¸ä¸Šä¸‹</p><p>13æ¯å¸§é€’å½’çš„è®¡ç®—finalalphaæ”¹ä¸ºåªæœ‰åˆå§‹åŒ–å’Œå˜åŠ¨æ—¶è®¡ç®—</p><p>14å»æ‰æ³•çº¿è®¡ç®—</p><p>15ä¸è¦æ¯å¸§è®¡ç®—viewsize å’Œwindowsize</p><p>16filldrawcallæ—¶æ„å»ºé¡¶ç‚¹ç¼“å­˜ä½¿ç”¨array.copy</p><p>17.ä»£ç å‰ªè£ï¼šä½¿ç”¨strip level ï¼Œä½¿ç”¨.net2.0 subset</p><p>18.å°½é‡å‡å°‘smooth group</p><p>19.ç»™ç¾æœ¯å®šä¸€ä¸ªä¸¥æ ¼çš„ç»è¿‡ç§‘å­¦éªŒè¯çš„ç¾æœ¯æ ‡å‡†ï¼Œå¹¶åœ¨U3Dé‡Œé¢é…ä»¥ç›¸åº”çš„æ£€æŸ¥å·¥å…·</p><p>å…«åå››ï¼šå››å…ƒæ•°æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ</p><p>å¯¹æ—‹è½¬è§’åº¦è¿›è¡Œè®¡ç®—æ—¶ç”¨åˆ°å››å…ƒæ•°</p><p>å…«åäº”ï¼šå°†Cameraç»„ä»¶çš„ClearFlagsé€‰é¡¹é€‰æˆDepth onlyæ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿæœ‰ä½•ç”¨å¤„ï¼Ÿ</p><p>å¦‚æœæŠŠæ‘„åƒæœºçš„ClearFlagså‹¾é€‰ä¸ºDeapth Only,é‚£ä¹ˆæ‘„åƒæœºå°±ä¼šåªæ¸²æŸ“çœ‹å¾—è§çš„å¯¹è±¡ï¼ŒæŠŠèƒŒæ™¯ä¼šå®Œå…¨é€æ˜ï¼Œè¿™ç§æƒ…å†µä¸€èˆ¬ç”¨åœ¨ä¸¤ä¸ªæ‘„åƒæœºä»¥ä¸Šçš„åœºæ™¯ä¸­</p><p>å…«åå…­ï¼šåœ¨ç¼–è¾‘åœºæ™¯æ—¶å°†GameObjectè®¾ç½®ä¸ºStaticæœ‰ä½•ä½œç”¨ï¼Ÿ</p><p>è®¾ç½®æ¸¸æˆå¯¹è±¡ä¸ºStaticæ—¶ï¼Œè¿™äº›éƒ¨åˆ†è¢«é™æ€ç‰©ä½“æŒ¡ä½è€Œä¸å¯è§æ—¶ï¼Œå°†ä¼šå‰”é™¤ï¼ˆæˆ–ç¦ç”¨ï¼‰ç½‘æ ¼å¯¹è±¡ã€‚å› æ­¤ï¼Œåœ¨ä½ çš„åœºæ™¯ä¸­çš„æ‰€æœ‰ä¸ä¼šåŠ¨çš„ç‰©ä½“éƒ½åº”è¯¥æ ‡è®°ä¸ºStaticã€‚</p><p>å…«åä¸ƒï¼šæœ‰Aå’ŒBä¸¤ç»„ç‰©ä½“ï¼Œæœ‰ä»€ä¹ˆåŠæ³•èƒ½å¤Ÿä¿è¯Aç»„ç‰©ä½“æ°¸è¿œæ¯”Bç»„ç‰©ä½“å…ˆæ¸²æŸ“ï¼Ÿ</p><p>æŠŠAç»„ç‰©ä½“çš„æ¸²æŸ“å¯¹åˆ—å¤§äºBç‰©ä½“çš„æ¸²æŸ“é˜Ÿåˆ—ï¼Œé€šè¿‡shaderé‡Œé¢çš„æ¸²æŸ“é˜Ÿåˆ—æ¥æ¸²æŸ“</p><p>å…«åå…«ï¼šå°†å›¾ç‰‡çš„TextureTypeé€‰é¡¹åˆ†åˆ«é€‰ä¸ºâ€œâ€œTextureâ€å’Œâ€œSpriteâ€æœ‰ä»€ä¹ˆåŒºåˆ«</p><p>Spriteä½œä¸ºUIç²¾çµä½¿ç”¨ï¼ŒTextureä½œç”¨æ¨¡å‹è´´å›¾ä½¿ç”¨ã€‚Spriteéœ€è¦2çš„æ•´æ¬¡å¹‚ï¼Œæ‰“åŒ…å›¾ç‰‡çœèµ„æº</p><p>å…«åä¹ï¼šé—®ä¸€ä¸ªTerrainï¼Œåˆ†åˆ«è´´3å¼ ï¼Œ4å¼ ï¼Œ5å¼ åœ°è¡¨è´´å›¾ï¼Œæ¸²æŸ“é€Ÿåº¦æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</p><p>æ²¡æœ‰åŒºåˆ«ï¼Œå› ä¸ºä¸ç®¡å‡ å¼ è´´å›¾åªæ¸²æŸ“ä¸€æ¬¡ã€‚</p><p>ä¹åï¼šä»€ä¹ˆæ˜¯DrawCallï¼ŸDrawCallé«˜äº†åˆä»€ä¹ˆå½±å“ï¼Ÿå¦‚ä½•é™ä½DrawCallï¼Ÿ</p><p>Unityä¸­ï¼Œæ¯æ¬¡å¼•æ“å‡†å¤‡æ•°æ®å¹¶é€šçŸ¥GPUçš„è¿‡ç¨‹ç§°ä¸ºä¸€æ¬¡Draw Callã€‚DrawCallè¶Šé«˜å¯¹æ˜¾å¡çš„æ¶ˆè€—å°±è¶Šå¤§ã€‚é™ä½DrawCallçš„æ–¹æ³•ï¼š</p><p>Dynamic Batching</p><p>Static Batching</p><p>é«˜çº§ç‰¹æ€§Shaderé™çº§ä¸ºç»Ÿä¸€çš„ä½çº§ç‰¹æ€§çš„Shaderã€‚</p><p>ä¹åä¸€ï¼šå®æ—¶ç‚¹å…‰æºçš„ä¼˜ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ</p><p>å¯ä»¥æœ‰cookies â€“ å¸¦æœ‰ alphaé€šé“çš„ç«‹æ–¹å›¾(Cubemap )çº¹ç†ã€‚ç‚¹å…‰æºæ˜¯æœ€è€—è´¹èµ„æºçš„ã€‚</p><p>ä¹åäºŒï¼šUnityçš„Shaderä¸­ï¼ŒBlend SrcAlpha OneMinusSrcAlphaè¿™å¥è¯æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ</p><p>ä½œç”¨å°±æ˜¯Alphaæ··åˆã€‚å…¬å¼ï¼šæœ€ç»ˆé¢œè‰² = æºé¢œè‰² x æºé€æ˜å€¼ + ç›®æ ‡é¢œè‰² xï¼ˆ1 - æºé€æ˜å€¼ï¼‰</p><p>ä¹åä¸‰ï¼šç®€è¿°æ°´é¢å€’å½±çš„æ¸²æŸ“åŸç†</p><p>åŸç†å°±æ˜¯å¯¹æ°´é¢çš„è´´å›¾çº¹ç†è¿›è¡Œæ‰°åŠ¨ï¼Œä»¥äº§ç”Ÿæ³¢å…‰ç²ç²çš„æ•ˆæœã€‚ç”¨shaderå¯ä»¥é€šè¿‡GPUåœ¨åƒç´ çº§åˆ«ä½œæ‰°åŠ¨ï¼Œæ•ˆæœç»†è…»ï¼Œéœ€è¦çš„é¡¶ç‚¹å°‘ï¼Œé€Ÿåº¦å¿«</p><p>ä¹åå››ï¼šç®€è¿°NGUIä¸­Gridå’ŒTableçš„ä½œç”¨ï¼Ÿ</p><p>å¯¹Gridå’ŒTableä¸‹çš„å­ç‰©ä½“è¿›è¡Œæ’åºå’Œå®šä½</p><p>ä¹åäº”ï¼šè¯·ç®€è¿°NGUIä¸­Panelå’ŒAnchorçš„ä½œç”¨</p><p>åªè¦æä¾›ä¸€ä¸ªhalf-pixelåç§»é‡ï¼Œå®ƒå¯ä»¥è®©ä¸€ä¸ªæ§ä»¶çš„ä½ç½®åœ¨Windowsç³»ç»Ÿä¸Šç²¾ç¡®çš„æ˜¾ç¤ºå‡ºæ¥ï¼ˆåªæœ‰è¿™ä¸ªAnchorçš„å­æ§ä»¶ä¼šå—åˆ°å½±å“ï¼‰</p><p>å¦‚æœæŒ‚è½½åˆ°ä¸€ä¸ªå¯¹è±¡ä¸Šï¼Œé‚£ä¹ˆä»–å¯ä»¥å°†è¿™ä¸ªå¯¹è±¡ä¾é™„åˆ°å±å¹•çš„è§’è½æˆ–è€…è¾¹ç¼˜</p><p>3.UIPanelç”¨æ¥æ”¶é›†å’Œç®¡ç†å®ƒä¸‹é¢æ‰€æœ‰widgetçš„ç»„ä»¶ã€‚é€šè¿‡widgetçš„geometryåˆ›å»ºå®é™…çš„draw callã€‚æ²¡æœ‰panelæ‰€æœ‰ä¸œè¥¿éƒ½ä¸èƒ½å¤Ÿè¢«æ¸²æŸ“å‡ºæ¥,ä½ å¯ä»¥æŠŠUIPanelå½“åšRenderer</p><p>ä¹åå…­ï¼šèƒ½ç”¨foreachéå†è®¿é—®çš„å¯¹è±¡éœ€è¦å®ç°æ¥å£æˆ–å£°æ˜___æ–¹æ³•çš„ç±»å‹</p><p>IEnumerableï¼›GetEnumerator</p>]]></content>
    
    
    <categories>
      
      <category>æ¸¸æˆå¼€å‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>C#</tag>
      
      <tag>Unity</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>C#å¿«é€Ÿæ’åº</title>
    <link href="/2017/10/22/C-%E5%BF%AB%E6%8E%92/"/>
    <url>/2017/10/22/C-%E5%BF%AB%E6%8E%92/</url>
    
    <content type="html"><![CDATA[<h4 id="ä»£ç ï¼š"><a href="#ä»£ç ï¼š" class="headerlink" title="ä»£ç ï¼š"></a>ä»£ç ï¼š</h4><div class="code-wrapper"><pre><code class="hljs c#">namespace å¿«é€Ÿæ’åº&#123;    class Program    &#123;        static void Main(string[] args)        &#123;                       int[] nums = &#123; 1, 9, 6, 4, 2, 5, 7, 10, 3, 8 &#125;;                      Quicksort(0, nums.Length-1 , nums);            for (int i = 0; i &lt; nums.Length; i++)            &#123;                Console.WriteLine(nums [i]);            &#125;            Console.ReadKey();        &#125;        static void Quicksort(int left,int right, int[] a)        &#123;            int i, j, t, temp;//å®šä¹‰å››ä¸ªå˜é‡            if(left &gt;right)            &#123;                return;            &#125;            i = left; //å·¦            j = right; //å³            temp = a[left]; //æ•°ç»„æœ€å·¦è¾¹çš„å…ƒç´ ï¼Œä¹Ÿæ˜¯åŸºå‡†æ•°            while (i != j)            &#123;                while (a[j] &gt;= temp &amp;&amp; i &lt; j) j--;//ä»å³å¾€å·¦æ‰¾                while (a[i] &lt;= temp &amp;&amp; i &lt; j) i++;//ä»å·¦å¾€å³æ‰¾                if (i &lt; j)//å·¦å³ä¸¤è¾¹æ²¡æœ‰ç¢°å¤´çš„æƒ…å†µä¸‹ï¼Œå·¦å³äº¤æ¢                &#123;                    t = a[i];                    a[i] = a[j];                    a[j] = t;                &#125;            &#125;            a[left] = a[i]; //            a[i] = temp;            Quicksort(left, i - 1, a);            Quicksort(i + 1, right, a);            return;        &#125;    &#125;&#125;</code></pre></div>]]></content>
    
    
    <categories>
      
      <category>ç¼–ç¨‹è¯­è¨€</category>
      
    </categories>
    
    
    <tags>
      
      <tag>C#</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>C#å†’æ³¡æ’åº</title>
    <link href="/2017/10/22/C-%E5%86%92%E6%B3%A1%E6%8E%92%E5%BA%8F/"/>
    <url>/2017/10/22/C-%E5%86%92%E6%B3%A1%E6%8E%92%E5%BA%8F/</url>
    
    <content type="html"><![CDATA[<h3 id="æ§åˆ¶å°è¿è¡Œä»¥ä¸‹ä»£ç "><a href="#æ§åˆ¶å°è¿è¡Œä»¥ä¸‹ä»£ç " class="headerlink" title="æ§åˆ¶å°è¿è¡Œä»¥ä¸‹ä»£ç "></a>æ§åˆ¶å°è¿è¡Œä»¥ä¸‹ä»£ç </h3><div class="code-wrapper"><pre><code class="hljs C#">int[] nums = &#123; 0, 5, 8, 3, 4, 1, 6, 7, 2, 9 &#125;;for (int i = 0; i &lt; nums.Length - 1; i++)&#123;    for (int j = 0; j &lt; nums.Length - 1 - i; j++)    &#123;        if (nums[j] &gt; nums[j + 1])        &#123;            int temp = nums[j];            nums[j] = nums[j + 1];            nums[j + 1] = temp;        &#125;    &#125;&#125;for (int i = 0; i &lt; nums.Length; i++)&#123;    Console.WriteLine(nums[i]);&#125;Console.ReadKey();</code></pre></div>]]></content>
    
    
    <categories>
      
      <category>ç¼–ç¨‹è¯­è¨€</category>
      
    </categories>
    
    
    <tags>
      
      <tag>C#</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Shaderè¯­ä¹‰</title>
    <link href="/2017/10/22/Shader%E8%AF%AD%E4%B9%89/"/>
    <url>/2017/10/22/Shader%E8%AF%AD%E4%B9%89/</url>
    
    <content type="html"><![CDATA[<h3 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h3><div class="code-wrapper"><pre><code class="hljs mipsasm">æ¦‚å¿µï¼šé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯è¯­å¥çš„å«ä¹‰ï¼Œé€šä¿—çš„è¯´ï¼šå°±æ˜¯å‘Šè¯‰<span class="hljs-keyword">Shaderä»å“ªé‡Œå¾—åˆ°è¿™äº›å‚æ•°ï¼Œå¹¶ä¸”åˆæŠŠè¿™äº›å‚æ•°è¾“å‡ºåˆ°å“ªé‡Œã€‚</span><span class="hljs-keyword"></span>å…¶å®è¯­ä¹‰æ˜¯HLSLä¸­çš„è¯­æ³•ï¼Œä½†æ˜¯Unityä¸­çš„<span class="hljs-keyword">ShaderLabå¹¶ä¸æ”¯æŒå…¨éƒ¨è¯­ä¹‰</span><span class="hljs-keyword"></span><span class="hljs-keyword">DirectX10ä¹‹åï¼Œæœ‰äº†ä¸€ç§æ–°çš„è¯­ä¹‰ï¼Œå«åšç³»ç»Ÿæ•°å€¼è¯­ä¹‰ï¼Œè¿™äº›è¯­ä¹‰æ˜¯ä»¥SVå¼€å¤´çš„ã€‚</span><span class="hljs-keyword"></span>è¿™äº›è¯­ä¹‰æœ‰ç‰¹æ®Šçš„å«ä¹‰ï¼Œä¸èƒ½éšä¾¿èµ‹å€¼ï¼Œæ¯”å¦‚SV_POSITIONï¼Œåœ¨ç³»ç»Ÿä¸­è¡¨ç¤ºé½æ¬¡ç©ºé—´ä¸‹çš„åæ ‡ã€‚å†æ¯”å¦‚SV_Targetï¼Œå°±ä»£è¡¨ä»ç‰‡æ®µç€è‰²å™¨ä¸­è¾“å‡ºçš„å³å°†è¦å­˜å‚¨åˆ°æ¸²æŸ“ç›®æ ‡ä¸Šçš„é¢œè‰²å€¼ã€‚æ¯”å¦‚ç´¢å°¼çš„PS4ä¸Šå°±ä¸èƒ½ä½¿ç”¨COLORæ¥ä»£æ›¿SV_Targetæ‰€ä»¥ä¸ºäº†è‰¯å¥½çš„è·¨å¹³å°å‹ï¼Œç‰¹æ®Šçš„åœ°æ–¹è¦ä½¿ç”¨ç‰¹æ®Šè¯­ä¹‰ã€‚ Unityä¸­æ‰€æ”¯æŒçš„è¯­ä¹‰ï¼šä»åº”ç”¨é˜¶æ®µä¼ è¾“å‚æ•°åˆ°é¡¶ç‚¹ç€è‰²å™¨é˜¶æ®µçš„æ—¶å€™æœ‰ä¸€äº›ç‰¹æ®Šçš„è¯­ä¹‰ï¼š<span class="hljs-number">1</span>ï¼šPOSITIONï¼šé€šå¸¸ä»£è¡¨æ¨¡å‹åæ ‡ç³»ä¸‹çš„é¡¶ç‚¹åæ ‡ï¼Œé€šå¸¸æ˜¯float4<span class="hljs-number">2</span>ï¼š<span class="hljs-keyword">NORMAL </span>:  é¡¶ç‚¹æ³•çº¿ï¼Œé€šå¸¸æ˜¯float3ç±»å‹<span class="hljs-number">3</span>ï¼šTANGENT : é¡¶ç‚¹åˆ‡çº¿ï¼Œé€šå¸¸æ˜¯float4ç±»å‹<span class="hljs-number">4</span>ï¼šTEXCOORDn ï¼š ä»ç¬¬<span class="hljs-number">1</span>å¥—åˆ°ç¬¬ä¸ƒå¥—<span class="hljs-number">5</span>ï¼šCOLOR ï¼š é¡¶ç‚¹é¢œè‰²ï¼Œé€šå¸¸æ˜¯fixed4æˆ–è€…float4ç±»å‹ ä»é¡¶ç‚¹ç€è‰²å™¨ä¼ è¾“å‚æ•°åˆ°ç‰‡æ®µç€è‰²å™¨é˜¶æ®µçš„æ—¶å€™ä¸€äº›ç‰¹æ®Šè¯­ä¹‰ï¼šSV_POSITION ï¼šä»£è¡¨é½æ¬¡è£å‰ªåæ ‡ç³»ä¸­çš„åæ ‡ä½ç½®ï¼Œæ˜¯å¿…é¡»è¦æœ‰çš„COLOR0 ï¼šé€šå¸¸ç”¨äºè¾“å‡ºç¬¬ä¸€ç»„é¡¶ç‚¹é¢œè‰²ï¼Œä½†æ˜¯ä¸æ˜¯å¿…é¡»çš„COLOR1 ï¼š é€šå¸¸ç”¨äºè¾“å‡ºç¬¬äºŒç»„é¡¶ç‚¹é¢œè‰²ï¼Œä½†æ˜¯ä¸æ˜¯å¿…é¡»çš„TEXCOORD0 ~ TEXCOORD7 : é€šå¸¸ç”¨äºè¾“å‡ºçº¹ç†åæ ‡ï¼Œä»ç¬¬ä¸€å¥—åˆ°ç¬¬å…«å¥—ã€‚ ç‰‡æ®µç€è‰²å™¨è¾“å‡ºçš„æ—¶å€™Unityæ”¯æŒçš„è¯­ä¹‰ï¼šSV_Target : è¾“å‡ºçš„å€¼ä¼šå­˜å‚¨åˆ°æ¸²æŸ“ç›®æ ‡ä¸­, ç­‰åŒäº <span class="hljs-keyword">Direct9 </span>ä¸­çš„COLOR, ä½†æ˜¯å¤§å®¶å¿…é¡»è¦åœ¨è¿™é‡Œä½¿ç”¨SV_Targetï¼› </code></pre></div><h3 id="Unityå†…ç½®å˜æ¢çŸ©é˜µï¼š"><a href="#Unityå†…ç½®å˜æ¢çŸ©é˜µï¼š" class="headerlink" title="Unityå†…ç½®å˜æ¢çŸ©é˜µï¼š"></a>Unityå†…ç½®å˜æ¢çŸ©é˜µï¼š</h3><table><thead><tr><th>å±æ€§å</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>UNITY_MATRIX_MVP</td><td>æ¨¡å‹ï¼ˆMï¼‰è§‚å¯Ÿï¼ˆVï¼‰æŠ•å½±ï¼ˆPï¼‰çŸ©é˜µï¼Œä»æ¨¡å‹ç©ºé—´åˆ°è£å‰ªç©ºé—´</td></tr><tr><td>UNITY_MATRIX_MV</td><td>æ¨¡å‹ï¼ˆMï¼‰è§‚å¯Ÿï¼ˆVï¼‰çŸ©é˜µï¼Œä»æ¨¡å‹ç©ºé—´åˆ°è§‚å¯Ÿç©ºé—´</td></tr><tr><td>UNITY_MATRIX_V</td><td>è§‚å¯Ÿï¼ˆVï¼‰çŸ©é˜µï¼Œä»ä¸–ç•Œç©ºé—´åˆ°è§‚å¯Ÿç©ºé—´</td></tr><tr><td>UNITY_MATRIX_P</td><td>æŠ•å½±ï¼ˆPï¼‰çŸ©é˜µï¼Œä»è§‚å¯Ÿç©ºé—´åˆ°è£å‰ªç©ºé—´</td></tr><tr><td>UNITY_MATRIX_VP</td><td>è§‚å¯Ÿï¼ˆVï¼‰æŠ•å½±ï¼ˆPï¼‰çŸ©é˜µï¼Œä»ä¸–ç•Œç©ºé—´åˆ°è£å‰ªç©ºé—´</td></tr><tr><td>UNITY_MATRIX_T_MV</td><td>UNITY_MATRIX_MVçš„è½¬ç½®çŸ©é˜µ</td></tr><tr><td>UNITY_MATRIX_IT_MV</td><td>UNITY_MATRIX_MVçš„é€†è½¬ç½®çŸ©é˜µï¼Œç”¨äºå°†æ³•çº¿ä»æ¨¡å‹ç©ºé—´è½¬æ¢åˆ°è§‚å¯Ÿç©ºé—´</td></tr><tr><td>_Object2World</td><td>æ¨¡å‹çŸ©é˜µï¼Œä»æ¨¡å‹ç©ºé—´åˆ°ä¸–ç•Œç©ºé—´</td></tr><tr><td>_World2Object</td><td>_Object2Worldçš„é€†çŸ©é˜µï¼Œä»ä¸–ç•Œç©ºé—´åˆ°æ¨¡å‹ç©ºé—´</td></tr></tbody></table><h3 id="Untiyæ‘„åƒæœºå’Œå±å¹•å‚æ•°ï¼š"><a href="#Untiyæ‘„åƒæœºå’Œå±å¹•å‚æ•°ï¼š" class="headerlink" title="Untiyæ‘„åƒæœºå’Œå±å¹•å‚æ•°ï¼š"></a>Untiyæ‘„åƒæœºå’Œå±å¹•å‚æ•°ï¼š</h3><table><thead><tr><th>å±æ€§å</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>_WorldSpaceCameraPos(float3)</td><td>æ‘„åƒæœºçš„ä¸–ç•Œåæ ‡</td></tr><tr><td>_ProjectionParams(float4)</td><td>æŠ•å½±å‚æ•°: x=Â±1.0ï¼ˆ-1.0è¡¨ç¤ºä½¿ç”¨ç¿»è½¬æŠ•å½±çŸ©é˜µè¿›è¡Œæ¸²æŸ“ï¼‰y=Nearè¿‘è£å‰ªå¹³é¢ä¸æ‘„åƒæœºçš„è·ç¦»z=Farè¿œè£å‰ªå¹³é¢ä¸æ‘„åƒæœºçš„ è·ç¦»w=1.0+1.0/Far</td></tr><tr><td>_ScreenParams(float4)</td><td>å±å¹•å‚æ•°: x=widthæ¸²æŸ“ç›®æ ‡çš„åƒç´ å®½åº¦,y=heightæ¸²æŸ“ç›®æ ‡çš„åƒç´ é«˜åº¦,z=1.0+1.0/width,w=1.0+1.0/height</td></tr><tr><td>_ZBufferParams(float4)</td><td>çº¿æ€§åŒ–Zï¼ˆæ·±åº¦ï¼‰ç¼“å†²å‚æ•°,x=1-Far/Near,y=Far/Near,z=x/Far,w=y/Far</td></tr><tr><td>unity_OrthoParams(float4)</td><td>æ­£äº¤æŠ•å½±æ‘„åƒæœºå‚æ•°,x=width,y=height,zæœªä½¿ç”¨,w=1.0ï¼ˆæ­£äº¤æŠ•å½±æ‘„åƒæœºï¼‰æˆ–0.0ï¼ˆé€è§†æ‘„åƒæœºï¼‰</td></tr><tr><td>unity_CameraProjection(float4x4)</td><td>æ‘„åƒæœºæŠ•å½±çŸ©é˜µ</td></tr><tr><td>unity_CameraInvProjection(float4x4)</td><td>unity_CameraProjectionçš„é€†çŸ©é˜µ</td></tr><tr><td>unity_CameraWorldClipPlanes(float4[6])</td><td>æ‘„åƒæœº6ä¸ªè£å‰ªå¹³é¢åœ¨ä¸–ç•Œç©ºé—´ä¸‹çš„æ–¹ç¨‹å¼ã€‚é¡ºåºï¼šå·¦ã€å³ã€ä¸‹ã€ä¸Šã€è¿‘ã€è¿œ</td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>æ¸¸æˆå¼€å‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Unity</tag>
      
      <tag>Shader</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Shaderå…‰ç…§å…¬å¼</title>
    <link href="/2017/10/22/Shader%E5%85%89%E7%85%A7%E5%85%AC%E5%BC%8F/"/>
    <url>/2017/10/22/Shader%E5%85%89%E7%85%A7%E5%85%AC%E5%BC%8F/</url>
    
    <content type="html"><![CDATA[<h3 id="è®¡ç®—æœºå›¾å½¢å­¦ç¬¬ä¸€å®šå¾‹ï¼šå¦‚æœçœ‹èµ·æ¥æ˜¯å¯¹çš„ï¼Œé‚£ä¹ˆå°±æ˜¯å¯¹çš„ã€‚"><a href="#è®¡ç®—æœºå›¾å½¢å­¦ç¬¬ä¸€å®šå¾‹ï¼šå¦‚æœçœ‹èµ·æ¥æ˜¯å¯¹çš„ï¼Œé‚£ä¹ˆå°±æ˜¯å¯¹çš„ã€‚" class="headerlink" title="è®¡ç®—æœºå›¾å½¢å­¦ç¬¬ä¸€å®šå¾‹ï¼šå¦‚æœçœ‹èµ·æ¥æ˜¯å¯¹çš„ï¼Œé‚£ä¹ˆå°±æ˜¯å¯¹çš„ã€‚"></a>è®¡ç®—æœºå›¾å½¢å­¦ç¬¬ä¸€å®šå¾‹ï¼šå¦‚æœçœ‹èµ·æ¥æ˜¯å¯¹çš„ï¼Œé‚£ä¹ˆå°±æ˜¯å¯¹çš„ã€‚</h3><h4 id="è®¡ç®—æœºå›¾å½¢å­¦ä¸­çš„åŸºæœ¬å…‰ç…§æ¨¡å‹ï¼š"><a href="#è®¡ç®—æœºå›¾å½¢å­¦ä¸­çš„åŸºæœ¬å…‰ç…§æ¨¡å‹ï¼š" class="headerlink" title="è®¡ç®—æœºå›¾å½¢å­¦ä¸­çš„åŸºæœ¬å…‰ç…§æ¨¡å‹ï¼š"></a>è®¡ç®—æœºå›¾å½¢å­¦ä¸­çš„åŸºæœ¬å…‰ç…§æ¨¡å‹ï¼š</h4><p>å…‰ç…§æ¨¡å‹ï¼šç”¨æ•°å­¦çš„æ–¹æ³•æ¨¡æ‹Ÿç°å®ä¸–ç•Œä¸­çš„å…‰ç…§æ•ˆæœã€‚<br>æ¼«åå°„å…‰ç…§(Diffuse)ï¼š<br>å½“æˆ‘ä»¬çš„å¹³è¡Œå…‰ç…§å°„åˆ°ç‰©ä½“è¡¨é¢çš„æ—¶å€™ï¼Œä¼šå‡ºç°æ•£å°„ï¼Œæ•£å°„å‡ºä¸¤ç§æ–¹å‘ï¼š<br>1ï¼šåå°„ï¼šç»è¿‡é¡¶ç‚¹çš„æ³•çº¿ï¼Œåå°„å‡ºå» ï¼š é«˜å…‰åå°„<br>2ï¼šæŠ˜å°„ï¼šè¿›å…¥åˆ°ç‰©ä½“å†…éƒ¨ï¼Œåœ¨ç‰©ä½“å†…éƒ¨ä¹Ÿç»è¿‡å¾ˆå¤šåå°„ï¼Œæœ€åå†å°„å‡ºç‰©ä½“è¡¨é¢ï¼šæ¼«åå°„</p><h4 id="åœ¨æ ‡å‡†å…‰ç…§æ¨¡å‹ä¸‹ï¼šåªå…³å¿ƒç›´æ¥å…‰ç…§ã€‚"><a href="#åœ¨æ ‡å‡†å…‰ç…§æ¨¡å‹ä¸‹ï¼šåªå…³å¿ƒç›´æ¥å…‰ç…§ã€‚" class="headerlink" title="åœ¨æ ‡å‡†å…‰ç…§æ¨¡å‹ä¸‹ï¼šåªå…³å¿ƒç›´æ¥å…‰ç…§ã€‚"></a>åœ¨æ ‡å‡†å…‰ç…§æ¨¡å‹ä¸‹ï¼šåªå…³å¿ƒç›´æ¥å…‰ç…§ã€‚</h4><p>æŠŠå°„å…¥æ‘„åƒæœºçš„å…‰çº¿åˆ†ä¸º4éƒ¨åˆ†ï¼š<br>1ï¼šè‡ªå‘å…‰ï¼Œåœ¨Unityä¸­å¦‚æœä¸å¼€å¯å…¨å±€å…‰ç…§ï¼Œè‡ªå‘å…‰çš„ç‰©ä½“å°±ä¸ä¼šç…§äº®å‘¨å›´ç¯å¢ƒ<br>2ï¼šé«˜å…‰åå°„ï¼šé•œé¢åå°„<br>3ï¼šæ¼«åå°„ï¼šåœ¨ç‰©ä½“è¡¨é¢æ¯ä¸€ä¸ªæ–¹å‘åå°„å‡ºå¤šå°‘è¾å°„é‡<br>4ï¼šç¯å¢ƒå…‰ï¼šç”¨äºæè¿°å…¶ä»–æ‰€æœ‰é—´æ¥å…‰ç…§ã€‚</p><h5 id="æ¼«åå°„å…‰ç…§æ¨¡å‹çš„å…¬å¼ï¼š-å…°ä¼¯ç‰¹å…‰ç…§"><a href="#æ¼«åå°„å…‰ç…§æ¨¡å‹çš„å…¬å¼ï¼š-å…°ä¼¯ç‰¹å…‰ç…§" class="headerlink" title="æ¼«åå°„å…‰ç…§æ¨¡å‹çš„å…¬å¼ï¼š(å…°ä¼¯ç‰¹å…‰ç…§)"></a>æ¼«åå°„å…‰ç…§æ¨¡å‹çš„å…¬å¼ï¼š(å…°ä¼¯ç‰¹å…‰ç…§)</h5><div class="code-wrapper"><pre><code class="hljs lisp">c(<span class="hljs-name">diffuse</span>) = c(<span class="hljs-name">light</span>) * m(<span class="hljs-name">diffuse</span>) * max(<span class="hljs-number">0</span>, dot(<span class="hljs-name">N</span>,I))<span class="hljs-comment">;</span></code></pre></div><h5 id="åŠå…°ä¼¯ç‰¹å…‰ç…§ï¼š"><a href="#åŠå…°ä¼¯ç‰¹å…‰ç…§ï¼š" class="headerlink" title="åŠå…°ä¼¯ç‰¹å…‰ç…§ï¼š"></a>åŠå…°ä¼¯ç‰¹å…‰ç…§ï¼š</h5><div class="code-wrapper"><pre><code class="hljs apache"><span class="hljs-attribute">c</span>(diffuse) = c(light) * m(diffuse) * (dot(N,I) * <span class="hljs-number">0</span>.<span class="hljs-number">5</span> + <span class="hljs-number">0</span>.<span class="hljs-number">5</span>);</code></pre></div><p>åŠå…°ä¼¯ç‰¹å…‰ç…§æœ‰æ•ˆçš„è§£å†³äº†èƒŒå‘å…‰æºçš„æ—¶å€™çº¯è‰²çš„æ•ˆæœã€‚</p><h5 id="é«˜å…‰åå°„ï¼š"><a href="#é«˜å…‰åå°„ï¼š" class="headerlink" title="é«˜å…‰åå°„ï¼š"></a>é«˜å…‰åå°„ï¼š</h5><div class="code-wrapper"><pre><code class="hljs erlang"><span class="hljs-function"><span class="hljs-title">c</span><span class="hljs-params">(specular)</span> = <span class="hljs-title">c</span><span class="hljs-params">(light)</span> * <span class="hljs-title">m</span><span class="hljs-params">(specular)</span> * <span class="hljs-title">max</span><span class="hljs-params">(<span class="hljs-number">0</span>, dot(v, r))</span> ^ <span class="hljs-title">m</span><span class="hljs-params">(gloss)</span></span></code></pre></div>]]></content>
    
    
    <categories>
      
      <category>æ¸¸æˆå¼€å‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Unity</tag>
      
      <tag>Shader</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>UnityUIåŠ è½½è¿›åº¦æ¡</title>
    <link href="/2017/10/22/UnityUI%E5%8A%A0%E8%BD%BD%E8%BF%9B%E5%BA%A6%E6%9D%A1/"/>
    <url>/2017/10/22/UnityUI%E5%8A%A0%E8%BD%BD%E8%BF%9B%E5%BA%A6%E6%9D%A1/</url>
    
    <content type="html"><![CDATA[<h4 id="åˆå­¦è€…çš„å†™æ³•ï¼š"><a href="#åˆå­¦è€…çš„å†™æ³•ï¼š" class="headerlink" title="åˆå­¦è€…çš„å†™æ³•ï¼š"></a>åˆå­¦è€…çš„å†™æ³•ï¼š</h4><div class="code-wrapper"><pre><code class="hljs arduino">System.Collections;<span class="hljs-keyword">using</span> System.Collections.Generic;<span class="hljs-keyword">using</span> UnityEngine;<span class="hljs-keyword">using</span> UnityEngine.SceneManagement;<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">NewBehaviourScript</span> :</span> MonoBehaviour &#123;    <span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> UI_Wight;    <span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> UI_Height;    <span class="hljs-keyword">float</span> process;    <span class="hljs-keyword">float</span> _process;    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span> <span class="hljs-params">()</span></span><span class="hljs-function">    </span>&#123;                  &#125;     <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span> <span class="hljs-params">()</span></span><span class="hljs-function">     </span>&#123;                   &#125;    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnGUI</span><span class="hljs-params">()</span></span><span class="hljs-function">    </span>&#123;        GUI.color = Color.red;        <span class="hljs-keyword">if</span>(GUI.<span class="hljs-built_in">Button</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Rect</span>(Screen.width / <span class="hljs-number">2</span> - UI_Wight / <span class="hljs-number">2</span>, Screen.height / <span class="hljs-number">2</span> - UI_Height / <span class="hljs-number">2</span>, UI_Wight, UI_Height),<span class="hljs-string">&quot;å¼€å§‹æ¸¸æˆ&quot;</span>))        &#123;            <span class="hljs-built_in">StartCoroutine</span>(<span class="hljs-string">&quot;LoadSceneFromBtn&quot;</span>);        &#125;        GUILayout.<span class="hljs-built_in">Label</span>(<span class="hljs-string">&quot;åœºæ™¯åŠ è½½è¿›åº¦&quot;</span> + _process *<span class="hljs-number">100</span> +<span class="hljs-string">&quot;%&quot;</span>);    &#125;    <span class="hljs-function">IEnumerator <span class="hljs-title">LoadSceneFromBtn</span><span class="hljs-params">()</span></span><span class="hljs-function">    </span>&#123;         AsyncOperation ao= SceneManager.<span class="hljs-built_in">LoadSceneAsync</span>(<span class="hljs-number">1</span>);        ao.allowSceneActivation = <span class="hljs-literal">false</span>;        <span class="hljs-keyword">while</span> (_process&lt;<span class="hljs-number">1.0f</span>)        &#123;            process =ao.progress;            <span class="hljs-keyword">if</span> (_process &gt;= <span class="hljs-number">0.9f</span>)            &#123;               _process= Mathf.<span class="hljs-built_in">MoveTowards</span>(_process, <span class="hljs-number">1.0f</span>, <span class="hljs-number">0.01f</span>);            &#125;            <span class="hljs-keyword">else</span>            &#123;               _process= Mathf.<span class="hljs-built_in">MoveTowards</span>(_process, process, <span class="hljs-number">0.01f</span>);            &#125;            yield <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;        &#125;        ao.allowSceneActivation = <span class="hljs-literal">true</span>;    &#125;&#125;</code></pre></div>]]></content>
    
    
    <categories>
      
      <category>æ¸¸æˆå¼€å‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>C#</tag>
      
      <tag>Unity</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Shaderæ¸²æŸ“ç®¡çº¿æµç¨‹</title>
    <link href="/2017/10/22/shader%E6%B8%B2%E6%9F%93%E7%AE%A1%E7%BA%BF/"/>
    <url>/2017/10/22/shader%E6%B8%B2%E6%9F%93%E7%AE%A1%E7%BA%BF/</url>
    
    <content type="html"><![CDATA[<h3 id="æ¸²æŸ“ç®¡çº¿æµç¨‹ï¼š"><a href="#æ¸²æŸ“ç®¡çº¿æµç¨‹ï¼š" class="headerlink" title="æ¸²æŸ“ç®¡çº¿æµç¨‹ï¼š"></a>æ¸²æŸ“ç®¡çº¿æµç¨‹ï¼š</h3><ol><li>åº”ç”¨ç¨‹åºé˜¶æ®µï¼šä¸»è¦æ˜¯è®¡ç®—æœºCPUå’Œå†…å­˜é€šä¿¡ï¼Œå°†æ¨¡å‹èº«ä¸Šçš„é¡¶ç‚¹ä¿¡æ¯ï¼ŒåŒ…æ‹¬é¡¶ç‚¹åæ ‡ã€çº¹ç†åæ ‡ã€æ³•çº¿ç­‰ï¼Œç»„è£…æˆä¸€ä¸ªå›¾å…ƒï¼Œå°†å›¾å…ƒä¿¡æ¯å‘é€ç»™GPU</li><li>å‡ ä½•é˜¶æ®µï¼šç”¨æ¥å¤„ç†å‡ ä½•ä¸Šçš„äº‹æƒ…ï¼Œè¿™äº›æ“ä½œé€šå¸¸åœ¨GPUä¸Šæ‰§è¡Œï¼Œè¿™ä¸€é˜¶æ®µæœ€é‡è¦çš„ä»»åŠ¡å°±æ˜¯å°†å›¾å…ƒä¿¡æ¯ä¸­çš„é¡¶ç‚¹åæ ‡å˜æ¢åˆ°å±å¹•åæ ‡ç³»ä¸­ï¼Œäº¤ç»™å…‰æ …åŒ–é˜¶æ®µå¤„ç†ã€‚</li><li>å…‰æ …åŒ–é˜¶æ®µï¼šå¯¹ä¸Šä¸€é˜¶æ®µä¼ å…¥çš„å‚æ•°è¿›è¡Œé¡¶ç‚¹å¤„ç†ï¼Œå°†é¡¶ç‚¹æ•°æ®è¿›è¡Œæ’å€¼è¿ç®—ï¼Œç„¶åå†è¿›è¡Œé€åƒç´ æ“ä½œï¼Œæœ€åå°†æ¯ä¸€ä¸ªåƒç´ ç‚¹çš„é¢œè‰²è®¡ç®—å‡ºæ¥ï¼Œå†™å…¥åˆ°å¸§ç¼“å­˜ä¸­ã€‚</li></ol><h3 id="æˆ‘ä»¬å°†å‡ ä½•é˜¶æ®µå’Œå…‰æ …åŒ–é˜¶æ®µè¿›è¡Œç»†åˆ†ï¼š"><a href="#æˆ‘ä»¬å°†å‡ ä½•é˜¶æ®µå’Œå…‰æ …åŒ–é˜¶æ®µè¿›è¡Œç»†åˆ†ï¼š" class="headerlink" title="æˆ‘ä»¬å°†å‡ ä½•é˜¶æ®µå’Œå…‰æ …åŒ–é˜¶æ®µè¿›è¡Œç»†åˆ†ï¼š"></a>æˆ‘ä»¬å°†å‡ ä½•é˜¶æ®µå’Œå…‰æ …åŒ–é˜¶æ®µè¿›è¡Œç»†åˆ†ï¼š</h3><ol><li>é¡¶ç‚¹ç€è‰²å™¨ï¼šå°†æ¨¡å‹çš„æ¨¡å‹åæ ‡è½¬æ¢åˆ°é½æ¬¡è£å‰ªåæ ‡ç³»ä¸­ï¼Œæ–¹ä¾¿äºæŠ•å°„åˆ°å±å¹•ä¸Šã€‚</li><li>è£å‰ªï¼šæ˜¯å°†ä¸åœ¨æ‘„åƒæœºèŒƒå›´å†…çš„æ¸¸æˆå¯¹è±¡å‰ªæ‰</li><li>å±å¹•æ˜ å°„ï¼šå°†è£å‰ªå¥½äº†çš„é¡¶ç‚¹æŠ•å°„åˆ°2ç»´å±å¹•åæ ‡ç³»ä¸‹</li><li>ä¸‰è§’å½¢è®¾ç½®ï¼šå°†æ¯ä¸€ä¸ªé¡¶ç‚¹éƒ½é€šè¿‡ä¸‰è§’å½¢ç´¢å¼•ç»„åˆèµ·æ¥ï¼Œäº§ç”Ÿè”ç³»ï¼Œäº§ç”Ÿé¢</li><li>ä¸‰è§’å½¢éå†ï¼šè¿™ä¸€æ­¥æ˜¯é€šè¿‡æ£€æŸ¥æ¯ä¸€ä¸ªåƒç´ æ˜¯å¦è¢«ä¸€ä¸ªä¸‰è§’å½¢å¤§é¢ç§¯è¦†ç›–</li><li>ç‰‡å…ƒ/ç‰‡æ®µç€è‰²å™¨ï¼šå¯ä»¥ä»é¡¶ç‚¹ç€è‰²å™¨ä¸­å–åˆ°å¯¹åº”çš„æ’å€¼ï¼Œç‰‡å…ƒç€è‰²å™¨è¾“å‡ºçš„æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªé¢œè‰²å€¼ï¼Œåœ¨è¿™ä¸€é˜¶æ®µæˆ‘ä»¬å¯ä»¥è¿›è¡Œçº¹ç†é‡‡æ ·</li><li>é€åƒç´ æ“ä½œï¼šé€šè¿‡æ¨¡æ¿æµ‹è¯•å’Œæ·±åº¦æµ‹è¯•ï¼Œæ¥ç¡®å®šæ¯ä¸€ä¸ªåƒç´ æ˜¯å¦å¯ä»¥è¢«æ˜¾ç¤ºã€‚å¦‚æœå½“å‰é¢œè‰²é€šè¿‡äº†æ‰€æœ‰çš„æµ‹è¯•ï¼Œå°±å¯ä»¥å­˜å‚¨åˆ°é¢œè‰²ç¼“å†²åŒºä¸­ï¼Œä¸‹ä¸€å¸§å±å¹•åˆ·æ–°çš„æ—¶å€™ï¼Œå°±æŠŠé¢œè‰²ç¼“å†²åŒºä¸­çš„é¢œè‰²å–å‡ºæ¥æ‰“åˆ°å±å¹•çš„åƒç´ ç‚¹ä¸Šã€‚</li></ol><p>ShaderLabä¸­æˆ‘ä»¬å¸¸å¸¸éœ€è¦ä½¿ç”¨ä¸€äº›å‚æ•°ï¼Œä½†æ˜¯è¿™äº›å‚æ•°æ˜¯åº”ç”¨ç¨‹åºé˜¶æ®µä¼ ç»™æˆ‘ä»¬çš„ï¼Œæˆ‘ä»¬éœ€è¦çš„å‚æ•°ç±»å‹æ€ä¹ˆè®©åº”ç”¨ç¨‹åºé˜¶æ®µçŸ¥é“ï¼Ÿéœ€è¦é’ˆå¯¹æˆ‘ä»¬çš„å½¢å‚å£°æ˜è¯´æ˜è¯­ä¹‰</p>]]></content>
    
    
    <categories>
      
      <category>æ¸¸æˆå¼€å‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Unity</tag>
      
      <tag>Shader</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>C#ååŒçŸ¥è¯†ç‚¹</title>
    <link href="/2017/10/22/C-%E5%8D%8F%E5%90%8C%E7%9F%A5%E8%AF%86%E7%82%B9/"/>
    <url>/2017/10/22/C-%E5%8D%8F%E5%90%8C%E7%9F%A5%E8%AF%86%E7%82%B9/</url>
    
    <content type="html"><![CDATA[<h4 id="å¯åŠ¨ååŒæ–¹æ³•"><a href="#å¯åŠ¨ååŒæ–¹æ³•" class="headerlink" title="å¯åŠ¨ååŒæ–¹æ³•"></a>å¯åŠ¨ååŒæ–¹æ³•</h4><div class="code-wrapper"><pre><code class="hljs awk">æ–¹æ³•<span class="hljs-number">1</span>ï¼šStartCouroutine(â€œFunâ€);   <span class="hljs-regexp">//</span> åªèƒ½è°ƒç”¨å¯¹è±¡è‡ªèº«çš„ååŒæ–¹æ³•æ–¹æ³•<span class="hljs-number">2</span>ï¼šStartCouroutine(Fun());   <span class="hljs-regexp">//</span> å¯ä»¥è°ƒç”¨å…¶ä»–å¯¹è±¡çš„ååŒæ–¹æ³•</code></pre></div><h4 id="å®šä¹‰ååŒæ–¹æ³•-ååŒæ–¹æ³•ä¸­å¿…é¡»è¦æœ‰yieldè¯­å¥"><a href="#å®šä¹‰ååŒæ–¹æ³•-ååŒæ–¹æ³•ä¸­å¿…é¡»è¦æœ‰yieldè¯­å¥" class="headerlink" title="å®šä¹‰ååŒæ–¹æ³•: ååŒæ–¹æ³•ä¸­å¿…é¡»è¦æœ‰yieldè¯­å¥"></a>å®šä¹‰ååŒæ–¹æ³•: ååŒæ–¹æ³•ä¸­å¿…é¡»è¦æœ‰yieldè¯­å¥</h4><div class="code-wrapper"><pre><code class="hljs csharp"><span class="hljs-function">IEnumerator <span class="hljs-title">Fun</span>(<span class="hljs-params"></span>)</span>   &#123;       <span class="hljs-function"><span class="hljs-keyword">yield</span> <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title">WaitForFixedUpdate</span>(<span class="hljs-params"></span>)</span>;    <span class="hljs-comment">// å½“å‰å¸§è¿”å›ï¼Œåœ¨FixedUpdateæ‰§è¡Œä¹‹åè¿”å›ã€‚</span>       <span class="hljs-function"><span class="hljs-keyword">yield</span> <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title">WaitForSecond</span>(<span class="hljs-params"><span class="hljs-number">3</span></span>)</span>;  <span class="hljs-comment">// ç­‰å¾…3ç§’ï¼Œç­‰å¾…çš„æ¯ä¸€å¸§åœ¨å½“å‰å¸§Updateæ‰§è¡Œä¹‹åè¿”å›ã€‚</span>       <span class="hljs-keyword">yield</span> <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;  <span class="hljs-comment">// ç­‰å¾…ä¸€å¸§ï¼ˆå½“å‰å¸§Updateæ‰§è¡Œä¹‹åè¿”å›ï¼Œä¸‹ä¸€å¸§ç»§ç»­æ‰§è¡Œåé¢çš„ä»£ç ï¼‰ã€‚</span>       <span class="hljs-keyword">if</span>(æ¡ä»¶)           <span class="hljs-keyword">yield</span> <span class="hljs-keyword">break</span>;    <span class="hljs-comment">// ç»ˆæ­¢ååŒæ–¹æ³•ã€‚</span>       <span class="hljs-function"><span class="hljs-keyword">yield</span> <span class="hljs-keyword">return</span> <span class="hljs-title">StartCoroutine</span>(<span class="hljs-params">OtherFun(</span>))</span>;    <span class="hljs-comment">// åœ¨OtherFunå…¨éƒ¨æ‰§è¡Œå®Œä»¥åï¼Œç»§ç»­æ‰§è¡Œåé¢çš„ä»£ç ã€‚</span>       <span class="hljs-comment">//StartCoroutine(OtherFun());</span>       <span class="hljs-comment">// yieldè¯­å¥ä¹‹é—´ï¼Œéƒ½æ˜¯å½“å‰å¸§æ‰§è¡Œçš„ä»£ç ã€‚</span>       <span class="hljs-function"><span class="hljs-keyword">yield</span> <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title">WaitForEndOfFrame</span>(<span class="hljs-params"></span>)</span>;    <span class="hljs-comment">// åœ¨æ‰§è¡Œæ¸²æŸ“ä¹‹åè¿”å›ã€‚</span>   &#125;   <span class="hljs-function">IEnumerator <span class="hljs-title">OtherFun</span>(<span class="hljs-params"></span>)</span>   &#123;       <span class="hljs-keyword">for</span>(<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)       &#123;           Instance&lt;GameObject&gt;(GameObject.CreatePrimitive(PrimitiveType.Cube));           <span class="hljs-function"><span class="hljs-keyword">yield</span> <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title">WaitForSecond</span>(<span class="hljs-params"><span class="hljs-number">0.5f</span></span>)</span>;       &#125;   &#125;</code></pre></div><h4 id="ç»ˆæ­¢ååŒ-ç»ˆæ­¢å¯¹è±¡è‡ªèº«è°ƒç”¨çš„ååŒ"><a href="#ç»ˆæ­¢ååŒ-ç»ˆæ­¢å¯¹è±¡è‡ªèº«è°ƒç”¨çš„ååŒ" class="headerlink" title="ç»ˆæ­¢ååŒ (ç»ˆæ­¢å¯¹è±¡è‡ªèº«è°ƒç”¨çš„ååŒ)"></a>ç»ˆæ­¢ååŒ (ç»ˆæ­¢å¯¹è±¡è‡ªèº«è°ƒç”¨çš„ååŒ)</h4><div class="code-wrapper"><pre><code class="hljs awk">StopCoroutine(â€œFunâ€);    <span class="hljs-regexp">//</span> åªèƒ½ç»ˆæ­¢ä»¥å­—ç¬¦ä¸²å¼€å¯çš„ååŒã€‚StopAllCoroutine();     <span class="hljs-regexp">//</span> ç»ˆæ­¢ä»¥ä¸Šä¸¤ç§å½¢å¼å¼€å¯çš„ååŒã€‚</code></pre></div><h4 id="æ›´å¤šæ¦‚å¿µ"><a href="#æ›´å¤šæ¦‚å¿µ" class="headerlink" title="æ›´å¤šæ¦‚å¿µ"></a>æ›´å¤šæ¦‚å¿µ</h4><ol><li>ååŒå¿…é¡»åœ¨ MonoBehaviour ç»§æ‰¿ç±»ä¸­å¯åŠ¨ã€‚</li><li>ååŒå®šä¹‰éšä¾¿ï¼Œåªè¦åœ¨ Unity å¼•æ“å†…çš„ä»€ä¹ˆç±»ä¸­éƒ½å¯ä»¥å®šä¹‰ã€‚</li><li>ååŒä¸€æ—¦å¯åŠ¨å®ƒä¼šç«‹å³æ‰§è¡ŒååŒå‡½æ•°çš„ç¬¬ä¸€æ®µï¼Œæ‰€ä»¥ä½ å°½é‡ä¸è¦æŠŠè·å¾ˆå¤§çš„ä»£ç å†™åœ¨ç¬¬ä¸€æ®µé‡Œã€‚</li><li>ååŒé™¤äº†ç¬¬ä¸€æ¬¡å¯åŠ¨ä¼šç«‹å³æ‰§è¡Œå¤–ï¼Œå…¶ä»–æ—¶å€™éƒ½æ˜¯åœ¨ Update å‡½ä¹‹åã€‚</li><li>ååŒæ˜¯å‡çš„å¤šçº¿ç¨‹ï¼Œæ‰€ä»¥å®ƒå¯ä»¥æ— æ¡ä»¶è®¿é—®æˆå‘˜çº§å˜é‡å’Œå‡½æ•°ï¼Œæ— çº¿ç¨‹äº’æ–¥ã€‚</li><li>ååŒå‡½æ•°ä¸­å®šä¹‰å˜é‡æ˜¯ååŒå‡½æ•°å…¨å±€çš„ã€‚</li><li>ååŒå‡½æ•°ä¸­çš„ä»£ç éƒ½æ˜¯è¿‡ç¨‹åŒ–çš„ï¼Œæ²¡æœ‰é¢å‘å¯¹è±¡çš„æ¦‚å¿µã€‚</li><li>ä¸è¦åœ¨å¾ªç¯ä¸­è°ƒç”¨ååŒæ–¹æ³•ã€‚</li><li>äº‹ä»¶å‡½æ•°ä¹Ÿå¯ä»¥æ”¹å†™æˆååŒæ–¹æ³•ã€‚</li><li>å“ªä¸ªå¯¹è±¡å¼€å¯çš„ååŒï¼Œå°±åªèƒ½ç”±å“ªä¸ªå¯¹è±¡ç»ˆæ­¢ã€‚</li><li>ç»„ä»¶å¯¹è±¡å¤±æ´»ï¼Œåˆ™è¯¥å¯¹è±¡å¼€å¯çš„ååŒä¹Ÿä¼šç»ˆæ­¢ã€‚</li><li>æ¸¸æˆç‰©ä½“å¤±æ´»ï¼Œä¹Ÿä¼šä½¿ç»„ä»¶å¯¹è±¡å¤±æ´»ï¼Œæ‰€ä»¥ä¹Ÿä¼šç»ˆæ­¢ååŒç¨‹åº</li></ol>]]></content>
    
    
    <categories>
      
      <category>ç¼–ç¨‹è¯­è¨€</category>
      
    </categories>
    
    
    <tags>
      
      <tag>C#</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
